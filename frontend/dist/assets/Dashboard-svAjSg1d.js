import{j as e,b as W,c as w}from"./query-vendor-CvBDT0OD.js";import{i as B,f as S,a as R,J as K,b as v,c as U,M as D,d as T,e as q,g as j,h as z,s as V,m as d,j as k}from"./index-BlWFTSEC.js";import{a as h}from"./react-vendor-BuVNz1jA.js";import{p as $,c as G,q as I,r as J,A as Q,P as X,s as Y,m as Z,t as ee,T as se,z as te}from"./ui-vendor-DqTYRHc5.js";import{R as M,B as ae,X as _,Y as P,T as O,a as re,C as ie,A as le,b as N}from"./viz-vendor-Yg1nQkEx.js";import{u as ne}from"./useWebSocket-M8ejPgyM.js";import{P as oe}from"./PageErrorBoundary-BlW1gdj2.js";function de(...t){const s=!Array.isArray(t[0]),r=s?0:-1,i=t[0+r],a=t[1+r],l=t[2+r],n=t[3+r],c=B(a,l,n);return s?c(i):c}function ce(t,s,r){const i=t.get();let a=null,l=i,n;const c=typeof i=="string"?i.replace(/[\d.-]/g,""):void 0,u=()=>{a&&(a.stop(),a=null)},g=()=>{u(),a=new K({keyframes:[A(t.get()),A(l)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...r,onUpdate:n})};if(t.attach((m,b)=>{l=m,n=f=>b(C(f,c)),S.postRender(g)},u),R(s)){const m=s.on("change",f=>t.set(C(f,c))),b=t.on("destroy",m);return()=>{m(),b()}}return u}function C(t,s){return s?t+s:t}function A(t){return typeof t=="number"?t:parseFloat(t)}function F(t){const s=v(()=>U(t)),{isStatic:r}=h.useContext(D);if(r){const[,i]=h.useState(t);h.useEffect(()=>s.on("change",i),[])}return s}function E(t,s){const r=F(s()),i=()=>r.set(s());return i(),T(()=>{const a=()=>S.preRender(i,!1,!0),l=t.map(n=>n.on("change",a));return()=>{l.forEach(n=>n()),q(i)}}),r}function ue(t){j.current=[],t();const s=E(j.current,t);return j.current=void 0,s}function H(t,s,r,i){if(typeof t=="function")return ue(t);const a=typeof s=="function"?s:de(s,r,i);return Array.isArray(t)?L(t,a):L([t],([l])=>a(l))}function L(t,s){const r=v(()=>[]);return E(t,()=>{r.length=0;const i=t.length;for(let a=0;a<i;a++)r[a]=t[a].get();return s(r)})}function xe(t,s={}){const{isStatic:r}=h.useContext(D),i=()=>R(t)?t.get():t;if(r)return H(i);const a=F(i());return h.useInsertionEffect(()=>ce(a,t,s),[a,JSON.stringify(s)]),a}function he(t){t.values.forEach(s=>s.stop())}function y(t,s){[...s].reverse().forEach(i=>{const a=t.getVariant(i);a&&V(t,a),t.variantChildren&&t.variantChildren.forEach(l=>{y(l,s)})})}function me(t,s){if(Array.isArray(s))return y(t,s);if(typeof s=="string")return y(t,[s]);V(t,s)}function pe(){const t=new Set,s={subscribe(r){return t.add(r),()=>void t.delete(r)},start(r,i){const a=[];return t.forEach(l=>{a.push(z(l,r,{transitionOverride:i}))}),Promise.all(a)},set(r){return t.forEach(i=>{me(i,r)})},stop(){t.forEach(r=>{he(r)})},mount(){return()=>{s.stop()}}};return s}function ge(){const t=v(pe);return T(t.mount,[]),t}const be=ge;function p({title:t,value:s,icon:r,trend:i,index:a=0}){const l=typeof s=="number"?s:parseFloat(s.toString().replace(/[^0-9.-]+/g,""))||0,n=xe(0,{stiffness:50,damping:20}),c=H(n,g=>typeof s=="string"&&!s.match(/^\d/)?s:Math.round(g).toLocaleString()+(typeof s=="string"&&s.includes("%")?"%":"")),u=be();return h.useEffect(()=>{n.set(l),l!==0&&u.start({scale:[1,1.05,1],boxShadow:["0 25px 50px -12px rgba(139, 92, 246, 0.1)","0 25px 50px -12px rgba(139, 92, 246, 0.3)","0 25px 50px -12px rgba(139, 92, 246, 0.1)"],transition:{duration:.6,ease:"easeInOut"}})},[l,n,u]),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:u,transition:{duration:.4,delay:a*.1},whileHover:{scale:1.02},className:"relative overflow-hidden rounded-2xl border border-white/20 bg-white/10 p-6 shadow-2xl shadow-purple-500/10 backdrop-blur-xl transition-all duration-300 hover:border-purple-400/50 hover:shadow-purple-500/20 dark:border-slate-700/30 dark:bg-slate-900/20 dark:shadow-cyan-500/10",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("dt",{className:"truncate text-sm font-medium text-slate-500 dark:text-slate-400",children:t}),e.jsxs("dd",{className:"mt-2 flex items-baseline",children:[e.jsx(d.div,{className:"text-3xl font-bold text-slate-900 dark:text-white",children:typeof s=="number"||typeof s=="string"&&s.match(/^\d/)?e.jsx(d.span,{children:c}):s}),i&&e.jsxs("div",{className:`ml-2 inline-flex items-baseline rounded-full px-2.5 py-0.5 text-sm font-medium ${i.isPositive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:[i.isPositive?"â†‘":"â†“"," ",i.value,"%"]})]})]}),e.jsx("div",{className:"rounded-lg border border-purple-400/30 bg-purple-500/20 p-3 shadow-lg shadow-purple-500/20 backdrop-blur-sm dark:border-cyan-400/30 dark:bg-cyan-500/20 dark:shadow-cyan-500/20",children:e.jsx(r,{className:"h-6 w-6 text-purple-600 dark:text-cyan-400","aria-hidden":"true"})})]}),e.jsx("div",{className:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-purple-500/10 blur-2xl dark:bg-cyan-500/10"})]})}const fe=t=>{switch(t.toLowerCase()){case"alert":return Q;case"review":return J;case"case":return I;default:return $}},je=t=>{switch(t.toLowerCase()){case"alert":return"text-red-500 bg-red-500/10 border-red-500/20";case"review":return"text-green-500 bg-green-500/10 border-green-500/20";case"case":return"text-blue-500 bg-blue-500/10 border-blue-500/20";default:return"text-purple-500 bg-purple-500/10 border-purple-500/20"}};function ye({activities:t}){return t.length===0?e.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-2xl border border-white/20 bg-white/5 p-8 text-center backdrop-blur-lg dark:bg-slate-800/10",children:[e.jsx($,{className:"mb-4 h-12 w-12 text-slate-600 dark:text-slate-500"}),e.jsx("p",{className:"text-lg font-medium text-slate-500 dark:text-slate-400",children:"No recent activity"})]}):e.jsxs("div",{className:"rounded-2xl border border-white/20 bg-white/5 p-6 shadow-xl backdrop-blur-lg dark:bg-slate-800/10",children:[e.jsx("h3",{className:"mb-6 text-lg font-semibold text-slate-900 dark:text-white",children:"Recent Activity"}),e.jsx("div",{className:"flow-root",children:e.jsx("ul",{role:"list",className:"-mb-8",children:t.map((s,r)=>{const i=fe(s.type),a=je(s.type);return e.jsx(d.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:r*.05},children:e.jsxs("div",{className:"relative pb-8",children:[r!==t.length-1?e.jsx("span",{className:"absolute left-5 top-5 -ml-px h-full w-0.5 bg-slate-200 dark:bg-slate-700","aria-hidden":"true"}):null,e.jsxs("div",{className:"relative flex space-x-3",children:[e.jsx("div",{className:`relative flex h-10 w-10 items-center justify-center rounded-full border ${a} ring-8 ring-white/5 dark:ring-slate-900/5`,children:e.jsx(i,{className:"h-5 w-5","aria-hidden":"true"})}),e.jsxs("div",{className:"flex min-w-0 flex-1 justify-between space-x-4 pt-1.5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:s.message}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(G,{className:"h-3 w-3 text-slate-400"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.user})]})]}),e.jsx("div",{className:"whitespace-nowrap text-right text-xs text-slate-500 dark:text-slate-400",children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]})},s.id)})})})]})}const o=[{range:"0-30",count:45,riskLevel:"Low"},{range:"31-60",count:28,riskLevel:"Medium"},{range:"61-80",count:15,riskLevel:"High"},{range:"81-100",count:8,riskLevel:"Critical"}],ve=({active:t,payload:s,label:r})=>t&&s&&s.length?e.jsxs("div",{className:"rounded-lg border border-white/20 bg-slate-900/90 p-3 shadow-xl backdrop-blur-md",children:[e.jsxs("p",{className:"mb-1 text-sm font-medium text-slate-300",children:["Risk Score: ",r]}),e.jsxs("p",{className:"text-lg font-bold text-white",children:[s[0].value," Cases"]}),e.jsxs("p",{className:"text-xs text-slate-400",children:[s[0].payload.riskLevel," Risk Level"]})]}):null;function we(){const t=o.reduce((a,l)=>a+l.count,0),s=o.filter(a=>a.riskLevel==="High"||a.riskLevel==="Critical").reduce((a,l)=>a+l.count,0),r=o.find(a=>a.riskLevel==="Critical")?.count||0,i=(s/t*100).toFixed(1);return e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"h-full w-full rounded-2xl border border-white/20 bg-white/5 p-6 shadow-xl backdrop-blur-lg dark:bg-slate-800/10",children:[e.jsx("h3",{className:"mb-6 text-lg font-semibold text-slate-900 dark:text-white",children:"Risk Score Distribution"}),e.jsx("div",{className:"sr-only",role:"region","aria-label":"Risk Distribution Summary",children:e.jsxs("p",{children:["Total cases: ",t,". High risk cases: ",o.find(a=>a.riskLevel==="High")?.count||0," (",((o.find(a=>a.riskLevel==="High")?.count||0)/t*100).toFixed(1),"%). Critical cases: ",r,". Medium risk cases: ",o.find(a=>a.riskLevel==="Medium")?.count||0,". Low risk cases: ",o.find(a=>a.riskLevel==="Low")?.count||0,"."]})}),e.jsx("div",{className:"h-[300px] w-full",role:"img","aria-label":`Bar chart showing risk distribution across ${o.length} categories. ${s} high risk or critical cases out of ${t} total (${i}%).`,"aria-live":"polite",children:e.jsx(M,{width:"100%",height:"100%",children:e.jsxs(ae,{data:o,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"barGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6",stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:"#06b6d4",stopOpacity:.8})]})}),e.jsx(_,{dataKey:"range",stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(P,{stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(O,{content:e.jsx(ve,{}),cursor:{fill:"rgba(255,255,255,0.05)"}}),e.jsx(re,{dataKey:"count",radius:[8,8,0,0],animationBegin:0,animationDuration:1500,children:o.map((a,l)=>e.jsx(ie,{fill:"url(#barGradient)",style:{filter:"drop-shadow(0 0 6px rgba(139, 92, 246, 0.3))"}},`cell-${l}`))})]})})})]})}const x=[{day:"Mon",cases:12,reviews:8},{day:"Tue",cases:18,reviews:12},{day:"Wed",cases:15,reviews:10},{day:"Thu",cases:25,reviews:18},{day:"Fri",cases:20,reviews:15},{day:"Sat",cases:8,reviews:5},{day:"Sun",cases:5,reviews:3}],ke=({active:t,payload:s,label:r})=>t&&s&&s.length?e.jsxs("div",{className:"rounded-lg border border-white/20 bg-slate-900/90 p-3 shadow-xl backdrop-blur-md",children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-slate-300",children:r}),s.map((i,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:i.color}}),e.jsxs("span",{className:"text-slate-400",children:[i.name,":"]}),e.jsx("span",{className:"font-bold text-white",children:i.value})]},a))]}):null;function Ne(){const t=x.reduce((a,l)=>a+l.cases+l.reviews,0),s=x.reduce((a,l)=>a+l.cases,0),r=x.reduce((a,l)=>a+l.reviews,0),i=(t/x.length).toFixed(1);return e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"h-full w-full rounded-2xl border border-white/20 bg-white/5 p-6 shadow-xl backdrop-blur-lg dark:bg-slate-800/10",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Weekly Activity"}),e.jsxs("select",{className:"rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-1 text-sm text-slate-300 backdrop-blur-sm focus:border-purple-500 focus:outline-none","aria-label":"Select time range for activity chart",children:[e.jsx("option",{children:"Last 7 Days"}),e.jsx("option",{children:"Last 30 Days"})]})]}),e.jsx("div",{className:"sr-only",role:"region","aria-label":"Weekly Activity Summary",children:e.jsxs("p",{children:["Weekly activity chart showing ",x.length," days of data. Total cases: ",s,". Total reviews: ",r,". Average activity per day: ",i," items."]})}),e.jsx("div",{className:"h-[300px] w-full",role:"img","aria-label":`Area chart showing weekly activity trends over ${x.length} days. Average of ${i} items per day, with ${s} cases and ${r} reviews total.`,"aria-live":"polite",children:e.jsx(M,{width:"100%",height:"100%",children:e.jsxs(le,{data:x,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCases",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorReviews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#06b6d4",stopOpacity:0})]})]}),e.jsx(_,{dataKey:"day",stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(P,{stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(O,{content:e.jsx(ke,{})}),e.jsx(N,{type:"monotone",dataKey:"cases",name:"New Cases",stroke:"#8b5cf6",strokeWidth:3,fillOpacity:1,fill:"url(#colorCases)",style:{filter:"drop-shadow(0 0 6px rgba(139, 92, 246, 0.4))"}}),e.jsx(N,{type:"monotone",dataKey:"reviews",name:"Reviews",stroke:"#06b6d4",strokeWidth:3,fillOpacity:1,fill:"url(#colorReviews)",style:{filter:"drop-shadow(0 0 6px rgba(6, 182, 212, 0.4))"}})]})})})]})}function Ce(){return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center animate-pulse",children:[e.jsx("div",{className:"h-8 w-48 bg-slate-200 dark:bg-slate-700 rounded-lg"}),e.jsx("div",{className:"h-10 w-32 bg-slate-200 dark:bg-slate-700 rounded-lg"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[...Array(4)].map((t,s)=>e.jsx("div",{className:"relative overflow-hidden rounded-2xl border border-white/20 bg-white/5 p-6 shadow-xl backdrop-blur-xl dark:bg-slate-800/10",children:e.jsxs("div",{className:"flex justify-between items-start animate-pulse",children:[e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsx("div",{className:"h-4 w-24 bg-slate-200 dark:bg-slate-700 rounded"}),e.jsx("div",{className:"h-8 w-16 bg-slate-200 dark:bg-slate-700 rounded"})]}),e.jsx("div",{className:"h-12 w-12 rounded-lg bg-slate-200 dark:bg-slate-700"})]})},s))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[...Array(2)].map((t,s)=>e.jsx("div",{className:"h-[400px] rounded-2xl border border-white/20 bg-white/5 p-6 shadow-xl backdrop-blur-lg dark:bg-slate-800/10",children:e.jsxs("div",{className:"animate-pulse space-y-4 h-full",children:[e.jsx("div",{className:"h-6 w-48 bg-slate-200 dark:bg-slate-700 rounded"}),e.jsx("div",{className:"h-[300px] w-full bg-slate-200/50 dark:bg-slate-700/50 rounded-lg"})]})},s))}),e.jsx("div",{className:"rounded-2xl border border-white/20 bg-white/5 p-6 shadow-xl backdrop-blur-lg dark:bg-slate-800/10",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-6 w-32 bg-slate-200 dark:bg-slate-700 rounded"}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-3/4 bg-slate-200 dark:bg-slate-700 rounded"}),e.jsx("div",{className:"h-3 w-1/2 bg-slate-200 dark:bg-slate-700 rounded"})]})]},s))})]})})]})}function $e(){const t=W(),{data:s,isLoading:r}=w({queryKey:["dashboard-stats"],queryFn:k.getDashboardMetrics}),i=h.useMemo(()=>s?`Dashboard updated. ${s.active_cases||0} active cases, ${s.high_risk_subjects||0} high risk subjects, ${s.pending_reviews||0} pending reviews.`:"",[s]);ne("/ws",{onMessage:n=>{n.type==="STATS_UPDATE"&&(t.setQueryData(["dashboard-stats"],n.payload),te.success("Dashboard updated",{id:"dashboard-update",duration:2e3,icon:"ðŸ”„",style:{background:"#1e293b",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}}))}});const{data:a,isLoading:l}=w({queryKey:["dashboard","activity"],queryFn:k.getRecentActivity});return r||l?e.jsx(Ce,{}):e.jsx(oe,{pageName:"Dashboard",children:e.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 dark:bg-slate-900",children:[e.jsx("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"sr-only",children:i}),e.jsxs("div",{className:"mx-auto max-w-7xl space-y-8",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Overview of fraud detection system status"})]}),e.jsxs(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-blue-500/20 transition-all hover:shadow-blue-500/40 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-slate-900",children:[e.jsx(X,{className:"h-5 w-5"}),"New Case"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(p,{title:"Active Cases",value:s?.active_cases??0,icon:Y,trend:{value:12,isPositive:!0},index:0}),e.jsx(p,{title:"High Risk Subjects",value:s?.high_risk_subjects??0,icon:Z,trend:{value:5,isPositive:!1},index:1}),e.jsx(p,{title:"Pending Reviews",value:s?.pending_reviews??0,icon:ee,index:2}),e.jsx(p,{title:"System Load",value:`${s?.system_load??0}%`,icon:se,index:3})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx("div",{className:"h-[400px]",children:e.jsx(we,{})}),e.jsx("div",{className:"h-[400px]",children:e.jsx(Ne,{})})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(ye,{activities:a??[]})})]})]})})}export{$e as Dashboard};
