import{j as v,c as Fe,b as dr,u as Ft}from"./query-vendor-CvBDT0OD.js";import{a as I,f as pr}from"./react-vendor-BuVNz1jA.js";import{l as J,A as gr,m as Ke,k as ne,j as _e}from"./index-BlWFTSEC.js";import{p as Sn,m as yr,J as vr,A as Ct,r as mr,a2 as xr,k as _r,o as tt,q as Lt,W as br,Q as wr,a3 as kr,z as ve}from"./ui-vendor-DqTYRHc5.js";import{s as dt,p as jr,t as Ar,a as Nr,d as Cr,b as ue,z as Sr}from"./zoom-XumfBP2-.js";import{o as Pr,s as Or,m as Ut,e as qt}from"./viz-vendor-Yg1nQkEx.js";import{P as x}from"./index-D1A8l3YR.js";import{u as Mr}from"./useWebSocket-M8ejPgyM.js";import{P as Ht}from"./PageErrorBoundary-BlW1gdj2.js";function Tr({alerts:n,selectedId:e,onSelect:r}){const i=I.useRef(null),a=o=>{const s=document.getElementById(`alert-item-${o}`);s&&s.scrollIntoView({behavior:"smooth",block:"nearest"})};return J("up",()=>{if(!e&&n.length>0){r(n[0].id);return}const o=n.findIndex(s=>s.id===e);o>0&&(r(n[o-1].id),a(n[o-1].id))}),J("down",()=>{if(!e&&n.length>0){r(n[0].id);return}const o=n.findIndex(s=>s.id===e);o<n.length-1&&(r(n[o+1].id),a(n[o+1].id))}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("div",{id:"queue-status",className:"sr-only","aria-live":"polite","aria-atomic":"true",children:e?`Alert ${n.findIndex(o=>o.id===e)+1} of ${n.length} selected`:`${n.length} alerts in queue`}),v.jsx("div",{ref:i,className:"space-y-2 overflow-y-auto max-h-[calc(100vh-200px)] pr-2 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent",role:"feed","aria-label":"Alert Queue","aria-busy":"false","aria-describedby":"queue-status",children:v.jsx(gr,{initial:!1,children:n.map((o,s)=>v.jsxs(Ke.div,{id:`alert-item-${o.id}`,layoutId:o.id,onClick:()=>r(o.id),className:ne("cursor-pointer rounded-xl p-4 transition-all duration-200 border-l-4 relative overflow-hidden group","backdrop-blur-md bg-white/5 dark:bg-slate-900/20 hover:bg-white/10 dark:hover:bg-slate-800/30",e===o.id?"bg-blue-500/20 dark:bg-blue-500/20 border-l-blue-500 shadow-2xl shadow-blue-500/30 ring-2 ring-blue-500/50 scale-[1.02]":"border-l-transparent border-t border-r border-b border-white/5",o.risk_score>80&&e!==o.id?"border-l-red-500/50":o.risk_score>60&&e!==o.id?"border-l-orange-500/50":o.risk_score<=60&&e!==o.id?"border-l-yellow-500/50":""),initial:{opacity:0,x:-20},animate:e===o.id?{opacity:1,x:0,scale:[1,1.02,1.02],boxShadow:["0 0 0 0 rgba(59, 130, 246, 0)","0 0 20px 5px rgba(59, 130, 246, 0.3)","0 0 20px 5px rgba(59, 130, 246, 0.3)"]}:{opacity:1,x:0},exit:{opacity:0,height:0,marginBottom:0},transition:{duration:.3},role:"article","aria-label":`Alert from ${o.subject_name}, risk score ${o.risk_score}, ${o.triggered_rules.length} triggered rules`,"aria-selected":e===o.id,"aria-posinset":s+1,"aria-setsize":n.length,tabIndex:0,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),r(o.id))},children:[e===o.id&&v.jsx(Ke.div,{layoutId:"selection-glow",className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 via-purple-500/10 to-transparent pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),v.jsxs("div",{className:"relative z-10",children:[v.jsxs("div",{className:"flex justify-between items-start mb-1",children:[v.jsxs("span",{className:"text-[10px] text-slate-500 font-mono tracking-wider",children:["#",o.id.slice(0,8)]}),v.jsxs("span",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:[v.jsx(Sn,{className:"w-3 h-3"}),new Date(o.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),v.jsx("h3",{className:ne("font-semibold text-sm mb-2 transition-colors",e===o.id?"text-white":"text-slate-200 group-hover:text-white"),children:o.subject_name}),v.jsx("div",{className:"flex items-center gap-2 mb-3",children:v.jsxs("div",{className:ne("text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1",o.risk_score>80?"bg-red-500/20 text-red-400 border border-red-500/20":o.risk_score>60?"bg-orange-500/20 text-orange-400 border border-orange-500/20":"bg-yellow-500/20 text-yellow-400 border border-yellow-500/20"),children:[v.jsx(yr,{className:"w-3 h-3"}),"Risk: ",o.risk_score]})}),v.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[o.triggered_rules.slice(0,2).map((l,c)=>v.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-white/5 dark:bg-slate-800/50 rounded text-slate-400 border border-white/5",children:l},c)),o.triggered_rules.length>2&&v.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-white/5 dark:bg-slate-800/50 rounded text-slate-400 border border-white/5",children:["+",o.triggered_rules.length-2]})]})]})]},o.id))})})]})}function Er({alert:n}){return v.jsxs("div",{className:"p-6 border-b border-white/10 dark:border-slate-700/20 bg-white/5 dark:bg-slate-800/10",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:n.subject_name}),v.jsxs("span",{className:"px-2 py-1 rounded text-xs font-mono bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:["ID: ",n.id]})]}),v.jsxs("div",{className:"flex gap-4 text-sm text-slate-500 dark:text-slate-400",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(Sn,{className:"w-4 h-4"}),"Detected: ",new Date(n.created_at).toLocaleString()]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(vr,{className:"w-4 h-4"}),"Status: ",v.jsx("span",{className:"capitalize text-slate-700 dark:text-slate-200",children:n.status})]})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Risk Score"}),v.jsx("div",{className:`text-3xl font-bold ${n.risk_score>80?"text-red-500":n.risk_score>60?"text-orange-500":"text-yellow-500"}`,children:n.risk_score})]})]}),v.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:n.triggered_rules.map((e,r)=>v.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-red-500/10 text-red-600 dark:text-red-400 border border-red-500/20 text-sm",children:[v.jsx(Ct,{className:"w-3.5 h-3.5"}),e]},r))})]})}function Rr({onDecision:n,disabled:e}){const[r,i]=I.useState(null),[a,o]=I.useState("medium"),[s,l]=I.useState(""),[c,f]=I.useState(""),h=d=>{i(d),f("")};J("a",()=>!e&&h("approve"),{enabled:!r}),J("r",()=>!e&&h("reject"),{enabled:!r}),J("e",()=>!e&&h("escalate"),{enabled:!r}),J("esc",()=>{r&&(i(null),l(""),f(""))},{enableOnFormTags:!0});const u=()=>{if(r){if((r==="reject"||r==="escalate")&&!s.trim()){f("Comment is required for this decision");return}n(r,a,s),i(null),l(""),o("medium")}},p=d=>{switch(d){case"approve":return"bg-green-500";case"reject":return"bg-red-500";case"escalate":return"bg-orange-500";default:return"bg-slate-500"}};return v.jsxs("div",{className:"space-y-4",role:"region","aria-label":"Decision Panel","aria-describedby":"decision-instructions",children:[v.jsx("div",{id:"decision-instructions",className:"sr-only",children:"Review the alert details and choose an action: Press A to approve, R to reject, or E to escalate. You can adjust confidence before submitting."}),r?v.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl border border-white/10 bg-white/5 p-6 backdrop-blur-md",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:["Confirm ",r.charAt(0).toUpperCase()+r.slice(1),v.jsx("span",{className:ne("h-2 w-2 rounded-full",p(r))})]}),v.jsx("button",{onClick:()=>i(null),className:"text-sm text-slate-400 hover:text-white",children:"Cancel (Esc)"})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Confidence Level"}),v.jsx("div",{className:"flex gap-2",children:["low","medium","high"].map(d=>v.jsx("button",{onClick:()=>o(d),className:ne("flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all border",a===d?"bg-purple-500/20 border-purple-500 text-purple-100 shadow-[0_0_10px_rgba(168,85,247,0.2)]":"bg-slate-800/50 border-slate-700 text-slate-400 hover:bg-slate-800"),children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Comment ",r!=="approve"&&v.jsx("span",{className:"text-red-400",children:"*"})]}),v.jsx("textarea",{value:s,onChange:d=>l(d.target.value),placeholder:r==="approve"?"Optional comment...":"Reason for decision...",className:"w-full h-24 rounded-lg bg-black/20 border border-white/10 p-3 text-white placeholder:text-slate-500 focus:outline-none focus:border-purple-500/50 focus:ring-1 focus:ring-purple-500/50 resize-none",autoFocus:!0}),c&&v.jsx("p",{className:"text-red-400 text-xs mt-1",children:c})]}),v.jsxs("button",{onClick:u,className:ne("w-full py-3 rounded-lg font-bold text-white flex items-center justify-center gap-2 transition-all",r==="approve"?"bg-green-600 hover:bg-green-500":r==="reject"?"bg-red-600 hover:bg-red-500":"bg-orange-600 hover:bg-orange-500"),children:[v.jsx(_r,{className:"h-4 w-4"}),"Submit Decision"]})]})]}):v.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[v.jsx("button",{onClick:()=>h("approve"),disabled:e,className:"group relative overflow-hidden rounded-xl border border-green-500/30 bg-green-500/10 p-4 hover:bg-green-500/20 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-keyshortcuts":"a","aria-description":"Approve this alert as legitimate. Keyboard shortcut: A",children:v.jsxs("div",{className:"flex flex-col items-center gap-2",children:[v.jsx(mr,{className:"h-6 w-6 text-green-400 group-hover:scale-110 transition-transform"}),v.jsx("span",{className:"font-semibold text-green-100",children:"Approve"}),v.jsx("kbd",{className:"absolute top-2 right-2 text-[10px] font-mono text-green-500/50 border border-green-500/30 rounded px-1",children:"A"})]})}),v.jsx("button",{onClick:()=>h("reject"),disabled:e,className:"group relative overflow-hidden rounded-xl border border-red-500/30 bg-red-500/10 p-4 hover:bg-red-500/20 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-keyshortcuts":"r","aria-description":"Reject this alert as false positive. Keyboard shortcut: R",children:v.jsxs("div",{className:"flex flex-col items-center gap-2",children:[v.jsx(xr,{className:"h-6 w-6 text-red-400 group-hover:scale-110 transition-transform"}),v.jsx("span",{className:"font-semibold text-red-100",children:"Reject"}),v.jsx("kbd",{className:"absolute top-2 right-2 text-[10px] font-mono text-red-500/50 border border-red-500/30 rounded px-1",children:"R"})]})}),v.jsx("button",{onClick:()=>h("escalate"),disabled:e,className:"group relative overflow-hidden rounded-xl border border-orange-500/30 bg-orange-500/10 p-4 hover:bg-orange-500/20 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-keyshortcuts":"e","aria-description":"Escalate this alert for senior review. Keyboard shortcut: E",children:v.jsxs("div",{className:"flex flex-col items-center gap-2",children:[v.jsx(Ct,{className:"h-6 w-6 text-orange-400 group-hover:scale-110 transition-transform"}),v.jsx("span",{className:"font-semibold text-orange-100",children:"Escalate"}),v.jsx("kbd",{className:"absolute top-2 right-2 text-[10px] font-mono text-orange-500/50 border border-orange-500/30 rounded px-1",children:"E"})]})})]})]})}const St=I.createContext(void 0);function zr({value:n,onValueChange:e,children:r,className:i,...a}){return v.jsx(St.Provider,{value:{value:n,onValueChange:e},children:v.jsx("div",{className:ne("",i),...a,children:r})})}function Dr({children:n,className:e,...r}){return v.jsx("div",{className:ne("inline-flex items-center justify-center rounded-lg bg-slate-100 p-1 dark:bg-slate-800",e),...r,children:n})}function He({value:n,children:e,className:r,...i}){const a=I.useContext(St);if(!a)throw new Error("TabsTrigger must be used within Tabs");const o=a.value===n;return v.jsx("button",{className:ne("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",o?"bg-white text-slate-950 shadow-sm dark:bg-slate-950 dark:text-slate-50":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-50",r),onClick:()=>a.onValueChange(n),"data-state":o?"active":"inactive",...i,children:e})}function Ge({value:n,children:e,className:r,...i}){const a=I.useContext(St);if(!a)throw new Error("TabsContent must be used within Tabs");return a.value!==n?null:v.jsx("div",{className:ne("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",r),...i,children:e})}function Ir({alertId:n}){const{data:e,isLoading:r,error:i}=Fe({queryKey:["evidence",n],queryFn:()=>_e.getEvidenceForAnalysis(n),enabled:!!n});return r?v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsxs("div",{className:"text-center",children:[v.jsx(tt,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-2"}),v.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Loading evidence..."})]})}):i?v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("div",{className:"text-center text-red-500",children:v.jsx("p",{className:"text-sm",children:"Failed to load evidence"})})}):!e||e.length===0?v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsxs("div",{className:"text-center",children:[v.jsx(Lt,{className:"w-12 h-12 text-slate-400 mx-auto mb-2"}),v.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No evidence files found"})]})}):v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Supporting Evidence"}),v.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.map(a=>{const o=a.filename?.split(".").pop()?.toLowerCase()||"file",s=o==="pdf",l=["jpg","jpeg","png","gif"].includes(o);return v.jsx("div",{className:"group cursor-pointer p-4 rounded-xl border border-white/10 dark:border-slate-700/20 bg-white/5 dark:bg-slate-800/10 hover:bg-white/10 dark:hover:bg-slate-800/20 transition-all",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500",children:s?v.jsx(Lt,{className:"w-6 h-6"}):l?v.jsx(br,{className:"w-6 h-6"}):v.jsx(wr,{className:"w-6 h-6"})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h4",{className:"font-medium text-slate-900 dark:text-white truncate",children:a.filename}),v.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[a.file_type," â€¢ ",new Date(a.upload_date).toLocaleDateString()]})]})]})},a.id)})})]})}function $r(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,f=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw a}}return l}}function Fr(n,e,r){return e=Br(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Gt(n,e){return qr(n)||$r(n,e)||Pn(n,e)||Wr()}function Lr(n){return Ur(n)||Hr(n)||Pn(n)||Gr()}function Ur(n){if(Array.isArray(n))return pt(n)}function qr(n){if(Array.isArray(n))return n}function Hr(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Pn(n,e){if(n){if(typeof n=="string")return pt(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(n,e)}}function pt(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function Gr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vr(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Br(n){var e=Vr(n,"string");return typeof e=="symbol"?e:String(e)}var Kr=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(Lr(Object.entries(e).filter(function(a){var o=Gt(a,1),s=o[0];return!i.has(s)}).map(function(a){var o=Gt(a,2),s=o[0],l=o[1];return Fr({},s,l)}))))};function gt(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Zr(n){if(Array.isArray(n))return n}function Qr(n){if(Array.isArray(n))return gt(n)}function Xr(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Yr(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,f=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw a}}return l}}function Jr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ei(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ti(n,e){return Zr(n)||Yr(n,e)||On(n,e)||Jr()}function Wt(n){return Qr(n)||Xr(n)||On(n)||ei()}function On(n,e){if(n){if(typeof n=="string")return gt(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(n,e):void 0}}function ni(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,a=e.nodeMapper,o=a===void 0?function(h){return h}:a,s=e.methodNames,l=s===void 0?[]:s,c=e.initPropNames,f=c===void 0?[]:c;return I.forwardRef(function(h,u){var p=I.useRef(),d=I.useMemo(function(){var m=Object.fromEntries(f.filter(function(g){return h.hasOwnProperty(g)}).map(function(g){return[g,h[g]]}));return n(m)},[]);Vt(function(){d(o(p.current))},I.useLayoutEffect),Vt(function(){return d._destructor instanceof Function?d._destructor:void 0});var y=I.useCallback(function(m){for(var g=arguments.length,b=new Array(g>1?g-1:0),k=1;k<g;k++)b[k-1]=arguments[k];return d[m]instanceof Function?d[m].apply(d,b):void 0},[d]),_=I.useRef({});return Object.keys(Kr(h,[].concat(Wt(l),Wt(f)))).filter(function(m){return _.current[m]!==h[m]}).forEach(function(m){return y(m,h[m])}),_.current=h,I.useImperativeHandle(u,function(){return Object.fromEntries(l.map(function(m){return[m,function(){for(var g=arguments.length,b=new Array(g),k=0;k<g;k++)b[k]=arguments[k];return y.apply(void 0,[m].concat(b))}]}))},[y]),pr.createElement(i,{ref:p})})}function Vt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:I.useEffect,r=I.useRef(),i=I.useRef(!1),a=I.useRef(!1),o=I.useState(0),s=ti(o,2);s[0];var l=s[1];i.current&&(a.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(c){return c+1}),function(){a.current&&r.current&&r.current()}},[])}var ri=typeof global=="object"&&global&&global.Object===Object&&global,ii=typeof self=="object"&&self&&self.Object===Object&&self,Mn=ri||ii||Function("return this")(),Ze=Mn.Symbol,Tn=Object.prototype,ai=Tn.hasOwnProperty,oi=Tn.toString,Ne=Ze?Ze.toStringTag:void 0;function si(n){var e=ai.call(n,Ne),r=n[Ne];try{n[Ne]=void 0;var i=!0}catch{}var a=oi.call(n);return i&&(e?n[Ne]=r:delete n[Ne]),a}var li=Object.prototype,ui=li.toString;function ci(n){return ui.call(n)}var fi="[object Null]",hi="[object Undefined]",Bt=Ze?Ze.toStringTag:void 0;function di(n){return n==null?n===void 0?hi:fi:Bt&&Bt in Object(n)?si(n):ci(n)}function pi(n){return n!=null&&typeof n=="object"}var gi="[object Symbol]";function yi(n){return typeof n=="symbol"||pi(n)&&di(n)==gi}var vi=/\s/;function mi(n){for(var e=n.length;e--&&vi.test(n.charAt(e)););return e}var xi=/^\s+/;function _i(n){return n&&n.slice(0,mi(n)+1).replace(xi,"")}function Qe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Kt=NaN,bi=/^[-+]0x[0-9a-f]+$/i,wi=/^0b[01]+$/i,ki=/^0o[0-7]+$/i,ji=parseInt;function Zt(n){if(typeof n=="number")return n;if(yi(n))return Kt;if(Qe(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Qe(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=_i(n);var r=wi.test(n);return r||ki.test(n)?ji(n.slice(2),r?2:8):bi.test(n)?Kt:+n}var lt=function(){return Mn.Date.now()},Ai="Expected a function",Ni=Math.max,Ci=Math.min;function En(n,e,r){var i,a,o,s,l,c,f=0,h=!1,u=!1,p=!0;if(typeof n!="function")throw new TypeError(Ai);e=Zt(e)||0,Qe(r)&&(h=!!r.leading,u="maxWait"in r,o=u?Ni(Zt(r.maxWait)||0,e):o,p="trailing"in r?!!r.trailing:p);function d(j){var A=i,C=a;return i=a=void 0,f=j,s=n.apply(C,A),s}function y(j){return f=j,l=setTimeout(g,e),h?d(j):s}function _(j){var A=j-c,C=j-f,T=e-A;return u?Ci(T,o-C):T}function m(j){var A=j-c,C=j-f;return c===void 0||A>=e||A<0||u&&C>=o}function g(){var j=lt();if(m(j))return b(j);l=setTimeout(g,_(j))}function b(j){return l=void 0,p&&i?d(j):(i=a=void 0,s)}function k(){l!==void 0&&clearTimeout(l),f=0,i=c=a=l=void 0}function N(){return l===void 0?s:b(lt())}function w(){var j=lt(),A=m(j);if(i=arguments,a=this,c=j,A){if(l===void 0)return y(c);if(u)return clearTimeout(l),l=setTimeout(g,e),d(c)}return l===void 0&&(l=setTimeout(g,e)),s}return w.cancel=k,w.flush=N,w}var Si="Expected a function";function Pi(n,e,r){var i=!0,a=!0;if(typeof n!="function")throw new TypeError(Si);return Qe(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),En(n,e,{leading:i,maxWait:e,trailing:a})}var be=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-be.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?be.Bounce.In(n*2)*.5:be.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),Te=function(){return performance.now()},Rn=(function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];(e=s._group)===null||e===void 0||e.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,a=e;i<a.length;i++){var o=a[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=Te()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var a=0;a<i.length;a++){var o=this._tweens[i[a]],s=!r;o&&o.update(e,s)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n})(),yt={Linear:function(n,e){var r=n.length-1,i=r*e,a=Math.floor(i),o=yt.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[a],n[a+1>r?r:a+1],i-a)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},zn=(function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n})(),vt=new Rn,Qt=(function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=be.Linear.None,this._interpolationFunction=yt.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=zn.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=vt,vt.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=Te()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var a={};for(var o in this._valuesEnd)a[o]=this._valuesEnd[o];this._valuesEnd=a}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,a,o){for(var s in i){var l=e[s],c=Array.isArray(l),f=c?"array":typeof l,h=!c&&Array.isArray(i[s]);if(!(f==="undefined"||f==="function")){if(h){var u=i[s];if(u.length===0)continue;for(var p=[l],d=0,y=u.length;d<y;d+=1){var _=this._handleRelativeValue(l,u[d]);if(isNaN(_)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}p.push(_)}h&&(i[s]=p)}if((f==="object"||c)&&l&&!h){r[s]=c?[]:{};var m=l;for(var g in m)r[s][g]=m[g];a[s]=c?[]:{};var u=i[s];if(!this._isDynamic){var b={};for(var g in u)b[g]=u[g];i[s]=u=b}this._setupProperties(m,r[s],u,a[s],o)}else(typeof r[s]>"u"||o)&&(r[s]=l),c||(r[s]*=1),h?a[s]=i[s].slice().reverse():a[s]=r[s]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=Te()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=Te()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=be.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=yt.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,a;if(e===void 0&&(e=Te()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,l=this._duration+((a=this._repeatDelayTime)!==null&&a!==void 0?a:this._delayTime),c=this._duration+this._repeat*l,f=function(){if(i._duration===0||s>c)return 1;var _=Math.trunc(s/l),m=s-_*l,g=Math.min(m/i._duration,1);return g===0&&s===i._duration?1:g},h=f(),u=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||s>=this._duration)if(this._repeat>0){var p=Math.min(Math.trunc((s-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=p);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*p,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,y=this._chainedTweens.length;d<y;d++)this._chainedTweens[d].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,a){for(var o in i)if(r[o]!==void 0){var s=r[o]||0,l=i[o],c=Array.isArray(e[o]),f=Array.isArray(l),h=!c&&f;h?e[o]=this._interpolationFunction(l,a):typeof l=="object"&&l?this._updateProperties(e[o],s,l,a):(l=this._handleRelativeValue(s,l),typeof l=="number"&&(e[o]=s+(l-s)*a))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n})();zn.nextId;var re=vt;re.getAll.bind(re);re.removeAll.bind(re);re.add.bind(re);re.remove.bind(re);re.update.bind(re);function Xt(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Oi(n){if(Array.isArray(n))return n}function Mi(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ti(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function Ei(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,f=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw a}}return l}}function Ri(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zi(n,e){return Oi(n)||Ei(n,e)||Di(n,e)||Ri()}function Di(n,e){if(n){if(typeof n=="string")return Xt(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xt(n,e):void 0}}var Ii=Ti(function n(e,r){var i=r.default,a=i===void 0?null:i,o=r.triggerUpdate,s=o===void 0?!0:o,l=r.onChange,c=l===void 0?function(f,h){}:l;Mi(this,n),this.name=e,this.defaultVal=a,this.triggerUpdate=s,this.onChange=c});function Pt(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,a=i===void 0?{}:i,o=n.methods,s=o===void 0?{}:o,l=n.aliases,c=l===void 0?{}:l,f=n.init,h=f===void 0?function(){}:f,u=n.update,p=u===void 0?function(){}:u,d=Object.keys(a).map(function(y){return new Ii(y,a[y])});return function y(){for(var _=arguments.length,m=new Array(_),g=0;g<_;g++)m[g]=arguments[g];var b=!!(this instanceof y&&this.constructor),k=b?m.shift():void 0,N=m[0],w=N===void 0?{}:N,j=Object.assign({},r instanceof Function?r(w):r,{initialised:!1}),A={};function C(M){return T(M,w),P(),C}var T=function(O,R){h.call(C,O,j,R),j.initialised=!0},P=En(function(){j.initialised&&(p.call(C,j,A),A={})},1);return d.forEach(function(M){C[M.name]=O(M);function O(R){var $=R.name,q=R.triggerUpdate,de=q===void 0?!1:q,Ue=R.onChange,qe=Ue===void 0?function(ye,ie){}:Ue,Ae=R.defaultVal,ot=Ae===void 0?null:Ae;return function(ye){var ie=j[$];if(!arguments.length)return ie;var ae=ye===void 0?ot:ye;return j[$]=ae,qe.call(C,ae,j,ie),!A.hasOwnProperty($)&&(A[$]=ie),de&&P(),C}}}),Object.keys(s).forEach(function(M){C[M]=function(){for(var O,R=arguments.length,$=new Array(R),q=0;q<R;q++)$[q]=arguments[q];return(O=s[M]).call.apply(O,[C,j].concat($))}}),Object.entries(c).forEach(function(M){var O=zi(M,2),R=O[0],$=O[1];return C[R]=C[$]}),C.resetProps=function(){return d.forEach(function(M){C[M.name](M.defaultVal)}),C},C.resetProps(),j._rerender=P,b&&k&&C(k),C}}var z=(function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}});function Xe(n){"@babel/helpers - typeof";return Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(n)}var $i=/^\s+/,Fi=/\s+$/;function E(n,e){if(n=n||"",e=e||{},n instanceof E)return n;if(!(this instanceof E))return new E(n,e);var r=Li(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}E.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,a,o,s,l;return r=e.r/255,i=e.g/255,a=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),a<=.03928?l=a/12.92:l=Math.pow((a+.055)/1.055,2.4),.2126*o+.7152*s+.0722*l},setAlpha:function(e){return this._a=Dn(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Jt(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Jt(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),a=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+a+"%)":"hsva("+r+", "+i+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=Yt(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Yt(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),a=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+a+"%)":"hsla("+r+", "+i+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return en(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Gi(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(L(this._r,255)*100)+"%",g:Math.round(L(this._g,255)*100)+"%",b:Math.round(L(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(L(this._r,255)*100)+"%, "+Math.round(L(this._g,255)*100)+"%, "+Math.round(L(this._b,255)*100)+"%)":"rgba("+Math.round(L(this._r,255)*100)+"%, "+Math.round(L(this._g,255)*100)+"%, "+Math.round(L(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:na[en(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+tn(this._r,this._g,this._b,this._a),i=r,a=this._gradientType?"GradientType = 1, ":"";if(e){var o=E(e);i="#"+tn(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,a=this._a<1&&this._a>=0,o=!r&&a&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return E(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Ki,arguments)},brighten:function(){return this._applyModification(Zi,arguments)},darken:function(){return this._applyModification(Qi,arguments)},desaturate:function(){return this._applyModification(Wi,arguments)},saturate:function(){return this._applyModification(Vi,arguments)},greyscale:function(){return this._applyModification(Bi,arguments)},spin:function(){return this._applyModification(Xi,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(ea,arguments)},complement:function(){return this._applyCombination(Yi,arguments)},monochromatic:function(){return this._applyCombination(ta,arguments)},splitcomplement:function(){return this._applyCombination(Ji,arguments)},triad:function(){return this._applyCombination(nn,[3])},tetrad:function(){return this._applyCombination(nn,[4])}};E.fromRatio=function(n,e){if(Xe(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=Ee(n[i]));n=r}return E(n,e)};function Li(n){var e={r:0,g:0,b:0},r=1,i=null,a=null,o=null,s=!1,l=!1;return typeof n=="string"&&(n=oa(n)),Xe(n)=="object"&&(oe(n.r)&&oe(n.g)&&oe(n.b)?(e=Ui(n.r,n.g,n.b),s=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):oe(n.h)&&oe(n.s)&&oe(n.v)?(i=Ee(n.s),a=Ee(n.v),e=Hi(n.h,i,a),s=!0,l="hsv"):oe(n.h)&&oe(n.s)&&oe(n.l)&&(i=Ee(n.s),o=Ee(n.l),e=qi(n.h,i,o),s=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=Dn(r),{ok:s,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function Ui(n,e,r){return{r:L(n,255)*255,g:L(e,255)*255,b:L(r,255)*255}}function Yt(n,e,r){n=L(n,255),e=L(e,255),r=L(r,255);var i=Math.max(n,e,r),a=Math.min(n,e,r),o,s,l=(i+a)/2;if(i==a)o=s=0;else{var c=i-a;switch(s=l>.5?c/(2-i-a):c/(i+a),i){case n:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-n)/c+2;break;case r:o=(n-e)/c+4;break}o/=6}return{h:o,s,l}}function qi(n,e,r){var i,a,o;n=L(n,360),e=L(e,100),r=L(r,100);function s(f,h,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?f+(h-f)*6*u:u<1/2?h:u<2/3?f+(h-f)*(2/3-u)*6:f}if(e===0)i=a=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=s(c,l,n+1/3),a=s(c,l,n),o=s(c,l,n-1/3)}return{r:i*255,g:a*255,b:o*255}}function Jt(n,e,r){n=L(n,255),e=L(e,255),r=L(r,255);var i=Math.max(n,e,r),a=Math.min(n,e,r),o,s,l=i,c=i-a;if(s=i===0?0:c/i,i==a)o=0;else{switch(i){case n:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-n)/c+2;break;case r:o=(n-e)/c+4;break}o/=6}return{h:o,s,v:l}}function Hi(n,e,r){n=L(n,360)*6,e=L(e,100),r=L(r,100);var i=Math.floor(n),a=n-i,o=r*(1-e),s=r*(1-a*e),l=r*(1-(1-a)*e),c=i%6,f=[r,s,o,o,l,r][c],h=[l,r,r,s,o,o][c],u=[o,o,l,r,r,s][c];return{r:f*255,g:h*255,b:u*255}}function en(n,e,r,i){var a=[ee(Math.round(n).toString(16)),ee(Math.round(e).toString(16)),ee(Math.round(r).toString(16))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function Gi(n,e,r,i,a){var o=[ee(Math.round(n).toString(16)),ee(Math.round(e).toString(16)),ee(Math.round(r).toString(16)),ee(In(i))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function tn(n,e,r,i){var a=[ee(In(i)),ee(Math.round(n).toString(16)),ee(Math.round(e).toString(16)),ee(Math.round(r).toString(16))];return a.join("")}E.equals=function(n,e){return!n||!e?!1:E(n).toRgbString()==E(e).toRgbString()};E.random=function(){return E.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Wi(n,e){e=e===0?0:e||10;var r=E(n).toHsl();return r.s-=e/100,r.s=nt(r.s),E(r)}function Vi(n,e){e=e===0?0:e||10;var r=E(n).toHsl();return r.s+=e/100,r.s=nt(r.s),E(r)}function Bi(n){return E(n).desaturate(100)}function Ki(n,e){e=e===0?0:e||10;var r=E(n).toHsl();return r.l+=e/100,r.l=nt(r.l),E(r)}function Zi(n,e){e=e===0?0:e||10;var r=E(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),E(r)}function Qi(n,e){e=e===0?0:e||10;var r=E(n).toHsl();return r.l-=e/100,r.l=nt(r.l),E(r)}function Xi(n,e){var r=E(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,E(r)}function Yi(n){var e=E(n).toHsl();return e.h=(e.h+180)%360,E(e)}function nn(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=E(n).toHsl(),i=[E(n)],a=360/e,o=1;o<e;o++)i.push(E({h:(r.h+o*a)%360,s:r.s,l:r.l}));return i}function Ji(n){var e=E(n).toHsl(),r=e.h;return[E(n),E({h:(r+72)%360,s:e.s,l:e.l}),E({h:(r+216)%360,s:e.s,l:e.l})]}function ea(n,e,r){e=e||6,r=r||30;var i=E(n).toHsl(),a=360/r,o=[E(n)];for(i.h=(i.h-(a*e>>1)+720)%360;--e;)i.h=(i.h+a)%360,o.push(E(i));return o}function ta(n,e){e=e||6;for(var r=E(n).toHsv(),i=r.h,a=r.s,o=r.v,s=[],l=1/e;e--;)s.push(E({h:i,s:a,v:o})),o=(o+l)%1;return s}E.mix=function(n,e,r){r=r===0?0:r||50;var i=E(n).toRgb(),a=E(e).toRgb(),o=r/100,s={r:(a.r-i.r)*o+i.r,g:(a.g-i.g)*o+i.g,b:(a.b-i.b)*o+i.b,a:(a.a-i.a)*o+i.a};return E(s)};E.readability=function(n,e){var r=E(n),i=E(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};E.isReadable=function(n,e,r){var i=E.readability(n,e),a,o;switch(o=!1,a=sa(r),a.level+a.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};E.mostReadable=function(n,e,r){var i=null,a=0,o,s,l,c;r=r||{},s=r.includeFallbackColors,l=r.level,c=r.size;for(var f=0;f<e.length;f++)o=E.readability(n,e[f]),o>a&&(a=o,i=E(e[f]));return E.isReadable(n,i,{level:l,size:c})||!s?i:(r.includeFallbackColors=!1,E.mostReadable(n,["#fff","#000"],r))};var mt=E.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},na=E.hexNames=ra(mt);function ra(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function Dn(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function L(n,e){ia(n)&&(n="100%");var r=aa(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function nt(n){return Math.min(1,Math.max(0,n))}function K(n){return parseInt(n,16)}function ia(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function aa(n){return typeof n=="string"&&n.indexOf("%")!=-1}function ee(n){return n.length==1?"0"+n:""+n}function Ee(n){return n<=1&&(n=n*100+"%"),n}function In(n){return Math.round(parseFloat(n)*255).toString(16)}function rn(n){return K(n)/255}var Y=(function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function oe(n){return!!Y.CSS_UNIT.exec(n)}function oa(n){n=n.replace($i,"").replace(Fi,"").toLowerCase();var e=!1;if(mt[n])n=mt[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Y.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=Y.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Y.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=Y.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Y.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=Y.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Y.hex8.exec(n))?{r:K(r[1]),g:K(r[2]),b:K(r[3]),a:rn(r[4]),format:e?"name":"hex8"}:(r=Y.hex6.exec(n))?{r:K(r[1]),g:K(r[2]),b:K(r[3]),format:e?"name":"hex"}:(r=Y.hex4.exec(n))?{r:K(r[1]+""+r[1]),g:K(r[2]+""+r[2]),b:K(r[3]+""+r[3]),a:rn(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Y.hex3.exec(n))?{r:K(r[1]+""+r[1]),g:K(r[2]+""+r[2]),b:K(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function sa(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function xt(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function la(n){if(Array.isArray(n))return xt(n)}function $n(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function ua(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ca(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(n,e){return n.get($n(n,e))}function an(n,e,r){ua(n,e),e.set(n,r)}function on(n,e,r){return n.set($n(n,e),r),r}function fa(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,va(i.key),i)}}function ha(n,e,r){return e&&fa(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function da(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function pa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ga(n){return la(n)||da(n)||ma(n)||pa()}function ya(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function va(n){var e=ya(n,"string");return typeof e=="symbol"?e:e+""}function ma(n,e){if(n){if(typeof n=="string")return xt(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xt(n,e):void 0}}var xa=123,_a=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},Fn=function(e,r,i){return(e<<16)+(r<<8)+i},ba=function(e){var r=E(e).toRgb(),i=r.r,a=r.g,o=r.b;return Fn(i,a,o)},sn=function(e,r){return e*xa%Math.pow(2,r)},me=new WeakMap,se=new WeakMap,wa=(function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;ca(this,n),an(this,me,void 0),an(this,se,void 0),on(se,this,e),this.reset()}return ha(n,[{key:"reset",value:function(){on(me,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Z(me,this).length>=Math.pow(2,24-Z(se,this)))return null;var i=Z(me,this).length,a=sn(i,Z(se,this)),o=_a(i+(a<<24-Z(se,this)));return Z(me,this).push(r),o}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?ba(r):Fn.apply(void 0,ga(r));if(!i)return null;var a=i&Math.pow(2,24-Z(se,this))-1,o=i>>24-Z(se,this)&Math.pow(2,Z(se,this))-1;return sn(a,Z(se,this))!==o||a>=Z(me,this).length?null:Z(me,this)[a]}}])})(),Le,U,Ln,Un,xe,ln,qn,Hn,Gn,Ot,_t,bt,Ie={},Wn=[],ka=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,rt=Array.isArray;function te(n,e){for(var r in e)n[r]=e[r];return n}function Mt(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function ja(n,e,r){var i,a,o,s={};for(o in e)o=="key"?i=e[o]:o=="ref"?a=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?Le.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)s[o]===void 0&&(s[o]=n.defaultProps[o]);return Re(n,s,i,a,null)}function Re(n,e,r,i,a){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++Ln,__i:-1,__u:0};return a==null&&U.vnode!=null&&U.vnode(o),o}function it(n){return n.children}function Be(n,e){this.props=n,this.context=e}function je(n,e){if(e==null)return n.__?je(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?je(n):null}function Vn(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Vn(n)}}function un(n){(!n.__d&&(n.__d=!0)&&xe.push(n)&&!Ye.__r++||ln!=U.debounceRendering)&&((ln=U.debounceRendering)||qn)(Ye)}function Ye(){for(var n,e,r,i,a,o,s,l=1;xe.length;)xe.length>l&&xe.sort(Hn),n=xe.shift(),l=xe.length,n.__d&&(r=void 0,i=void 0,a=(i=(e=n).__v).__e,o=[],s=[],e.__P&&((r=te({},i)).__v=i.__v+1,U.vnode&&U.vnode(r),Tt(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[a]:null,o,a??je(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,Zn(o,r,s),i.__e=i.__=null,r.__e!=a&&Vn(r)));Ye.__r=0}function Bn(n,e,r,i,a,o,s,l,c,f,h){var u,p,d,y,_,m,g,b=i&&i.__k||Wn,k=e.length;for(c=Aa(r,e,b,c,k),u=0;u<k;u++)(d=r.__k[u])!=null&&(p=d.__i==-1?Ie:b[d.__i]||Ie,d.__i=u,m=Tt(n,d,p,a,o,s,l,c,f,h),y=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&Et(p.ref,null,d),h.push(d.ref,d.__c||y,d)),_==null&&y!=null&&(_=y),(g=!!(4&d.__u))||p.__k===d.__k?c=Kn(d,c,n,g):typeof d.type=="function"&&m!==void 0?c=m:y&&(c=y.nextSibling),d.__u&=-7);return r.__e=_,c}function Aa(n,e,r,i,a){var o,s,l,c,f,h=r.length,u=h,p=0;for(n.__k=new Array(a),o=0;o<a;o++)(s=e[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=n.__k[o]=Re(null,s,null,null,null):rt(s)?s=n.__k[o]=Re(it,{children:s},null,null,null):s.constructor==null&&s.__b>0?s=n.__k[o]=Re(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):n.__k[o]=s,c=o+p,s.__=n,s.__b=n.__b+1,(f=s.__i=Na(s,r,c,u))!=-1&&(u--,(l=r[f])&&(l.__u|=2)),l==null||l.__v==null?(f==-1&&(a>h?p--:a<h&&p++),typeof s.type!="function"&&(s.__u|=4)):f!=c&&(f==c-1?p--:f==c+1?p++:(f>c?p--:p++,s.__u|=4))):n.__k[o]=null;if(u)for(o=0;o<h;o++)(l=r[o])!=null&&(2&l.__u)==0&&(l.__e==i&&(i=je(l)),Xn(l,l));return i}function Kn(n,e,r,i){var a,o;if(typeof n.type=="function"){for(a=n.__k,o=0;a&&o<a.length;o++)a[o]&&(a[o].__=n,e=Kn(a[o],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=je(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Na(n,e,r,i){var a,o,s,l=n.key,c=n.type,f=e[r],h=f!=null&&(2&f.__u)==0;if(f===null&&l==null||h&&l==f.key&&c==f.type)return r;if(i>(h?1:0)){for(a=r-1,o=r+1;a>=0||o<e.length;)if((f=e[s=a>=0?a--:o++])!=null&&(2&f.__u)==0&&l==f.key&&c==f.type)return s}return-1}function cn(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||ka.test(e)?r:r+"px"}function We(n,e,r,i,a){var o,s;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||cn(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||cn(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Gn,"$1")),s=e.toLowerCase(),e=s in n||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=Ot,n.addEventListener(e,o?bt:_t,o)):n.removeEventListener(e,o?bt:_t,o);else{if(a=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function fn(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=Ot++;else if(e.t<r.u)return;return r(U.event?U.event(e):e)}}}function Tt(n,e,r,i,a,o,s,l,c,f){var h,u,p,d,y,_,m,g,b,k,N,w,j,A,C,T,P,M=e.type;if(e.constructor!=null)return null;128&r.__u&&(c=!!(32&r.__u),o=[l=e.__e=r.__e]),(h=U.__b)&&h(e);e:if(typeof M=="function")try{if(g=e.props,b="prototype"in M&&M.prototype.render,k=(h=M.contextType)&&i[h.__c],N=h?k?k.props.value:h.__:i,r.__c?m=(u=e.__c=r.__c).__=u.__E:(b?e.__c=u=new M(g,N):(e.__c=u=new Be(g,N),u.constructor=M,u.render=Sa),k&&k.sub(u),u.state||(u.state={}),u.__n=i,p=u.__d=!0,u.__h=[],u._sb=[]),b&&u.__s==null&&(u.__s=u.state),b&&M.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=te({},u.__s)),te(u.__s,M.getDerivedStateFromProps(g,u.__s))),d=u.props,y=u.state,u.__v=e,p)b&&M.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),b&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b&&M.getDerivedStateFromProps==null&&g!==d&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(g,N),e.__v==r.__v||!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(g,u.__s,N)===!1){for(e.__v!=r.__v&&(u.props=g,u.state=u.__s,u.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(O){O&&(O.__=e)}),w=0;w<u._sb.length;w++)u.__h.push(u._sb[w]);u._sb=[],u.__h.length&&s.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(g,u.__s,N),b&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(d,y,_)})}if(u.context=N,u.props=g,u.__P=n,u.__e=!1,j=U.__r,A=0,b){for(u.state=u.__s,u.__d=!1,j&&j(e),h=u.render(u.props,u.state,u.context),C=0;C<u._sb.length;C++)u.__h.push(u._sb[C]);u._sb=[]}else do u.__d=!1,j&&j(e),h=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++A<25);u.state=u.__s,u.getChildContext!=null&&(i=te(te({},i),u.getChildContext())),b&&!p&&u.getSnapshotBeforeUpdate!=null&&(_=u.getSnapshotBeforeUpdate(d,y)),T=h,h!=null&&h.type===it&&h.key==null&&(T=Qn(h.props.children)),l=Bn(n,rt(T)?T:[T],e,r,i,a,o,s,l,c,f),u.base=e.__e,e.__u&=-161,u.__h.length&&s.push(u),m&&(u.__E=u.__=null)}catch(O){if(e.__v=null,c||o!=null)if(O.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(P=o.length;P--;)Mt(o[P]);wt(e)}else e.__e=r.__e,e.__k=r.__k,O.then||wt(e);U.__e(O,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=Ca(r.__e,e,r,i,a,o,s,c,f);return(h=U.diffed)&&h(e),128&e.__u?void 0:l}function wt(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(wt)}function Zn(n,e,r){for(var i=0;i<r.length;i++)Et(r[i],r[++i],r[++i]);U.__c&&U.__c(e,n),n.some(function(a){try{n=a.__h,a.__h=[],n.some(function(o){o.call(a)})}catch(o){U.__e(o,a.__v)}})}function Qn(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:rt(n)?n.map(Qn):te({},n)}function Ca(n,e,r,i,a,o,s,l,c){var f,h,u,p,d,y,_,m=r.props||Ie,g=e.props,b=e.type;if(b=="svg"?a="http://www.w3.org/2000/svg":b=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),o!=null){for(f=0;f<o.length;f++)if((d=o[f])&&"setAttribute"in d==!!b&&(b?d.localName==b:d.nodeType==3)){n=d,o[f]=null;break}}if(n==null){if(b==null)return document.createTextNode(g);n=document.createElementNS(a,b,g.is&&g),l&&(U.__m&&U.__m(e,o),l=!1),o=null}if(b==null)m===g||l&&n.data==g||(n.data=g);else{if(o=o&&Le.call(n.childNodes),!l&&o!=null)for(m={},f=0;f<n.attributes.length;f++)m[(d=n.attributes[f]).name]=d.value;for(f in m)if(d=m[f],f!="children"){if(f=="dangerouslySetInnerHTML")u=d;else if(!(f in g)){if(f=="value"&&"defaultValue"in g||f=="checked"&&"defaultChecked"in g)continue;We(n,f,null,d,a)}}for(f in g)d=g[f],f=="children"?p=d:f=="dangerouslySetInnerHTML"?h=d:f=="value"?y=d:f=="checked"?_=d:l&&typeof d!="function"||m[f]===d||We(n,f,d,m[f],a);if(h)l||u&&(h.__html==u.__html||h.__html==n.innerHTML)||(n.innerHTML=h.__html),e.__k=[];else if(u&&(n.innerHTML=""),Bn(e.type=="template"?n.content:n,rt(p)?p:[p],e,r,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":a,o,s,o?o[0]:r.__k&&je(r,0),l,c),o!=null)for(f=o.length;f--;)Mt(o[f]);l||(f="value",b=="progress"&&y==null?n.removeAttribute("value"):y!=null&&(y!==n[f]||b=="progress"&&!y||b=="option"&&y!=m[f])&&We(n,f,y,m[f],a),f="checked",_!=null&&_!=n[f]&&We(n,f,_,m[f],a))}return n}function Et(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(a){U.__e(a,r)}}function Xn(n,e,r){var i,a;if(U.unmount&&U.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||Et(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){U.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(a=0;a<i.length;a++)i[a]&&Xn(i[a],e,r||typeof n.type!="function");r||Mt(n.__e),n.__c=n.__=n.__e=void 0}function Sa(n,e,r){return this.constructor(n,r)}function Pa(n,e,r){var i,a,o,s;e==document&&(e=document.documentElement),U.__&&U.__(n,e),a=(i=!1)?null:e.__k,o=[],s=[],Tt(e,n=e.__k=ja(it,null,[n]),a||Ie,Ie,e.namespaceURI,a?null:e.firstChild?Le.call(e.childNodes):null,o,a?a.__e:e.firstChild,i,s),Zn(o,n,s)}function Yn(n,e,r){var i,a,o,s,l=te({},n.props);for(o in n.type&&n.type.defaultProps&&(s=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?a=e[o]:l[o]=e[o]===void 0&&s!=null?s[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?Le.call(arguments,2):r),Re(n.type,l,i||n.key,a||n.ref,null)}Le=Wn.slice,U={__e:function(n,e,r,i){for(var a,o,s;e=e.__;)if((a=e.__c)&&!a.__)try{if((o=a.constructor)&&o.getDerivedStateFromError!=null&&(a.setState(o.getDerivedStateFromError(n)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(n,i||{}),s=a.__d),s)return a.__E=a}catch(l){n=l}throw n}},Ln=0,Un=function(n){return n!=null&&n.constructor==null},Be.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=te({},this.state),typeof n=="function"&&(n=n(te({},r),this.props)),n&&te(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),un(this))},Be.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),un(this))},Be.prototype.render=it,xe=[],qn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Hn=function(n,e){return n.__v.__b-e.__v.__b},Ye.__r=0,Gn=/(PointerCapture)$|Capture$/i,Ot=0,_t=fn(!1),bt=fn(!0);function hn(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Oa(n){if(Array.isArray(n))return n}function Ma(n,e,r){return(e=Ia(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Ta(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,f=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw a}}return l}}function Ea(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dn(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function Ra(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dn(Object(r),!0).forEach(function(i){Ma(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function za(n,e){return Oa(n)||Ta(n,e)||$a(n,e)||Ea()}function Da(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ia(n){var e=Da(n,"string");return typeof e=="symbol"?e:e+""}function Je(n){"@babel/helpers - typeof";return Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(n)}function $a(n,e){if(n){if(typeof n=="string")return hn(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hn(n,e):void 0}}var kt=function(e){if(Je(e)!=="object")return e;var r=Yn(e);if(r.props){var i;r.props=Ra({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(kt):kt(r.props.children))}return r},Fa=function(e){return Un(Yn(e))},La=function(e,r){delete r.__k,Pa(kt(e),r)};function Ua(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}var qa=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;Ua(qa);var Ha=Pt({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.style,o=a===void 0?{}:a,s=!!e&&Je(e)==="object"&&!!e.node&&typeof e.node=="function",l=dt(s?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(f){var h=za(f,2),u=h[0],p=h[1];return r.tooltipEl.style(u,p)}),r.tooltipEl.style("left","-10000px").style("display","none");var c="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(c),function(f){r.mouseInside=!0;var h=jr(f),u=l.node(),p=u.offsetWidth,d=u.offsetHeight,y=[r.offsetX===null||r.offsetX===void 0?"-".concat(h[0]/p*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?d>130&&d-h[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(y.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(c),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(c),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):Fa(e.content)?(e.tooltipEl.text(""),La(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function Ga(n,e,r){var i,a=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var s,l=i.length,c,f=0,h=0,u=0;for(s=0;s<l;++s)c=i[s],f+=c.x||0,h+=c.y||0,u+=c.z||0;for(f=(f/l-n)*a,h=(h/l-e)*a,u=(u/l-r)*a,s=0;s<l;++s)c=i[s],f&&(c.x-=f),h&&(c.y-=h),u&&(c.z-=u)}return o.initialize=function(s){i=s},o.x=function(s){return arguments.length?(n=+s,o):n},o.y=function(s){return arguments.length?(e=+s,o):e},o.z=function(s){return arguments.length?(r=+s,o):r},o.strength=function(s){return arguments.length?(a=+s,o):a},o}function Wa(n){const e=+this._x.call(null,n);return Jn(this.cover(e),e,n)}function Jn(n,e,r){if(isNaN(e))return n;var i,a=n._root,o={data:r},s=n._x0,l=n._x1,c,f,h,u,p;if(!a)return n._root=o,n;for(;a.length;)if((h=e>=(c=(s+l)/2))?s=c:l=c,i=a,!(a=a[u=+h]))return i[u]=o,n;if(f=+n._x.call(null,a.data),e===f)return o.next=a,i?i[u]=o:n._root=o,n;do i=i?i[u]=new Array(2):n._root=new Array(2),(h=e>=(c=(s+l)/2))?s=c:l=c;while((u=+h)==(p=+(f>=c)));return i[p]=a,i[u]=o,n}function Va(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,a=-1/0;for(let o=0,s;o<e;++o)isNaN(s=+this._x.call(null,n[o]))||(r[o]=s,s<i&&(i=s),s>a&&(a=s));if(i>a)return this;this.cover(i).cover(a);for(let o=0;o<e;++o)Jn(this,r[o],n[o]);return this}function Ba(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,a=this._root,o,s;e>n||n>=r;)switch(s=+(n<e),o=new Array(2),o[s]=a,a=o,i*=2,s){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._x1=r,this}function Ka(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Za(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function he(n,e,r){this.node=n,this.x0=e,this.x1=r}function Qa(n,e){var r,i=this._x0,a,o,s=this._x1,l=[],c=this._root,f,h;for(c&&l.push(new he(c,i,s)),e==null?e=1/0:(i=n-e,s=n+e);f=l.pop();)if(!(!(c=f.node)||(a=f.x0)>s||(o=f.x1)<i))if(c.length){var u=(a+o)/2;l.push(new he(c[1],u,o),new he(c[0],a,u)),(h=+(n>=u))&&(f=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=f)}else{var p=Math.abs(n-+this._x.call(null,c.data));p<e&&(e=p,i=n-p,s=n+p,r=c.data)}return r}function Xa(n){if(isNaN(c=+this._x.call(null,n)))return this;var e,r=this._root,i,a,o,s=this._x0,l=this._x1,c,f,h,u,p;if(!r)return this;if(r.length)for(;;){if((h=c>=(f=(s+l)/2))?s=f:l=f,e=r,!(r=r[u=+h]))return this;if(!r.length)break;e[u+1&1]&&(i=e,p=u)}for(;r.data!==n;)if(a=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,a?(o?a.next=o:delete a.next,this):e?(o?e[u]=o:delete e[u],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[p]=r:this._root=r),this):(this._root=o,this)}function Ya(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Ja(){return this._root}function eo(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function to(n){var e=[],r,i=this._root,a,o,s;for(i&&e.push(new he(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,s=r.x1)&&i.length){var l=(o+s)/2;(a=i[1])&&e.push(new he(a,l,s)),(a=i[0])&&e.push(new he(a,o,l))}return this}function no(n){var e=[],r=[],i;for(this._root&&e.push(new he(this._root,this._x0,this._x1));i=e.pop();){var a=i.node;if(a.length){var o,s=i.x0,l=i.x1,c=(s+l)/2;(o=a[0])&&e.push(new he(o,s,c)),(o=a[1])&&e.push(new he(o,c,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function ro(n){return n[0]}function io(n){return arguments.length?(this._x=n,this):this._x}function er(n,e){var r=new Rt(e??ro,NaN,NaN);return n==null?r:r.addAll(n)}function Rt(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function pn(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var B=er.prototype=Rt.prototype;B.copy=function(){var n=new Rt(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=pn(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var a=0;a<2;++a)(i=e.source[a])&&(i.length?r.push({source:i,target:e.target[a]=new Array(2)}):e.target[a]=pn(i));return n};B.add=Wa;B.addAll=Va;B.cover=Ba;B.data=Ka;B.extent=Za;B.find=Qa;B.remove=Xa;B.removeAll=Ya;B.root=Ja;B.size=eo;B.visit=to;B.visitAfter=no;B.x=io;function ao(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return tr(this.cover(e,r),e,r,n)}function tr(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var a,o=n._root,s={data:i},l=n._x0,c=n._y0,f=n._x1,h=n._y1,u,p,d,y,_,m,g,b;if(!o)return n._root=s,n;for(;o.length;)if((_=e>=(u=(l+f)/2))?l=u:f=u,(m=r>=(p=(c+h)/2))?c=p:h=p,a=o,!(o=o[g=m<<1|_]))return a[g]=s,n;if(d=+n._x.call(null,o.data),y=+n._y.call(null,o.data),e===d&&r===y)return s.next=o,a?a[g]=s:n._root=s,n;do a=a?a[g]=new Array(4):n._root=new Array(4),(_=e>=(u=(l+f)/2))?l=u:f=u,(m=r>=(p=(c+h)/2))?c=p:h=p;while((g=m<<1|_)===(b=(y>=p)<<1|d>=u));return a[b]=o,a[g]=s,n}function oo(n){var e,r,i=n.length,a,o,s=new Array(i),l=new Array(i),c=1/0,f=1/0,h=-1/0,u=-1/0;for(r=0;r<i;++r)isNaN(a=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(s[r]=a,l[r]=o,a<c&&(c=a),a>h&&(h=a),o<f&&(f=o),o>u&&(u=o));if(c>h||f>u)return this;for(this.cover(c,f).cover(h,u),r=0;r<i;++r)tr(this,s[r],l[r],n[r]);return this}function so(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,a=this._x1,o=this._y1;if(isNaN(r))a=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var s=a-r||1,l=this._root,c,f;r>n||n>=a||i>e||e>=o;)switch(f=(e<i)<<1|n<r,c=new Array(4),c[f]=l,l=c,s*=2,f){case 0:a=r+s,o=i+s;break;case 1:r=a-s,o=i+s;break;case 2:a=r+s,i=o-s;break;case 3:r=a-s,i=o-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=a,this._y1=o,this}function lo(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function uo(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function W(n,e,r,i,a){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=a}function co(n,e,r){var i,a=this._x0,o=this._y0,s,l,c,f,h=this._x1,u=this._y1,p=[],d=this._root,y,_;for(d&&p.push(new W(d,a,o,h,u)),r==null?r=1/0:(a=n-r,o=e-r,h=n+r,u=e+r,r*=r);y=p.pop();)if(!(!(d=y.node)||(s=y.x0)>h||(l=y.y0)>u||(c=y.x1)<a||(f=y.y1)<o))if(d.length){var m=(s+c)/2,g=(l+f)/2;p.push(new W(d[3],m,g,c,f),new W(d[2],s,g,m,f),new W(d[1],m,l,c,g),new W(d[0],s,l,m,g)),(_=(e>=g)<<1|n>=m)&&(y=p[p.length-1],p[p.length-1]=p[p.length-1-_],p[p.length-1-_]=y)}else{var b=n-+this._x.call(null,d.data),k=e-+this._y.call(null,d.data),N=b*b+k*k;if(N<r){var w=Math.sqrt(r=N);a=n-w,o=e-w,h=n+w,u=e+w,i=d.data}}return i}function fo(n){if(isNaN(h=+this._x.call(null,n))||isNaN(u=+this._y.call(null,n)))return this;var e,r=this._root,i,a,o,s=this._x0,l=this._y0,c=this._x1,f=this._y1,h,u,p,d,y,_,m,g;if(!r)return this;if(r.length)for(;;){if((y=h>=(p=(s+c)/2))?s=p:c=p,(_=u>=(d=(l+f)/2))?l=d:f=d,e=r,!(r=r[m=_<<1|y]))return this;if(!r.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(i=e,g=m)}for(;r.data!==n;)if(a=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,a?(o?a.next=o:delete a.next,this):e?(o?e[m]=o:delete e[m],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[g]=r:this._root=r),this):(this._root=o,this)}function ho(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function po(){return this._root}function go(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function yo(n){var e=[],r,i=this._root,a,o,s,l,c;for(i&&e.push(new W(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,s=r.y0,l=r.x1,c=r.y1)&&i.length){var f=(o+l)/2,h=(s+c)/2;(a=i[3])&&e.push(new W(a,f,h,l,c)),(a=i[2])&&e.push(new W(a,o,h,f,c)),(a=i[1])&&e.push(new W(a,f,s,l,h)),(a=i[0])&&e.push(new W(a,o,s,f,h))}return this}function vo(n){var e=[],r=[],i;for(this._root&&e.push(new W(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var a=i.node;if(a.length){var o,s=i.x0,l=i.y0,c=i.x1,f=i.y1,h=(s+c)/2,u=(l+f)/2;(o=a[0])&&e.push(new W(o,s,l,h,u)),(o=a[1])&&e.push(new W(o,h,l,c,u)),(o=a[2])&&e.push(new W(o,s,u,h,f)),(o=a[3])&&e.push(new W(o,h,u,c,f))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function mo(n){return n[0]}function xo(n){return arguments.length?(this._x=n,this):this._x}function _o(n){return n[1]}function bo(n){return arguments.length?(this._y=n,this):this._y}function nr(n,e,r){var i=new zt(e??mo,r??_o,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function zt(n,e,r,i,a,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=a,this._y1=o,this._root=void 0}function gn(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var V=nr.prototype=zt.prototype;V.copy=function(){var n=new zt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=gn(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var a=0;a<4;++a)(i=e.source[a])&&(i.length?r.push({source:i,target:e.target[a]=new Array(4)}):e.target[a]=gn(i));return n};V.add=ao;V.addAll=oo;V.cover=so;V.data=lo;V.extent=uo;V.find=co;V.remove=fo;V.removeAll=ho;V.root=po;V.size=go;V.visit=yo;V.visitAfter=vo;V.x=xo;V.y=bo;function wo(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return rr(this.cover(e,r,i),e,r,i,n)}function rr(n,e,r,i,a){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,s=n._root,l={data:a},c=n._x0,f=n._y0,h=n._z0,u=n._x1,p=n._y1,d=n._z1,y,_,m,g,b,k,N,w,j,A,C;if(!s)return n._root=l,n;for(;s.length;)if((N=e>=(y=(c+u)/2))?c=y:u=y,(w=r>=(_=(f+p)/2))?f=_:p=_,(j=i>=(m=(h+d)/2))?h=m:d=m,o=s,!(s=s[A=j<<2|w<<1|N]))return o[A]=l,n;if(g=+n._x.call(null,s.data),b=+n._y.call(null,s.data),k=+n._z.call(null,s.data),e===g&&r===b&&i===k)return l.next=s,o?o[A]=l:n._root=l,n;do o=o?o[A]=new Array(8):n._root=new Array(8),(N=e>=(y=(c+u)/2))?c=y:u=y,(w=r>=(_=(f+p)/2))?f=_:p=_,(j=i>=(m=(h+d)/2))?h=m:d=m;while((A=j<<2|w<<1|N)===(C=(k>=m)<<2|(b>=_)<<1|g>=y));return o[C]=s,o[A]=l,n}function ko(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),a=new Float64Array(e);let o=1/0,s=1/0,l=1/0,c=-1/0,f=-1/0,h=-1/0;for(let u=0,p,d,y,_;u<e;++u)isNaN(d=+this._x.call(null,p=n[u]))||isNaN(y=+this._y.call(null,p))||isNaN(_=+this._z.call(null,p))||(r[u]=d,i[u]=y,a[u]=_,d<o&&(o=d),d>c&&(c=d),y<s&&(s=y),y>f&&(f=y),_<l&&(l=_),_>h&&(h=_));if(o>c||s>f||l>h)return this;this.cover(o,s,l).cover(c,f,h);for(let u=0;u<e;++u)rr(this,r[u],i[u],a[u],n[u]);return this}function jo(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,a=this._y0,o=this._z0,s=this._x1,l=this._y1,c=this._z1;if(isNaN(i))s=(i=Math.floor(n))+1,l=(a=Math.floor(e))+1,c=(o=Math.floor(r))+1;else{for(var f=s-i||1,h=this._root,u,p;i>n||n>=s||a>e||e>=l||o>r||r>=c;)switch(p=(r<o)<<2|(e<a)<<1|n<i,u=new Array(8),u[p]=h,h=u,f*=2,p){case 0:s=i+f,l=a+f,c=o+f;break;case 1:i=s-f,l=a+f,c=o+f;break;case 2:s=i+f,a=l-f,c=o+f;break;case 3:i=s-f,a=l-f,c=o+f;break;case 4:s=i+f,l=a+f,o=c-f;break;case 5:i=s-f,l=a+f,o=c-f;break;case 6:s=i+f,a=l-f,o=c-f;break;case 7:i=s-f,a=l-f,o=c-f;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=a,this._z0=o,this._x1=s,this._y1=l,this._z1=c,this}function Ao(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function No(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function D(n,e,r,i,a,o,s){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=a,this.y1=o,this.z1=s}function Co(n,e,r,i){var a,o=this._x0,s=this._y0,l=this._z0,c,f,h,u,p,d,y=this._x1,_=this._y1,m=this._z1,g=[],b=this._root,k,N;for(b&&g.push(new D(b,o,s,l,y,_,m)),i==null?i=1/0:(o=n-i,s=e-i,l=r-i,y=n+i,_=e+i,m=r+i,i*=i);k=g.pop();)if(!(!(b=k.node)||(c=k.x0)>y||(f=k.y0)>_||(h=k.z0)>m||(u=k.x1)<o||(p=k.y1)<s||(d=k.z1)<l))if(b.length){var w=(c+u)/2,j=(f+p)/2,A=(h+d)/2;g.push(new D(b[7],w,j,A,u,p,d),new D(b[6],c,j,A,w,p,d),new D(b[5],w,f,A,u,j,d),new D(b[4],c,f,A,w,j,d),new D(b[3],w,j,h,u,p,A),new D(b[2],c,j,h,w,p,A),new D(b[1],w,f,h,u,j,A),new D(b[0],c,f,h,w,j,A)),(N=(r>=A)<<2|(e>=j)<<1|n>=w)&&(k=g[g.length-1],g[g.length-1]=g[g.length-1-N],g[g.length-1-N]=k)}else{var C=n-+this._x.call(null,b.data),T=e-+this._y.call(null,b.data),P=r-+this._z.call(null,b.data),M=C*C+T*T+P*P;if(M<i){var O=Math.sqrt(i=M);o=n-O,s=e-O,l=r-O,y=n+O,_=e+O,m=r+O,a=b.data}}return a}const So=(n,e,r,i,a,o)=>Math.sqrt((n-i)**2+(e-a)**2+(r-o)**2);function Po(n,e,r,i){const a=[],o=n-i,s=e-i,l=r-i,c=n+i,f=e+i,h=r+i;return this.visit((u,p,d,y,_,m,g)=>{if(!u.length)do{const b=u.data;So(n,e,r,this._x(b),this._y(b),this._z(b))<=i&&a.push(b)}while(u=u.next);return p>c||d>f||y>h||_<o||m<s||g<l}),a}function Oo(n){if(isNaN(p=+this._x.call(null,n))||isNaN(d=+this._y.call(null,n))||isNaN(y=+this._z.call(null,n)))return this;var e,r=this._root,i,a,o,s=this._x0,l=this._y0,c=this._z0,f=this._x1,h=this._y1,u=this._z1,p,d,y,_,m,g,b,k,N,w,j;if(!r)return this;if(r.length)for(;;){if((b=p>=(_=(s+f)/2))?s=_:f=_,(k=d>=(m=(l+h)/2))?l=m:h=m,(N=y>=(g=(c+u)/2))?c=g:u=g,e=r,!(r=r[w=N<<2|k<<1|b]))return this;if(!r.length)break;(e[w+1&7]||e[w+2&7]||e[w+3&7]||e[w+4&7]||e[w+5&7]||e[w+6&7]||e[w+7&7])&&(i=e,j=w)}for(;r.data!==n;)if(a=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,a?(o?a.next=o:delete a.next,this):e?(o?e[w]=o:delete e[w],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[j]=r:this._root=r),this):(this._root=o,this)}function Mo(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function To(){return this._root}function Eo(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Ro(n){var e=[],r,i=this._root,a,o,s,l,c,f,h;for(i&&e.push(new D(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,s=r.y0,l=r.z0,c=r.x1,f=r.y1,h=r.z1)&&i.length){var u=(o+c)/2,p=(s+f)/2,d=(l+h)/2;(a=i[7])&&e.push(new D(a,u,p,d,c,f,h)),(a=i[6])&&e.push(new D(a,o,p,d,u,f,h)),(a=i[5])&&e.push(new D(a,u,s,d,c,p,h)),(a=i[4])&&e.push(new D(a,o,s,d,u,p,h)),(a=i[3])&&e.push(new D(a,u,p,l,c,f,d)),(a=i[2])&&e.push(new D(a,o,p,l,u,f,d)),(a=i[1])&&e.push(new D(a,u,s,l,c,p,d)),(a=i[0])&&e.push(new D(a,o,s,l,u,p,d))}return this}function zo(n){var e=[],r=[],i;for(this._root&&e.push(new D(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var a=i.node;if(a.length){var o,s=i.x0,l=i.y0,c=i.z0,f=i.x1,h=i.y1,u=i.z1,p=(s+f)/2,d=(l+h)/2,y=(c+u)/2;(o=a[0])&&e.push(new D(o,s,l,c,p,d,y)),(o=a[1])&&e.push(new D(o,p,l,c,f,d,y)),(o=a[2])&&e.push(new D(o,s,d,c,p,h,y)),(o=a[3])&&e.push(new D(o,p,d,c,f,h,y)),(o=a[4])&&e.push(new D(o,s,l,y,p,d,u)),(o=a[5])&&e.push(new D(o,p,l,y,f,d,u)),(o=a[6])&&e.push(new D(o,s,d,y,p,h,u)),(o=a[7])&&e.push(new D(o,p,d,y,f,h,u))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function Do(n){return n[0]}function Io(n){return arguments.length?(this._x=n,this):this._x}function $o(n){return n[1]}function Fo(n){return arguments.length?(this._y=n,this):this._y}function Lo(n){return n[2]}function Uo(n){return arguments.length?(this._z=n,this):this._z}function ir(n,e,r,i){var a=new Dt(e??Do,r??$o,i??Lo,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?a:a.addAll(n)}function Dt(n,e,r,i,a,o,s,l,c){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=a,this._z0=o,this._x1=s,this._y1=l,this._z1=c,this._root=void 0}function yn(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var H=ir.prototype=Dt.prototype;H.copy=function(){var n=new Dt(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=yn(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var a=0;a<8;++a)(i=e.source[a])&&(i.length?r.push({source:i,target:e.target[a]=new Array(8)}):e.target[a]=yn(i));return n};H.add=wo;H.addAll=ko;H.cover=jo;H.data=Ao;H.extent=No;H.find=Co;H.findAllWithinRadius=Po;H.remove=Oo;H.removeAll=Mo;H.root=To;H.size=Eo;H.visit=Ro;H.visitAfter=zo;H.x=Io;H.y=Fo;H.z=Uo;function fe(n){return function(){return n}}function ce(n){return(n()-.5)*1e-6}function qo(n){return n.index}function vn(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function Ho(n){var e=qo,r=p,i,a=fe(30),o,s,l,c,f,h,u=1;n==null&&(n=[]);function p(g){return 1/Math.min(c[g.source.index],c[g.target.index])}function d(g){for(var b=0,k=n.length;b<u;++b)for(var N=0,w,j,A,C=0,T=0,P=0,M,O;N<k;++N)w=n[N],j=w.source,A=w.target,C=A.x+A.vx-j.x-j.vx||ce(h),l>1&&(T=A.y+A.vy-j.y-j.vy||ce(h)),l>2&&(P=A.z+A.vz-j.z-j.vz||ce(h)),M=Math.sqrt(C*C+T*T+P*P),M=(M-o[N])/M*g*i[N],C*=M,T*=M,P*=M,A.vx-=C*(O=f[N]),l>1&&(A.vy-=T*O),l>2&&(A.vz-=P*O),j.vx+=C*(O=1-O),l>1&&(j.vy+=T*O),l>2&&(j.vz+=P*O)}function y(){if(s){var g,b=s.length,k=n.length,N=new Map(s.map((j,A)=>[e(j,A,s),j])),w;for(g=0,c=new Array(b);g<k;++g)w=n[g],w.index=g,typeof w.source!="object"&&(w.source=vn(N,w.source)),typeof w.target!="object"&&(w.target=vn(N,w.target)),c[w.source.index]=(c[w.source.index]||0)+1,c[w.target.index]=(c[w.target.index]||0)+1;for(g=0,f=new Array(k);g<k;++g)w=n[g],f[g]=c[w.source.index]/(c[w.source.index]+c[w.target.index]);i=new Array(k),_(),o=new Array(k),m()}}function _(){if(s)for(var g=0,b=n.length;g<b;++g)i[g]=+r(n[g],g,n)}function m(){if(s)for(var g=0,b=n.length;g<b;++g)o[g]=+a(n[g],g,n)}return d.initialize=function(g,...b){s=g,h=b.find(k=>typeof k=="function")||Math.random,l=b.find(k=>[1,2,3].includes(k))||2,y()},d.links=function(g){return arguments.length?(n=g,y(),d):n},d.id=function(g){return arguments.length?(e=g,d):e},d.iterations=function(g){return arguments.length?(u=+g,d):u},d.strength=function(g){return arguments.length?(r=typeof g=="function"?g:fe(+g),_(),d):r},d.distance=function(g){return arguments.length?(a=typeof g=="function"?g:fe(+g),m(),d):a},d}const Go=1664525,Wo=1013904223,mn=4294967296;function Vo(){let n=1;return()=>(n=(Go*n+Wo)%mn)/mn}var xn=3;function ut(n){return n.x}function _n(n){return n.y}function Bo(n){return n.z}var Ko=10,Zo=Math.PI*(3-Math.sqrt(5)),Qo=Math.PI*20/(9+Math.sqrt(221));function Xo(n,e){e=e||2;var r=Math.min(xn,Math.max(1,Math.round(e))),i,a=1,o=.001,s=1-Math.pow(o,1/300),l=0,c=.6,f=new Map,h=Ar(d),u=Nr("tick","end"),p=Vo();n==null&&(n=[]);function d(){y(),u.call("tick",i),a<o&&(h.stop(),u.call("end",i))}function y(g){var b,k=n.length,N;g===void 0&&(g=1);for(var w=0;w<g;++w)for(a+=(l-a)*s,f.forEach(function(j){j(a)}),b=0;b<k;++b)N=n[b],N.fx==null?N.x+=N.vx*=c:(N.x=N.fx,N.vx=0),r>1&&(N.fy==null?N.y+=N.vy*=c:(N.y=N.fy,N.vy=0)),r>2&&(N.fz==null?N.z+=N.vz*=c:(N.z=N.fz,N.vz=0));return i}function _(){for(var g=0,b=n.length,k;g<b;++g){if(k=n[g],k.index=g,k.fx!=null&&(k.x=k.fx),k.fy!=null&&(k.y=k.fy),k.fz!=null&&(k.z=k.fz),isNaN(k.x)||r>1&&isNaN(k.y)||r>2&&isNaN(k.z)){var N=Ko*(r>2?Math.cbrt(.5+g):r>1?Math.sqrt(.5+g):g),w=g*Zo,j=g*Qo;r===1?k.x=N:r===2?(k.x=N*Math.cos(w),k.y=N*Math.sin(w)):(k.x=N*Math.sin(w)*Math.cos(j),k.y=N*Math.cos(w),k.z=N*Math.sin(w)*Math.sin(j))}(isNaN(k.vx)||r>1&&isNaN(k.vy)||r>2&&isNaN(k.vz))&&(k.vx=0,r>1&&(k.vy=0),r>2&&(k.vz=0))}}function m(g){return g.initialize&&g.initialize(n,p,r),g}return _(),i={tick:y,restart:function(){return h.restart(d),i},stop:function(){return h.stop(),i},numDimensions:function(g){return arguments.length?(r=Math.min(xn,Math.max(1,Math.round(g))),f.forEach(m),i):r},nodes:function(g){return arguments.length?(n=g,_(),f.forEach(m),i):n},alpha:function(g){return arguments.length?(a=+g,i):a},alphaMin:function(g){return arguments.length?(o=+g,i):o},alphaDecay:function(g){return arguments.length?(s=+g,i):+s},alphaTarget:function(g){return arguments.length?(l=+g,i):l},velocityDecay:function(g){return arguments.length?(c=1-g,i):1-c},randomSource:function(g){return arguments.length?(p=g,f.forEach(m),i):p},force:function(g,b){return arguments.length>1?(b==null?f.delete(g):f.set(g,m(b)),i):f.get(g)},find:function(){var g=Array.prototype.slice.call(arguments),b=g.shift()||0,k=(r>1?g.shift():null)||0,N=(r>2?g.shift():null)||0,w=g.shift()||1/0,j=0,A=n.length,C,T,P,M,O,R;for(w*=w,j=0;j<A;++j)O=n[j],C=b-O.x,T=k-(O.y||0),P=N-(O.z||0),M=C*C+T*T+P*P,M<w&&(R=O,w=M);return R},on:function(g,b){return arguments.length>1?(u.on(g,b),i):u.on(g)}}}function Yo(){var n,e,r,i,a,o=fe(-30),s,l=1,c=1/0,f=.81;function h(y){var _,m=n.length,g=(e===1?er(n,ut):e===2?nr(n,ut,_n):e===3?ir(n,ut,_n,Bo):null).visitAfter(p);for(a=y,_=0;_<m;++_)r=n[_],g.visit(d)}function u(){if(n){var y,_=n.length,m;for(s=new Array(_),y=0;y<_;++y)m=n[y],s[m.index]=+o(m,y,n)}}function p(y){var _=0,m,g,b=0,k,N,w,j,A=y.length;if(A){for(k=N=w=j=0;j<A;++j)(m=y[j])&&(g=Math.abs(m.value))&&(_+=m.value,b+=g,k+=g*(m.x||0),N+=g*(m.y||0),w+=g*(m.z||0));_*=Math.sqrt(4/A),y.x=k/b,e>1&&(y.y=N/b),e>2&&(y.z=w/b)}else{m=y,m.x=m.data.x,e>1&&(m.y=m.data.y),e>2&&(m.z=m.data.z);do _+=s[m.data.index];while(m=m.next)}y.value=_}function d(y,_,m,g,b){if(!y.value)return!0;var k=[m,g,b][e-1],N=y.x-r.x,w=e>1?y.y-r.y:0,j=e>2?y.z-r.z:0,A=k-_,C=N*N+w*w+j*j;if(A*A/f<C)return C<c&&(N===0&&(N=ce(i),C+=N*N),e>1&&w===0&&(w=ce(i),C+=w*w),e>2&&j===0&&(j=ce(i),C+=j*j),C<l&&(C=Math.sqrt(l*C)),r.vx+=N*y.value*a/C,e>1&&(r.vy+=w*y.value*a/C),e>2&&(r.vz+=j*y.value*a/C)),!0;if(y.length||C>=c)return;(y.data!==r||y.next)&&(N===0&&(N=ce(i),C+=N*N),e>1&&w===0&&(w=ce(i),C+=w*w),e>2&&j===0&&(j=ce(i),C+=j*j),C<l&&(C=Math.sqrt(l*C)));do y.data!==r&&(A=s[y.data.index]*a/C,r.vx+=N*A,e>1&&(r.vy+=w*A),e>2&&(r.vz+=j*A));while(y=y.next)}return h.initialize=function(y,..._){n=y,i=_.find(m=>typeof m=="function")||Math.random,e=_.find(m=>[1,2,3].includes(m))||2,u()},h.strength=function(y){return arguments.length?(o=typeof y=="function"?y:fe(+y),u(),h):o},h.distanceMin=function(y){return arguments.length?(l=y*y,h):Math.sqrt(l)},h.distanceMax=function(y){return arguments.length?(c=y*y,h):Math.sqrt(c)},h.theta=function(y){return arguments.length?(f=y*y,h):Math.sqrt(f)},h}function Jo(n,e,r,i){var a,o,s=fe(.1),l,c;typeof n!="function"&&(n=fe(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function f(u){for(var p=0,d=a.length;p<d;++p){var y=a[p],_=y.x-e||1e-6,m=(y.y||0)-r||1e-6,g=(y.z||0)-i||1e-6,b=Math.sqrt(_*_+m*m+g*g),k=(c[p]-b)*l[p]*u/b;y.vx+=_*k,o>1&&(y.vy+=m*k),o>2&&(y.vz+=g*k)}}function h(){if(a){var u,p=a.length;for(l=new Array(p),c=new Array(p),u=0;u<p;++u)c[u]=+n(a[u],u,a),l[u]=isNaN(c[u])?0:+s(a[u],u,a)}}return f.initialize=function(u,...p){a=u,o=p.find(d=>[1,2,3].includes(d))||2,h()},f.strength=function(u){return arguments.length?(s=typeof u=="function"?u:fe(+u),h(),f):s},f.radius=function(u){return arguments.length?(n=typeof u=="function"?u:fe(+u),h(),f):n},f.x=function(u){return arguments.length?(e=+u,f):e},f.y=function(u){return arguments.length?(r=+u,f):r},f.z=function(u){return arguments.length?(i=+u,f):i},f}const{abs:Ce,cos:le,sin:we,acos:es,atan2:Se,sqrt:pe,pow:Q}=Math;function Pe(n){return n<0?-Q(-n,1/3):Q(n,1/3)}const ar=Math.PI,Ve=2*ar,ge=ar/2,ts=1e-6,ct=Number.MAX_SAFE_INTEGER||9007199254740991,ft=Number.MIN_SAFE_INTEGER||-9007199254740991,ns={x:0,y:0,z:0},S={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),pe(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const a=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:a*o[0].x+n*o[1].x,y:a*o[0].y+n*o[1].y,t:n};return r&&(l.z=a*o[0].z+n*o[1].z),l}if(i<4){let l=a*a,c=n*n,f,h,u,p=0;i===2?(o=[o[0],o[1],o[2],ns],f=l,h=a*n*2,u=c):i===3&&(f=l*a,h=l*n*3,u=a*c*3,p=n*c);const d={x:f*o[0].x+h*o[1].x+u*o[2].x+p*o[3].x,y:f*o[0].y+h*o[1].y+u*o[2].y+p*o[3].y,t:n};return r&&(d.z=f*o[0].z+h*o[1].z+u*o[2].z+p*o[3].z),d}const s=JSON.parse(JSON.stringify(e));for(;s.length>1;){for(let l=0;l<s.length-1;l++)s[l]={x:s[l].x+(s[l+1].x-s[l].x)*n,y:s[l].y+(s[l+1].y-s[l].y)*n},typeof s[l].z<"u"&&(s[l].z=s[l].z+(s[l+1].z-s[l].z)*n);s.splice(s.length-1,1)}return s[0].t=n,s[0]},computeWithRatios:function(n,e,r,i){const a=1-n,o=r,s=e;let l=o[0],c=o[1],f=o[2],h=o[3],u;if(l*=a,c*=n,s.length===2)return u=l+c,{x:(l*s[0].x+c*s[1].x)/u,y:(l*s[0].y+c*s[1].y)/u,z:i?(l*s[0].z+c*s[1].z)/u:!1,t:n};if(l*=a,c*=2*a,f*=n*n,s.length===3)return u=l+c+f,{x:(l*s[0].x+c*s[1].x+f*s[2].x)/u,y:(l*s[0].y+c*s[1].y+f*s[2].y)/u,z:i?(l*s[0].z+c*s[1].z+f*s[2].z)/u:!1,t:n};if(l*=a,c*=1.5*a,f*=3*a,h*=n*n*n,s.length===4)return u=l+c+f+h,{x:(l*s[0].x+c*s[1].x+f*s[2].x+h*s[3].x)/u,y:(l*s[0].y+c*s[1].y+f*s[2].y+h*s[3].y)/u,z:i?(l*s[0].z+c*s[1].z+f*s[2].z+h*s[3].z)/u:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,a=i.length,o=a-1;a>1;a--,o--){const s=[];for(let l=0,c;l<o;l++)c={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(c.z=o*(i[l+1].z-i[l].z)),s.push(c);r.push(s),i=s}return r},between:function(n,e,r){return e<=n&&n<=r||S.approximately(n,e)||S.approximately(n,r)},approximately:function(n,e,r){return Ce(n-e)<=(r||ts)},length:function(n){const r=S.Tvalues.length;let i=0;for(let a=0,o;a<r;a++)o=.5*S.Tvalues[a]+.5,i+=S.Cvalues[a]*S.arcfn(o,n);return .5*i},map:function(n,e,r,i,a){const o=r-e,s=a-i,l=n-e,c=l/o;return i+s*c},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(S.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,a=e.y-n.y,o=r.x-n.x,s=r.y-n.y,l=i*s-a*o,c=i*o+a*s;return Se(l,c)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return pe(r*r+i*i)},closest:function(n,e){let r=Q(2,63),i,a;return n.forEach(function(o,s){a=S.dist(e,o),a<r&&(r=a,i=s)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Q(n,e)+Q(1-n,e),i=r-1;return Ce(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Q(1-n,e),i=Q(n,e)+r;return r/i},lli8:function(n,e,r,i,a,o,s,l){const c=(n*i-e*r)*(a-s)-(n-r)*(a*l-o*s),f=(n*i-e*r)*(o-l)-(e-i)*(a*l-o*s),h=(n-r)*(o-l)-(e-i)*(a-s);return h==0?!1:{x:c/h,y:f/h}},lli4:function(n,e,r,i){const a=n.x,o=n.y,s=e.x,l=e.y,c=r.x,f=r.y,h=i.x,u=i.y;return S.lli8(a,o,s,l,c,f,h,u)},lli:function(n,e){return S.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new F(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=ct,r=ct,i=ft,a=ft;return n.forEach(function(o){const s=o.bbox();e>s.x.min&&(e=s.x.min),r>s.y.min&&(r=s.y.min),i<s.x.max&&(i=s.x.max),a<s.y.max&&(a=s.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+a)/2,max:a,size:a-r}}},shapeintersections:function(n,e,r,i,a){if(!S.bboxoverlap(e,i))return[];const o=[],s=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return s.forEach(function(c){c.virtual||l.forEach(function(f){if(f.virtual)return;const h=c.intersects(f,a);h.length>0&&(h.c1=c,h.c2=f,h.s1=n,h.s2=r,o.push(h))})}),o},makeshape:function(n,e,r){const i=e.points.length,a=n.points.length,o=S.makeline(e.points[i-1],n.points[0]),s=S.makeline(n.points[a-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:s,bbox:S.findbbox([o,n,e,s])};return l.intersections=function(c){return S.shapeintersections(l,l.bbox,c,c.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=ct,a=ft,o,s;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,c=r.length;l<c;l++)o=r[l],s=n.get(o),s[e]<i&&(i=s[e]),s[e]>a&&(a=s[e]);return{min:i,mid:(i+a)/2,max:a,size:a-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,a=-Se(e.p2.y-i,e.p2.x-r),o=function(s){return{x:(s.x-r)*le(a)-(s.y-i)*we(a),y:(s.x-r)*we(a)+(s.y-i)*le(a)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=S.align(n,e),a=function(A){return 0<=A&&A<=1};if(r===2){const A=i[0].y,C=i[1].y,T=i[2].y,P=A-2*C+T;if(P!==0){const M=-pe(C*C-A*T),O=-A+C,R=-(M+O)/P,$=-(-M+O)/P;return[R,$].filter(a)}else if(C!==T&&P===0)return[(2*C-T)/(2*C-2*T)].filter(a);return[]}const o=i[0].y,s=i[1].y,l=i[2].y,c=i[3].y;let f=-o+3*s-3*l+c,h=3*o-6*s+3*l,u=-3*o+3*s,p=o;if(S.approximately(f,0)){if(S.approximately(h,0))return S.approximately(u,0)?[]:[-p/u].filter(a);const A=pe(u*u-4*h*p),C=2*h;return[(A-u)/C,(-u-A)/C].filter(a)}h/=f,u/=f,p/=f;const d=(3*u-h*h)/3,y=d/3,_=(2*h*h*h-9*h*u+27*p)/27,m=_/2,g=m*m+y*y*y;let b,k,N,w,j;if(g<0){const A=-d/3,C=A*A*A,T=pe(C),P=-_/(2*T),M=P<-1?-1:P>1?1:P,O=es(M),R=Pe(T),$=2*R;return N=$*le(O/3)-h/3,w=$*le((O+Ve)/3)-h/3,j=$*le((O+2*Ve)/3)-h/3,[N,w,j].filter(a)}else{if(g===0)return b=m<0?Pe(-m):-Pe(m),N=2*b-h/3,w=-b-h/3,[N,w].filter(a);{const A=pe(g);return b=Pe(-m+A),k=Pe(m+A),[b-k-h/3].filter(a)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],a=e-2*r+i;if(a!==0){const o=-pe(r*r-e*i),s=-e+r,l=-(o+s)/a,c=-(-o+s)/a;return[l,c]}else if(r!==i&&a===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,a){let o,s,l,c,f=0,h=0;const u=S.compute(n,e),p=S.compute(n,r),d=u.x*u.x+u.y*u.y;if(i?(o=pe(Q(u.y*p.z-p.y*u.z,2)+Q(u.z*p.x-p.z*u.x,2)+Q(u.x*p.y-p.x*u.y,2)),s=Q(d+u.z*u.z,3/2)):(o=u.x*p.y-u.y*p.x,s=Q(d,3/2)),o===0||s===0)return{k:0,r:0};if(f=o/s,h=s/o,!a){const y=S.curvature(n-.001,e,r,i,!0).k,_=S.curvature(n+.001,e,r,i,!0).k;c=(_-f+(f-y))/2,l=(Ce(_-f)+Ce(f-y))/2}return{k:f,r:h,dk:c,adk:l}},inflections:function(n){if(n.length<4)return[];const e=S.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,a=e[1].x*e[2].y,o=e[3].x*e[2].y,s=18*(-3*r+2*i+3*a-o),l=18*(3*r-i-3*a),c=18*(a-r);if(S.approximately(s,0)){if(!S.approximately(l,0)){let p=-c/l;if(0<=p&&p<=1)return[p]}return[]}const f=2*s;if(S.approximately(f,0))return[];const h=l*l-4*s*c;if(h<0)return[];const u=Math.sqrt(h);return[(u-l)/f,-(l+u)/f].filter(function(p){return 0<=p&&p<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let a=0,o,s,l,c;a<i;a++)if(o=r[a],s=n[o].mid,l=e[o].mid,c=(n[o].size+e[o].size)/2,Ce(s-l)>=c)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),a=e.bbox(),o=1e5,s=r||.5;if(i.x.size+i.y.size<s&&a.x.size+a.y.size<s)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),c=e.split(.5),f=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];f=f.filter(function(u){return S.bboxoverlap(u.left.bbox(),u.right.bbox())});let h=[];return f.length===0||(f.forEach(function(u){h=h.concat(S.pairiteration(u.left,u.right,s))}),h=h.filter(function(u,p){return h.indexOf(u)===p})),h},getccenter:function(n,e,r){const i=e.x-n.x,a=e.y-n.y,o=r.x-e.x,s=r.y-e.y,l=i*le(ge)-a*we(ge),c=i*we(ge)+a*le(ge),f=o*le(ge)-s*we(ge),h=o*we(ge)+s*le(ge),u=(n.x+e.x)/2,p=(n.y+e.y)/2,d=(e.x+r.x)/2,y=(e.y+r.y)/2,_=u+l,m=p+c,g=d+f,b=y+h,k=S.lli8(u,p,_,m,d,y,g,b),N=S.dist(k,n);let w=Se(n.y-k.y,n.x-k.x),j=Se(e.y-k.y,e.x-k.x),A=Se(r.y-k.y,r.x-k.x),C;return w<A?((w>j||j>A)&&(w+=Ve),w>A&&(C=A,A=w,w=C)):A<j&&j<w?(C=A,A=w,w=C):A+=Ve,k.s=w,k.e=A,k.r=N,k},numberSort:function(n,e){return n-e}};class ze{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return S.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)S.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new ze(r)}}const{abs:Oe,min:bn,max:wn,cos:rs,sin:is,acos:as,sqrt:Me}=Math,os=Math.PI;class F{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const d=[];r.forEach(function(y){["x","y","z"].forEach(function(_){typeof y[_]<"u"&&d.push(y[_])})}),r=d}let a=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const s=this._3d=!a&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let d=0,y=s?3:2;d<o;d+=y){var c={x:r[d],y:r[d+1]};s&&(c.z=r[d+2]),l.push(c)}const f=this.order=l.length-1,h=this.dims=["x","y"];s&&h.push("z"),this.dimlen=h.length;const u=S.align(l,{p1:l[0],p2:l[f]}),p=S.dist(l[0],l[f]);this._linear=u.reduce((d,y)=>d+Oe(y.y),0)<p/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,a){if(typeof a>"u"&&(a=.5),a===0)return new F(r,r,i);if(a===1)return new F(e,r,r);const o=F.getABC(2,e,r,i,a);return new F(e,o.A,i)}static cubicFromPoints(e,r,i,a,o){typeof a>"u"&&(a=.5);const s=F.getABC(3,e,r,i,a);typeof o>"u"&&(o=S.dist(r,s.C));const l=o*(1-a)/a,c=S.dist(e,i),f=(i.x-e.x)/c,h=(i.y-e.y)/c,u=o*f,p=o*h,d=l*f,y=l*h,_={x:r.x-u,y:r.y-p},m={x:r.x+d,y:r.y+y},g=s.A,b={x:g.x+(_.x-g.x)/(1-a),y:g.y+(_.y-g.y)/(1-a)},k={x:g.x+(m.x-g.x)/a,y:g.y+(m.y-g.y)/a},N={x:e.x+(b.x-e.x)/a,y:e.y+(b.y-e.y)/a},w={x:i.x+(k.x-i.x)/(1-a),y:i.y+(k.y-i.y)/(1-a)};return new F(e,N,w,i)}static getUtils(){return S}getUtils(){return F.getUtils()}static get PolyBezier(){return ze}valueOf(){return this.toString()}toString(){return S.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,a=["M",r,i,this.order===2?"Q":"C"];for(let o=1,s=e.length;o<s;o++)a.push(e[o].x),a.push(e[o].y);return a.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=S.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=S.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return S.length(this.derivative.bind(this))}static getABC(e=2,r,i,a,o=.5){const s=S.projectionratio(o,e),l=1-s,c={x:s*r.x+l*a.x,y:s*r.y+l*a.y},f=S.abcratio(o,e);return{A:{x:i.x+(i.x-c.x)/f,y:i.y+(i.y-c.y)/f},B:i,C:c,S:r,E:a}}getABC(e,r){r=r||this.get(e);let i=this.points[0],a=this.points[this.order];return F.getABC(this.order,i,r,a,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,a;r<e;r++)a=r/(e-1),i=this.compute(a),i.t=a,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),a=[];for(let o=0,s,l=0;o<i.length;o++)s=i[o],S.dist(s,e)<r&&(a.push(s),l+=o/i.length);return a.length?t/=a.length:!1}project(e){const r=this.getLUT(),i=r.length-1,a=S.closest(r,e),o=a.mpos,s=(o-1)/i,l=(o+1)/i,c=.1/i;let f=a.mdist,h=s,u=h,p;f+=1;for(let d;h<l+c;h+=c)p=this.compute(h),d=S.dist(e,p),d<f&&(f=d,u=h);return u=u<0?0:u>1?1:u,p=this.compute(u),p.t=u,p.d=f,p}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?S.computeWithRatios(e,this.points,this.ratios,this._3d):S.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let a=1,o,s;a<i;a++)o=e[a],s=e[a-1],r[a]={x:(i-a)/i*o.x+a/i*s.x,y:(i-a)/i*o.y+a/i*s.y};return r[i]=e[i-1],new F(r)}derivative(e){return S.compute(e,this.dpoints[0],this._3d)}dderivative(e){return S.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new F(S.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return S.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return S.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Me(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),a=Me(r.x*r.x+r.y*r.y+r.z*r.z),o=Me(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=a,r.y/=a,r.z/=a,i.x/=o,i.y/=o,i.z/=o;const s={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Me(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=l,s.y/=l,s.z/=l;const c=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:e,x:c[0]*r.x+c[1]*r.y+c[2]*r.z,y:c[3]*r.x+c[4]*r.y+c[5]*r.z,z:c[6]*r.x+c[7]*r.y+c[8]*r.z}}hull(e){let r=this.points,i=[],a=[],o=0;for(a[o++]=r[0],a[o++]=r[1],a[o++]=r[2],this.order===3&&(a[o++]=r[3]);r.length>1;){i=[];for(let s=0,l,c=r.length-1;s<c;s++)l=S.lerp(e,r[s],r[s+1]),a[o++]=l,i.push(l);r=i}return a}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),a={left:this.order===2?new F([i[0],i[3],i[5]]):new F([i[0],i[4],i[7],i[9]]),right:this.order===2?new F([i[5],i[4],i[2]]):new F([i[9],i[8],i[6],i[3]]),span:i};return a.left._t1=S.map(0,0,1,this._t1,this._t2),a.left._t2=S.map(e,0,1,this._t1,this._t2),a.right._t1=S.map(e,0,1,this._t1,this._t2),a.right._t2=S.map(1,0,1,this._t1,this._t2),r?(r=S.map(r,e,1,0,1),a.right.split(r).left):a}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let a=function(s){return s[i]},o=this.dpoints[0].map(a);e[i]=S.droots(o),this.order===3&&(o=this.dpoints[1].map(a),e[i]=e[i].concat(S.droots(o))),e[i]=e[i].filter(function(s){return s>=0&&s<=1}),r=r.concat(e[i].sort(S.numberSort))}).bind(this)),e.values=r.sort(S.numberSort).filter(function(i,a){return r.indexOf(i)===a}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=S.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return S.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),a=this.normal(e),o={c:i,n:a,x:i.x+a.x*r,y:i.y+a.y*r};return this._3d&&(o.z=i.z+a.z*r),o}if(this._linear){const i=this.normal(0),a=this.points.map(function(o){const s={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(s.z=o.z+e*i.z),s});return[new F(a)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const a=S.angle(this.points[0],this.points[3],this.points[1]),o=S.angle(this.points[0],this.points[3],this.points[2]);if(a>0&&o<0||a<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),Oe(as(i))<os/3}reduce(){let e,r=0,i=0,a=.01,o,s=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),r=c[0],e=1;e<c.length;e++)i=c[e],o=this.split(r,i),o._t1=r,o._t2=i,s.push(o),r=i;return s.forEach(function(f){for(r=0,i=0;i<=1;)for(i=r+a;i<=1+a;i+=a)if(o=f.split(r,i),!o.simple()){if(i-=a,Oe(r-i)<a)return[];o=f.split(r,i),o._t1=S.map(r,0,1,f._t1,f._t2),o._t2=S.map(i,0,1,f._t1,f._t2),l.push(o),r=i;break}r<1&&(o=f.split(r,1),o._t1=S.map(r,0,1,f._t1,f._t2),o._t2=f._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const a=this.order;let o=this.points.map((s,l)=>(1-l/a)*r+l/a*i);return new F(this.points.map((s,l)=>({x:s.x+e.x*o[l],y:s.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const a=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const s=i?i(0):e,l=i?i(1):e,c=[this.offset(0,10),this.offset(1,10)],f=[],h=S.lli4(c[0],c[0].c,c[1],c[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(u){const p=f[u*r]=S.copy(o[u*r]);p.x+=(u?l:s)*c[u].n.x,p.y+=(u?l:s)*c[u].n.y}),i?([0,1].forEach(function(u){if(!(r===2&&u)){var p=o[u+1],d={x:p.x-h.x,y:p.y-h.y},y=i?i((u+1)/r):e;i&&!a&&(y=-y);var _=Me(d.x*d.x+d.y*d.y);d.x/=_,d.y/=_,f[u+1]={x:p.x+y*d.x,y:p.y+y*d.y}}}),new F(f)):([0,1].forEach(u=>{if(r===2&&u)return;const p=f[u*r],d=this.derivative(u),y={x:p.x+d.x,y:p.y+d.y};f[u+1]=S.lli4(p,y,h,o[u+1])}),new F(f))}outline(e,r,i,a){if(r=r===void 0?e:r,this._linear){const w=this.normal(0),j=this.points[0],A=this.points[this.points.length-1];let C,T,P;i===void 0&&(i=e,a=r),C={x:j.x+w.x*e,y:j.y+w.y*e},P={x:A.x+w.x*i,y:A.y+w.y*i},T={x:(C.x+P.x)/2,y:(C.y+P.y)/2};const M=[C,T,P];C={x:j.x-w.x*r,y:j.y-w.y*r},P={x:A.x-w.x*a,y:A.y-w.y*a},T={x:(C.x+P.x)/2,y:(C.y+P.y)/2};const O=[P,T,C],R=S.makeline(O[2],M[0]),$=S.makeline(M[2],O[0]),q=[R,new F(M),$,new F(O)];return new ze(q)}const o=this.reduce(),s=o.length,l=[];let c=[],f,h=0,u=this.length();const p=typeof i<"u"&&typeof a<"u";function d(w,j,A,C,T){return function(P){const M=C/A,O=(C+T)/A,R=j-w;return S.map(P,0,1,w+M*R,w+O*R)}}o.forEach(function(w){const j=w.length();p?(l.push(w.scale(d(e,i,u,h,j))),c.push(w.scale(d(-r,-a,u,h,j)))):(l.push(w.scale(e)),c.push(w.scale(-r))),h+=j}),c=c.map(function(w){return f=w.points,f[3]?w.points=[f[3],f[2],f[1],f[0]]:w.points=[f[2],f[1],f[0]],w}).reverse();const y=l[0].points[0],_=l[s-1].points[l[s-1].points.length-1],m=c[s-1].points[c[s-1].points.length-1],g=c[0].points[0],b=S.makeline(m,y),k=S.makeline(_,g),N=[b].concat(l).concat([k]).concat(c);return new ze(N)}outlineshapes(e,r,i){r=r||e;const a=this.outline(e,r).curves,o=[];for(let s=1,l=a.length;s<l/2;s++){const c=S.makeshape(a[s],a[l-s],i);c.startcap.virtual=s>1,c.endcap.virtual=s<l/2-1,o.push(c)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof F&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=bn(e.p1.x,e.p2.x),i=bn(e.p1.y,e.p2.y),a=wn(e.p1.x,e.p2.x),o=wn(e.p1.y,e.p2.y);return S.roots(this.points,e).filter(s=>{var l=this.get(s);return S.between(l.x,r,a)&&S.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,a=[];for(let o=0,s,l,c;o<i;o++)l=r.slice(o,o+1),c=r.slice(o+2),s=this.curveintersects(l,c,e),a.push(...s);return a}curveintersects(e,r,i){const a=[];e.forEach(function(s){r.forEach(function(l){s.overlaps(l)&&a.push({left:s,right:l})})});let o=[];return a.forEach(function(s){const l=S.pairiteration(s.left,s.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,a){const o=(a-i)/4,s=this.get(i+o),l=this.get(a-o),c=S.dist(e,r),f=S.dist(e,s),h=S.dist(e,l);return Oe(f-c)+Oe(h-c)}_iterate(e,r){let i=0,a=1,o;do{o=0,a=1;let s=this.get(i),l,c,f,h,u=!1,p=!1,d,y=a,_=1;do if(p=u,h=f,y=(i+a)/2,l=this.get(y),c=this.get(a),f=S.getccenter(s,l,c),f.interval={start:i,end:a},u=this._error(f,s,i,a)<=e,d=p&&!u,d||(_=a),u){if(a>=1){if(f.interval.end=_=1,h=f,a>1){let g={x:f.x+f.r*rs(f.e),y:f.y+f.r*is(f.e)};f.e+=S.angle({x:f.x,y:f.y},g,this.get(1))}break}a=a+(a-i)/2}else a=y;while(!d&&o++<100);if(o>=100)break;h=h||f,r.push(h),i=_}while(a<1);return r}}function jt(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function ss(n){if(Array.isArray(n))return n}function ls(n){if(Array.isArray(n))return jt(n)}function us(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function cs(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,f=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw a}}return l}}function fs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ds(n,e){if(n==null)return{};var r,i,a=ps(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(a[r]=n[r])}return a}function ps(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function gs(n,e){return ss(n)||cs(n,e)||or(n,e)||fs()}function ys(n){return ls(n)||us(n)||or(n)||hs()}function vs(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function ms(n){var e=vs(n,"string");return typeof e=="symbol"?e:e+""}function or(n,e){if(n){if(typeof n=="string")return jt(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(n,e):void 0}}var xs=(function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),o=n.reduce(function(l,c){var f=l,h=c;return a.forEach(function(u,p){var d=u.keyAccessor,y=u.isProp,_;if(y){var m=h,g=m[d],b=ds(m,[d].map(ms));_=g,h=b}else _=d(h,p);p+1<a.length?(f.hasOwnProperty(_)||(f[_]={}),f=f[_]):r?(f.hasOwnProperty(_)||(f[_]=[]),f[_].push(h)):f[_]=h}),l},{});r instanceof Function&&(function l(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;f===a.length?Object.keys(c).forEach(function(h){return c[h]=r(c[h])}):Object.values(c).forEach(function(h){return l(h,f+1)})})(o);var s=o;return i&&(s=[],(function l(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];f.length===a.length?s.push({keys:f,vals:c}):Object.entries(c).forEach(function(h){var u=gs(h,2),p=u[0],d=u[1];return l(d,[].concat(ys(f),[p]))})})(o),e instanceof Array&&e.length===0&&s.length===1&&(s[0].keys=[])),s});function _s(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const bs=_s("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function ws(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}var ks=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;ws(ks);function At(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function js(n){if(Array.isArray(n))return n}function As(n){if(Array.isArray(n))return At(n)}function kn(n,e,r){if(sr())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var a=new(n.bind.apply(n,i));return a}function $e(n,e,r){return(e=Ms(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function sr(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sr=function(){return!!n})()}function Ns(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Cs(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,f=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw a}}return l}}function Ss(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ps(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jn(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function ke(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jn(Object(r),!0).forEach(function(i){$e(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function De(n,e){return js(n)||Cs(n,e)||lr(n,e)||Ss()}function X(n){return As(n)||Ns(n)||lr(n)||Ps()}function Os(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ms(n){var e=Os(n,"string");return typeof e=="symbol"?e:e+""}function Nt(n){"@babel/helpers - typeof";return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(n)}function lr(n,e){if(n){if(typeof n=="string")return At(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?At(n,e):void 0}}var Ts=Pr(bs);function An(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=Ts(e(i))})}function Es(n,e){var r=n.nodes,i=n.links,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=a.nodeFilter,s=o===void 0?function(){return!0}:o,l=a.onLoopError,c=l===void 0?function(d){throw"Invalid DAG structure! Found cycle in node path: ".concat(d.join(" -> "),".")}:l,f={};r.forEach(function(d){return f[e(d)]={data:d,out:[],depth:-1,skip:!s(d)}}),i.forEach(function(d){var y=d.source,_=d.target,m=N(y),g=N(_);if(!f.hasOwnProperty(m))throw"Missing source node with id: ".concat(m);if(!f.hasOwnProperty(g))throw"Missing target node with id: ".concat(g);var b=f[m],k=f[g];b.out.push(k);function N(w){return Nt(w)==="object"?e(w):w}});var h=[];p(Object.values(f));var u=Object.assign.apply(Object,[{}].concat(X(Object.entries(f).filter(function(d){var y=De(d,2),_=y[1];return!_.skip}).map(function(d){var y=De(d,2),_=y[0],m=y[1];return $e({},_,m.depth)}))));return u;function p(d){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,m=function(){var N=d[g];if(y.indexOf(N)!==-1){var w=[].concat(X(y.slice(y.indexOf(N))),[N]).map(function(j){return e(j.data)});return h.some(function(j){return j.length===w.length&&j.every(function(A,C){return A===w[C]})})||(h.push(w),c(w)),1}_>N.depth&&(N.depth=_,p(N.out,[].concat(X(y),[N]),_+(N.skip?0:1)))},g=0,b=d.length;g<b;g++)m()}}var Rs=2,G=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Nn=function(e,r){if(!r.isShadow){var i=z(r.linkDirectionalParticles);r.graphData.links.forEach(function(a){var o=Math.round(Math.abs(i(a)));o?a.__photons=X(Array(o)).map(function(){return{}}):delete a.__photons})}},et=Pt({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,Nn(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:G},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:G},nodeColor:{default:"color",triggerUpdate:!1,onChange:G},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:G},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:G},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:G},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:G},linkColor:{default:"color",triggerUpdate:!1,onChange:G},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:G},linkWidth:{default:1,triggerUpdate:!1,onChange:G},linkCurvature:{default:0,triggerUpdate:!1,onChange:G},linkCanvasObject:{triggerUpdate:!1,onChange:G},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:G},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:G},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:G},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:G},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Nn},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),a(),!e.isShadow&&o(),!e.isShadow&&s(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=z(e.nodeVisibility),c=z(e.nodeVal),f=z(e.nodeColor),h=z(e.nodeCanvasObjectMode),u=e.ctx,p=e.isShadow/e.globalScale,d=e.graphData.nodes.filter(l);u.save(),d.forEach(function(y){var _=h(y);if(e.nodeCanvasObject&&(_==="before"||_==="replace")&&(e.nodeCanvasObject(y,u,e.globalScale),_==="replace")){u.restore();return}var m=Math.sqrt(Math.max(0,c(y)||1))*e.nodeRelSize+p;u.beginPath(),u.arc(y.x,y.y,m,0,2*Math.PI,!1),u.fillStyle=f(y)||"rgba(31, 120, 180, 0.92)",u.fill(),e.nodeCanvasObject&&_==="after"&&e.nodeCanvasObject(y,e.ctx,e.globalScale)}),u.restore()}function a(){var l=z(e.linkVisibility),c=z(e.linkColor),f=z(e.linkWidth),h=z(e.linkLineDash),u=z(e.linkCurvature),p=z(e.linkCanvasObjectMode),d=e.ctx,y=e.isShadow*2,_=e.graphData.links.filter(l);_.forEach(j);var m=[],g=[],b=_;if(e.linkCanvasObject){var k=[],N=[];_.forEach(function(A){return({before:m,after:g,replace:k}[p(A)]||N).push(A)}),b=[].concat(X(m),g,N),m=m.concat(k)}d.save(),m.forEach(function(A){return e.linkCanvasObject(A,d,e.globalScale)}),d.restore();var w=xs(b,[c,f,h]);d.save(),Object.entries(w).forEach(function(A){var C=De(A,2),T=C[0],P=C[1],M=!T||T==="undefined"?"rgba(0,0,0,0.15)":T;Object.entries(P).forEach(function(O){var R=De(O,2),$=R[0],q=R[1],de=($||1)/e.globalScale+y;Object.entries(q).forEach(function(Ue){var qe=De(Ue,2);qe[0];var Ae=qe[1],ot=h(Ae[0]);d.beginPath(),Ae.forEach(function(ye){var ie=ye.source,ae=ye.target;if(!(!ie||!ae||!ie.hasOwnProperty("x")||!ae.hasOwnProperty("x"))){d.moveTo(ie.x,ie.y);var st=ye.__controlPoints;st?d[st.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(d,X(st).concat([ae.x,ae.y])):d.lineTo(ae.x,ae.y)}}),d.strokeStyle=M,d.lineWidth=de,d.setLineDash(ot||[]),d.stroke()})})}),d.restore(),d.save(),g.forEach(function(A){return e.linkCanvasObject(A,d,e.globalScale)}),d.restore();function j(A){var C=u(A);if(!C){A.__controlPoints=null;return}var T=A.source,P=A.target;if(!(!T||!P||!T.hasOwnProperty("x")||!P.hasOwnProperty("x"))){var M=Math.sqrt(Math.pow(P.x-T.x,2)+Math.pow(P.y-T.y,2));if(M>0){var O=Math.atan2(P.y-T.y,P.x-T.x),R=M*C,$={x:(T.x+P.x)/2+R*Math.cos(O-Math.PI/2),y:(T.y+P.y)/2+R*Math.sin(O-Math.PI/2)};A.__controlPoints=[$.x,$.y]}else{var q=C*70;A.__controlPoints=[P.x,P.y-q,P.x+q,P.y]}}}}function o(){var l=1.6,c=.2,f=z(e.linkDirectionalArrowLength),h=z(e.linkDirectionalArrowRelPos),u=z(e.linkVisibility),p=z(e.linkDirectionalArrowColor||e.linkColor),d=z(e.nodeVal),y=e.ctx;y.save(),e.graphData.links.filter(u).forEach(function(_){var m=f(_);if(!(!m||m<0)){var g=_.source,b=_.target;if(!(!g||!b||!g.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var k=Math.sqrt(Math.max(0,d(g)||1))*e.nodeRelSize,N=Math.sqrt(Math.max(0,d(b)||1))*e.nodeRelSize,w=Math.min(1,Math.max(0,h(_))),j=p(_)||"rgba(0,0,0,0.28)",A=m/l/2,C=_.__controlPoints&&kn(F,[g.x,g.y].concat(X(_.__controlPoints),[b.x,b.y])),T=C?function(de){return C.get(de)}:function(de){return{x:g.x+(b.x-g.x)*de||0,y:g.y+(b.y-g.y)*de||0}},P=C?C.length():Math.sqrt(Math.pow(b.x-g.x,2)+Math.pow(b.y-g.y,2)),M=k+m+(P-k-N-m)*w,O=T(M/P),R=T((M-m)/P),$=T((M-m*(1-c))/P),q=Math.atan2(O.y-R.y,O.x-R.x)-Math.PI/2;y.beginPath(),y.moveTo(O.x,O.y),y.lineTo(R.x+A*Math.cos(q),R.y+A*Math.sin(q)),y.lineTo($.x,$.y),y.lineTo(R.x-A*Math.cos(q),R.y-A*Math.sin(q)),y.fillStyle=j,y.fill()}}}),y.restore()}function s(){var l=z(e.linkDirectionalParticles),c=z(e.linkDirectionalParticleSpeed),f=z(e.linkDirectionalParticleOffset),h=z(e.linkDirectionalParticleWidth),u=z(e.linkVisibility),p=z(e.linkDirectionalParticleColor||e.linkColor),d=e.ctx;d.save(),e.graphData.links.filter(u).forEach(function(y){var _=l(y);if(!(!y.hasOwnProperty("__photons")||!y.__photons.length)){var m=y.source,g=y.target;if(!(!m||!g||!m.hasOwnProperty("x")||!g.hasOwnProperty("x"))){var b=c(y),k=Math.abs(f(y)),N=y.__photons||[],w=Math.max(0,h(y)/2)/Math.sqrt(e.globalScale),j=p(y)||"rgba(0,0,0,0.28)";d.fillStyle=j;var A=y.__controlPoints?kn(F,[m.x,m.y].concat(X(y.__controlPoints),[g.x,g.y])):null,C=0,T=!1;N.forEach(function(P){var M=!!P.__singleHop;if(P.hasOwnProperty("__progressRatio")||(P.__progressRatio=M?0:(C+k)/_),!M&&C++,P.__progressRatio+=b,P.__progressRatio>=1)if(!M)P.__progressRatio=P.__progressRatio%1;else{T=!0;return}var O=P.__progressRatio,R=A?A.get(O):{x:m.x+(g.x-m.x)*O||0,y:m.y+(g.y-m.y)*O||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(R.x,R.y,y,d,e.globalScale):(d.beginPath(),d.arc(R.x,R.y,w,0,2*Math.PI,!1),d.fill())}),T&&(y.__photons=y.__photons.filter(function(P){return!P.__singleHop||P.__progressRatio<=1}))}}}),d.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:Xo().force("link",Ho()).force("charge",Yo()).force("center",Ga()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&An(e.graphData.nodes,z(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&An(e.graphData.links,z(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(p){p.source=p[e.linkSource],p.target=p[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(p){return p[e.nodeId]}).links(e.graphData.links);var a=e.dagMode&&Es(e.graphData,function(p){return p[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,X(Object.values(a||[]))),s=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*Rs*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(p){return delete p[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var c=["rl","bu"].includes(e.dagMode),f=function(d){return(a[d[e.nodeId]]-o/2)*s*(c?-1:1)},h=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(p){return p[h]=f(p)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?Jo(function(p){var d=a[p[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-d:d)*s}).strength(function(p){return e.dagNodeFilter(p)?1:0}):null);for(var u=0;u<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);u++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function ur(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(l,c){r.forEach(function(f){return c[f][o](l)})},triggerUpdate:!1}},linkMethod:function(o){return function(s){for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];var h=[];return r.forEach(function(u){var p=s[u],d=p[o].apply(p,c);d!==p&&h.push(d)}),h.length?h[0]:this}}}}var zs=800,Ds=4,Is=5,cr=ur("forceGraph",et),$s=ur(["forceGraph","shadowGraph"],et),Fs=Object.assign.apply(Object,X(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return $e({},n,cr.linkProp(n))})).concat(X(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return $e({},n,$s.linkProp(n))})))),Ls=Object.assign.apply(Object,X(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return $e({},n,cr.linkMethod(n))})));function ht(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(o){o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),o.width=n.width*i,o.height=n.height*i,!e&&!r&&o.getContext("2d").scale(i,i)});var a=ue(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/a,(n.height-r)/2/a),n.needsRedraw=!0}}function fr(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function Cn(n,e,r){n.save(),fr(n),n.clearRect(0,0,e,r),n.restore()}var Us=Pt({props:ke({width:{default:window.innerWidth,onChange:function(e,r){return ht(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return ht(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(a){return(a||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(a){var o=a.type,s=a.objs;s.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var c=r.colorTracker.lookup(l.__indexColor);return!c||!c.hasOwnProperty("d")||c.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:o,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,a,o){return e(i,i.__indexColor,a,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,a,o){return e(i,i.__indexColor,a,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},Fs),aliases:{stopAnimation:"pauseAnimation"},methods:ke({graph2ScreenCoords:function(e,r,i){var a=ue(e.canvas);return{x:r*a.k+a.x,y:i*a.k+a.y}},screen2GraphCoords:function(e,r,i){var a=ue(e.canvas);return{x:(r-a.x)/a.k,y:(i-a.y)/a.k}},centerAt:function(e,r,i,a){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var o=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return a?e.tweenGroup.add(new Qt(s()).to(o,a).easing(be.Quadratic.Out).onUpdate(l).start()):l(o),this}return s();function s(){var c=ue(e.canvas);return{x:(e.width/2-c.x)/c.k,y:(e.height/2-c.y)/c.k}}function l(c){var f=c.x,h=c.y;e.zoom.translateTo(e.zoom.__baseElem,f===void 0?s().x:f,h===void 0?s().y:h),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new Qt({k:a()}).to({k:r},i).easing(be.Quadratic.Out).onUpdate(function(s){var l=s.k;return o(l)}).start()):o(r),this;return a();function a(){return ue(e.canvas).k}function o(s){e.zoom.scaleTo(e.zoom.__baseElem,s),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];var l=this.getGraphBbox.apply(this,o);if(l){var c={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},f=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(c.x,c.y,r),this.zoom(f,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=z(e.nodeVal),a=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},o=e.graphData.nodes.filter(r).map(function(s){return{x:s.x,y:s.y,r:a(s)}});return o.length?{x:[Ut(o,function(s){return s.x-s.r}),qt(o,function(s){return s.x+s.r})],y:[Ut(o,function(s){return s.y-s.r}),qt(o,function(s){return s.y+s.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Ls),stateInit:function(){return{lastSetZoom:1,zoom:Sr(),forceGraph:new et,shadowGraph:new et().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new wa,tweenGroup:new Rn}},init:function(e,r){var i=this;e.innerHTML="";var a=document.createElement("div");a.classList.add("force-graph-container"),a.style.position="relative",e.appendChild(a),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),a.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var o=r.canvas.getContext("2d"),s=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},c=function(){var u=null,p=window.devicePixelRatio,d=l.x>0&&l.y>0?s.getImageData(l.x*p,l.y*p,1,1):null;return d&&(u=r.colorTracker.lookup(d.data)),u};dt(r.canvas).call(Cr().subject(function(){if(!r.enableNodeDrag)return null;var h=c();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var u=h.subject;u.__initialDragPos={x:u.x,y:u.y,fx:u.fx,fy:u.fy},h.active||(u.fx=u.x,u.fy=u.y),r.canvas.classList.add("grabbable")}).on("drag",function(h){var u=h.subject,p=u.__initialDragPos,d=h,y=ue(r.canvas).k,_={x:p.x+(d.x-p.x)/y-u.x,y:p.y+(d.y-p.y)/y-u.y};["x","y"].forEach(function(m){return u["f".concat(m)]=u[m]=p[m]+(d[m]-p[m])/y}),!(!u.__dragged&&Is>=Math.sqrt(Or(["x","y"].map(function(m){return Math.pow(h[m]-p[m],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,u.__dragged=!0,r.onNodeDrag(u,_))}).on("end",function(h){var u=h.subject,p=u.__initialDragPos,d={x:u.x-p.x,y:u.y-p.y};p.fx===void 0&&(u.fx=void 0),p.fy===void 0&&(u.fy=void 0),delete u.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,u.__dragged&&(delete u.__dragged,r.onNodeDragEnd(u,d))})),r.zoom(r.zoom.__baseElem=dt(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(h){return!h.button&&r.enableZoomPanInteraction&&(h.type!=="wheel"||z(r.enableZoomInteraction)(h))&&(h.type==="wheel"||z(r.enablePanInteraction)(h))}).on("zoom",function(h){var u=h.transform;[o,s].forEach(function(p){fr(p),p.translate(u.x,u.y),p.scale(u.k,u.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(ke(ke({},u),i.centerAt())),r.needsRedraw=!0}).on("end",function(h){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(ke(ke({},h.transform),i.centerAt()))}),ht(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){ue(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=Ds/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new Ha(a),["pointermove","pointerdown"].forEach(function(h){return a.addEventListener(h,function(u){h==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=u),!r.isPointerDragging&&u.type==="pointermove"&&r.onBackgroundClick&&(u.pressure>0||r.isPointerPressed)&&(u.pointerType==="mouse"||u.movementX===void 0||[u.movementX,u.movementY].some(function(y){return Math.abs(y)>1}))&&(r.isPointerDragging=!0);var p=d(a);l.x=u.pageX-p.left,l.y=u.pageY-p.top;function d(y){var _=y.getBoundingClientRect(),m=window.pageXOffset||document.documentElement.scrollLeft,g=window.pageYOffset||document.documentElement.scrollTop;return{top:_.top+g,left:_.left+m}}},{passive:!0})}),a.addEventListener("pointerup",function(h){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var u=[h,r.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(r.hoverObj){var p=r["on".concat(r.hoverObj.type,"Click")];p&&p.apply(void 0,[r.hoverObj.d].concat(u))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,u);if(h.button===2)if(r.hoverObj){var d=r["on".concat(r.hoverObj.type,"RightClick")];d&&d.apply(void 0,[r.hoverObj.d].concat(u))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,u)})}},{passive:!0}),a.addEventListener("contextmenu",function(h){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(h.preventDefault(),!1)}),r.forceGraph(o),r.shadowGraph(s);var f=Pi(function(){Cn(s,r.width,r.height),r.shadowGraph.linkWidth(function(u){return z(r.linkWidth)(u)+r.linkHoverPrecision});var h=ue(r.canvas);r.shadowGraph.globalScale(h.k).tickFrame()},zs);r.flushShadowCanvas=f.flush,(this._animationCycle=function h(){var u=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(k){return k.__photons&&k.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var p=r.isPointerDragging?null:c();if(p!==r.hoverObj){var d=r.hoverObj,y=d?d.type:null,_=p?p.type:null;if(y&&y!==_){var m=r["on".concat(y,"Hover")];m&&m(null,d.d)}if(_){var g=r["on".concat(_,"Hover")];g&&g(p.d,y===_?d.d:null)}r.tooltip.content(p&&z(r["".concat(p.type.toLowerCase(),"Label")])(p.d)||null),r.canvas.classList[(p&&r["on".concat(_,"Click")]||!p&&r.onBackgroundClick)&&z(r.showPointerCursor)(p?.d)?"add":"remove"]("clickable"),r.hoverObj=p}u&&f()}if(u){Cn(o,r.width,r.height);var b=ue(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(o,b),r.forceGraph.globalScale(b).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(o,b)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(e){}});const at={width:x.number,height:x.number,graphData:x.shape({nodes:x.arrayOf(x.object).isRequired,links:x.arrayOf(x.object).isRequired}),backgroundColor:x.string,nodeRelSize:x.number,nodeId:x.string,nodeLabel:x.oneOfType([x.string,x.func]),nodeVal:x.oneOfType([x.number,x.string,x.func]),nodeVisibility:x.oneOfType([x.bool,x.string,x.func]),nodeColor:x.oneOfType([x.string,x.func]),nodeAutoColorBy:x.oneOfType([x.string,x.func]),onNodeHover:x.func,onNodeClick:x.func,linkSource:x.string,linkTarget:x.string,linkLabel:x.oneOfType([x.string,x.func]),linkVisibility:x.oneOfType([x.bool,x.string,x.func]),linkColor:x.oneOfType([x.string,x.func]),linkAutoColorBy:x.oneOfType([x.string,x.func]),linkWidth:x.oneOfType([x.number,x.string,x.func]),linkCurvature:x.oneOfType([x.number,x.string,x.func]),linkDirectionalArrowLength:x.oneOfType([x.number,x.string,x.func]),linkDirectionalArrowColor:x.oneOfType([x.string,x.func]),linkDirectionalArrowRelPos:x.oneOfType([x.number,x.string,x.func]),linkDirectionalParticles:x.oneOfType([x.number,x.string,x.func]),linkDirectionalParticleSpeed:x.oneOfType([x.number,x.string,x.func]),linkDirectionalParticleOffset:x.oneOfType([x.number,x.string,x.func]),linkDirectionalParticleWidth:x.oneOfType([x.number,x.string,x.func]),linkDirectionalParticleColor:x.oneOfType([x.string,x.func]),onLinkHover:x.func,onLinkClick:x.func,dagMode:x.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:x.number,dagNodeFilter:x.func,onDagError:x.func,d3AlphaMin:x.number,d3AlphaDecay:x.number,d3VelocityDecay:x.number,warmupTicks:x.number,cooldownTicks:x.number,cooldownTime:x.number,onEngineTick:x.func,onEngineStop:x.func,getGraphBbox:x.func},hr={zoomToFit:x.func,onNodeRightClick:x.func,onNodeDrag:x.func,onNodeDragEnd:x.func,onLinkRightClick:x.func,linkHoverPrecision:x.number,onBackgroundClick:x.func,onBackgroundRightClick:x.func,showPointerCursor:x.oneOfType([x.bool,x.func]),enablePointerInteraction:x.bool,enableNodeDrag:x.bool},It={showNavInfo:x.bool,nodeOpacity:x.number,nodeResolution:x.number,nodeThreeObject:x.oneOfType([x.object,x.string,x.func]),nodeThreeObjectExtend:x.oneOfType([x.bool,x.string,x.func]),nodePositionUpdate:x.func,linkOpacity:x.number,linkResolution:x.number,linkCurveRotation:x.oneOfType([x.number,x.string,x.func]),linkMaterial:x.oneOfType([x.object,x.string,x.func]),linkThreeObject:x.oneOfType([x.object,x.string,x.func]),linkThreeObjectExtend:x.oneOfType([x.bool,x.string,x.func]),linkPositionUpdate:x.func,linkDirectionalArrowResolution:x.number,linkDirectionalParticleResolution:x.number,linkDirectionalParticleThreeObject:x.oneOfType([x.object,x.string,x.func]),forceEngine:x.oneOf(["d3","ngraph"]),ngraphPhysics:x.object,numDimensions:x.oneOf([1,2,3])},qs=Object.assign({},at,hr,{linkLineDash:x.oneOfType([x.arrayOf(x.number),x.string,x.func]),nodeCanvasObjectMode:x.oneOfType([x.string,x.func]),nodeCanvasObject:x.func,nodePointerAreaPaint:x.func,linkCanvasObjectMode:x.oneOfType([x.string,x.func]),linkCanvasObject:x.func,linkPointerAreaPaint:x.func,linkDirectionalParticleCanvasObject:x.func,autoPauseRedraw:x.bool,minZoom:x.number,maxZoom:x.number,enableZoomInteraction:x.oneOfType([x.bool,x.func]),enablePanInteraction:x.oneOfType([x.bool,x.func]),onZoom:x.func,onZoomEnd:x.func,onRenderFramePre:x.func,onRenderFramePost:x.func});Object.assign({},at,hr,It,{enableNavigationControls:x.bool,controlType:x.oneOf(["trackball","orbit","fly"]),rendererConfig:x.object,extraRenderers:x.arrayOf(x.shape({render:x.func.isRequired}))});Object.assign({},at,It,{nodeDesc:x.oneOfType([x.string,x.func]),linkDesc:x.oneOfType([x.string,x.func])});Object.assign({},at,It,{markerAttrs:x.object,yOffset:x.number,glScale:x.number});const $t=ni(Us,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});$t.displayName="ForceGraph2D";$t.propTypes=qs;function Hs({subjectId:n}){const e=I.useRef(null),[r,i]=I.useState({width:0,height:0}),{data:a,isLoading:o,error:s}=Fe({queryKey:["graph",n],queryFn:()=>_e.getGraph(n),enabled:!!n});if(I.useEffect(()=>{e.current&&i({width:e.current.clientWidth,height:e.current.clientHeight})},[]),o)return v.jsx("div",{className:"h-full flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(tt,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-2"}),v.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Loading graph..."})]})});if(s||!a)return v.jsx("div",{className:"h-full flex items-center justify-center",children:v.jsx("div",{className:"text-center text-red-500",children:v.jsx("p",{className:"text-sm",children:"Failed to load graph data"})})});const l={nodes:a.nodes||[],links:a.edges||[]};return v.jsxs("div",{className:"h-full flex flex-col",children:[v.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Entity Network"}),v.jsxs("div",{ref:e,className:"flex-1 rounded-xl overflow-hidden border border-white/10 dark:border-slate-700/20 bg-slate-900",children:[r.width>0&&l.nodes.length>0&&v.jsx($t,{width:r.width,height:r.height,graphData:l,nodeLabel:c=>c.label||c.id,nodeColor:c=>c.type==="subject"?"#ef4444":"#3b82f6",linkColor:()=>"#64748b",backgroundColor:"#0f172a"}),l.nodes.length===0&&v.jsx("div",{className:"flex items-center justify-center h-full text-slate-400",children:v.jsx("p",{children:"No graph data available"})})]})]})}function Gs({subjectId:n}){const{data:e,isLoading:r,error:i}=Fe({queryKey:["ai-analysis",n],queryFn:()=>_e.getAIAnalysis(n),enabled:!!n});if(r)return v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsxs("div",{className:"text-center",children:[v.jsx(tt,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-2"}),v.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Loading AI analysis..."})]})});if(i||!e)return v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("div",{className:"text-center text-red-500",children:v.jsx("p",{className:"text-sm",children:"Failed to load AI analysis"})})});const a=e.findings||{},o=e.verdict?85:0;return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[v.jsx(kr,{className:"w-5 h-5 text-purple-500"}),v.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"AI Analysis"})]}),v.jsxs("div",{className:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/20",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-300",children:"Confidence Score"}),v.jsxs("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-300",children:[o,"%"]})]}),v.jsx("div",{className:"w-full bg-purple-200 dark:bg-purple-900 rounded-full h-2",children:v.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${o}%`}})})]}),e.verdict&&v.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:[v.jsx("h4",{className:"text-sm font-medium text-blue-600 dark:text-blue-300 mb-2",children:"Verdict"}),v.jsx("p",{className:"text-slate-900 dark:text-white",children:e.verdict})]}),Object.keys(a).length>0&&v.jsxs("div",{className:"space-y-3",children:[v.jsx("h4",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Key Findings"}),Object.entries(a).map(([s,l])=>v.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-red-500/5 border border-red-500/10",children:[v.jsx(Ct,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:s.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase())}),v.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:String(l)})]})]},s))]})]})}function Ws({alertId:n}){const{data:e,isLoading:r,error:i}=Fe({queryKey:["adjudication-history",n],queryFn:()=>_e.getAdjudicationHistory(n),enabled:!!n});return r?v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsxs("div",{className:"text-center",children:[v.jsx(tt,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-2"}),v.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Loading history..."})]})}):i?v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("div",{className:"text-center text-red-500",children:v.jsx("p",{className:"text-sm",children:"Failed to load history"})})}):!e||e.length===0?v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("div",{className:"text-center",children:v.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No history available"})})}):v.jsxs("div",{className:"space-y-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Activity History"}),v.jsx("div",{className:"relative border-l border-slate-200 dark:border-slate-700 ml-3 space-y-6",children:e.map(a=>v.jsxs("div",{className:"relative pl-6",children:[v.jsx("div",{className:"absolute -left-1.5 top-1.5 w-3 h-3 rounded-full bg-slate-200 dark:bg-slate-700 border-2 border-white dark:border-slate-900"}),v.jsxs("div",{className:"flex justify-between items-start mb-1",children:[v.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:a.decision?.replace(/_/g," ")}),v.jsx("span",{className:"text-xs text-slate-500",children:new Date(a.created_at).toLocaleString()})]}),v.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["by ",a.reviewer_id.slice(0,8)]}),a.reviewer_notes&&v.jsx("div",{className:"mt-2 p-3 rounded-lg bg-slate-50 dark:bg-slate-800 text-sm text-slate-600 dark:text-slate-300",children:a.reviewer_notes})]},a.id))})]})}function Vs({alertId:n,subjectId:e,activeTab:r,onTabChange:i}){return J("1",()=>i("evidence")),J("2",()=>i("graph")),J("3",()=>i("ai")),J("4",()=>i("history")),v.jsxs(zr,{value:r,onValueChange:i,className:"flex-1 flex flex-col h-full",children:[v.jsx("div",{className:"px-6 pt-4 border-b border-white/10 dark:border-slate-700/20",children:v.jsxs(Dr,{className:"bg-black/20 p-1",children:[v.jsxs(He,{value:"evidence",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-200",children:["Evidence ",v.jsx("span",{className:"ml-2 text-[10px] opacity-50 font-mono",children:"1"})]}),v.jsxs(He,{value:"graph",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-200",children:["Graph ",v.jsx("span",{className:"ml-2 text-[10px] opacity-50 font-mono",children:"2"})]}),v.jsxs(He,{value:"ai",className:"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-200",children:["AI Reasoning ",v.jsx("span",{className:"ml-2 text-[10px] opacity-50 font-mono",children:"3"})]}),v.jsxs(He,{value:"history",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-200",children:["History ",v.jsx("span",{className:"ml-2 text-[10px] opacity-50 font-mono",children:"4"})]})]})}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-black/5",children:[v.jsx(Ge,{value:"evidence",className:"mt-0 h-full focus-visible:outline-none",children:v.jsx(Ir,{alertId:n})}),v.jsx(Ge,{value:"graph",className:"mt-0 h-full focus-visible:outline-none",children:v.jsx(Hs,{subjectId:e})}),v.jsx(Ge,{value:"ai",className:"mt-0 h-full focus-visible:outline-none",children:v.jsx(Gs,{subjectId:e})}),v.jsx(Ge,{value:"history",className:"mt-0 h-full focus-visible:outline-none",children:v.jsx(Ws,{alertId:n})})]})]})}function Bs({alert:n,onDecision:e,disabled:r}){const[i,a]=I.useState("evidence");if(!n)return v.jsx("div",{className:"flex h-full items-center justify-center rounded-2xl border border-dashed border-slate-300 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50 backdrop-blur-sm",role:"status","aria-label":"No alert selected",children:v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-slate-500 font-medium",children:"No alert selected"}),v.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Select an item from the queue to start reviewing"})]})});const o=`Alert from ${n.subject_name}, risk score ${n.risk_score}, triggered ${n.triggered_rules.length} rules, status ${n.status}, created ${new Date(n.created_at).toLocaleDateString()}`;return v.jsxs(Ke.div,{initial:{opacity:0,scale:.98,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.98,x:-20},transition:{duration:.3,ease:"easeOut"},className:"flex flex-col h-full rounded-2xl border border-white/20 dark:border-slate-700/30 bg-white/10 dark:bg-slate-900/40 backdrop-blur-xl shadow-2xl shadow-purple-500/5 overflow-hidden",role:"article","aria-label":`Alert ${n.id}`,"aria-describedby":`alert-desc-${n.id}`,children:[v.jsx("div",{id:`alert-desc-${n.id}`,className:"sr-only",children:o}),v.jsx(Er,{alert:n}),v.jsx("div",{className:"flex-1 overflow-hidden flex flex-col relative",children:v.jsx(Vs,{alertId:n.id,subjectId:n.subject_id,activeTab:i,onTabChange:a})}),v.jsx("div",{className:"p-6 border-t border-white/10 dark:border-slate-700/20 bg-black/20 backdrop-blur-md z-10",children:v.jsx(Rr,{onDecision:e,disabled:r})})]},n.id)}function Ks(){return v.jsx("div",{className:"h-[calc(100vh-4rem)] p-6 bg-slate-50 dark:bg-slate-950 overflow-hidden",children:v.jsxs("div",{className:"grid grid-cols-12 gap-6 h-full",children:[v.jsxs("div",{className:"col-span-3 flex flex-col h-full space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("div",{className:"h-8 w-24 bg-slate-200 dark:bg-slate-800 rounded animate-pulse"}),v.jsx("div",{className:"h-6 w-16 bg-slate-200 dark:bg-slate-800 rounded animate-pulse"})]}),v.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(n=>v.jsx("div",{className:"h-32 bg-slate-200 dark:bg-slate-800 rounded-xl animate-pulse"},n))})]}),v.jsx("div",{className:"col-span-9 h-full",children:v.jsxs("div",{className:"h-full rounded-2xl border border-slate-200 dark:border-slate-800 bg-slate-100 dark:bg-slate-900/50 animate-pulse flex flex-col",children:[v.jsxs("div",{className:"h-20 border-b border-slate-200 dark:border-slate-800 p-6",children:[v.jsx("div",{className:"h-8 w-1/3 bg-slate-300 dark:bg-slate-700 rounded mb-2"}),v.jsx("div",{className:"h-4 w-1/4 bg-slate-300 dark:bg-slate-700 rounded"})]}),v.jsxs("div",{className:"flex-1 p-6 space-y-6",children:[v.jsx("div",{className:"h-10 w-full bg-slate-300 dark:bg-slate-700 rounded"}),v.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[v.jsx("div",{className:"h-64 bg-slate-300 dark:bg-slate-700 rounded"}),v.jsx("div",{className:"h-64 bg-slate-300 dark:bg-slate-700 rounded"})]})]}),v.jsx("div",{className:"h-32 border-t border-slate-200 dark:border-slate-800 p-6",children:v.jsx("div",{className:"h-full w-full bg-slate-300 dark:bg-slate-700 rounded"})})]})})]})})}function Zs(n){const e=n.indicators.filter(i=>i.confidence>.5).map(i=>i.type.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())),r={pending:"pending",flagged:"flagged",reviewed:"resolved"};return{id:n.id,subject_id:n.subject_id,subject_name:`Subject ${n.subject_id.slice(0,8)}`,risk_score:Math.round(n.risk_score),triggered_rules:e.length>0?e:["Pending Analysis"],created_at:n.created_at,status:r[n.adjudication_status]||"pending"}}function al(){const n=dr(),[e,r]=I.useState(null),[i,a]=I.useState(null),{data:o,isLoading:s,error:l}=Fe({queryKey:["adjudication-queue"],queryFn:_e.getAdjudicationQueue,refetchInterval:3e4}),c=o?.map(Zs)||[],f=e||(c.length>0?c[0].id:null),h=c.find(_=>_.id===f)||null;Mr("/ws",{onMessage:_=>{if(_.type==="alert_added")ve.success("New alert added to queue",{icon:"ðŸ””",duration:3e3}),n.invalidateQueries({queryKey:["adjudication-queue"]});else if(_.type==="alert_resolved"){if((_.payload?.analysis_id||_.payload?.id)===e){ve("This alert was resolved by another analyst",{icon:"â„¹ï¸",duration:3e3});const g=c.findIndex(b=>b.id===e);g<c.length-1?r(c[g+1].id):c.length>1?r(c[0].id):r(null)}n.invalidateQueries({queryKey:["adjudication-queue"]})}else _.type==="queue_updated"&&n.invalidateQueries({queryKey:["adjudication-queue"]})}});const u=Ft({mutationFn:_e.revertDecision,onSuccess:()=>{ve.success("Decision reverted"),a(null),n.invalidateQueries({queryKey:["adjudication-queue"]})},onError:_=>{ve.error(`Failed to revert decision: ${_.message}`)}}),p=_=>{u.mutate(_)};J("ctrl+z, meta+z",_=>{_.preventDefault(),i&&p(i.id)},[i]);const d=Ft({mutationFn:({analysisId:_,decision:m,notes:g})=>_e.submitDecision(_,m,g),onSuccess:(_,m)=>{a({id:m.analysisId,decision:m.decision,notes:m.notes}),ve.success(b=>v.jsxs("span",{className:"flex items-center gap-2",children:["Decision submitted",v.jsx("button",{onClick:()=>{p(m.analysisId),ve.dismiss(b.id)},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-medium transition-colors",children:"Undo"})]})),n.invalidateQueries({queryKey:["adjudication-queue"]});const g=c.findIndex(b=>b.id===e);g<c.length-1?r(c[g+1].id):c.length>1?r(c[0].id):r(null)},onError:_=>{ve.error(`Failed to submit decision: ${_.message}`)}}),y=(_,m,g)=>{if(!e)return;const b={approve:"confirmed_fraud",reject:"false_positive",escalate:"escalated"};d.mutate({analysisId:e,decision:b[_]||_,notes:g})};return s?v.jsx(Ht,{pageName:"Adjudication Queue",children:v.jsx(Ks,{})}):l?v.jsx("div",{className:"h-[calc(100vh-4rem)] p-6 bg-slate-50 dark:bg-slate-950 overflow-hidden flex items-center justify-center",children:v.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 px-6 py-4 rounded-lg shadow-sm max-w-md",children:[v.jsx("h3",{className:"font-semibold mb-2",children:"Error loading queue"}),v.jsx("p",{className:"text-sm",children:l instanceof Error?l.message:"Unknown error occurred"})]})}):v.jsx(Ht,{pageName:"Adjudication Queue",children:v.jsx("div",{className:"h-[calc(100vh-4rem)] p-6 bg-slate-50 dark:bg-slate-950 overflow-hidden",children:v.jsxs("div",{className:"grid grid-cols-12 gap-6 h-full",children:[v.jsxs("div",{className:"col-span-3 flex flex-col h-full",children:[v.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[v.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Queue"}),v.jsxs("span",{className:"bg-purple-500/10 text-purple-600 dark:text-purple-400 px-2 py-1 rounded text-xs font-medium",children:[c.length," Pending"]})]}),v.jsx("div",{className:"flex-1 overflow-hidden",children:c.length===0?v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[v.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:v.jsx("svg",{className:"w-8 h-8 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),v.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-1",children:"Queue is empty"}),v.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"All alerts have been reviewed"})]}):v.jsx(Tr,{alerts:c,selectedId:e,onSelect:r})})]}),v.jsx("div",{className:"col-span-9 h-full",children:v.jsx(Bs,{alert:h,onDecision:y,disabled:d.isPending})})]})})})}export{al as AdjudicationQueue};
