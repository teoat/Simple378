
> frontend@0.0.0 lint
> eslint . --format=json

[{"filePath":"/Users/Arief/Desktop/Simple378/frontend/components/layout/AppShell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/components/ui/Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/components/ui/Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/components/ui/Input.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":28,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[146,223],"text":"type InputProps = React.InputHTMLAttributes<HTMLInputElement>"},"desc":"Replace empty interface with a type alias."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/playwright.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/public/service-worker.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/public/sw.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/App.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fireEvent' is defined but never used.","line":2,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'waitFor' is defined but never used.","line":2,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'QueryClientProvider' is defined but never used.","line":3,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'queryClient' is assigned a value but never used.","line":120,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":18}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { BrowserRouter } from 'react-router-dom';\nimport { App } from '../App';\n\n// Mock all the lazy-loaded components\nvi.mock('../pages/Login', () => ({\n  Login: () => <div data-testid=\"login-page\">Login Page</div>\n}));\n\nvi.mock('../pages/Dashboard', () => ({\n  Dashboard: () => <div data-testid=\"dashboard-page\">Dashboard Page</div>\n}));\n\nvi.mock('../pages/CaseList', () => ({\n  CaseList: () => <div data-testid=\"case-list-page\">Case List Page</div>\n}));\n\nvi.mock('../pages/CaseDetail', () => ({\n  CaseDetail: () => <div data-testid=\"case-detail-page\">Case Detail Page</div>\n}));\n\nvi.mock('../pages/Reconciliation', () => ({\n  Reconciliation: () => <div data-testid=\"reconciliation-page\">Reconciliation Page</div>\n}));\n\nvi.mock('../pages/Forensics', () => ({\n  Forensics: () => <div data-testid=\"forensics-page\">Forensics Page</div>\n}));\n\nvi.mock('../pages/Settings', () => ({\n  Settings: () => <div data-testid=\"settings-page\">Settings Page</div>\n}));\n\nvi.mock('../pages/AdjudicationQueue', () => ({\n  AdjudicationQueue: () => <div data-testid=\"adjudication-queue-page\">Adjudication Queue Page</div>\n}));\n\nvi.mock('../pages/FinalSummary', () => ({\n  FinalSummary: () => <div data-testid=\"final-summary-page\">Final Summary Page</div>\n}));\n\nvi.mock('../pages/Ingestion', () => ({\n  Ingestion: () => <div data-testid=\"ingestion-page\">Ingestion Page</div>\n}));\n\nvi.mock('../pages/Visualization', () => ({\n  Visualization: () => <div data-testid=\"visualization-page\">Visualization Page</div>\n}));\n\n// Mock error pages\nvi.mock('../pages/errors/NotFound', () => ({\n  NotFound: () => <div data-testid=\"not-found-page\">Not Found Page</div>\n}));\n\nvi.mock('../pages/errors/Forbidden', () => ({\n  Forbidden: () => <div data-testid=\"forbidden-page\">Forbidden Page</div>\n}));\n\nvi.mock('../pages/errors/ServerError', () => ({\n  ServerError: () => <div data-testid=\"server-error-page\">Server Error Page</div>\n}));\n\nvi.mock('../pages/errors/Unauthorized', () => ({\n  Unauthorized: () => <div data-testid=\"unauthorized-page\">Unauthorized Page</div>\n}));\n\nvi.mock('../pages/errors/Offline', () => ({\n  Offline: () => <div data-testid=\"offline-page\">Offline Page</div>\n}));\n\n// Mock components\nvi.mock('../components/auth/AuthGuard', () => ({\n  AuthGuard: ({ children }: { children: React.ReactNode }) => <div data-testid=\"auth-guard\">{children}</div>\n}));\n\nvi.mock('../components/layout/AppShell', () => ({\n  AppShell: ({ children }: { children: React.ReactNode }) => <div data-testid=\"app-shell\">{children}</div>\n}));\n\nvi.mock('../components/ai/AIAssistant', () => ({\n  AIAssistant: () => <div data-testid=\"ai-assistant\">AI Assistant</div>\n}));\n\nvi.mock('../components/NetworkMonitor', () => ({\n  NetworkMonitor: () => <div data-testid=\"network-monitor\">Network Monitor</div>\n}));\n\nvi.mock('../components/pwa/PWAInstallBanner', () => ({\n  PWAInstallBanner: () => <div data-testid=\"pwa-banner\">PWA Banner</div>\n}));\n\nvi.mock('../components/pwa/OfflineSyncStatus', () => ({\n  OfflineSyncStatus: () => <div data-testid=\"offline-sync\">Offline Sync</div>\n}));\n\nvi.mock('../context/AuthContext', () => ({\n  AuthProvider: ({ children }: { children: React.ReactNode }) => <div data-testid=\"auth-provider\">{children}</div>\n}));\n\nvi.mock('../context/AIContext', () => ({\n  AIProvider: ({ children }: { children: React.ReactNode }) => <div data-testid=\"ai-provider\">{children}</div>\n}));\n\nvi.mock('../lib/queryClient', () => ({\n  queryClient: new QueryClient({\n    defaultOptions: {\n      queries: { retry: false },\n      mutations: { retry: false }\n    }\n  })\n}));\n\nvi.mock('react-hot-toast', () => ({\n  Toaster: () => <div data-testid=\"toaster\">Toaster</div>\n}));\n\ndescribe('App', () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: { retry: false },\n        mutations: { retry: false }\n      }\n    });\n    vi.clearAllMocks();\n  });\n\n  it('renders without crashing', () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    expect(screen.getByTestId('auth-provider')).toBeInTheDocument();\n    expect(screen.getByTestId('ai-provider')).toBeInTheDocument();\n    expect(screen.getByTestId('network-monitor')).toBeInTheDocument();\n    expect(screen.getByTestId('pwa-banner')).toBeInTheDocument();\n    expect(screen.getByTestId('offline-sync')).toBeInTheDocument();\n    expect(screen.getByTestId('toaster')).toBeInTheDocument();\n  });\n\n  it('renders error boundary around protected routes', () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    // The error boundary should wrap the auth guard and app shell\n    expect(screen.getByTestId('auth-guard')).toBeInTheDocument();\n  });\n\n  it('includes all route components', () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    // Routes are lazy loaded, so we can't test them directly without navigation\n    // But we can verify the router structure is set up\n    expect(screen.getByTestId('auth-provider')).toBeInTheDocument();\n  });\n\n  it('handles navigation to dashboard by default', async () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    // Since routes are lazy loaded and we mock them,\n    // we can only verify the routing structure exists\n    expect(screen.getByTestId('auth-guard')).toBeInTheDocument();\n  });\n\n  it('includes error pages for 401, 403, 404, 500, and offline routes', () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    // Error pages are lazy loaded, so we verify the structure exists\n    expect(screen.getByTestId('auth-provider')).toBeInTheDocument();\n  });\n\n  it('wraps everything in QueryClientProvider', () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    // The QueryClientProvider is mocked, so we verify the structure\n    expect(screen.getByTestId('auth-provider')).toBeInTheDocument();\n  });\n\n  it('includes AI assistant component', () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    expect(screen.getByTestId('ai-assistant')).toBeInTheDocument();\n  });\n\n  it('includes network monitoring', () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    expect(screen.getByTestId('network-monitor')).toBeInTheDocument();\n  });\n\n  it('includes PWA install banner', () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    expect(screen.getByTestId('pwa-banner')).toBeInTheDocument();\n  });\n\n  it('includes offline sync status', () => {\n    render(\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    );\n\n    expect(screen.getByTestId('offline-sync')).toBeInTheDocument();\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/__tests__/AlertList.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fireEvent' is defined but never used.","line":2,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi } from 'vitest';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { AlertList } from '../components/adjudication/AlertList';\n\nconst mockAlerts = [\n  {\n    id: 'alert-1',\n    subject_name: 'John Doe',\n    risk_score: 85,\n    triggered_rules: ['High Amount', 'Frequent Transactions'],\n    created_at: '2024-01-01T10:00:00Z',\n    status: 'pending' as const,\n  },\n  {\n    id: 'alert-2',\n    subject_name: 'Jane Smith',\n    risk_score: 45,\n    triggered_rules: ['Unusual Pattern'],\n    created_at: '2024-01-01T11:00:00Z',\n    status: 'flagged' as const,\n  },\n];\n\ndescribe('AlertList', () => {\n  it('renders alerts correctly', () => {\n    const onSelect = vi.fn();\n    render(<AlertList alerts={mockAlerts} selectedId={null} onSelect={onSelect} />);\n\n    expect(screen.getByText('John Doe')).toBeInTheDocument();\n    expect(screen.getByText('Jane Smith')).toBeInTheDocument();\n    expect(screen.getByText('Risk: 85')).toBeInTheDocument();\n    expect(screen.getByText('Risk: 45')).toBeInTheDocument();\n  });\n\n  it('displays triggered rules', () => {\n    const onSelect = vi.fn();\n    render(<AlertList alerts={mockAlerts} selectedId={null} onSelect={onSelect} />);\n\n    expect(screen.getByText('High Amount')).toBeInTheDocument();\n    expect(screen.getByText('Frequent Transactions')).toBeInTheDocument();\n    expect(screen.getByText('Unusual Pattern')).toBeInTheDocument();\n  });\n\n  it('shows truncated rules count when more than 2 rules', () => {\n    const alertWithManyRules = {\n      ...mockAlerts[0],\n      triggered_rules: ['Rule 1', 'Rule 2', 'Rule 3', 'Rule 4'],\n    };\n    const onSelect = vi.fn();\n    render(<AlertList alerts={[alertWithManyRules]} selectedId={null} onSelect={onSelect} />);\n\n    expect(screen.getByText('+2')).toBeInTheDocument();\n  });\n\n  it('calls onSelect when alert is clicked', async () => {\n    const onSelect = vi.fn();\n    const user = userEvent.setup();\n    render(<AlertList alerts={mockAlerts} selectedId={null} onSelect={onSelect} />);\n\n    await user.click(screen.getByText('John Doe'));\n    expect(onSelect).toHaveBeenCalledWith('alert-1');\n  });\n\n  it('calls onSelect when Enter key is pressed', async () => {\n    const onSelect = vi.fn();\n    const user = userEvent.setup();\n    render(<AlertList alerts={mockAlerts} selectedId={null} onSelect={onSelect} />);\n\n    const alertElement = screen.getByRole('article', { name: /Alert from John Doe/ });\n    alertElement.focus();\n    await user.keyboard('{Enter}');\n\n    expect(onSelect).toHaveBeenCalledWith('alert-1');\n  });\n\n  it('calls onSelect when Space key is pressed', async () => {\n    const onSelect = vi.fn();\n    const user = userEvent.setup();\n    render(<AlertList alerts={mockAlerts} selectedId={null} onSelect={onSelect} />);\n\n    const alertElement = screen.getByRole('article', { name: /Alert from John Doe/ });\n    alertElement.focus();\n    await user.keyboard(' ');\n\n    expect(onSelect).toHaveBeenCalledWith('alert-1');\n  });\n\n  it('applies selected styling when alert is selected', () => {\n    const onSelect = vi.fn();\n    render(<AlertList alerts={mockAlerts} selectedId=\"alert-1\" onSelect={onSelect} />);\n\n    const selectedAlert = screen.getByRole('article', { name: /Alert from John Doe/ });\n    expect(selectedAlert).toHaveAttribute('aria-selected', 'true');\n  });\n\n  it('displays correct risk score colors', () => {\n    const onSelect = vi.fn();\n    render(<AlertList alerts={mockAlerts} selectedId={null} onSelect={onSelect} />);\n\n    // High risk (>80) should have red styling\n    const highRiskElement = screen.getByText('Risk: 85').closest('div');\n    expect(highRiskElement).toHaveClass('bg-red-500/20');\n\n    // Medium risk (45) should have yellow styling\n    const mediumRiskElement = screen.getByText('Risk: 45').closest('div');\n    expect(mediumRiskElement).toHaveClass('bg-yellow-500/20');\n  });\n\n  it('shows alert ID truncated', () => {\n    const onSelect = vi.fn();\n    render(<AlertList alerts={mockAlerts} selectedId={null} onSelect={onSelect} />);\n\n    expect(screen.getByText('#alert-1')).toBeInTheDocument();\n  });\n\n  it('displays formatted time', () => {\n    const onSelect = vi.fn();\n    render(<AlertList alerts={mockAlerts} selectedId={null} onSelect={onSelect} />);\n\n    // Should show time in 12-hour format with AM/PM\n    expect(screen.getByText(/07:00 PM/)).toBeInTheDocument();\n    expect(screen.getByText(/08:00 PM/)).toBeInTheDocument();\n  });\n\n  it('has proper accessibility attributes', () => {\n    const onSelect = vi.fn();\n    render(<AlertList alerts={mockAlerts} selectedId=\"alert-1\" onSelect={onSelect} />);\n\n    const list = screen.getByRole('feed', { name: 'Alert Queue' });\n    expect(list).toBeInTheDocument();\n\n    const selectedAlert = screen.getByRole('article', { name: /Alert from John Doe/ });\n    expect(selectedAlert).toHaveAttribute('aria-selected', 'true');\n    expect(selectedAlert).toHaveAttribute('aria-posinset', '1');\n    expect(selectedAlert).toHaveAttribute('aria-setsize', '2');\n  });\n\n  it('updates screen reader status', () => {\n    const onSelect = vi.fn();\n    const { rerender } = render(<AlertList alerts={mockAlerts} selectedId={null} onSelect={onSelect} />);\n\n    expect(screen.getByText('2 alerts in queue')).toBeInTheDocument();\n\n    rerender(<AlertList alerts={mockAlerts} selectedId=\"alert-1\" onSelect={onSelect} />);\n    expect(screen.getByText('Alert 1 of 2 selected')).toBeInTheDocument();\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/__tests__/DecisionPanel.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fireEvent' is defined but never used.","line":2,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'waitFor' is defined but never used.","line":2,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":44}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { DecisionPanel } from '../components/adjudication/DecisionPanel';\n\ndescribe('DecisionPanel', () => {\n  const mockOnDecision = vi.fn();\n\n  beforeEach(() => {\n    mockOnDecision.mockClear();\n  });\n\n  it('renders decision buttons initially', () => {\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    expect(screen.getByText('Approve')).toBeInTheDocument();\n    expect(screen.getByText('Reject')).toBeInTheDocument();\n    expect(screen.getByText('Escalate')).toBeInTheDocument();\n  });\n\n  it('shows keyboard shortcuts on buttons', () => {\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    expect(screen.getByText('A')).toBeInTheDocument();\n    expect(screen.getByText('R')).toBeInTheDocument();\n    expect(screen.getByText('E')).toBeInTheDocument();\n  });\n\n  it('selects decision when button is clicked', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Approve'));\n\n    expect(screen.getByText('Confirm Approve')).toBeInTheDocument();\n    expect(screen.getByText('Submit Decision')).toBeInTheDocument();\n  });\n\n  it('handles keyboard shortcuts for decision selection', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.keyboard('a');\n\n    expect(screen.getByText('Confirm Approve')).toBeInTheDocument();\n  });\n\n  it('does not respond to keyboard shortcuts when disabled', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} disabled={true} />);\n\n    await user.keyboard('a');\n\n    expect(screen.getByText('Approve')).toBeInTheDocument();\n    expect(screen.queryByText('Confirm Approve')).not.toBeInTheDocument();\n  });\n\n  it('shows confirmation form with selected decision', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Reject'));\n\n    expect(screen.getByText('Confirm Reject')).toBeInTheDocument();\n    expect(screen.getByText('Confidence Level')).toBeInTheDocument();\n    expect(screen.getByText('Comment')).toBeInTheDocument();\n  });\n\n  it('requires comment for reject decision', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Reject'));\n    await user.click(screen.getByText('Submit Decision'));\n\n    expect(screen.getByText('Comment is required for this decision')).toBeInTheDocument();\n    expect(mockOnDecision).not.toHaveBeenCalled();\n  });\n\n  it('requires comment for escalate decision', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Escalate'));\n    await user.click(screen.getByText('Submit Decision'));\n\n    expect(screen.getByText('Comment is required for this decision')).toBeInTheDocument();\n    expect(mockOnDecision).not.toHaveBeenCalled();\n  });\n\n  it('does not require comment for approve decision', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Approve'));\n    await user.click(screen.getByText('Submit Decision'));\n\n    expect(mockOnDecision).toHaveBeenCalledWith('approve', 'medium', '');\n  });\n\n  it('submits decision with comment', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Reject'));\n    await user.type(screen.getByPlaceholderText('Reason for decision...'), 'Test comment');\n    await user.click(screen.getByText('Submit Decision'));\n\n    expect(mockOnDecision).toHaveBeenCalledWith('reject', 'medium', 'Test comment');\n  });\n\n  it('allows confidence level selection', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Approve'));\n    await user.click(screen.getByText('High'));\n    await user.click(screen.getByText('Submit Decision'));\n\n    expect(mockOnDecision).toHaveBeenCalledWith('approve', 'high', '');\n  });\n\n  it('cancels decision with Escape key', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Approve'));\n    expect(screen.getByText('Confirm Approve')).toBeInTheDocument();\n\n    await user.keyboard('{Escape}');\n    expect(screen.queryByText('Confirm Approve')).not.toBeInTheDocument();\n    expect(screen.getByText('Approve')).toBeInTheDocument();\n  });\n\n  it('cancels decision with cancel button', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Approve'));\n    expect(screen.getByText('Confirm Approve')).toBeInTheDocument();\n\n    await user.click(screen.getByText('Cancel (Esc)'));\n    expect(screen.queryByText('Confirm Approve')).not.toBeInTheDocument();\n  });\n\n  it('resets form after successful submission', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Reject'));\n    await user.type(screen.getByPlaceholderText('Reason for decision...'), 'Test comment');\n    await user.click(screen.getByText('Submit Decision'));\n\n    expect(screen.getByText('Approve')).toBeInTheDocument();\n    expect(screen.queryByText('Confirm Reject')).not.toBeInTheDocument();\n  });\n\n  it('disables buttons when disabled prop is true', () => {\n    render(<DecisionPanel onDecision={mockOnDecision} disabled={true} />);\n\n    const approveButton = screen.getByText('Approve').closest('button');\n    const rejectButton = screen.getByText('Reject').closest('button');\n    const escalateButton = screen.getByText('Escalate').closest('button');\n\n    expect(approveButton).toBeDisabled();\n    expect(rejectButton).toBeDisabled();\n    expect(escalateButton).toBeDisabled();\n  });\n\n  it('shows required asterisk for comment on reject/escalate', async () => {\n    const user = userEvent.setup();\n    const { rerender } = render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Reject'));\n    expect(screen.getByText('Comment')).toBeInTheDocument();\n    expect(screen.getByText('*')).toBeInTheDocument();\n\n    // Reset the component state by rerendering\n    rerender(<DecisionPanel onDecision={mockOnDecision} key=\"reset\" />);\n    await user.click(screen.getByText('Approve'));\n    expect(screen.getByText('Comment')).toBeInTheDocument();\n    expect(screen.queryByText('*')).not.toBeInTheDocument();\n  });\n\n  it('has proper accessibility attributes', () => {\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    const region = screen.getByRole('region', { name: 'Decision Panel' });\n    expect(region).toBeInTheDocument();\n\n    // Check that buttons have the correct aria attributes\n    const approveButton = screen.getByText('Approve').closest('button');\n    expect(approveButton).toHaveAttribute('aria-keyshortcuts', 'a');\n    expect(approveButton).toHaveAttribute('aria-description', 'Approve this alert as legitimate. Keyboard shortcut: A');\n\n    const rejectButton = screen.getByText('Reject').closest('button');\n    expect(rejectButton).toHaveAttribute('aria-keyshortcuts', 'r');\n    expect(rejectButton).toHaveAttribute('aria-description', 'Reject this alert as false positive. Keyboard shortcut: R');\n\n    const escalateButton = screen.getByText('Escalate').closest('button');\n    expect(escalateButton).toHaveAttribute('aria-keyshortcuts', 'e');\n    expect(escalateButton).toHaveAttribute('aria-description', 'Escalate this alert for senior review. Keyboard shortcut: E');\n  });\n\n  it('shows different placeholder text for approve vs other decisions', async () => {\n    const user = userEvent.setup();\n    render(<DecisionPanel onDecision={mockOnDecision} />);\n\n    await user.click(screen.getByText('Approve'));\n    expect(screen.getByPlaceholderText('Optional comment...')).toBeInTheDocument();\n\n    await user.click(screen.getByText('Cancel (Esc)'));\n    await user.click(screen.getByText('Reject'));\n    expect(screen.getByPlaceholderText('Reason for decision...')).toBeInTheDocument();\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/__tests__/UploadZone.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userEvent' is defined but never used.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi } from 'vitest';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { UploadZone } from '../components/ingestion/UploadZone';\n\n// Mock react-dropzone to avoid complex setup\nconst mockUseDropzone = vi.fn();\nvi.mock('react-dropzone', () => ({\n  useDropzone: mockUseDropzone,\n}));\n\ndescribe('UploadZone', () => {\n  const mockOnUpload = vi.fn();\n\n  beforeEach(() => {\n    mockOnUpload.mockClear();\n    mockUseDropzone.mockReturnValue({\n      getRootProps: () => ({\n        onClick: vi.fn(),\n        onKeyDown: vi.fn(),\n        onFocus: vi.fn(),\n        onBlur: vi.fn(),\n        onDragEnter: vi.fn(),\n        onDragLeave: vi.fn(),\n        onDragOver: vi.fn(),\n        onDrop: vi.fn(),\n        tabIndex: 0,\n      }),\n      getInputProps: () => ({\n        type: 'file',\n        multiple: false,\n        accept: '',\n        onChange: vi.fn(),\n        onClick: vi.fn(),\n      }),\n      isDragActive: false,\n    });\n  });\n\n  it('renders upload zone with default state', () => {\n    render(<UploadZone onUpload={mockOnUpload} />);\n\n    expect(screen.getByText('Drag & drop files here')).toBeInTheDocument();\n    expect(screen.getByText('or click to browse from your computer')).toBeInTheDocument();\n    expect(screen.getByText('PDF')).toBeInTheDocument();\n    expect(screen.getByText('CSV')).toBeInTheDocument();\n    expect(screen.getByText('XLSX')).toBeInTheDocument();\n    expect(screen.getByText('Max file size: 50MB')).toBeInTheDocument();\n  });\n\n  it('renders with showProcessing prop', () => {\n    render(<UploadZone onUpload={mockOnUpload} showProcessing={true} />);\n\n    expect(screen.getByText('Drag & drop files here')).toBeInTheDocument();\n    // The mock doesn't apply CSS classes, so we just verify it renders\n  });\n\n  it('displays supported file types', () => {\n    render(<UploadZone onUpload={mockOnUpload} />);\n\n    expect(screen.getByText('PDF')).toBeInTheDocument();\n    expect(screen.getByText('JPG')).toBeInTheDocument();\n    expect(screen.getByText('PNG')).toBeInTheDocument();\n    expect(screen.getByText('CSV')).toBeInTheDocument();\n    expect(screen.getByText('XLSX')).toBeInTheDocument();\n  });\n\n  it('shows upload icon', () => {\n    render(<UploadZone onUpload={mockOnUpload} />);\n\n    // Check that the upload icon is present (it has specific classes)\n    const iconContainer = screen.getByText('Drag & drop files here').previousElementSibling;\n    expect(iconContainer).toHaveClass('p-4');\n  });\n\n  it('has proper structure', () => {\n    render(<UploadZone onUpload={mockOnUpload} />);\n\n    // Check that the main container has the expected structure\n    const container = screen.getByText('Drag & drop files here').closest('.w-full');\n    expect(container).toBeInTheDocument();\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/__tests__/visualization-helpers.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1476,1479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1476,1479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1865,1868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1865,1868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi } from 'vitest';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport { parsePathResponse } from '../pages/Visualization';\nimport { ForceDirectedGraph } from '../components/visualization/ForceDirectedGraph';\nimport { SankeyFlow } from '../components/visualization/SankeyFlow';\n\nconst mockGraphData = {\n  nodes: [\n    { id: 'a', name: 'A', group: 1 },\n    { id: 'b', name: 'B', group: 2 },\n  ],\n  links: [\n    { source: 'a', target: 'b', value: 1 },\n  ],\n};\n\nconst mockSankeyData = {\n  nodes: [\n    { id: 'in', name: 'Inflow' },\n    { id: 'bank', name: 'Bank' },\n  ],\n  links: [\n    { source: 'in', target: 'bank', value: 10 },\n  ],\n};\n\ndescribe('parsePathResponse', () => {\n  it('handles top-level path', () => {\n    expect(parsePathResponse({ path: ['a', 'b'] })).toEqual(['a', 'b']);\n  });\n\n  it('handles nested path shapes', () => {\n    expect(parsePathResponse({ data: { path: [1, 2] } })).toEqual(['1', '2']);\n    expect(parsePathResponse({ data: { shortest_path: ['x'] } })).toEqual(['x']);\n  });\n\n  it('returns empty array for invalid shapes', () => {\n    expect(parsePathResponse({})).toEqual([]);\n    expect(parsePathResponse({ data: { foo: 'bar' } })).toEqual([]);\n  });\n});\n\ndescribe('ForceDirectedGraph controls', () => {\n  it('calls onReset when reset is clicked', () => {\n    const onReset = vi.fn();\n    render(\n      <ForceDirectedGraph\n        data={mockGraphData as any}\n        highlightedNodes={['a']}\n        highlightedLinks={[{ source: 'a', target: 'b' }]}\n        onReset={onReset}\n      />\n    );\n\n    fireEvent.click(screen.getByText('Reset view'));\n    expect(onReset).toHaveBeenCalled();\n  });\n});\n\ndescribe('SankeyFlow rendering', () => {\n  it('renders node labels when data is provided', () => {\n    render(<SankeyFlow data={mockSankeyData as any} />);\n    expect(screen.getByText('Inflow')).toBeInTheDocument();\n    expect(screen.getByText('Bank')).toBeInTheDocument();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/KeyboardShortcutsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/NetworkMonitor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/PageErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/AIReasoningTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/AdjudicationQueueSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/AlertCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/AlertHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/AlertList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/ContextTabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/DecisionPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/EvidenceTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/GraphTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/adjudication/HistoryTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/admin/EnterpriseDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ai/AIAssistant.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'waitFor' is defined but never used.","line":3,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '../test/test-utils';\nimport { AIAssistant } from './AIAssistant';\n\ndescribe('AIAssistant', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n  });\n\n  it('renders AI assistant interface', () => {\n    render(<AIAssistant />);\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('shows persona selector', () => {\n    render(<AIAssistant />);\n    expect(screen.getByText('Analyst')).toBeInTheDocument();\n    expect(screen.getByText('Legal')).toBeInTheDocument();\n    expect(screen.getByText('CFO')).toBeInTheDocument();\n    expect(screen.getByText('Investigator')).toBeInTheDocument();\n  });\n\n  it('displays message input area', () => {\n    render(<AIAssistant />);\n    const textarea = screen.getByPlaceholderText(/ask me anything/i);\n    expect(textarea).toBeInTheDocument();\n  });\n\n  it('shows send button', () => {\n    render(<AIAssistant />);\n    const sendButton = screen.getByRole('button', { name: /send/i });\n    expect(sendButton).toBeInTheDocument();\n  });\n\n  it('displays voice input button', () => {\n    render(<AIAssistant />);\n    const voiceButton = screen.getByRole('button', { name: /voice input/i });\n    expect(voiceButton).toBeInTheDocument();\n  });\n\n  it('shows file upload button', () => {\n    render(<AIAssistant />);\n    const fileButton = screen.getByRole('button', { name: /upload file/i });\n    expect(fileButton).toBeInTheDocument();\n  });\n\n  it('displays initial welcome message', () => {\n    render(<AIAssistant />);\n    expect(screen.getByText(/how can i help you today/i)).toBeInTheDocument();\n  });\n\n  it('allows persona switching', async () => {\n    render(<AIAssistant />);\n\n    const legalButton = screen.getByText('Legal');\n    fireEvent.click(legalButton);\n\n    // Should update the persona (this would require mocking the context)\n    expect(legalButton).toBeInTheDocument();\n  });\n\n  it('handles message input', () => {\n    render(<AIAssistant />);\n\n    const textarea = screen.getByPlaceholderText(/ask me anything/i);\n    fireEvent.change(textarea, { target: { value: 'Test message' } });\n\n    expect(textarea).toHaveValue('Test message');\n  });\n\n  it('sends message when send button is clicked', async () => {\n    render(<AIAssistant />);\n\n    const textarea = screen.getByPlaceholderText(/ask me anything/i);\n    const sendButton = screen.getByRole('button', { name: /send/i });\n\n    fireEvent.change(textarea, { target: { value: 'Test message' } });\n    fireEvent.click(sendButton);\n\n    // Should show loading state or send message\n    expect(sendButton).toBeInTheDocument();\n  });\n\n  it('sends message when Enter is pressed', () => {\n    render(<AIAssistant />);\n\n    const textarea = screen.getByPlaceholderText(/ask me anything/i);\n\n    fireEvent.change(textarea, { target: { value: 'Test message' } });\n    fireEvent.keyDown(textarea, { key: 'Enter', code: 'Enter' });\n\n    expect(textarea).toHaveValue('Test message');\n  });\n\n  it('does not send empty message', () => {\n    render(<AIAssistant />);\n\n    const sendButton = screen.getByRole('button', { name: /send/i });\n    fireEvent.click(sendButton);\n\n    // Should not send empty message\n    expect(sendButton).toBeInTheDocument();\n  });\n\n  it('shows typing indicator when processing', () => {\n    // Mock processing state\n    render(<AIAssistant />);\n    // This would require mocking the AI context to show processing state\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('displays conversation history', () => {\n    // Mock conversation with messages\n    render(<AIAssistant />);\n    // This would require mocking the AI context with message history\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('handles file upload', () => {\n    render(<AIAssistant />);\n\n    const fileInput = screen.getByLabelText(/upload file/i);\n    const file = new File(['test content'], 'test.pdf', { type: 'application/pdf' });\n\n    fireEvent.change(fileInput, { target: { files: [file] } });\n\n    expect(fileInput).toBeInTheDocument();\n  });\n\n  it('shows voice recording interface when voice button is clicked', () => {\n    render(<AIAssistant />);\n\n    const voiceButton = screen.getByRole('button', { name: /voice input/i });\n    fireEvent.click(voiceButton);\n\n    // Should show voice recording UI\n    expect(voiceButton).toBeInTheDocument();\n  });\n\n  it('displays AI suggestions or quick actions', () => {\n    render(<AIAssistant />);\n\n    // Should show suggested questions or actions\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('handles case context selection', () => {\n    render(<AIAssistant />);\n\n    // Should allow selecting which case to analyze\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('shows confidence levels for AI responses', () => {\n    // Mock response with confidence score\n    render(<AIAssistant />);\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('allows feedback on AI responses', () => {\n    // Mock response with feedback buttons\n    render(<AIAssistant />);\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('handles network errors gracefully', () => {\n    // Mock network error during message send\n    render(<AIAssistant />);\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('supports keyboard shortcuts', () => {\n    render(<AIAssistant />);\n\n    // Should support keyboard shortcuts for common actions\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('maintains conversation context', () => {\n    // Should remember previous messages and context\n    render(<AIAssistant />);\n    expect(screen.getByText('AI Assistant')).toBeInTheDocument();\n  });\n\n  it('has proper accessibility attributes', () => {\n    render(<AIAssistant />);\n\n    const textarea = screen.getByPlaceholderText(/ask me anything/i);\n    expect(textarea).toHaveAttribute('aria-label', 'AI Assistant input');\n\n    const sendButton = screen.getByRole('button', { name: /send/i });\n    expect(sendButton).toHaveAttribute('aria-label', 'Send message');\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ai/AIAssistant.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/ai/AIAssistant.tsx:48:7\n  46 |       };\n  47 |\n> 48 |       setRecognition(recognitionInstance);\n     |       ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  49 |     }\n  50 |   }, []);\n  51 |","line":48,"column":7,"nodeType":null,"endLine":48,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useRef, useEffect, useState, ElementType } from 'react';\nimport { X, Send, Bot, MessageSquare, Scale, DollarSign, Sparkles, Mic, MicOff, FileText, TrendingUp } from 'lucide-react';\nimport { cn } from '../../lib/utils';\nimport { useAI, Persona } from '../../context/AIContext';\n\nexport function AIAssistant() {\n  const {\n    isOpen,\n    setIsOpen,\n    messages,\n    sendMessage,\n    isProcessing,\n    persona,\n    setPersona,\n    currentCaseId,\n    setFeedback\n  } = useAI();\n\n  const [inputValue, setInputValue] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [recognition, setRecognition] = useState<SpeechRecognition | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      const recognitionInstance = new SpeechRecognition();\n      recognitionInstance.continuous = false;\n      recognitionInstance.interimResults = false;\n      recognitionInstance.lang = 'en-US';\n\n      recognitionInstance.onresult = (event) => {\n        const transcript = event.results[0][0].transcript;\n        setInputValue(transcript);\n        setIsListening(false);\n      };\n\n      recognitionInstance.onerror = (event) => {\n        console.error('Speech recognition error:', event.error);\n        setIsListening(false);\n      };\n\n      recognitionInstance.onend = () => {\n        setIsListening(false);\n      };\n\n      setRecognition(recognitionInstance);\n    }\n  }, []);\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Keyboard shortcut: Cmd/Ctrl + / to toggle chat\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Cmd/Ctrl + / to toggle AI chat\n      if ((e.metaKey || e.ctrlKey) && e.key === '/') {\n        e.preventDefault();\n        setIsOpen(!isOpen);\n      }\n      // Escape to close chat\n      if (e.key === 'Escape' && isOpen) {\n        e.preventDefault();\n        setIsOpen(false);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, setIsOpen]);\n\n\n  const handleSend = async () => {\n    if (!inputValue.trim() || isProcessing) return;\n    const msg = inputValue;\n    setInputValue('');\n    await sendMessage(msg, currentCaseId);\n  };\n\n  const handleVoiceInput = () => {\n    if (!recognition) {\n      alert('Speech recognition is not supported in your browser.');\n      return;\n    }\n\n    if (isListening) {\n      recognition.stop();\n      setIsListening(false);\n    } else {\n      recognition.start();\n      setIsListening(true);\n    }\n  };\n\n  const handleQuickAnalysis = async (analysisType: string) => {\n    if (!currentCaseId) {\n      await sendMessage(`Please analyze this case for ${analysisType}`);\n      return;\n    }\n\n    let prompt = '';\n    switch (analysisType) {\n      case 'patterns':\n        prompt = 'Analyze transaction patterns and identify suspicious behavior';\n        break;\n      case 'risk':\n        prompt = 'Assess overall risk level and key risk factors';\n        break;\n      case 'recommendations':\n        prompt = 'Provide investigation recommendations and next steps';\n        break;\n      case 'summary':\n        prompt = 'Provide a comprehensive case summary';\n        break;\n    }\n\n    await sendMessage(prompt, currentCaseId);\n  };\n\n  const personas: { id: Persona; label: string; icon: ElementType; color: string }[] = [\n    { id: 'analyst', label: 'Analyst', icon: Bot, color: 'bg-blue-600' },\n    { id: 'legal', label: 'Legal', icon: Scale, color: 'bg-emerald-600' },\n    { id: 'cfo', label: 'CFO', icon: DollarSign, color: 'bg-purple-600' },\n    { id: 'investigator', label: 'Detective', icon: TrendingUp, color: 'bg-orange-600' },\n  ];\n\n  const currentPersona = personas.find(p => p.id === persona) || personas[0];\n\n  return (\n    <>\n      {/* Floating Button */}\n      {!isOpen && (\n        <button\n          onClick={() => setIsOpen(true)}\n          aria-label=\"Open AI Assistant\"\n          className={cn(\n            \"fixed bottom-6 right-6 p-4 text-white rounded-full shadow-lg hover:opacity-90 transition-all z-50\",\n            currentPersona.color\n          )}\n        >\n          <MessageSquare className=\"w-6 h-6\" />\n        </button>\n      )}\n\n      {/* Chat Window */}\n      {isOpen && (\n        <div className=\"fixed bottom-6 right-6 z-50 flex h-[600px] w-[400px] flex-col rounded-lg border border-slate-200 bg-white shadow-2xl dark:border-slate-700 dark:bg-slate-800 transition-all transform duration-200\">\n          \n          {/* Header */}\n          <div className={cn(\"flex flex-col rounded-t-lg px-4 py-3 text-white transition-colors\", currentPersona.color)}>\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"flex items-center gap-2\">\n                <currentPersona.icon className=\"h-5 w-5\" />\n                <h3 className=\"font-semibold\">Frenly AI</h3>\n              </div>\n              <button\n                onClick={() => setIsOpen(false)}\n                className=\"rounded-full p-1 hover:bg-white/20 focus:outline-none\"\n              >\n                <X className=\"h-5 w-5\" />\n              </button>\n            </div>\n            \n            {/* Persona Switcher */}\n            <div className=\"flex bg-black/20 rounded-lg p-1 gap-1\">\n              {personas.map((p) => (\n                <button\n                  key={p.id}\n                  onClick={() => setPersona(p.id)}\n                  className={cn(\n                    \"flex-1 flex items-center justify-center gap-1.5 py-1.5 text-xs font-medium rounded-md transition-all\",\n                    persona === p.id \n                      ? \"bg-white text-slate-900 shadow-sm\" \n                      : \"text-white/80 hover:bg-white/10\"\n                  )}\n                >\n                  <p.icon className=\"w-3 h-3\" />\n                  {p.label}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Messages */}\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 dark:bg-slate-900/50\">\n            {messages.map((msg, idx) => (\n              <div\n                key={idx}\n                className={cn(\n                  'flex flex-col space-y-2',\n                  msg.role === 'user' ? 'items-end' : 'items-start'\n                )}\n              >\n                <div className=\"flex items-end gap-2 max-w-[85%]\">\n                   {msg.role === 'assistant' && (\n                     <div className={cn(\"w-6 h-6 rounded-full flex items-center justify-center shrink-0 text-white text-[10px]\", \n                       msg.persona === 'legal' ? 'bg-emerald-600' : \n                       msg.persona === 'cfo' ? 'bg-purple-600' : 'bg-blue-600'\n                     )}>\n                       {msg.persona === 'legal' ? <Scale className=\"w-3 h-3\" /> : \n                        msg.persona === 'cfo' ? <DollarSign className=\"w-3 h-3\" /> : \n                        <Bot className=\"w-3 h-3\" />}\n                     </div>\n                   )}\n                   \n                   <div\n                    className={cn(\n                      'rounded-2xl px-4 py-2.5 text-sm shadow-sm',\n                      msg.role === 'user'\n                        ? 'bg-blue-600 text-white rounded-br-none'\n                        : 'bg-white text-slate-700 dark:bg-slate-800 dark:text-slate-200 rounded-bl-none border border-slate-100 dark:border-slate-700'\n                    )}\n                  >\n                    <div className=\"flex items-center justify-between gap-2 mb-1\">\n                      {msg.role === 'assistant' && msg.insights?.length ? (\n                        <span className=\"inline-flex items-center gap-1 rounded-full bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-100 px-2 py-0.5 text-[11px]\">\n                          Confidence {Math.max(...msg.insights.map(i => i.confidence))}%\n                        </span>\n                      ) : null}\n                      {msg.feedback && msg.role === 'assistant' && (\n                        <span className=\"text-xs text-slate-500\">{msg.feedback === 'positive' ? ' Thank you' : ' Noted'}</span>\n                      )}\n                    </div>\n                    {msg.content}\n                  </div>\n                </div>\n\n                {/* Insights */}\n                {msg.insights && msg.insights.length > 0 && (\n                  <div className=\"ml-8 mt-2 space-y-2\">\n                    {msg.insights.map((insight, iIdx) => (\n                      <div\n                        key={iIdx}\n                        className={cn(\n                          \"p-3 rounded-lg border text-sm\",\n                          insight.type === 'risk' ? \"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800\" :\n                          insight.type === 'pattern' ? \"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800\" :\n                          insight.type === 'recommendation' ? \"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800\" :\n                          \"bg-gray-50 border-gray-200 dark:bg-gray-900/20 dark:border-gray-800\"\n                        )}\n                      >\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <span className=\"font-medium capitalize\">{insight.type}</span>\n                          <span className=\"text-xs opacity-75\">\n                            {insight.confidence}% confidence\n                          </span>\n                        </div>\n                        <div className=\"font-medium mb-1\">{insight.title}</div>\n                        <div className=\"text-xs opacity-90\">{insight.description}</div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {/* Suggestions Chips */}\n                {msg.suggestions && msg.suggestions.length > 0 && (\n                  <div className=\"flex flex-wrap gap-2 ml-8\">\n                    {msg.suggestions.map((suggestion, sIdx) => (\n                      <button\n                        key={sIdx}\n                        onClick={() => sendMessage(suggestion, msg.caseId)}\n                        className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-indigo-50 text-indigo-700 text-xs font-medium hover:bg-indigo-100 border border-indigo-100 transition-colors dark:bg-indigo-900/20 dark:text-indigo-300 dark:border-indigo-800\"\n                      >\n                        <Sparkles className=\"w-3 h-3\" />\n                        {suggestion}\n                      </button>\n                    ))}\n                  </div>\n                )}\n\n                {msg.role === 'assistant' && (\n                  <div className=\"flex items-center gap-2 ml-8 text-xs text-slate-500\">\n                    <span>Was this helpful?</span>\n                    <button\n                      onClick={() => setFeedback(msg.timestamp, 'positive')}\n                      className={cn(\n                        'px-2 py-1 rounded-md border transition-colors',\n                        msg.feedback === 'positive' ? 'bg-green-50 border-green-200 text-green-700' : 'border-slate-200 hover:bg-slate-100'\n                      )}\n                    >\n                       Yes\n                    </button>\n                    <button\n                      onClick={() => setFeedback(msg.timestamp, 'negative')}\n                      className={cn(\n                        'px-2 py-1 rounded-md border transition-colors',\n                        msg.feedback === 'negative' ? 'bg-red-50 border-red-200 text-red-700' : 'border-slate-200 hover:bg-slate-100'\n                      )}\n                    >\n                       No\n                    </button>\n                  </div>\n                )}\n              </div>\n            ))}\n            \n            {isProcessing && (\n              <div className=\"flex items-start gap-2\">\n                 <div className={cn(\"w-6 h-6 rounded-full flex items-center justify-center shrink-0 text-white\", currentPersona.color)}>\n                   <currentPersona.icon className=\"w-3 h-3 animate-pulse\" />\n                 </div>\n                 <div className=\"bg-white dark:bg-slate-800 rounded-2xl rounded-bl-none px-4 py-3 border border-slate-100 dark:border-slate-700 shadow-sm\">\n                   <div className=\"flex space-x-1\">\n                     <div className=\"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-0\"></div>\n                     <div className=\"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-150\"></div>\n                     <div className=\"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-300\"></div>\n                   </div>\n                 </div>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Quick Actions */}\n          {currentCaseId && (\n            <div className=\"border-t border-slate-200 p-3 bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700\">\n              <div className=\"flex gap-2 flex-wrap\">\n                <button\n                  onClick={() => handleQuickAnalysis('summary')}\n                  disabled={isProcessing}\n                  className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-blue-50 text-blue-700 text-xs font-medium hover:bg-blue-100 border border-blue-100 transition-colors disabled:opacity-50\"\n                >\n                  <FileText className=\"w-3 h-3\" />\n                  Summary\n                </button>\n                <button\n                  onClick={() => handleQuickAnalysis('patterns')}\n                  disabled={isProcessing}\n                  className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-green-50 text-green-700 text-xs font-medium hover:bg-green-100 border border-green-100 transition-colors disabled:opacity-50\"\n                >\n                  <TrendingUp className=\"w-3 h-3\" />\n                  Patterns\n                </button>\n                <button\n                  onClick={() => handleQuickAnalysis('risk')}\n                  disabled={isProcessing}\n                  className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-red-50 text-red-700 text-xs font-medium hover:bg-red-100 border border-red-100 transition-colors disabled:opacity-50\"\n                >\n                  <TrendingUp className=\"w-3 h-3\" />\n                  Risk\n                </button>\n                <button\n                  onClick={() => handleQuickAnalysis('recommendations')}\n                  disabled={isProcessing}\n                  className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-purple-50 text-purple-700 text-xs font-medium hover:bg-purple-100 border border-purple-100 transition-colors disabled:opacity-50\"\n                >\n                  <Sparkles className=\"w-3 h-3\" />\n                  Actions\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Input */}\n          <div className=\"border-t border-slate-200 p-4 bg-white dark:bg-slate-800 dark:border-slate-700 rounded-b-lg\">\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={inputValue}\n                onChange={(e) => setInputValue(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n                placeholder={`Ask the ${currentPersona.label}...`}\n                disabled={isProcessing}\n                className=\"flex-1 rounded-full border border-slate-300 px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:border-slate-600 dark:bg-slate-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed\"\n                enterKeyHint=\"send\"\n                autoComplete=\"off\"\n                autoCapitalize=\"sentences\"\n                autoCorrect=\"on\"\n                spellCheck=\"true\"\n              />\n              {recognition && (\n                <button\n                  onClick={handleVoiceInput}\n                  disabled={isProcessing}\n                  aria-label={isListening ? \"Stop voice input\" : \"Start voice input\"}\n                  className={cn(\n                    \"rounded-full p-2.5 text-white shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation\",\n                    isListening ? \"bg-red-500 animate-pulse\" : \"bg-green-500\"\n                  )}\n                >\n                  {isListening ? <MicOff className=\"h-5 w-5\" /> : <Mic className=\"h-5 w-5\" />}\n                </button>\n              )}\n              <button\n                onClick={handleSend}\n                disabled={!inputValue.trim() || isProcessing}\n                aria-label=\"Send message\"\n                className={cn(\n                  \"rounded-full p-2.5 text-white shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation\",\n                  currentPersona.color,\n                  \"focus:ring-\" + currentPersona.color.replace('bg-', '')\n                )}\n              >\n                <Send className=\"h-5 w-5 ml-0.5\" />\n              </button>\n            </div>\n\n            {/* Mobile-specific features */}\n            <div className=\"mt-3 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400 md:hidden\">\n              <div className=\"flex items-center gap-3\">\n                {recognition && (\n                  <span className=\"flex items-center gap-1\">\n                    <Mic className=\"w-3 h-3\" />\n                    Voice enabled\n                  </span>\n                )}\n                <span>AI Assistant</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <div className={`w-2 h-2 rounded-full ${isProcessing ? 'bg-blue-500 animate-pulse' : 'bg-green-500'}`} />\n                {isProcessing ? 'Thinking...' : 'Ready'}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ai/AutomatedCaseSummaries.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'mockSummaries' and 'summaries.length'. Either include them or remove the dependency array.","line":132,"column":6,"nodeType":"ArrayExpression","endLine":132,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [mockSummaries, summaries.length]","fix":{"range":[4639,4641],"text":"[mockSummaries, summaries.length]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport {\n  FileText,\n  Brain,\n  Download,\n  RefreshCw,\n  Eye,\n  EyeOff,\n  Copy,\n  CheckCircle,\n  AlertTriangle,\n  TrendingUp,\n  Users\n} from 'lucide-react';\nimport { api } from '../../lib/api';\n\ninterface SummaryResponse {\n  summary: CaseSummary;\n}\n\n\ninterface CaseSummary {\n  id: string;\n  case_id: string;\n  summary_type: 'executive' | 'detailed' | 'risk' | 'evidence' | 'timeline';\n  title: string;\n  content: string;\n  key_findings: string[];\n  recommendations: string[];\n  confidence_score: number;\n  generated_at: string;\n  model_used: string;\n  word_count: number;\n}\n\ninterface AutomatedCaseSummariesProps {\n  caseId: string;\n  onSummarySelect?: (summary: CaseSummary) => void;\n  onGenerateSummary?: (type: string) => void;\n}\n\nexport function AutomatedCaseSummaries({\n  caseId,\n  onSummarySelect,\n  onGenerateSummary\n}: AutomatedCaseSummariesProps) {\n  const [selectedSummary, setSelectedSummary] = useState<CaseSummary | null>(null);\n  const [isGenerating, setIsGenerating] = useState<string | null>(null);\n  const [summaries, setSummaries] = useState<CaseSummary[]>([]);\n  const [showDetails, setShowDetails] = useState(true);\n\n  // Mock data - in real implementation, this would come from API\n  const mockSummaries: CaseSummary[] = [\n    {\n      id: 'exec_001',\n      case_id: caseId,\n      summary_type: 'executive',\n      title: 'Executive Summary',\n      content: 'This case involves a complex financial investigation with multiple transactions totaling $2.3M across 15 different accounts. The primary suspect has been identified with high confidence based on transaction patterns and evidence correlation.',\n      key_findings: [\n        'Total transaction volume: $2.3M across 15 accounts',\n        'Primary suspect identified with 85% confidence',\n        'Evidence includes bank statements and witness testimony',\n        'Risk score elevated due to international transfers'\n      ],\n      recommendations: [\n        'Escalate to senior investigation team',\n        'Request additional evidence from international partners',\n        'Monitor suspect accounts for 90 days',\n        'Prepare case for prosecution review'\n      ],\n      confidence_score: 0.87,\n      generated_at: new Date().toISOString(),\n      model_used: 'claude-3-sonnet',\n      word_count: 124\n    },\n    {\n      id: 'risk_001',\n      case_id: caseId,\n      summary_type: 'risk',\n      title: 'Risk Assessment Summary',\n      content: 'The case presents multiple high-risk indicators including unusual transaction patterns, international money movement, and connections to known high-risk jurisdictions. Risk mitigation strategies should focus on immediate account monitoring and enhanced due diligence.',\n      key_findings: [\n        'High-risk transaction patterns detected',\n        'International jurisdiction exposure',\n        'Unusual velocity in fund movements',\n        'Potential structuring indicators present'\n      ],\n      recommendations: [\n        'Implement enhanced transaction monitoring',\n        'Conduct enhanced due diligence on all parties',\n        'Freeze suspicious accounts pending investigation',\n        'Engage compliance team for regulatory reporting'\n      ],\n      confidence_score: 0.92,\n      generated_at: new Date().toISOString(),\n      model_used: 'claude-3-sonnet',\n      word_count: 98\n    },\n    {\n      id: 'evidence_001',\n      case_id: caseId,\n      summary_type: 'evidence',\n      title: 'Evidence Analysis Summary',\n      content: 'The evidence package includes 23 documents, 15 transaction records, and 8 witness statements. Key evidence includes bank records showing suspicious patterns and documentary evidence of intent. Chain of custody has been maintained throughout the investigation.',\n      key_findings: [\n        '23 documents collected and analyzed',\n        '15 transaction records with suspicious patterns',\n        '8 witness statements obtained',\n        'Chain of custody fully documented'\n      ],\n      recommendations: [\n        'Strengthen evidence with additional witness interviews',\n        'Obtain court orders for additional financial records',\n        'Document all evidence handling procedures',\n        'Prepare evidence for legal review'\n      ],\n      confidence_score: 0.89,\n      generated_at: new Date().toISOString(),\n      model_used: 'claude-3-sonnet',\n      word_count: 87\n    }\n  ];\n\n  // Initialize with mock data\n  useMemo(() => {\n    if (summaries.length === 0) {\n      setSummaries(mockSummaries);\n    }\n  }, []);\n\n  const generateSummary = async (type: string) => {\n    setIsGenerating(type);\n    try {\n      // In real implementation, this would call the AI service\n      const response = await api.post<SummaryResponse>('/ai/generate-summary', {\n        case_id: caseId,\n        summary_type: type\n      });\n\n      const newSummary: CaseSummary = response.summary;\n      setSummaries(prev => [...prev, newSummary]);\n      onGenerateSummary?.(type);\n    } catch (error) {\n      console.error('Summary generation failed:', error);\n    } finally {\n      setIsGenerating(null);\n    }\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n  };\n\n  const exportSummary = (summary: CaseSummary, format: 'txt' | 'pdf') => {\n    const content = `\n${summary.title}\nGenerated: ${new Date(summary.generated_at).toLocaleString()}\nModel: ${summary.model_used}\nConfidence: ${(summary.confidence_score * 100).toFixed(1)}%\n\n${summary.content}\n\nKey Findings:\n${summary.key_findings.map(f => ` ${f}`).join('\\n')}\n\nRecommendations:\n${summary.recommendations.map(r => ` ${r}`).join('\\n')}\n    `.trim();\n\n    if (format === 'txt') {\n      const blob = new Blob([content], { type: 'text/plain' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `${summary.title.replace(/\\s+/g, '_')}.txt`;\n      a.click();\n      URL.revokeObjectURL(url);\n    }\n  };\n\n  const getSummaryIcon = (type: string) => {\n    switch (type) {\n      case 'executive': return <FileText className=\"h-4 w-4 text-blue-500\" />;\n      case 'detailed': return <FileText className=\"h-4 w-4 text-green-500\" />;\n      case 'risk': return <AlertTriangle className=\"h-4 w-4 text-red-500\" />;\n      case 'evidence': return <CheckCircle className=\"h-4 w-4 text-purple-500\" />;\n      case 'timeline': return <TrendingUp className=\"h-4 w-4 text-amber-500\" />;\n      default: return <FileText className=\"h-4 w-4 text-slate-500\" />;\n    }\n  };\n\n  const getConfidenceColor = (score: number) => {\n    if (score >= 0.9) return 'text-green-600 bg-green-50 dark:bg-green-500/10';\n    if (score >= 0.8) return 'text-blue-600 bg-blue-50 dark:bg-blue-500/10';\n    if (score >= 0.7) return 'text-amber-600 bg-amber-50 dark:bg-amber-500/10';\n    return 'text-red-600 bg-red-50 dark:bg-red-500/10';\n  };\n\n  const summaryTypes = [\n    { id: 'executive', label: 'Executive Summary', description: 'High-level overview for stakeholders' },\n    { id: 'detailed', label: 'Detailed Analysis', description: 'Comprehensive case breakdown' },\n    { id: 'risk', label: 'Risk Assessment', description: 'Focus on risk factors and mitigation' },\n    { id: 'evidence', label: 'Evidence Summary', description: 'Evidence collection and analysis' },\n    { id: 'timeline', label: 'Timeline Summary', description: 'Chronological case progression' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            Automated Case Summaries\n          </h2>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            AI-generated summaries and analysis reports\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant={showDetails ? 'primary' : 'outline'}\n            size=\"sm\"\n            onClick={() => setShowDetails(!showDetails)}\n          >\n            {showDetails ? <EyeOff className=\"h-4 w-4 mr-1\" /> : <Eye className=\"h-4 w-4 mr-1\" />}\n            {showDetails ? 'Hide' : 'Show'} Details\n          </Button>\n          <Brain className=\"h-5 w-5 text-purple-500\" />\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Summary Types */}\n        <div className=\"lg:col-span-1\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Generate Summary</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {summaryTypes.map((type) => {\n                  const existingSummary = summaries.find(s => s.summary_type === type.id);\n                  return (\n                    <div key={type.id} className=\"p-3 border border-slate-200 dark:border-slate-700 rounded-lg\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div className=\"flex items-center gap-2\">\n                          {getSummaryIcon(type.id)}\n                          <span className=\"font-medium text-sm\">{type.label}</span>\n                        </div>\n                        {existingSummary && (\n                          <span className=\"text-xs bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-300 px-2 py-1 rounded\">\n                            Generated\n                          </span>\n                        )}\n                      </div>\n                      <p className=\"text-xs text-slate-600 dark:text-slate-400 mb-3\">\n                        {type.description}\n                      </p>\n                      <Button\n                        size=\"sm\"\n                        variant={existingSummary ? 'outline' : 'primary'}\n\n                        onClick={() => generateSummary(type.id)}\n                        disabled={isGenerating === type.id}\n                        className=\"w-full\"\n                      >\n                        {isGenerating === type.id ? (\n                          <RefreshCw className=\"h-3 w-3 mr-1 animate-spin\" />\n                        ) : (\n                          <Brain className=\"h-3 w-3 mr-1\" />\n                        )}\n                        {existingSummary ? 'Regenerate' : 'Generate'}\n                      </Button>\n                    </div>\n                  );\n                })}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Summaries List */}\n        <div className=\"lg:col-span-2\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center justify-between\">\n                <span>Generated Summaries ({summaries.length})</span>\n                <div className=\"flex items-center gap-2 text-sm text-slate-500\">\n                  <Brain className=\"h-4 w-4\" />\n                  AI-Powered\n                </div>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {summaries.length === 0 ? (\n                <div className=\"text-center py-8 text-slate-500\">\n                  <FileText className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                  <p>No summaries generated yet</p>\n                  <p className=\"text-sm mt-1\">Select a summary type to generate AI-powered analysis</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {summaries.map((summary) => (\n                    <div\n                      key={summary.id}\n                      className={`border rounded-lg p-4 cursor-pointer transition-colors ${\n                        selectedSummary?.id === summary.id\n                          ? 'border-blue-500 bg-blue-50 dark:bg-blue-500/10'\n                          : 'border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600'\n                      }`}\n                      onClick={() => {\n                        setSelectedSummary(summary);\n                        onSummarySelect?.(summary);\n                      }}\n                    >\n                      <div className=\"flex items-start justify-between mb-3\">\n                        <div className=\"flex items-center gap-2\">\n                          {getSummaryIcon(summary.summary_type)}\n                          <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                            {summary.title}\n                          </h4>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <span className={`text-xs px-2 py-1 rounded ${getConfidenceColor(summary.confidence_score)}`}>\n                            {(summary.confidence_score * 100).toFixed(0)}%\n                          </span>\n                          <div className=\"flex gap-1\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"ghost\"\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                copyToClipboard(summary.content);\n                              }}\n                            >\n                              <Copy className=\"h-3 w-3\" />\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"ghost\"\n                              onClick={() => exportSummary(summary, 'txt')}\n\n                            >\n                              <Download className=\"h-3 w-3\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n\n                      <p className=\"text-sm text-slate-700 dark:text-slate-300 mb-3 line-clamp-2\">\n                        {summary.content}\n                      </p>\n\n                      <div className=\"flex items-center justify-between text-xs text-slate-500\">\n                        <div className=\"flex items-center gap-4\">\n                          <span>{summary.word_count} words</span>\n                          <span>{summary.model_used}</span>\n                          <span>{new Date(summary.generated_at).toLocaleDateString()}</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <span>Key findings: {summary.key_findings.length}</span>\n                          <span>Recommendations: {summary.recommendations.length}</span>\n                        </div>\n                      </div>\n\n                      {showDetails && selectedSummary?.id === summary.id && (\n                        <div className=\"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700\">\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                              <h5 className=\"font-medium text-sm mb-2 text-slate-900 dark:text-slate-100\">\n                                Key Findings\n                              </h5>\n                              <ul className=\"space-y-1\">\n                                {summary.key_findings.map((finding, idx) => (\n                                  <li key={idx} className=\"flex items-start gap-2 text-sm\">\n                                    <div className=\"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0\" />\n                                    <span className=\"text-slate-700 dark:text-slate-300\">{finding}</span>\n                                  </li>\n                                ))}\n                              </ul>\n                            </div>\n                            <div>\n                              <h5 className=\"font-medium text-sm mb-2 text-slate-900 dark:text-slate-100\">\n                                Recommendations\n                              </h5>\n                              <ul className=\"space-y-1\">\n                                {summary.recommendations.map((rec, idx) => (\n                                  <li key={idx} className=\"flex items-start gap-2 text-sm\">\n                                    <CheckCircle className=\"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                                    <span className=\"text-slate-700 dark:text-slate-300\">{rec}</span>\n                                  </li>\n                                ))}\n                              </ul>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Summary Stats */}\n      {summaries.length > 0 && (\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <Card>\n            <CardContent className=\"pt-4\">\n              <div className=\"text-center\">\n                <FileText className=\"h-6 w-6 text-blue-500 mx-auto mb-2\" />\n                <div className=\"text-lg font-bold text-blue-600\">{summaries.length}</div>\n                <div className=\"text-xs text-slate-600 dark:text-slate-400\">Summaries Generated</div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"pt-4\">\n              <div className=\"text-center\">\n                <Brain className=\"h-6 w-6 text-purple-500 mx-auto mb-2\" />\n                <div className=\"text-lg font-bold text-purple-600\">\n                  {(summaries.reduce((sum, s) => sum + s.confidence_score, 0) / summaries.length * 100).toFixed(0)}%\n                </div>\n                <div className=\"text-xs text-slate-600 dark:text-slate-400\">Avg Confidence</div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"pt-4\">\n              <div className=\"text-center\">\n                <Users className=\"h-6 w-6 text-green-500 mx-auto mb-2\" />\n                <div className=\"text-lg font-bold text-green-600\">\n                  {summaries.reduce((sum, s) => sum + s.key_findings.length, 0)}\n                </div>\n                <div className=\"text-xs text-slate-600 dark:text-slate-400\">Key Findings</div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"pt-4\">\n              <div className=\"text-center\">\n                <TrendingUp className=\"h-6 w-6 text-amber-500 mx-auto mb-2\" />\n                <div className=\"text-lg font-bold text-amber-600\">\n                  {summaries.reduce((sum, s) => sum + s.recommendations.length, 0)}\n                </div>\n                <div className=\"text-xs text-slate-600 dark:text-slate-400\">Recommendations</div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ai/EntityDisambiguation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ai/NaturalLanguageSearch.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[546,549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[546,549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[759,762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[759,762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport { Input } from '../ui/Input';\nimport {\n  Search,\n  Mic,\n  MicOff,\n  MessageSquare,\n  Brain,\n  Sparkles,\n  Clock,\n  User,\n  FileText,\n  TrendingUp\n} from 'lucide-react';\nimport { api } from '../../lib/api';\n\ninterface NLQuery {\n  id: string;\n  query: string;\n  intent: 'search' | 'analyze' | 'summarize' | 'compare' | 'predict';\n  entities: string[];\n  filters: Record<string, any>;\n  timestamp: string;\n}\n\ninterface NLSearchResult {\n  type: 'case' | 'transaction' | 'evidence' | 'analysis';\n  id: string;\n  title: string;\n  relevance: number;\n  snippet: string;\n  metadata: Record<string, any>;\n}\n\ninterface NaturalLanguageSearchProps {\n  onResultClick?: (result: NLSearchResult) => void;\n  onQuerySubmit?: (query: NLQuery) => void;\n  placeholder?: string;\n}\n\ninterface NLSuggestionsResponse {\n  suggestions: string[];\n}\n\ninterface NLQueryResponse {\n  processedQuery: NLQuery;\n  results: NLSearchResult[];\n  explanation?: string;\n}\n\nexport function NaturalLanguageSearch({\n  onResultClick,\n  onQuerySubmit,\n  placeholder = \"Ask me anything about cases, transactions, or evidence...\"\n}: NaturalLanguageSearchProps) {\n  const [query, setQuery] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [results, setResults] = useState<NLSearchResult[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [conversation, setConversation] = useState<Array<{\n    type: 'user' | 'ai';\n    content: string;\n    timestamp: string;\n  }>>([]);\n\n  const recognitionRef = useRef<SpeechRecognition | null>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      recognitionRef.current = new SpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = 'en-US';\n\n      recognitionRef.current.onresult = (event) => {\n        const transcript = event.results[0][0].transcript;\n        setQuery(transcript);\n        setIsListening(false);\n      };\n\n      recognitionRef.current.onerror = () => {\n        setIsListening(false);\n      };\n\n      recognitionRef.current.onend = () => {\n        setIsListening(false);\n      };\n    }\n\n    return () => {\n      if (recognitionRef.current) {\n        recognitionRef.current.stop();\n      }\n    };\n  }, []);\n\n  // Generate suggestions based on query\n  useEffect(() => {\n    if (query.length > 2) {\n      generateSuggestions(query);\n    } else {\n      setSuggestions([]);\n    }\n  }, [query]);\n\n  const generateSuggestions = async (input: string) => {\n    try {\n      // This would call an AI service to generate query suggestions\n      const response = await api.post<NLSuggestionsResponse>('/ai/nl-suggestions', { query: input });\n      setSuggestions(response.suggestions || []);\n    } catch {\n      // Fallback suggestions\n      setSuggestions([\n        `Find cases related to \"${input}\"`,\n        `Show transactions for \"${input}\"`,\n        `Analyze evidence about \"${input}\"`,\n        `Compare cases involving \"${input}\"`\n      ]);\n    }\n  };\n\n\n  const startListening = () => {\n    if (recognitionRef.current && !isListening) {\n      setIsListening(true);\n      recognitionRef.current.start();\n    }\n  };\n\n  const stopListening = () => {\n    if (recognitionRef.current && isListening) {\n      setIsListening(false);\n      recognitionRef.current.stop();\n    }\n  };\n\n  const processNaturalLanguageQuery = async (userQuery: string) => {\n    setIsLoading(true);\n\n    try {\n      // Add to conversation\n      setConversation(prev => [...prev, {\n        type: 'user',\n        content: userQuery,\n        timestamp: new Date().toISOString()\n      }]);\n\n      // Process with AI\n      const response = await api.post<NLQueryResponse>('/ai/nl-query', {\n        query: userQuery,\n        context: conversation.slice(-5) // Last 5 messages for context\n      });\n\n      const nlQuery: NLQuery = response.processedQuery;\n      const searchResults: NLSearchResult[] = response.results || [];\n\n      // Add AI response to conversation\n      setConversation(prev => [...prev, {\n        type: 'ai',\n        content: response.explanation || 'Here are the results for your query.',\n        timestamp: new Date().toISOString()\n      }]);\n\n      setResults(searchResults);\n      onQuerySubmit?.(nlQuery);\n\n    } catch (error) {\n      console.error('NL query processing failed:', error);\n      setResults([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (query.trim()) {\n      processNaturalLanguageQuery(query.trim());\n    }\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    setQuery(suggestion);\n    setSuggestions([]);\n    processNaturalLanguageQuery(suggestion);\n  };\n\n  const getResultIcon = (type: string) => {\n    switch (type) {\n      case 'case': return <FileText className=\"h-4 w-4\" />;\n      case 'transaction': return <TrendingUp className=\"h-4 w-4\" />;\n      case 'evidence': return <Search className=\"h-4 w-4\" />;\n      case 'analysis': return <Brain className=\"h-4 w-4\" />;\n      default: return <FileText className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getRelevanceColor = (relevance: number) => {\n    if (relevance >= 0.8) return 'text-green-600 bg-green-50 dark:bg-green-500/10';\n    if (relevance >= 0.6) return 'text-blue-600 bg-blue-50 dark:bg-blue-500/10';\n    if (relevance >= 0.4) return 'text-amber-600 bg-amber-50 dark:bg-amber-500/10';\n    return 'text-slate-600 bg-slate-50 dark:bg-slate-500/10';\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Search Interface */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Brain className=\"h-5 w-5 text-purple-500\" />\n            Natural Language Search\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"relative\">\n              <div className=\"flex gap-2\">\n                <div className=\"relative flex-1\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400\" />\n                  <Input\n                    ref={inputRef}\n                    type=\"text\"\n                    value={query}\n                    onChange={(e) => setQuery(e.target.value)}\n                    placeholder={placeholder}\n                    className=\"pl-10 pr-12\"\n                  />\n                  <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 flex gap-1\">\n                    <button\n                      type=\"button\"\n                      onClick={isListening ? stopListening : startListening}\n                      className={`p-1 rounded ${\n                        isListening\n                          ? 'text-red-500 bg-red-50 dark:bg-red-500/10'\n                          : 'text-slate-400 hover:text-slate-600'\n                      }`}\n                    >\n                      {isListening ? <MicOff className=\"h-3 w-3\" /> : <Mic className=\"h-3 w-3\" />}\n                    </button>\n                  </div>\n                </div>\n                <Button type=\"submit\" disabled={!query.trim() || isLoading}>\n                  {isLoading ? (\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\" />\n                  ) : (\n                    <Sparkles className=\"h-4 w-4\" />\n                  )}\n                </Button>\n              </div>\n\n              {/* Voice Listening Indicator */}\n              {isListening && (\n                <div className=\"mt-2 flex items-center gap-2 text-sm text-red-600\">\n                  <div className=\"animate-pulse\">\n                    <Mic className=\"h-4 w-4\" />\n                  </div>\n                  Listening... Speak your query\n                </div>\n              )}\n            </div>\n\n            {/* Suggestions */}\n            {suggestions.length > 0 && (\n              <div className=\"border border-slate-200 dark:border-slate-700 rounded-lg p-2\">\n                <div className=\"text-xs text-slate-500 mb-2\">Try asking:</div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {suggestions.map((suggestion, idx) => (\n                    <button\n                      key={idx}\n                      onClick={() => handleSuggestionClick(suggestion)}\n                      className=\"text-xs bg-blue-50 dark:bg-blue-500/10 text-blue-700 dark:text-blue-300 px-2 py-1 rounded hover:bg-blue-100 dark:hover:bg-blue-500/20\"\n                    >\n                      {suggestion}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* Conversation History */}\n      {conversation.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <MessageSquare className=\"h-5 w-5\" />\n              Conversation\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4 max-h-64 overflow-y-auto\">\n              {conversation.map((msg, idx) => (\n                <div\n                  key={idx}\n                  className={`flex gap-3 ${\n                    msg.type === 'user' ? 'justify-end' : 'justify-start'\n                  }`}\n                >\n                  {msg.type === 'ai' && (\n                    <div className=\"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                      <Brain className=\"h-4 w-4 text-white\" />\n                    </div>\n                  )}\n                  <div\n                    className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n                      msg.type === 'user'\n                        ? 'bg-blue-500 text-white'\n                        : 'bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-slate-100'\n                    }`}\n                  >\n                    <p className=\"text-sm\">{msg.content}</p>\n                    <p className=\"text-xs opacity-70 mt-1\">\n                      {new Date(msg.timestamp).toLocaleTimeString()}\n                    </p>\n                  </div>\n                  {msg.type === 'user' && (\n                    <div className=\"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                      <User className=\"h-4 w-4 text-white\" />\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Search Results */}\n      {results.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Search className=\"h-5 w-5\" />\n              Search Results ({results.length})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {results.map((result) => (\n                <div\n                  key={`${result.type}_${result.id}`}\n                  onClick={() => onResultClick?.(result)}\n                  className=\"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors\"\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"flex-shrink-0 mt-1\">\n                        {getResultIcon(result.type)}\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                            {result.title}\n                          </h4>\n                          <span className={`text-xs px-2 py-1 rounded ${getRelevanceColor(result.relevance)}`}>\n                            {(result.relevance * 100).toFixed(0)}% relevant\n                          </span>\n                        </div>\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-2\">\n                          {result.snippet}\n                        </p>\n                        <div className=\"flex items-center gap-4 text-xs text-slate-500\">\n                          <span className=\"capitalize\">{result.type}</span>\n                          {result.metadata.date && (\n                            <span>{new Date(result.metadata.date).toLocaleDateString()}</span>\n                          )}\n                          {result.metadata.amount && (\n                            <span>${result.metadata.amount.toLocaleString()}</span>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex-shrink-0\">\n                      <Clock className=\"h-4 w-4 text-slate-400\" />\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Example Queries */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Example Queries</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <h4 className=\"font-medium text-sm\">Search Queries</h4>\n              <div className=\"space-y-1 text-sm text-slate-600 dark:text-slate-400\">\n                <div> \"Show me high-risk cases from last month\"</div>\n                <div> \"Find transactions over $10,000\"</div>\n                <div> \"What evidence do we have for case #123\"</div>\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <h4 className=\"font-medium text-sm\">Analysis Queries</h4>\n              <div className=\"space-y-1 text-sm text-slate-600 dark:text-slate-400\">\n                <div> \"Summarize the risk trends\"</div>\n                <div> \"Compare cases involving John Doe\"</div>\n                <div> \"What patterns do you see in the data\"</div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ai/RelationshipExtraction.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'mockRelationships' and 'relationships.length'. Either include them or remove the dependency array.","line":110,"column":6,"nodeType":"ArrayExpression","endLine":110,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [mockRelationships, relationships.length]","fix":{"range":[3429,3431],"text":"[mockRelationships, relationships.length]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport {\n  Network,\n  FileText,\n  Users,\n  Link,\n  CheckCircle,\n  Eye,\n  Download,\n  RefreshCw,\n  Zap\n} from 'lucide-react';\nimport { api } from '../../lib/api';\n\ninterface RelationshipExtractionResponse {\n  relationships: ExtractedRelationship[];\n}\n\ninterface ExtractedRelationship {\n  id: string;\n  source_entity: {\n    id: string;\n    name: string;\n    type: string;\n  };\n  target_entity: {\n    id: string;\n    name: string;\n    type: string;\n  };\n  relationship_type: 'family' | 'business' | 'financial' | 'legal' | 'social' | 'other';\n  confidence: number;\n  evidence: string[];\n  context: string;\n  source_document?: string;\n  extracted_at: string;\n}\n\ninterface RelationshipExtractionProps {\n  documents: Array<{\n    id: string;\n    title: string;\n    content: string;\n    type: string;\n  }>;\n  entities: Array<{\n    id: string;\n    name: string;\n    type: string;\n  }>;\n  onRelationshipAdd?: (relationship: ExtractedRelationship) => void;\n  onRelationshipEdit?: (relationshipId: string, updates: Partial<ExtractedRelationship>) => void;\n}\n\nexport function RelationshipExtraction({\n  documents,\n  entities,\n  onRelationshipAdd,\n}: RelationshipExtractionProps) {\n  const [isExtracting, setIsExtracting] = useState(false);\n  const [relationships, setRelationships] = useState<ExtractedRelationship[]>([]);\n  const [selectedDocument, setSelectedDocument] = useState<string | null>(null);\n  const [filterType, setFilterType] = useState<string>('all');\n  const [minConfidence, setMinConfidence] = useState(0.5);\n\n  // Mock relationships for demo\n  const mockRelationships: ExtractedRelationship[] = [\n    {\n      id: 'rel_001',\n      source_entity: { id: 'ent_001', name: 'John Smith', type: 'person' },\n      target_entity: { id: 'ent_002', name: 'ABC Corp', type: 'company' },\n      relationship_type: 'business',\n      confidence: 0.89,\n      evidence: ['CEO of ABC Corp', 'Authorized signatory'],\n      context: 'John Smith is identified as the CEO and authorized signatory for ABC Corporation in multiple bank documents.',\n      source_document: 'bank_statement_001.pdf',\n      extracted_at: new Date().toISOString()\n    },\n    {\n      id: 'rel_002',\n      source_entity: { id: 'ent_003', name: 'Jane Doe', type: 'person' },\n      target_entity: { id: 'ent_001', name: 'John Smith', type: 'person' },\n      relationship_type: 'family',\n      confidence: 0.76,\n      evidence: ['Spouse relationship', 'Joint account holder'],\n      context: 'Jane Doe is listed as the spouse of John Smith on joint bank account applications.',\n      source_document: 'account_application.pdf',\n      extracted_at: new Date().toISOString()\n    },\n    {\n      id: 'rel_003',\n      source_entity: { id: 'ent_002', name: 'ABC Corp', type: 'company' },\n      target_entity: { id: 'ent_004', name: 'XYZ Bank', type: 'company' },\n      relationship_type: 'financial',\n      confidence: 0.92,\n      evidence: ['Primary banking relationship', 'Account holder'],\n      context: 'ABC Corporation maintains its primary business account with XYZ Bank.',\n      source_document: 'bank_statement_002.pdf',\n      extracted_at: new Date().toISOString()\n    }\n  ];\n\n  // Initialize with mock data\n  useMemo(() => {\n    if (relationships.length === 0) {\n      setRelationships(mockRelationships);\n    }\n  }, []);\n\n  const extractRelationships = async () => {\n    setIsExtracting(true);\n    try {\n      const response = await api.post<RelationshipExtractionResponse>('/ai/extract-relationships', {\n        documents: selectedDocument ? documents.filter(d => d.id === selectedDocument) : documents,\n        entities: entities\n      });\n\n      const newRelationships: ExtractedRelationship[] = response.relationships || [];\n      setRelationships(prev => [...prev, ...newRelationships]);\n\n      newRelationships.forEach(rel => onRelationshipAdd?.(rel));\n    } catch (error) {\n      console.error('Relationship extraction failed:', error);\n      // Keep mock data for demo\n    } finally {\n      setIsExtracting(false);\n    }\n  };\n\n  // Filter relationships\n  const filteredRelationships = useMemo(() => {\n    return relationships.filter(rel => {\n      const matchesType = filterType === 'all' || rel.relationship_type === filterType;\n      const meetsConfidence = rel.confidence >= minConfidence;\n      return matchesType && meetsConfidence;\n    });\n  }, [relationships, filterType, minConfidence]);\n\n  const getRelationshipIcon = (type: string) => {\n    switch (type) {\n      case 'family': return '';\n      case 'business': return '';\n      case 'financial': return '';\n      case 'legal': return '';\n      case 'social': return '';\n      default: return '';\n    }\n  };\n\n  const getConfidenceColor = (confidence: number) => {\n    if (confidence >= 0.9) return 'text-green-600 bg-green-50 dark:bg-green-500/10';\n    if (confidence >= 0.8) return 'text-blue-600 bg-blue-50 dark:bg-blue-500/10';\n    if (confidence >= 0.7) return 'text-amber-600 bg-amber-50 dark:bg-amber-500/10';\n    return 'text-red-600 bg-red-50 dark:bg-red-500/10';\n  };\n\n  const relationshipTypes = [\n    { value: 'all', label: 'All Types' },\n    { value: 'family', label: 'Family' },\n    { value: 'business', label: 'Business' },\n    { value: 'financial', label: 'Financial' },\n    { value: 'legal', label: 'Legal' },\n    { value: 'social', label: 'Social' },\n    { value: 'other', label: 'Other' }\n  ];\n\n  const exportRelationships = (format: 'json' | 'csv') => {\n    const data = filteredRelationships.map(rel => ({\n      source_entity: rel.source_entity.name,\n      source_type: rel.source_entity.type,\n      relationship: rel.relationship_type,\n      target_entity: rel.target_entity.name,\n      target_type: rel.target_entity.type,\n      confidence: rel.confidence,\n      evidence: rel.evidence.join('; '),\n      context: rel.context,\n      source_document: rel.source_document\n    }));\n\n    if (format === 'json') {\n      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'relationships.json';\n      a.click();\n      URL.revokeObjectURL(url);\n    } else {\n      // CSV export\n      const headers = Object.keys(data[0] || {});\n      const csvContent = [\n        headers.join(','),\n        ...data.map(row => headers.map(header => `\"${row[header as keyof typeof row]}\"`).join(','))\n      ].join('\\n');\n\n      const blob = new Blob([csvContent], { type: 'text/csv' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'relationships.csv';\n      a.click();\n      URL.revokeObjectURL(url);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            Relationship Extraction\n          </h2>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            AI-powered extraction of entity relationships from documents\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Network className=\"h-5 w-5 text-purple-500\" />\n          <span className=\"text-sm text-slate-600 dark:text-slate-400\">\n            {filteredRelationships.length} relationships\n          </span>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n        {/* Control Panel */}\n        <div className=\"lg:col-span-1\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Zap className=\"h-5 w-5\" />\n                Extract Relationships\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {/* Document Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Source Documents</label>\n                  <select\n                    value={selectedDocument || ''}\n                    onChange={(e) => setSelectedDocument(e.target.value || null)}\n                    className=\"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                    aria-label=\"Source Documents\"\n                  >\n                    <option value=\"\">All documents ({documents.length})</option>\n                    {documents.map(doc => (\n                      <option key={doc.id} value={doc.id}>\n                        {doc.title}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Extract Button */}\n                <Button\n                  onClick={extractRelationships}\n                  disabled={isExtracting || documents.length === 0}\n                  className=\"w-full\"\n                >\n                  {isExtracting ? (\n                    <RefreshCw className=\"h-4 w-4 mr-1 animate-spin\" />\n                  ) : (\n                    <Zap className=\"h-4 w-4 mr-1\" />\n                  )}\n                  {isExtracting ? 'Extracting...' : 'Extract Relationships'}\n                </Button>\n\n                {/* Filters */}\n                <div className=\"space-y-3 pt-4 border-t border-slate-200 dark:border-slate-700\">\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">Relationship Type</label>\n                    <select\n                      value={filterType}\n                      onChange={(e) => setFilterType(e.target.value)}\n                      className=\"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                      aria-label=\"Relationship Type\"\n                    >\n                      {relationshipTypes.map(type => (\n                        <option key={type.value} value={type.value}>\n                          {type.label}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">\n                      Min Confidence: {(minConfidence * 100).toFixed(0)}%\n                    </label>\n                    <input\n                      type=\"range\"\n                      min={0}\n                      max={1}\n                      step={0.1}\n                      value={minConfidence}\n                      onChange={(e) => setMinConfidence(parseFloat(e.target.value))}\n                      className=\"w-full\"\n                      aria-label=\"Minimum Confidence\"\n                    />\n                  </div>\n                </div>\n\n                {/* Export Options */}\n                <div className=\"pt-4 border-t border-slate-200 dark:border-slate-700\">\n                  <div className=\"text-sm font-medium mb-2\">Export</div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => exportRelationships('json')}\n                      disabled={filteredRelationships.length === 0}\n                    >\n                      <Download className=\"h-3 w-3 mr-1\" />\n                      JSON\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => exportRelationships('csv')}\n                      disabled={filteredRelationships.length === 0}\n                    >\n                      <Download className=\"h-3 w-3 mr-1\" />\n                      CSV\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Relationships List */}\n        <div className=\"lg:col-span-3\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Link className=\"h-5 w-5\" />\n                Extracted Relationships ({filteredRelationships.length})\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {filteredRelationships.length === 0 ? (\n                <div className=\"text-center py-12 text-slate-500\">\n                  <Network className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                  <p>No relationships extracted yet</p>\n                  <p className=\"text-sm mt-1\">\n                    {relationships.length === 0\n                      ? 'Run relationship extraction to analyze documents'\n                      : 'Try adjusting your filters'\n                    }\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {filteredRelationships.map((relationship) => (\n                    <Card key={relationship.id} className=\"border-l-4 border-l-purple-500\">\n                      <CardContent className=\"pt-4\">\n                        <div className=\"flex items-start justify-between mb-3\">\n                          <div className=\"flex items-center gap-3\">\n                            <span className=\"text-lg\">\n                              {getRelationshipIcon(relationship.relationship_type)}\n                            </span>\n                            <div>\n                              <div className=\"flex items-center gap-2\">\n                                <span className=\"font-medium text-slate-900 dark:text-slate-100\">\n                                  {relationship.source_entity.name}\n                                </span>\n                                <span className=\"text-sm text-slate-500\">\n                                  {relationship.relationship_type}\n                                </span>\n                                <span className=\"font-medium text-slate-900 dark:text-slate-100\">\n                                  {relationship.target_entity.name}\n                                </span>\n                              </div>\n                              <div className=\"flex items-center gap-2 mt-1\">\n                                <span className={`text-xs px-2 py-1 rounded capitalize ${getConfidenceColor(relationship.confidence)}`}>\n                                  {(relationship.confidence * 100).toFixed(0)}% confidence\n                                </span>\n                                <span className=\"text-xs text-slate-500\">\n                                  {relationship.source_document && `From: ${relationship.source_document}`}\n                                </span>\n                              </div>\n                            </div>\n                          </div>\n                          <div className=\"flex items-center gap-1\">\n                            <Button size=\"sm\" variant=\"ghost\">\n                              <Eye className=\"h-3 w-3\" />\n                            </Button>\n                          </div>\n                        </div>\n\n                        {/* Context */}\n                        <p className=\"text-sm text-slate-700 dark:text-slate-300 mb-3\">\n                          {relationship.context}\n                        </p>\n\n                        {/* Evidence */}\n                        <div className=\"mb-3\">\n                          <div className=\"text-xs text-slate-500 mb-1\">Supporting Evidence:</div>\n                          <div className=\"flex flex-wrap gap-1\">\n                            {relationship.evidence.map((evidence, idx) => (\n                              <span\n                                key={idx}\n                                className=\"text-xs bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-300 px-2 py-1 rounded\"\n                              >\n                                {evidence}\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n\n                        {/* Metadata */}\n                        <div className=\"flex items-center justify-between text-xs text-slate-500 pt-2 border-t border-slate-200 dark:border-slate-700\">\n                          <span>\n                            Extracted {new Date(relationship.extracted_at).toLocaleDateString()}\n                          </span>\n                          <span>\n                            {relationship.source_entity.type}  {relationship.target_entity.type}\n                          </span>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Statistics */}\n      {relationships.length > 0 && (\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <Card>\n            <CardContent className=\"pt-4\">\n              <div className=\"text-center\">\n                <Network className=\"h-6 w-6 text-blue-500 mx-auto mb-2\" />\n                <div className=\"text-lg font-bold text-blue-600\">{relationships.length}</div>\n                <div className=\"text-xs text-slate-600 dark:text-slate-400\">Total Relationships</div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"pt-4\">\n              <div className=\"text-center\">\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mb-2\" />\n                <div className=\"text-lg font-bold text-green-600\">\n                  {relationships.filter(r => r.confidence >= 0.8).length}\n                </div>\n                <div className=\"text-xs text-slate-600 dark:text-slate-400\">High Confidence</div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"pt-4\">\n              <div className=\"text-center\">\n                <Users className=\"h-6 w-6 text-purple-500 mx-auto mb-2\" />\n                <div className=\"text-lg font-bold text-purple-600\">\n                  {new Set(relationships.map(r => r.relationship_type)).size}\n                </div>\n                <div className=\"text-xs text-slate-600 dark:text-slate-400\">Relationship Types</div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"pt-4\">\n              <div className=\"text-center\">\n                <FileText className=\"h-6 w-6 text-amber-500 mx-auto mb-2\" />\n                <div className=\"text-lg font-bold text-amber-600\">\n                  {new Set(relationships.map(r => r.source_document).filter(Boolean)).size}\n                </div>\n                <div className=\"text-xs text-slate-600 dark:text-slate-400\">Source Documents</div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ai/__tests__/AIAssistant.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/analytics/AdvancedAnalyticsDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[573,576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[573,576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/analytics/AdvancedAnalyticsDashboard.tsx:177:29\n  175 |         type: 'case_created',\n  176 |         description: 'New high-risk case created for Subject ABC-123',\n> 177 |         timestamp: new Date(Date.now() - 1000 * 60 * 5).toISOString(),\n      |                             ^^^^^^^^^^ Cannot call impure function\n  178 |         severity: 'high'\n  179 |       },\n  180 |       {","line":177,"column":29,"nodeType":null,"endLine":177,"endColumn":39},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/analytics/AdvancedAnalyticsDashboard.tsx:184:29\n  182 |         type: 'alert_triggered',\n  183 |         description: 'Suspicious transaction pattern detected',\n> 184 |         timestamp: new Date(Date.now() - 1000 * 60 * 15).toISOString(),\n      |                             ^^^^^^^^^^ Cannot call impure function\n  185 |         severity: 'medium'\n  186 |       },\n  187 |       {","line":184,"column":29,"nodeType":null,"endLine":184,"endColumn":39},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/analytics/AdvancedAnalyticsDashboard.tsx:191:29\n  189 |         type: 'case_resolved',\n  190 |         description: 'Case XYZ-789 marked as resolved',\n> 191 |         timestamp: new Date(Date.now() - 1000 * 60 * 30).toISOString(),\n      |                             ^^^^^^^^^^ Cannot call impure function\n  192 |         severity: 'low'\n  193 |       },\n  194 |       {","line":191,"column":29,"nodeType":null,"endLine":191,"endColumn":39},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/analytics/AdvancedAnalyticsDashboard.tsx:198:29\n  196 |         type: 'anomaly_detected',\n  197 |         description: 'Unusual transaction volume spike detected',\n> 198 |         timestamp: new Date(Date.now() - 1000 * 60 * 45).toISOString(),\n      |                             ^^^^^^^^^^ Cannot call impure function\n  199 |         severity: 'critical'\n  200 |       }\n  201 |     ]","line":198,"column":29,"nodeType":null,"endLine":198,"endColumn":39}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  BarChart3,\n  LineChart,\n  PieChart,\n  TrendingUp,\n  TrendingDown,\n  FileText,\n  AlertTriangle,\n  CheckCircle,\n  Clock,\n  Activity\n} from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport { apiRequest } from '../../lib/api';\n\ninterface DashboardMetric {\n  title: string;\n  value: number | string;\n  change?: number;\n  changeType?: 'increase' | 'decrease' | 'neutral';\n  icon: React.ComponentType<any>;\n  color: string;\n}\n\ninterface ChartData {\n  labels: string[];\n  datasets: {\n    label: string;\n    data: number[];\n    backgroundColor?: string | string[];\n    borderColor?: string;\n    borderWidth?: number;\n    tension?: number;\n  }[];\n}\n\ninterface DashboardData {\n  metrics: DashboardMetric[];\n  charts: {\n    riskTrends: ChartData;\n    caseStatus: ChartData;\n    transactionVolume: ChartData;\n    alertDistribution: ChartData;\n  };\n  alerts: {\n    critical: number;\n    high: number;\n    medium: number;\n    low: number;\n  };\n  recentActivity: {\n    id: string;\n    type: string;\n    description: string;\n    timestamp: string;\n    severity: 'low' | 'medium' | 'high' | 'critical';\n  }[];\n}\n\nexport function AdvancedAnalyticsDashboard() {\n  const [timeRange, setTimeRange] = useState<'24h' | '7d' | '30d' | '90d'>('7d');\n  const [selectedMetric, setSelectedMetric] = useState<string | null>(null);\n\n  const { data: dashboardData, isLoading, refetch } = useQuery({\n    queryKey: ['analytics-dashboard', timeRange],\n    queryFn: () => apiRequest<DashboardData>(`/analytics/dashboard?timeRange=${timeRange}`),\n    retry: false,\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  // Mock data for development - replace with real API call\n  const mockData: DashboardData = {\n    metrics: [\n      {\n        title: 'Total Cases',\n        value: 1247,\n        change: 12.5,\n        changeType: 'increase',\n        icon: FileText,\n        color: 'blue'\n      },\n      {\n        title: 'Active Alerts',\n        value: 89,\n        change: -5.2,\n        changeType: 'decrease',\n        icon: AlertTriangle,\n        color: 'red'\n      },\n      {\n        title: 'Risk Score Avg',\n        value: '72.4',\n        change: 2.1,\n        changeType: 'increase',\n        icon: TrendingUp,\n        color: 'orange'\n      },\n      {\n        title: 'Transactions Processed',\n        value: '45.2K',\n        change: 8.7,\n        changeType: 'increase',\n        icon: Activity,\n        color: 'green'\n      },\n      {\n        title: 'False Positives',\n        value: '3.2%',\n        change: -0.8,\n        changeType: 'decrease',\n        icon: CheckCircle,\n        color: 'emerald'\n      },\n      {\n        title: 'Investigation Time',\n        value: '2.4h',\n        change: -15.3,\n        changeType: 'decrease',\n        icon: Clock,\n        color: 'purple'\n      }\n    ],\n    charts: {\n      riskTrends: {\n        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\n        datasets: [{\n          label: 'Average Risk Score',\n          data: [65, 68, 72, 69, 74, 71, 73],\n          borderColor: 'rgb(239, 68, 68)',\n          backgroundColor: 'rgba(239, 68, 68, 0.1)',\n          tension: 0.4\n        }]\n      },\n      caseStatus: {\n        labels: ['Open', 'Under Review', 'Escalated', 'Closed'],\n        datasets: [{\n          label: 'Case Status',\n          data: [342, 156, 89, 660],\n          backgroundColor: ['#3B82F6', '#F59E0B', '#EF4444', '#10B981']\n        }]\n      },\n\n      transactionVolume: {\n        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],\n        datasets: [{\n          label: 'Transactions',\n          data: [120, 80, 450, 680, 520, 280],\n          backgroundColor: 'rgba(59, 130, 246, 0.5)',\n          borderColor: 'rgb(59, 130, 246)',\n          borderWidth: 1\n        }]\n      },\n      alertDistribution: {\n        labels: ['Low', 'Medium', 'High', 'Critical'],\n        datasets: [{\n          label: 'Alerts',\n          data: [45, 23, 12, 9],\n          backgroundColor: ['#10B981', '#F59E0B', '#EF4444', '#7C2D12']\n        }]\n      }\n\n    },\n    alerts: {\n      critical: 9,\n      high: 12,\n      medium: 23,\n      low: 45\n    },\n    recentActivity: [\n      {\n        id: '1',\n        type: 'case_created',\n        description: 'New high-risk case created for Subject ABC-123',\n        timestamp: new Date(Date.now() - 1000 * 60 * 5).toISOString(),\n        severity: 'high'\n      },\n      {\n        id: '2',\n        type: 'alert_triggered',\n        description: 'Suspicious transaction pattern detected',\n        timestamp: new Date(Date.now() - 1000 * 60 * 15).toISOString(),\n        severity: 'medium'\n      },\n      {\n        id: '3',\n        type: 'case_resolved',\n        description: 'Case XYZ-789 marked as resolved',\n        timestamp: new Date(Date.now() - 1000 * 60 * 30).toISOString(),\n        severity: 'low'\n      },\n      {\n        id: '4',\n        type: 'anomaly_detected',\n        description: 'Unusual transaction volume spike detected',\n        timestamp: new Date(Date.now() - 1000 * 60 * 45).toISOString(),\n        severity: 'critical'\n      }\n    ]\n  };\n\n  const data = dashboardData || mockData;\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'critical': return 'text-red-600 bg-red-50 border-red-200';\n      case 'high': return 'text-orange-600 bg-orange-50 border-orange-200';\n      case 'medium': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n      case 'low': return 'text-green-600 bg-green-50 border-green-200';\n      default: return 'text-gray-600 bg-gray-50 border-gray-200';\n    }\n  };\n\n  const getChangeIcon = (changeType: string) => {\n    switch (changeType) {\n      case 'increase': return <TrendingUp className=\"w-4 h-4 text-green-600\" />;\n      case 'decrease': return <TrendingDown className=\"w-4 h-4 text-red-600\" />;\n      default: return null;\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"p-6 space-y-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {Array.from({ length: 6 }).map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader className=\"pb-2\">\n                <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-8 bg-gray-200 rounded w-1/2 mb-2\"></div>\n                <div className=\"h-3 bg-gray-200 rounded w-1/4\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            Analytics Dashboard\n          </h1>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            Real-time fraud detection insights and key performance metrics\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant={timeRange === '24h' ? 'primary' : 'outline'}\n              size=\"sm\"\n              onClick={() => setTimeRange('24h')}\n            >\n\n              24H\n            </Button>\n            <Button\n              variant={timeRange === '7d' ? 'primary' : 'outline'}\n              size=\"sm\"\n              onClick={() => setTimeRange('7d')}\n            >\n\n              7D\n            </Button>\n            <Button\n              variant={timeRange === '30d' ? 'primary' : 'outline'}\n              size=\"sm\"\n              onClick={() => setTimeRange('30d')}\n            >\n\n              30D\n            </Button>\n            <Button\n              variant={timeRange === '90d' ? 'primary' : 'outline'}\n              size=\"sm\"\n              onClick={() => setTimeRange('90d')}\n            >\n\n              90D\n            </Button>\n          </div>\n          <Button onClick={() => refetch()} size=\"sm\">\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      {/* Key Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {data.metrics.map((metric: DashboardMetric, index: number) => {\n\n          const IconComponent = metric.icon;\n          return (\n            <Card\n              key={index}\n              className={`cursor-pointer transition-all hover:shadow-lg ${\n                selectedMetric === metric.title ? 'ring-2 ring-blue-500' : ''\n              }`}\n              onClick={() => setSelectedMetric(\n                selectedMetric === metric.title ? null : metric.title\n              )}\n            >\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium text-slate-600 dark:text-slate-400\">\n                  {metric.title}\n                </CardTitle>\n                <div className={`p-2 rounded-lg bg-${metric.color}-50 dark:bg-${metric.color}-900/20`}>\n                  <IconComponent className={`h-4 w-4 text-${metric.color}-600 dark:text-${metric.color}-400`} />\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n                  {metric.value}\n                </div>\n                {metric.change && (\n                  <div className=\"flex items-center gap-1 mt-1\">\n                    {getChangeIcon(metric.changeType || 'neutral')}\n                    <span className={`text-xs font-medium ${\n                      metric.changeType === 'increase' ? 'text-green-600' :\n                      metric.changeType === 'decrease' ? 'text-red-600' :\n                      'text-slate-500'\n                    }`}>\n                      {metric.change > 0 ? '+' : ''}{metric.change}%\n                    </span>\n                    <span className=\"text-xs text-slate-500\">vs last period</span>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Charts Row */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Risk Trends Chart */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <TrendingUp className=\"w-5 h-5\" />\n              Risk Score Trends\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"h-64 flex items-center justify-center bg-slate-50 dark:bg-slate-800 rounded-lg\">\n              <div className=\"text-center text-slate-500\">\n                <LineChart className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                <p>Interactive Chart</p>\n                <p className=\"text-sm\">Risk trends over time</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Case Status Distribution */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <PieChart className=\"w-5 h-5\" />\n              Case Status Distribution\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"h-64 flex items-center justify-center bg-slate-50 dark:bg-slate-800 rounded-lg\">\n              <div className=\"text-center text-slate-500\">\n                <PieChart className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                <p>Status Breakdown</p>\n                <p className=\"text-sm\">Open, Under Review, Escalated, Closed</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Bottom Row */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Transaction Volume */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <BarChart3 className=\"w-5 h-5\" />\n              Transaction Volume\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"h-48 flex items-center justify-center bg-slate-50 dark:bg-slate-800 rounded-lg\">\n              <div className=\"text-center text-slate-500\">\n                <BarChart3 className=\"w-8 h-8 mx-auto mb-1 opacity-50\" />\n                <p className=\"text-sm\">Hourly Volume</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Alert Distribution */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <AlertTriangle className=\"w-5 h-5\" />\n              Alert Distribution\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {Object.entries(data.alerts).map(([severity, count]) => (\n                <div key={severity} className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className={`w-3 h-3 rounded-full ${\n                      severity === 'critical' ? 'bg-red-500' :\n                      severity === 'high' ? 'bg-orange-500' :\n                      severity === 'medium' ? 'bg-yellow-500' :\n                      'bg-green-500'\n                    }`} />\n                    <span className=\"text-sm capitalize\">{severity}</span>\n                  </div>\n                  <span className=\"font-semibold\">{String(count)}</span>\n\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Recent Activity */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Activity className=\"w-5 h-5\" />\n              Recent Activity\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3 max-h-48 overflow-y-auto\">\n              {data.recentActivity.map((activity: DashboardData['recentActivity'][0]) => (\n\n                <div\n                  key={activity.id}\n                  className={`p-3 rounded-lg border ${getSeverityColor(activity.severity)}`}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm font-medium\">{activity.description}</p>\n                      <p className=\"text-xs opacity-75 mt-1\">\n                        {new Date(activity.timestamp).toLocaleString()}\n                      </p>\n                    </div>\n                    <div className={`w-2 h-2 rounded-full ${\n                      activity.severity === 'critical' ? 'bg-red-500' :\n                      activity.severity === 'high' ? 'bg-orange-500' :\n                      activity.severity === 'medium' ? 'bg-yellow-500' :\n                      'bg-green-500'\n                    }`} />\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/analytics/GraphAnalytics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/auth/AuthGuard.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/auth/AuthGuard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/auth/LoginForm.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/auth/LoginForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/CaseComparison.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/CaseFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/CaseListSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/CaseSearch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/CaseTimeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/EntityGraph.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/EntityGraph.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[564,567],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[564,567],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[788,791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[788,791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4659,4662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4659,4662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4734,4737],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4734,4737],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7780,7783],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7780,7783],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":258,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7826,7829],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7826,7829],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":259,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7872,7875],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7872,7875],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":260,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":260,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7918,7921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7918,7921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":263,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7983,7986],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7983,7986],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":263,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8005,8008],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8005,8008],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":264,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":264,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8056,8059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8056,8059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":264,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":264,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8078,8081],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8078,8081],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'getNodeSize', 'nodeColors', 'onLinkClick', and 'onNodeClick'. Either include them or remove the dependency array. If 'onLinkClick' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":285,"column":6,"nodeType":"ArrayExpression","endLine":285,"endColumn":99,"suggestions":[{"desc":"Update the dependencies array to be: [filteredData, isRunning, selectedNode, showLabels, nodeSize, highlightedPath, width, height, getNodeSize, onLinkClick, nodeColors, onNodeClick]","fix":{"range":[8455,8548],"text":"[filteredData, isRunning, selectedNode, showLabels, nodeSize, highlightedPath, width, height, getNodeSize, onLinkClick, nodeColors, onNodeClick]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":290,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":290,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8717,8720],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8717,8720],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/cases/EntityGraph.tsx:300:35\n  298 |   };\n  299 |\n> 300 |   const graphId = `entity-graph-${Math.random().toString(36).slice(2, 8)}`;\n      |                                   ^^^^^^^^^^^^^ Cannot call impure function\n  301 |\n  302 |   return (\n  303 |     <Card className=\"w-full\">","line":300,"column":35,"nodeType":null,"endLine":300,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":335,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":335,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10189,10192],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10189,10192],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef, useMemo } from 'react';\nimport * as d3 from 'd3';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport {\n  RotateCcw,\n  Play,\n  Pause,\n  Search,\n  Settings\n} from 'lucide-react';\n\ninterface EntityNode extends d3.SimulationNodeDatum {\n  id: string;\n  name: string;\n  type: 'subject' | 'bank' | 'vendor' | 'account' | 'document' | 'person' | 'company';\n  risk_score?: number;\n  connections?: number;\n  value?: number;\n  color?: string;\n  metadata?: Record<string, any>;\n}\n\ninterface EntityLink {\n  source: string;\n  target: string;\n  type: 'transaction' | 'ownership' | 'relationship' | 'evidence';\n  weight: number;\n  amount?: number;\n  description?: string;\n  metadata?: Record<string, any>;\n}\n\ninterface EntityGraphData {\n  nodes: EntityNode[];\n  links: EntityLink[];\n}\n\ninterface EntityGraphProps {\n  data: EntityGraphData;\n  width?: number;\n  height?: number;\n  onNodeClick?: (node: EntityNode) => void;\n  onLinkClick?: (link: EntityLink) => void;\n  onExport?: (id: string) => void;\n  highlightedPath?: Array<{ source: string; target: string }>;\n  filters?: {\n    nodeTypes?: string[];\n    minRiskScore?: number;\n    maxConnections?: number;\n  };\n}\n\nexport function EntityGraph({\n  data,\n  width = 800,\n  height = 600,\n  onNodeClick,\n  onLinkClick,\n  onExport,\n  highlightedPath,\n  filters = {}\n}: EntityGraphProps) {\n  const svgRef = useRef<SVGSVGElement>(null);\n  const [isRunning, setIsRunning] = useState(true);\n  const [zoom, setZoom] = useState(1);\n  const [selectedNode, setSelectedNode] = useState<EntityNode | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showLabels, setShowLabels] = useState(true);\n  const [nodeSize, setNodeSize] = useState<'fixed' | 'risk' | 'connections'>('risk');\n\n  // Filter data based on current filters\n  const filteredData = useMemo(() => {\n    let filteredNodes = data.nodes;\n    let filteredLinks = data.links;\n\n    // Filter nodes by type\n    if (filters.nodeTypes && filters.nodeTypes.length > 0) {\n      filteredNodes = filteredNodes.filter(node =>\n        filters.nodeTypes!.includes(node.type)\n      );\n      // Filter links to only include connections between filtered nodes\n      const nodeIds = new Set(filteredNodes.map(n => n.id));\n      filteredLinks = filteredLinks.filter(link =>\n        nodeIds.has(link.source) && nodeIds.has(link.target)\n      );\n    }\n\n    // Filter nodes by risk score\n    if (filters.minRiskScore !== undefined) {\n      filteredNodes = filteredNodes.filter(node =>\n        (node.risk_score || 0) >= filters.minRiskScore!\n      );\n    }\n\n    // Filter nodes by connections\n    if (filters.maxConnections !== undefined) {\n      filteredNodes = filteredNodes.filter(node =>\n        (node.connections || 0) <= filters.maxConnections!\n      );\n    }\n\n    // Filter by search term\n    if (searchTerm) {\n      const term = searchTerm.toLowerCase();\n      filteredNodes = filteredNodes.filter(node =>\n        node.name.toLowerCase().includes(term) ||\n        node.id.toLowerCase().includes(term)\n      );\n    }\n\n    return { nodes: filteredNodes, links: filteredLinks };\n  }, [data, filters, searchTerm]);\n\n  // Color scheme for different node types\n  const nodeColors = {\n    subject: '#3b82f6',    // blue\n    bank: '#10b981',       // emerald\n    vendor: '#f59e0b',     // amber\n    account: '#8b5cf6',    // violet\n    document: '#ef4444',   // red\n    person: '#06b6d4',     // cyan\n    company: '#84cc16'     // lime\n  };\n\n  // Calculate node size based on selected metric\n  const getNodeSize = (node: EntityNode) => {\n    const baseSize = 8;\n    switch (nodeSize) {\n      case 'risk':\n        return baseSize + (node.risk_score || 0) * 0.5;\n      case 'connections':\n        return baseSize + (node.connections || 0) * 2;\n      default:\n        return baseSize + (node.value || 0) * 0.1;\n    }\n  };\n\n  // Calculate link width based on weight\n  const getLinkWidth = (link: EntityLink) => {\n    return Math.max(1, Math.min(5, link.weight / 10));\n  };\n\n  useEffect(() => {\n    if (!svgRef.current || !filteredData.nodes.length) return;\n\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    const g = svg.append('g');\n\n    // Create zoom behavior\n    const zoomBehavior = d3.zoom<SVGSVGElement, unknown>()\n      .scaleExtent([0.1, 4])\n      .on('zoom', (event: d3.D3ZoomEvent<SVGSVGElement, unknown>) => {\n        g.attr('transform', event.transform.toString());\n        setZoom(event.transform.k);\n      });\n\n    svg.call(zoomBehavior);\n\n    // Create simulation\n    const simulation = d3.forceSimulation(filteredData.nodes as any)\n      .force('link', d3.forceLink(filteredData.links)\n        .id((d: any) => d.id)\n        .distance(d => 100 - (d.weight || 1) * 10)\n      )\n      .force('charge', d3.forceManyBody().strength(-300))\n      .force('center', d3.forceCenter(width / 2, height / 2))\n      .force('collision', d3.forceCollide().radius(d => getNodeSize(d as EntityNode) + 5));\n\n    // Create links\n    const link = g.append('g')\n      .attr('class', 'links')\n      .selectAll('line')\n      .data(filteredData.links)\n      .enter().append('line')\n      .attr('stroke', d => {\n        // Highlight path if specified\n        if (highlightedPath?.some(p =>\n          (p.source === d.source && p.target === d.target) ||\n          (p.source === d.target && p.target === d.source)\n        )) {\n          return '#ef4444';\n        }\n        return '#999';\n      })\n      .attr('stroke-width', d => getLinkWidth(d))\n      .attr('stroke-opacity', 0.6)\n      .on('click', (event, d) => {\n        event.stopPropagation();\n        onLinkClick?.(d);\n      })\n      .style('cursor', 'pointer');\n\n    // Create link labels for important connections\n    const linkLabels = g.append('g')\n      .attr('class', 'link-labels')\n      .selectAll('text')\n      .data(filteredData.links.filter(d => d.amount && d.amount > 10000))\n      .enter().append('text')\n      .attr('font-size', 10)\n      .attr('fill', '#666')\n      .attr('text-anchor', 'middle')\n      .text(d => `$${d.amount!.toLocaleString()}`);\n\n    // Create nodes\n    const node = g.append('g')\n      .attr('class', 'nodes')\n      .selectAll('circle')\n      .data(filteredData.nodes)\n      .enter().append('circle')\n      .attr('r', d => getNodeSize(d))\n      .attr('fill', d => d.color || nodeColors[d.type] || '#666')\n      .attr('stroke', d => selectedNode?.id === d.id ? '#fff' : '#fff')\n      .attr('stroke-width', d => selectedNode?.id === d.id ? 3 : 1)\n      .on('click', (event, d) => {\n        event.stopPropagation();\n        setSelectedNode(d);\n        onNodeClick?.(d);\n      })\n      .style('cursor', 'pointer')\n      .call(d3.drag<SVGCircleElement, EntityNode>()\n        .on('start', (event, d) => {\n          if (!event.active) simulation.alphaTarget(0.3).restart();\n          d.fx = d.x;\n          d.fy = d.y;\n        })\n        .on('drag', (event, d) => {\n          d.fx = event.x;\n          d.fy = event.y;\n        })\n        .on('end', (event, d) => {\n          if (!event.active) simulation.alphaTarget(0);\n          d.fx = null;\n          d.fy = null;\n        })\n      );\n\n    // Create node labels\n    const labels = g.append('g')\n      .attr('class', 'labels')\n      .selectAll('text')\n      .data(filteredData.nodes)\n      .enter().append('text')\n      .attr('font-size', 12)\n      .attr('fill', '#333')\n      .attr('text-anchor', 'middle')\n      .attr('dy', d => -getNodeSize(d) - 8)\n      .style('pointer-events', 'none')\n      .style('opacity', showLabels ? 1 : 0)\n      .text(d => d.name.length > 15 ? d.name.substring(0, 12) + '...' : d.name);\n\n    // Update positions on simulation tick\n    simulation.on('tick', () => {\n      link\n        .attr('x1', d => (d.source as any).x)\n        .attr('y1', d => (d.source as any).y)\n        .attr('x2', d => (d.target as any).x)\n        .attr('y2', d => (d.target as any).y);\n\n      linkLabels\n        .attr('x', d => ((d.source as any).x + (d.target as any).x) / 2)\n        .attr('y', d => ((d.source as any).y + (d.target as any).y) / 2);\n\n      node\n        .attr('cx', d => d.x!)\n        .attr('cy', d => d.y!);\n\n      labels\n        .attr('x', d => d.x!)\n        .attr('y', d => d.y!);\n    });\n\n    // Start/stop simulation based on isRunning state\n    if (isRunning) {\n      simulation.restart();\n    } else {\n      simulation.stop();\n    }\n\n    return () => {\n      simulation.stop();\n    };\n  }, [filteredData, isRunning, selectedNode, showLabels, nodeSize, highlightedPath, width, height]);\n\n  const resetView = () => {\n    const svg = d3.select(svgRef.current);\n    svg.transition().duration(750).call(\n      d3.zoom<SVGSVGElement, unknown>().transform as any,\n      d3.zoomIdentity\n    );\n    setZoom(1);\n  };\n\n  const toggleSimulation = () => {\n    setIsRunning(!isRunning);\n  };\n\n  const graphId = `entity-graph-${Math.random().toString(36).slice(2, 8)}`;\n\n  return (\n    <Card className=\"w-full\">\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Settings className=\"h-5 w-5\" />\n            Entity Relationship Graph\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            {/* Search */}\n            <div className=\"relative\">\n              <Search className=\"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search entities...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-8 pr-3 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n              />\n            </div>\n\n            {/* Controls */}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowLabels(!showLabels)}\n              className={showLabels ? 'bg-blue-50' : ''}\n            >\n              Labels\n            </Button>\n\n            <select\n              value={nodeSize}\n              onChange={(e) => setNodeSize(e.target.value as any)}\n              className=\"px-2 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n            >\n              <option value=\"fixed\">Fixed Size</option>\n              <option value=\"risk\">Risk-based</option>\n              <option value=\"connections\">Connection-based</option>\n            </select>\n\n            <Button variant=\"outline\" size=\"sm\" onClick={toggleSimulation}>\n              {isRunning ? <Pause className=\"h-4 w-4\" /> : <Play className=\"h-4 w-4\" />}\n            </Button>\n\n            <Button variant=\"outline\" size=\"sm\" onClick={resetView}>\n              <RotateCcw className=\"h-4 w-4\" />\n            </Button>\n\n            {onExport && (\n              <Button variant=\"outline\" size=\"sm\" onClick={() => onExport(graphId)}>\n                Export\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {/* Legend */}\n        <div className=\"flex flex-wrap gap-4 mt-4 text-sm\">\n          {Object.entries(nodeColors).map(([type, color]) => (\n            <div key={type} className=\"flex items-center gap-2\">\n              <div\n                className=\"w-3 h-3 rounded-full\"\n                style={{ backgroundColor: color }}\n              />\n              <span className=\"capitalize\">{type}</span>\n            </div>\n          ))}\n        </div>\n      </CardHeader>\n\n      <CardContent>\n        <div className=\"relative\">\n          <svg\n            ref={svgRef}\n            width={width}\n            height={height}\n            className=\"border border-slate-200 dark:border-slate-700 rounded\"\n            id={graphId}\n          />\n\n          {/* Zoom indicator */}\n          <div className=\"absolute top-2 right-2 bg-white dark:bg-slate-800 px-2 py-1 rounded text-xs border\">\n            {Math.round(zoom * 100)}%\n          </div>\n\n          {/* Node info panel */}\n          {selectedNode && (\n            <div className=\"absolute bottom-2 left-2 bg-white dark:bg-slate-800 p-3 rounded-lg shadow-lg border max-w-xs\">\n              <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                {selectedNode.name}\n              </h4>\n              <div className=\"text-sm text-slate-600 dark:text-slate-400 space-y-1 mt-1\">\n                <div>Type: <span className=\"capitalize\">{selectedNode.type}</span></div>\n                {selectedNode.risk_score && (\n                  <div>Risk Score: {selectedNode.risk_score}</div>\n                )}\n                {selectedNode.connections && (\n                  <div>Connections: {selectedNode.connections}</div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-4 gap-4 mt-4 text-sm\">\n          <div className=\"text-center\">\n            <div className=\"font-bold text-slate-900 dark:text-slate-100\">\n              {filteredData.nodes.length}\n            </div>\n            <div className=\"text-slate-600 dark:text-slate-400\">Entities</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"font-bold text-slate-900 dark:text-slate-100\">\n              {filteredData.links.length}\n            </div>\n            <div className=\"text-slate-600 dark:text-slate-400\">Connections</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"font-bold text-slate-900 dark:text-slate-100\">\n              {filteredData.nodes.filter(n => n.type === 'subject').length}\n            </div>\n            <div className=\"text-slate-600 dark:text-slate-400\">Subjects</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"font-bold text-slate-900 dark:text-slate-100\">\n              {Math.max(...filteredData.nodes.map(n => n.risk_score || 0), 0)}\n            </div>\n            <div className=\"text-slate-600 dark:text-slate-400\">Max Risk</div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/EvidenceCorrelationViewer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[449,452],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[449,452],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport {\n  FileText,\n  Link,\n  Search,\n  Eye\n} from 'lucide-react';\n\ninterface Evidence {\n  id: string;\n  filename: string;\n  type: 'document' | 'image' | 'video' | 'audio' | 'other';\n  size: number;\n  upload_date: string;\n  tags: string[];\n  extracted_text?: string;\n  metadata?: Record<string, any>;\n  correlations?: string[]; // IDs of related evidence\n  risk_score?: number;\n}\n\ninterface Transaction {\n  id: string;\n  date: string;\n  amount: number;\n  description: string;\n  category: string;\n  correlation_score?: number;\n}\n\ninterface EvidenceCorrelationProps {\n  evidence: Evidence[];\n  transactions: Transaction[];\n  onEvidenceClick?: (evidence: Evidence) => void;\n  onCorrelationClick?: (evidenceId: string, transactionId: string) => void;\n}\n\nexport function EvidenceCorrelationViewer({\n  evidence,\n  transactions,\n  onEvidenceClick,\n  onCorrelationClick\n}: EvidenceCorrelationProps) {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedEvidence, setSelectedEvidence] = useState<Evidence | null>(null);\n  const [filterType, setFilterType] = useState<string>('all');\n  const [showCorrelations, setShowCorrelations] = useState(true);\n\n  // Filter evidence based on search and type\n  const filteredEvidence = useMemo(() => {\n    return evidence.filter(item => {\n      const matchesSearch = !searchTerm ||\n        item.filename.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        item.extracted_text?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        item.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));\n\n      const matchesType = filterType === 'all' || item.type === filterType;\n\n      return matchesSearch && matchesType;\n    });\n  }, [evidence, searchTerm, filterType]);\n\n  // Find correlations between evidence and transactions\n  const correlations = useMemo(() => {\n    const correlationMap: Record<string, Transaction[]> = {};\n\n    filteredEvidence.forEach(evidence => {\n      correlationMap[evidence.id] = [];\n\n      // Simple correlation logic - can be enhanced with AI\n      transactions.forEach(transaction => {\n        let correlationScore = 0;\n\n        // Date proximity (within 7 days)\n        const evidenceDate = new Date(evidence.upload_date);\n        const txDate = new Date(transaction.date);\n        const daysDiff = Math.abs((evidenceDate.getTime() - txDate.getTime()) / (1000 * 60 * 60 * 24));\n        if (daysDiff <= 7) correlationScore += 0.3;\n\n        // Amount similarity (if evidence mentions amounts)\n        if (evidence.extracted_text) {\n          const text = evidence.extracted_text.toLowerCase();\n          const amountStr = transaction.amount.toString();\n          if (text.includes(amountStr) || text.includes(transaction.amount.toFixed(2))) {\n            correlationScore += 0.5;\n          }\n        }\n\n        // Description similarity\n        if (evidence.extracted_text && transaction.description) {\n          const textWords = evidence.extracted_text.toLowerCase().split(/\\s+/);\n          const descWords = transaction.description.toLowerCase().split(/\\s+/);\n          const commonWords = textWords.filter(word => descWords.includes(word) && word.length > 3);\n          if (commonWords.length > 0) {\n            correlationScore += 0.2 * Math.min(commonWords.length, 3);\n          }\n        }\n\n        // Tag matching\n        if (evidence.tags.some(tag =>\n          transaction.description.toLowerCase().includes(tag.toLowerCase()) ||\n          transaction.category.toLowerCase().includes(tag.toLowerCase())\n        )) {\n          correlationScore += 0.3;\n        }\n\n        if (correlationScore >= 0.4) { // Threshold for correlation\n          correlationMap[evidence.id].push({\n            ...transaction,\n            correlation_score: correlationScore\n          });\n        }\n      });\n\n      // Sort by correlation score\n      correlationMap[evidence.id].sort((a, b) => (b.correlation_score || 0) - (a.correlation_score || 0));\n    });\n\n    return correlationMap;\n  }, [filteredEvidence, transactions]);\n\n  const getEvidenceIcon = (type: string) => {\n    switch (type) {\n      case 'document': return '';\n      case 'image': return '';\n      case 'video': return '';\n      case 'audio': return '';\n      default: return '';\n    }\n  };\n\n  const getRiskColor = (score?: number) => {\n    if (!score) return 'text-slate-500';\n    if (score >= 80) return 'text-red-600';\n    if (score >= 60) return 'text-amber-600';\n    if (score >= 40) return 'text-blue-600';\n    return 'text-green-600';\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            Evidence Correlation Viewer\n          </h2>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            Analyze relationships between evidence files and transactions\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant={showCorrelations ? 'primary' : 'outline'}\n            size=\"sm\"\n            onClick={() => setShowCorrelations(!showCorrelations)}\n          >\n            <Link className=\"h-4 w-4 mr-1\" />\n            {showCorrelations ? 'Hide' : 'Show'} Correlations\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Evidence List */}\n        <div className=\"lg:col-span-2\">\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle className=\"flex items-center gap-2\">\n                  <FileText className=\"h-5 w-5\" />\n                  Evidence Files ({filteredEvidence.length})\n                </CardTitle>\n                <div className=\"flex items-center gap-2\">\n                  {/* Search */}\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400\" />\n                    <input\n                      type=\"text\"\n                      placeholder=\"Search evidence...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"pl-8 pr-3 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                    />\n                  </div>\n\n                  {/* Type Filter */}\n                  <select\n                    value={filterType}\n                    onChange={(e) => setFilterType(e.target.value)}\n                    className=\"px-2 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                  >\n                    <option value=\"all\">All Types</option>\n                    <option value=\"document\">Documents</option>\n                    <option value=\"image\">Images</option>\n                    <option value=\"video\">Videos</option>\n                    <option value=\"audio\">Audio</option>\n                  </select>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {filteredEvidence.map((item) => (\n                  <div\n                    key={item.id}\n                    onClick={() => {\n                      setSelectedEvidence(item);\n                      onEvidenceClick?.(item);\n                    }}\n                    className={`p-4 border rounded-lg cursor-pointer transition-colors ${\n                      selectedEvidence?.id === item.id\n                        ? 'border-blue-500 bg-blue-50 dark:bg-blue-500/10'\n                        : 'border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600'\n                    }`}\n                  >\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-start gap-3\">\n                        <span className=\"text-2xl\">{getEvidenceIcon(item.type)}</span>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                            {item.filename}\n                          </h4>\n                          <div className=\"flex items-center gap-4 mt-1 text-sm text-slate-600 dark:text-slate-400\">\n                            <span>{formatFileSize(item.size)}</span>\n                            <span>{new Date(item.upload_date).toLocaleDateString()}</span>\n                            {item.risk_score && (\n                              <span className={getRiskColor(item.risk_score)}>\n                                Risk: {item.risk_score}\n                              </span>\n                            )}\n                          </div>\n                          {item.tags.length > 0 && (\n                            <div className=\"flex flex-wrap gap-1 mt-2\">\n                              {item.tags.slice(0, 3).map((tag, idx) => (\n                                <span\n                                  key={idx}\n                                  className=\"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 text-xs rounded\"\n                                >\n                                  {tag}\n                                </span>\n                              ))}\n                              {item.tags.length > 3 && (\n                                <span className=\"text-xs text-slate-500\">\n                                  +{item.tags.length - 3} more\n                                </span>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n\n                      {/* Correlation indicator */}\n                      {showCorrelations && correlations[item.id]?.length > 0 && (\n                        <div className=\"flex items-center gap-1 text-blue-600\">\n                          <Link className=\"h-4 w-4\" />\n                          <span className=\"text-sm font-medium\">\n                            {correlations[item.id].length}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Preview text */}\n                    {item.extracted_text && (\n                      <div className=\"mt-3 p-2 bg-slate-50 dark:bg-slate-800 rounded text-sm text-slate-700 dark:text-slate-300\">\n                        {item.extracted_text.length > 100\n                          ? `${item.extracted_text.substring(0, 100)}...`\n                          : item.extracted_text\n                        }\n                      </div>\n                    )}\n                  </div>\n                ))}\n\n                {filteredEvidence.length === 0 && (\n                  <div className=\"text-center py-8 text-slate-500\">\n                    <FileText className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>No evidence files found</p>\n                    <p className=\"text-sm mt-1\">Try adjusting your search or filter criteria</p>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Correlations Panel */}\n        <div>\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Link className=\"h-5 w-5\" />\n                Correlations\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {selectedEvidence ? (\n                <div className=\"space-y-4\">\n                  <div className=\"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg\">\n                    <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                      {selectedEvidence.filename}\n                    </h4>\n                    <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-1\">\n                      {correlations[selectedEvidence.id]?.length || 0} correlated transactions\n                    </p>\n                  </div>\n\n                  {correlations[selectedEvidence.id]?.length > 0 ? (\n                    <div className=\"space-y-3 max-h-80 overflow-y-auto\">\n                      {correlations[selectedEvidence.id].map((transaction) => (\n                        <div\n                          key={transaction.id}\n                          onClick={() => onCorrelationClick?.(selectedEvidence.id, transaction.id)}\n                          className=\"p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors\"\n                        >\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <span className=\"font-medium text-slate-900 dark:text-slate-100\">\n                              ${transaction.amount.toLocaleString()}\n                            </span>\n                            <span className={`text-xs px-2 py-1 rounded ${\n                              (transaction.correlation_score || 0) > 0.7 ? 'bg-green-100 text-green-700' :\n                              (transaction.correlation_score || 0) > 0.5 ? 'bg-amber-100 text-amber-700' :\n                              'bg-blue-100 text-blue-700'\n                            }`}>\n                              {((transaction.correlation_score || 0) * 100).toFixed(0)}% match\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-slate-700 dark:text-slate-300\">\n                            {transaction.description}\n                          </p>\n                          <p className=\"text-xs text-slate-500 mt-1\">\n                            {new Date(transaction.date).toLocaleDateString()}  {transaction.category}\n                          </p>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8 text-slate-500\">\n                      <Link className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                      <p className=\"text-sm\">No correlations found</p>\n                      <p className=\"text-xs mt-1\">This evidence doesn't appear to be related to any transactions</p>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"text-center py-8 text-slate-500\">\n                  <Eye className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                  <p className=\"text-sm\">Select an evidence file</p>\n                  <p className=\"text-xs mt-1\">to view correlations</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/EvidenceLibrary.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2987,2990],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2987,2990],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { evidenceApi, EvidenceType, ProcessingStatus, type Evidence } from '../../lib/evidenceApi';\nimport { FileText, MessageSquare, Video, Image as ImageIcon, Upload, Loader2, Download, Eye, PlayCircle } from 'lucide-react';\nimport { cn } from '../../lib/utils';\nimport { toast } from 'react-hot-toast';\n\ninterface EvidenceLibraryProps {\n  caseId: string;\n}\n\nexport function EvidenceLibrary({ caseId }: EvidenceLibraryProps) {\n  const [filter, setFilter] = useState<EvidenceType | 'all'>('all');\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [selectedType, setSelectedType] = useState<EvidenceType>(EvidenceType.DOCUMENT);\n  const [processingId, setProcessingId] = useState<string | null>(null);\n  const queryClient = useQueryClient();\n\n  const { data: evidenceList, isLoading } = useQuery({\n    queryKey: ['evidence', caseId],\n    queryFn: () => evidenceApi.list(caseId),\n  });\n\n  const filteredList = evidenceList?.filter(item => \n    filter === 'all' ? true : item.type === filter\n  );\n\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    setIsUploading(true);\n    setUploadProgress(0);\n\n    try {\n      await evidenceApi.upload(caseId, file, selectedType, undefined, (progress) => {\n        setUploadProgress(progress);\n      });\n      toast.success('Evidence uploaded successfully');\n      queryClient.invalidateQueries({ queryKey: ['evidence', caseId] });\n    } catch (error) {\n      toast.error('Failed to upload evidence');\n      console.error(error);\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n      // Reset input\n      e.target.value = '';\n    }\n  };\n\n  const icons = {\n    [EvidenceType.DOCUMENT]: FileText,\n    [EvidenceType.CHAT]: MessageSquare,\n    [EvidenceType.VIDEO]: Video,\n    [EvidenceType.PHOTO]: ImageIcon,\n  };\n\n  const processEvidence = async (item: Evidence) => {\n    try {\n      setProcessingId(item.id);\n      await evidenceApi.process(item.id);\n      toast.success('Processing started and completed (stub)');\n      queryClient.invalidateQueries({ queryKey: ['evidence', caseId] });\n    } catch (error) {\n      console.error(error);\n      toast.error('Failed to process evidence');\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header & Controls */}\n      <div className=\"flex flex-col sm:flex-row justify-between gap-4 items-center bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm\">\n        <div className=\"flex gap-2 p-1 bg-slate-100 dark:bg-slate-800 rounded-lg\">\n          {(['all', 'document', 'chat', 'video', 'photo'] as const).map((type) => (\n            <button\n              key={type}\n              onClick={() => setFilter(type as any)}\n              className={cn(\n                \"px-4 py-2 rounded-md text-sm font-medium transition-all\",\n                filter === type\n                  ? \"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm\"\n                  : \"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200\"\n              )}\n            >\n              {type.charAt(0).toUpperCase() + type.slice(1)} ({evidenceList?.filter(e => type === 'all' ? true : e.type === type).length || 0})\n            </button>\n          ))}\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <select\n            aria-label=\"Filter by evidence type\"\n            value={selectedType}\n            onChange={(e) => setSelectedType(e.target.value as EvidenceType)}\n            className=\"rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm\"\n          >\n            {Object.values(EvidenceType).map((type) => (\n              <option key={type} value={type} className=\"capitalize\">\n                {type}\n              </option>\n            ))}\n          </select>\n\n          <div className=\"relative\">\n            <input\n              type=\"file\"\n              id=\"file-upload\"\n              className=\"hidden\"\n              onChange={handleFileUpload}\n              disabled={isUploading}\n            />\n            <label\n              htmlFor=\"file-upload\"\n              className={cn(\n                \"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg cursor-pointer transition-colors shadow-sm font-medium\",\n                isUploading && \"opacity-50 cursor-not-allowed\"\n              )}\n            >\n              {isUploading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Upload className=\"w-4 h-4\" />}\n              {isUploading ? `Uploading ${Math.round(uploadProgress)}%` : 'Upload Evidence'}\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Content Grid */}\n      {isLoading ? (\n        <div className=\"flex justify-center p-12\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n        </div>\n      ) : filteredList?.length === 0 ? (\n        <div className=\"text-center py-20 bg-slate-50 dark:bg-slate-900/50 rounded-xl border-2 border-dashed border-slate-200 dark:border-slate-800\">\n          <div className=\"p-4 bg-slate-100 dark:bg-slate-800 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center\">\n            <Upload className=\"w-8 h-8 text-slate-400\" />\n          </div>\n          <h3 className=\"text-lg font-medium text-slate-900 dark:text-slate-100\">No evidence found</h3>\n          <p className=\"text-slate-500 dark:text-slate-400 mt-1\">Upload files to get started</p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n          {filteredList?.map((item) => {\n            const Icon = icons[item.type] || FileText;\n            return (\n              <div \n                key={item.id} \n                className=\"group relative bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-5 hover:shadow-md transition-all hover:border-blue-200 dark:hover:border-blue-500/30\"\n              >\n                <div className=\"flex items-start justify-between mb-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className={cn(\n                      \"p-2.5 rounded-lg\",\n                      item.type === 'document' && \"bg-blue-50 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400\",\n                      item.type === 'chat' && \"bg-green-50 text-green-600 dark:bg-green-500/10 dark:text-green-400\",\n                      item.type === 'video' && \"bg-purple-50 text-purple-600 dark:bg-purple-500/10 dark:text-purple-400\",\n                      item.type === 'photo' && \"bg-amber-50 text-amber-600 dark:bg-amber-500/10 dark:text-amber-400\",\n                    )}>\n                      <Icon className=\"w-5 h-5\" />\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-slate-900 dark:text-slate-100 truncate max-w-[180px]\" title={item.filename}>\n                        {item.filename}\n                      </h4>\n                      <div className=\"flex items-center gap-2 text-xs text-slate-500\">\n                        <span className=\"capitalize\">{item.type}</span>\n                        <span></span>\n                        <span>{formatBytes(item.size || 0)}</span>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Status Indicator */}\n                  <div className={cn(\n                    \"w-2 h-2 rounded-full\",\n                    item.status === ProcessingStatus.COMPLETED && \"bg-emerald-500\",\n                    item.status === ProcessingStatus.PROCESSING && \"bg-blue-500 animate-pulse\",\n                    item.status === ProcessingStatus.FAILED && \"bg-red-500\",\n                    item.status === ProcessingStatus.PENDING && \"bg-slate-300\"\n                  )} title={`Status: ${item.status}`} />\n                </div>\n\n                {/* Metadata Preview */}\n                <div className=\"space-y-2 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-100 dark:border-slate-800/50\">\n                  {item.type === 'document' && (\n                    <div className=\"flex justify-between\">\n                      <span>Pages:</span>\n                      <span className=\"font-medium text-slate-900 dark:text-slate-200\">{item.document?.page_count || '-'}</span>\n                    </div>\n                  )}\n                  {item.type === 'chat' && (\n                    <div className=\"flex justify-between\">\n                      <span>Messages:</span>\n                      <span className=\"font-medium text-slate-900 dark:text-slate-200\">{item.chat?.message_count || '-'}</span>\n                    </div>\n                  )}\n                  <div className=\"flex justify-between\">\n                    <span>Uploaded:</span>\n                    <span className=\"font-medium text-slate-900 dark:text-slate-200\">{item.uploaded_at ? new Date(item.uploaded_at).toLocaleDateString() : '-'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Status:</span>\n                    <span className=\"font-medium capitalize text-slate-900 dark:text-slate-200\">{item.status}</span>\n                  </div>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex gap-2 mt-4 pt-4 border-t border-slate-100 dark:border-slate-800\">\n                  <button className=\"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg transition-colors\">\n                    <Eye className=\"w-4 h-4\" />\n                    Preview\n                  </button>\n                  {item.status !== ProcessingStatus.COMPLETED && (\n                    <button\n                      onClick={() => processEvidence(item)}\n                      disabled={processingId === item.id}\n                      className=\"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-slate-800 rounded-lg transition-colors disabled:opacity-50\"\n                    >\n                      {processingId === item.id ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <PlayCircle className=\"w-4 h-4\" />}\n                      {processingId === item.id ? 'Processing' : 'Process'}\n                    </button>\n                  )}\n                  <button \n                    aria-label=\"Download\"\n                    className=\"flex p-2 text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-slate-800 rounded-lg transition-colors\"\n                  >\n                    <Download className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction formatBytes(bytes: number, decimals = 2) {\n  if (!+bytes) return '0 Bytes';\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/FinancialFlowAnalysis.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5162,5165],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5162,5165],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":195,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6141,6144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6141,6144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":216,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7154,7157],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7154,7157],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport {\n  Sankey,\n  Tooltip,\n  ResponsiveContainer,\n  Treemap,\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  PieChart,\n  Pie,\n  Cell\n} from 'recharts';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport {\n  TrendingUp,\n  DollarSign,\n  ArrowRightLeft,\n  BarChart3,\n  PieChart as PieChartIcon,\n  GitBranch\n} from 'lucide-react';\n\ninterface Transaction {\n  id: string;\n  date: string;\n  amount: number;\n  description: string;\n  source_account?: string;\n  destination_account?: string;\n  category: string;\n  type: 'credit' | 'debit';\n  counterparty?: string;\n}\n\ninterface FinancialFlowProps {\n  transactions: Transaction[];\n  onTransactionClick?: (transaction: Transaction) => void;\n  height?: number;\n}\n\nexport function FinancialFlowAnalysis({\n  transactions,\n  onTransactionClick,\n  height = 500\n}: FinancialFlowProps) {\n  const [viewMode, setViewMode] = useState<'sankey' | 'treemap' | 'bar' | 'pie'>('sankey');\n  const [timeRange, setTimeRange] = useState<'7d' | '30d' | '90d' | 'all'>('30d');\n\n  // Filter transactions by time range\n  const filteredTransactions = useMemo(() => {\n    if (timeRange === 'all') return transactions;\n\n    const days = timeRange === '7d' ? 7 : timeRange === '30d' ? 30 : 90;\n    const cutoff = new Date();\n    cutoff.setDate(cutoff.getDate() - days);\n\n    return transactions.filter(tx => new Date(tx.date) >= cutoff);\n  }, [transactions, timeRange]);\n\n  // Prepare Sankey data - showing flow from sources to destinations\n  const sankeyData = useMemo(() => {\n    const nodes: Array<{ name: string }> = [];\n    const links: Array<{ source: number; target: number; value: number }> = [];\n    const nodeMap = new Map<string, number>();\n\n    const addNode = (name: string) => {\n      if (!nodeMap.has(name)) {\n        nodeMap.set(name, nodes.length);\n        nodes.push({ name });\n      }\n      return nodeMap.get(name)!;\n    };\n\n    // Group transactions by source -> destination\n    const flows = filteredTransactions.reduce((acc, tx) => {\n      const source = tx.source_account || tx.category || 'Unknown Source';\n      const target = tx.destination_account || tx.counterparty || tx.category || 'Unknown Destination';\n\n      const key = `${source}->${target}`;\n      if (!acc[key]) {\n        acc[key] = { source, target, value: 0, count: 0 };\n      }\n      acc[key].value += Math.abs(tx.amount);\n      acc[key].count += 1;\n\n      return acc;\n    }, {} as Record<string, { source: string; target: string; value: number; count: number }>);\n\n    // Create nodes and links\n    Object.values(flows).forEach(flow => {\n      const sourceIndex = addNode(flow.source);\n      const targetIndex = addNode(flow.target);\n      links.push({\n        source: sourceIndex,\n        target: targetIndex,\n        value: flow.value\n      });\n    });\n\n    return { nodes, links };\n  }, [filteredTransactions]);\n\n  // Prepare treemap data - showing transaction amounts by category\n  const treemapData = useMemo(() => {\n    const categoryTotals = filteredTransactions.reduce((acc, tx) => {\n      const category = tx.category;\n      if (!acc[category]) {\n        acc[category] = { name: category, size: 0, count: 0 };\n      }\n      acc[category].size += Math.abs(tx.amount);\n      acc[category].count += 1;\n      return acc;\n    }, {} as Record<string, { name: string; size: number; count: number }>);\n\n    return Object.values(categoryTotals);\n  }, [filteredTransactions]);\n\n  // Prepare bar chart data - monthly transaction volumes\n  const barChartData = useMemo(() => {\n    const monthlyData = filteredTransactions.reduce((acc, tx) => {\n      const month = new Date(tx.date).toISOString().slice(0, 7); // YYYY-MM\n      if (!acc[month]) {\n        acc[month] = {\n          month,\n          inflow: 0,\n          outflow: 0,\n          net: 0,\n          count: 0\n        };\n      }\n\n      if (tx.type === 'credit') {\n        acc[month].inflow += tx.amount;\n      } else {\n        acc[month].outflow += Math.abs(tx.amount);\n      }\n      acc[month].net = acc[month].inflow - acc[month].outflow;\n      acc[month].count += 1;\n\n      return acc;\n    }, {} as Record<string, { month: string; inflow: number; outflow: number; net: number; count: number }>);\n\n    return Object.values(monthlyData).sort((a, b) => a.month.localeCompare(b.month));\n  }, [filteredTransactions]);\n\n  // Prepare pie chart data - transaction distribution by category\n  const pieChartData = useMemo(() => {\n    const categoryData = filteredTransactions.reduce((acc, tx) => {\n      const category = tx.category;\n      if (!acc[category]) {\n        acc[category] = { name: category, value: 0, count: 0 };\n      }\n      acc[category].value += Math.abs(tx.amount);\n      acc[category].count += 1;\n      return acc;\n    }, {} as Record<string, { name: string; value: number; count: number }>);\n\n    return Object.values(categoryData);\n  }, [filteredTransactions]);\n\n  const COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#06b6d4', '#84cc16'];\n\n  const formatCurrency = (value: number) => `$${value.toLocaleString()}`;\n\n  const renderSankeyTooltip = (props: any) => {\n    if (!props.payload || !props.payload[0]) return null;\n\n    const data = props.payload[0].payload;\n    return (\n      <div className=\"bg-white dark:bg-slate-800 p-3 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg\">\n        <p className=\"font-medium\">{data.source?.name || data.target?.name}</p>\n        <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n          Flow Amount: {formatCurrency(data.value)}\n        </p>\n      </div>\n    );\n  };\n\n  return (\n    <Card className=\"w-full\">\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <ArrowRightLeft className=\"h-5 w-5\" />\n            Financial Flow Analysis\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            {/* Time Range Selector */}\n            <select\n              value={timeRange}\n              onChange={(e) => setTimeRange(e.target.value as any)}\n              className=\"px-3 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n            >\n              <option value=\"7d\">Last 7 days</option>\n              <option value=\"30d\">Last 30 days</option>\n              <option value=\"90d\">Last 90 days</option>\n              <option value=\"all\">All time</option>\n            </select>\n\n            {/* View Mode Selector */}\n            <div className=\"flex gap-1\">\n              {[\n                { id: 'sankey', icon: GitBranch, label: 'Flow' },\n                { id: 'treemap', icon: BarChart3, label: 'Categories' },\n                { id: 'bar', icon: TrendingUp, label: 'Monthly' },\n                { id: 'pie', icon: PieChartIcon, label: 'Distribution' }\n              ].map(({ id, icon: Icon, label }) => (\n                <Button\n                  key={id}\n                  variant={viewMode === id ? 'primary' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setViewMode(id as any)}\n                  className=\"flex items-center gap-1\"\n                >\n                  <Icon className=\"h-3 w-3\" />\n                  <span className=\"hidden sm:inline\">{label}</span>\n                </Button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Summary Stats */}\n        <div className=\"grid grid-cols-4 gap-4 mt-4\">\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-green-600\">\n              {formatCurrency(filteredTransactions.filter(tx => tx.type === 'credit').reduce((sum, tx) => sum + tx.amount, 0))}\n            </div>\n            <div className=\"text-sm text-slate-600 dark:text-slate-400\">Total Inflow</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-red-600\">\n              {formatCurrency(filteredTransactions.filter(tx => tx.type === 'debit').reduce((sum, tx) => sum + Math.abs(tx.amount), 0))}\n            </div>\n            <div className=\"text-sm text-slate-600 dark:text-slate-400\">Total Outflow</div>\n          </div>\n          <div className=\"text-center\">\n            <div className={`text-2xl font-bold ${\n              filteredTransactions.reduce((sum, tx) => sum + (tx.type === 'credit' ? tx.amount : -Math.abs(tx.amount)), 0) >= 0\n                ? 'text-green-600' : 'text-red-600'\n            }`}>\n              {formatCurrency(Math.abs(filteredTransactions.reduce((sum, tx) => sum + (tx.type === 'credit' ? tx.amount : -Math.abs(tx.amount)), 0)))}\n            </div>\n            <div className=\"text-sm text-slate-600 dark:text-slate-400\">Net Flow</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-blue-600\">\n              {filteredTransactions.length}\n            </div>\n            <div className=\"text-sm text-slate-600 dark:text-slate-400\">Transactions</div>\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent>\n        <div style={{ height }}>\n          {viewMode === 'sankey' && sankeyData.nodes.length > 0 && (\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <Sankey\n                data={sankeyData}\n                nodePadding={15}\n                margin={{ left: 20, right: 20, top: 20, bottom: 20 }}\n                link={{ stroke: '#ddd' }}\n              >\n                <Tooltip content={renderSankeyTooltip} />\n              </Sankey>\n            </ResponsiveContainer>\n          )}\n\n          {viewMode === 'treemap' && treemapData.length > 0 && (\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <Treemap\n                data={treemapData}\n                dataKey=\"size\"\n                nameKey=\"name\"\n                stroke=\"#fff\"\n                fill=\"#8884d8\"\n              >\n                <Tooltip\n                  formatter={(value: number) => [formatCurrency(value), 'Total Amount']}\n                  labelFormatter={(label) => `Category: ${label}`}\n                />\n              </Treemap>\n            </ResponsiveContainer>\n          )}\n\n          {viewMode === 'bar' && barChartData.length > 0 && (\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <BarChart data={barChartData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"month\" />\n                <YAxis tickFormatter={formatCurrency} />\n                <Tooltip\n                  formatter={(value: number, name: string) => [\n                    formatCurrency(value),\n                    name === 'inflow' ? 'Inflow' : name === 'outflow' ? 'Outflow' : 'Net Flow'\n                  ]}\n                />\n                <Bar dataKey=\"inflow\" fill=\"#10b981\" name=\"inflow\" />\n                <Bar dataKey=\"outflow\" fill=\"#ef4444\" name=\"outflow\" />\n              </BarChart>\n            </ResponsiveContainer>\n          )}\n\n          {viewMode === 'pie' && pieChartData.length > 0 && (\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <PieChart>\n                <Pie\n                  data={pieChartData}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  labelLine={false}\n                  label={({ name, percent }) => `${name} ${((percent ?? 0) * 100).toFixed(0)}%`}\n                  outerRadius={120}\n                  fill=\"#8884d8\"\n                  dataKey=\"value\"\n                >\n                  {pieChartData.map((_, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                  ))}\n                </Pie>\n                <Tooltip formatter={(value: number) => formatCurrency(value)} />\n              </PieChart>\n            </ResponsiveContainer>\n          )}\n\n          {((viewMode === 'sankey' && sankeyData.nodes.length === 0) ||\n            (viewMode === 'treemap' && treemapData.length === 0) ||\n            (viewMode === 'bar' && barChartData.length === 0) ||\n            (viewMode === 'pie' && pieChartData.length === 0)) && (\n            <div className=\"flex items-center justify-center h-full text-slate-500\">\n              <div className=\"text-center\">\n                <DollarSign className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                <p>No transaction data available for the selected time range</p>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Transaction List */}\n        <div className=\"mt-6\">\n          <h4 className=\"font-medium mb-3\">Recent Transactions ({filteredTransactions.length})</h4>\n          <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n            {filteredTransactions.slice(-5).reverse().map((tx) => (\n              <div\n                key={tx.id}\n                onClick={() => onTransactionClick?.(tx)}\n                className=\"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer transition-colors\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div className={`w-2 h-2 rounded-full ${\n                    tx.type === 'credit' ? 'bg-green-500' : 'bg-red-500'\n                  }`} />\n                  <div>\n                    <p className=\"font-medium text-slate-900 dark:text-slate-100\">\n                      {tx.description}\n                    </p>\n                    <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                      {new Date(tx.date).toLocaleDateString()}  {tx.category}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <p className={`font-medium ${\n                    tx.type === 'credit' ? 'text-green-600' : 'text-red-600'\n                  }`}>\n                    {tx.type === 'credit' ? '+' : '-'}${Math.abs(tx.amount).toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/NewCaseModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/QuickPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/RiskBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/StatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/Timeline.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_caseId' is defined but never used.","line":83,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":83,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_index' is defined but never used.","line":166,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":166,"endColumn":45}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Calendar, Filter, ChevronDown, FileText, Upload, AlertCircle, User, TrendingUp } from 'lucide-react';\nimport { cn } from '../../lib/utils';\n\ninterface TimelineEvent {\n  id: string;\n  type: 'document_upload' | 'note_added' | 'risk_update' | 'status_change' | 'assignment' | 'ai_analysis' | 'case_created';\n  timestamp: string;\n  actor?: string;\n  message: string;\n  metadata?: Record<string, string | number>;\n}\n\ninterface TimelineProps {\n  caseId: string;\n  events?: TimelineEvent[];\n}\n\nconst EVENT_ICONS = {\n  document_upload: Upload,\n  note_added: FileText,\n  risk_update: TrendingUp,\n  status_change: AlertCircle,\n  assignment: User,\n  ai_analysis: AlertCircle,\n  case_created: Calendar,\n};\n\nconst EVENT_COLORS = {\n  document_upload: 'bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400',\n  note_added: 'bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400',\n  risk_update: 'bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400',\n  status_change: 'bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400',\n  assignment: 'bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400',\n  ai_analysis: 'bg-violet-100 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400',\n  case_created: 'bg-slate-100 dark:bg-slate-900/30 text-slate-600 dark:text-slate-400',\n};\n\n// Mock data for demonstration\nconst MOCK_EVENTS: TimelineEvent[] = [\n  {\n    id: 'evt_6',\n    type: 'document_upload',\n    timestamp: '2025-12-06T10:30:00Z',\n    actor: 'J. Smith',\n    message: 'Document uploaded \"Bank Statement Nov.pdf\"',\n  },\n  {\n    id: 'evt_5',\n    type: 'note_added',\n    timestamp: '2025-12-06T08:15:00Z',\n    actor: 'J. Smith',\n    message: 'Note added: \"Suspicious pattern detected in wire transfers\"',\n  },\n  {\n    id: 'evt_4',\n    type: 'risk_update',\n    timestamp: '2025-12-05T16:00:00Z',\n    message: 'Risk score increased: 78  85',\n    metadata: { from: 78, to: 85 },\n  },\n  {\n    id: 'evt_3',\n    type: 'ai_analysis',\n    timestamp: '2025-12-05T14:30:00Z',\n    message: 'AI analysis completed',\n  },\n  {\n    id: 'evt_2',\n    type: 'assignment',\n    timestamp: '2025-12-05T09:00:00Z',\n    actor: 'System',\n    message: 'Case assigned to A. Jones',\n  },\n  {\n    id: 'evt_1',\n    type: 'case_created',\n    timestamp: '2025-11-25T11:00:00Z',\n    message: 'Case created from alert #5678',\n  },\n];\n\nexport function Timeline({ caseId: _caseId, events = MOCK_EVENTS }: TimelineProps) {\n  const [filter, setFilter] = useState<string>('all');\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc');\n\n  const filteredEvents = events\n    .filter(event => filter === 'all' || event.type === filter)\n    .sort((a, b) => {\n      const diff = new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime();\n      return sortOrder === 'asc' ? diff : -diff;\n    });\n\n  // Group events by date\n  const groupedEvents = filteredEvents.reduce((groups, event) => {\n    const date = new Date(event.timestamp).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n    if (!groups[date]) {\n      groups[date] = [];\n    }\n    groups[date].push(event);\n    return groups;\n  }, {} as Record<string, TimelineEvent[]>);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Filters */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">\n          Case Timeline\n        </h3>\n        <div className=\"flex items-center gap-3\">\n          {/* Event Type Filter */}\n          <div className=\"relative\">\n            <select\n              value={filter}\n              onChange={(e) => setFilter(e.target.value)}\n              className=\"appearance-none rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 py-2 pr-10 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800\"\n            >\n              <option value=\"all\">All Events</option>\n              <option value=\"document_upload\">Documents</option>\n              <option value=\"note_added\">Notes</option>\n              <option value=\"risk_update\">Risk Updates</option>\n              <option value=\"status_change\">Status Changes</option>\n              <option value=\"assignment\">Assignments</option>\n              <option value=\"ai_analysis\">AI Analysis</option>\n            </select>\n            <Filter className=\"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400 pointer-events-none\" />\n          </div>\n\n          {/* Sort Order */}\n          <button\n            onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}\n            className=\"flex items-center gap-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800\"\n          >\n            {sortOrder === 'desc' ? 'Newest First' : 'Oldest First'}\n            <ChevronDown className={cn(\n              \"h-4 w-4 transition-transform\",\n              sortOrder === 'asc' && \"rotate-180\"\n            )} />\n          </button>\n        </div>\n      </div>\n\n      {/* Timeline */}\n      <div className=\"space-y-6\">\n        {Object.entries(groupedEvents).map(([date, dateEvents]) => (\n          <div key={date}>\n            {/* Date Header */}\n            <div className=\"sticky top-0 z-10 mb-4 flex items-center gap-2 bg-slate-50/80 dark:bg-slate-950/80 backdrop-blur py-2\">\n              <Calendar className=\"h-4 w-4 text-slate-400\" />\n              <span className=\"text-sm font-semibold text-slate-700 dark:text-slate-300\">\n                {date}\n              </span>\n              <div className=\"flex-1 h-px bg-slate-200 dark:bg-slate-800\" />\n            </div>\n\n            {/* Events for this date */}\n            <div className=\"relative space-y-4 pl-6\">\n              {/* Vertical line */}\n              <div className=\"absolute left-[11px] top-0 bottom-0 w-0.5 bg-slate-200 dark:bg-slate-800\" />\n\n              {dateEvents.map((event, _index) => {\n                const Icon = EVENT_ICONS[event.type];\n                const colorClass = EVENT_COLORS[event.type];\n\n                return (\n                  <div key={event.id} className=\"relative flex gap-4\">\n                    {/* Icon */}\n                    <div className={cn(\n                      \"relative z-10 flex h-6 w-6 items-center justify-center rounded-full\",\n                      colorClass\n                    )}>\n                      <Icon className=\"h-3 w-3\" />\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"flex-1 pb-4\">\n                      <div className=\"rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 hover:shadow-md transition-shadow\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex-1\">\n                            <p className=\"text-sm font-medium text-slate-900 dark:text-slate-100\">\n                              {event.message}\n                            </p>\n                            {event.actor && (\n                              <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\n                                by {event.actor}\n                              </p>\n                            )}\n                          </div>\n                          <time className=\"text-xs text-slate-400 whitespace-nowrap\">\n                            {new Date(event.timestamp).toLocaleTimeString('en-US', {\n                              hour: '2-digit',\n                              minute: '2-digit',\n                            })}\n                          </time>\n                        </div>\n\n                        {/* Metadata */}\n                        {event.metadata && (\n                          <div className=\"mt-3 flex gap-4 text-xs\">\n                            {Object.entries(event.metadata).map(([key, value]) => (\n                              <div key={key} className=\"text-slate-500 dark:text-slate-400\">\n                                <span className=\"font-medium capitalize\">{key}:</span>{' '}\n                                <span className=\"text-slate-700 dark:text-slate-300\">{value}</span>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        ))}\n\n        {/* Empty State */}\n        {filteredEvents.length === 0 && (\n          <div className=\"text-center py-12\">\n            <Calendar className=\"mx-auto h-12 w-12 text-slate-300 dark:text-slate-700\" />\n            <p className=\"mt-4 text-sm text-slate-500 dark:text-slate-400\">\n              No events found for this filter\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/cases/VirtualCaseList.tsx","messages":[{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/cases/VirtualCaseList.tsx:43:21\n  41 |   }, [cases, searchTerm]);\n  42 |\n> 43 |   const parentRef = useVirtualizer({\n     |                     ^^^^^^^^^^^^^^ TanStack Virtual's `useVirtualizer()` API returns functions that cannot be memoized safely\n  44 |     count: filteredCases.length,\n  45 |     getScrollElement: () => document.getElementById('virtual-case-list'),\n  46 |     estimateSize: () => itemHeight,","line":43,"column":21,"nodeType":null,"endLine":43,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport { useQuery } from '@tanstack/react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { Search, Briefcase, ChevronRight } from 'lucide-react';\nimport { api } from '../../lib/api';\n\ninterface Case {\n  id: string;\n  title: string;\n  subject_name: string;\n  status: string;\n  risk_score: number;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface VirtualCaseListProps {\n  height?: number;\n  itemHeight?: number;\n}\n\nexport function VirtualCaseList({ height = 600, itemHeight = 80 }: VirtualCaseListProps) {\n  const navigate = useNavigate();\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const { data: cases, isLoading } = useQuery({\n    queryKey: ['cases'],\n    queryFn: () => api.get<Case[]>('/cases/'),\n    retry: false,\n  });\n\n  const filteredCases = useMemo(() => {\n    if (!cases) return [];\n    return cases.filter(\n      (c) =>\n        c.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        c.subject_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        c.id.includes(searchTerm)\n    );\n  }, [cases, searchTerm]);\n\n  const parentRef = useVirtualizer({\n    count: filteredCases.length,\n    getScrollElement: () => document.getElementById('virtual-case-list'),\n    estimateSize: () => itemHeight,\n    overscan: 5,\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case 'open':\n      case 'active':\n        return 'bg-blue-100 text-blue-700 dark:bg-blue-500/20 dark:text-blue-300';\n      case 'under review':\n        return 'bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-300';\n      case 'escalated':\n        return 'bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-300';\n      case 'closed':\n        return 'bg-slate-100 text-slate-700 dark:bg-slate-500/20 dark:text-slate-300';\n      default:\n        return 'bg-slate-100 text-slate-700 dark:bg-slate-500/20 dark:text-slate-300';\n    }\n  };\n\n  const getRiskColor = (score: number) => {\n    if (score >= 80) return 'text-red-600 dark:text-red-400';\n    if (score >= 60) return 'text-amber-600 dark:text-amber-400';\n    if (score >= 40) return 'text-blue-600 dark:text-blue-400';\n    return 'text-emerald-600 dark:text-emerald-400';\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Search */}\n      <div className=\"relative\">\n        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400\" />\n        <input\n          type=\"text\"\n          placeholder=\"Search by case ID, subject, or title...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500\"\n        />\n      </div>\n\n      {/* Virtualized List */}\n      <div\n        id=\"virtual-case-list\"\n        className=\"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden\"\n        style={{ height }}\n      >\n        <div className=\"bg-slate-50 dark:bg-slate-800/50 px-6 py-4 border-b border-slate-200 dark:border-slate-700\">\n          <div className=\"grid grid-cols-12 gap-4 text-sm font-medium text-slate-500 dark:text-slate-400\">\n            <div className=\"col-span-4\">Case</div>\n            <div className=\"col-span-3\">Subject</div>\n            <div className=\"col-span-2\">Status</div>\n            <div className=\"col-span-2\">Risk</div>\n            <div className=\"col-span-1\"></div>\n          </div>\n        </div>\n\n        <div\n          className=\"overflow-auto\"\n          style={{\n            height: height - 60, // Subtract header height\n            contain: 'strict',\n          }}\n        >\n          <div\n            style={{\n              height: `${parentRef.getTotalSize()}px`,\n              width: '100%',\n              position: 'relative',\n            }}\n          >\n            {parentRef.getVirtualItems().map((virtualItem) => {\n              const c = filteredCases[virtualItem.index];\n              return (\n                <div\n                  key={c.id}\n                  className=\"absolute top-0 left-0 w-full border-b border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer transition-colors\"\n                  style={{\n                    height: `${virtualItem.size}px`,\n                    transform: `translateY(${virtualItem.start}px)`,\n                  }}\n                  onClick={() => navigate(`/cases/${c.id}`)}\n                >\n                  <div className=\"px-6 py-4\">\n                    <div className=\"grid grid-cols-12 gap-4 items-center\">\n                      <div className=\"col-span-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"p-2 bg-blue-50 dark:bg-blue-500/10 rounded-lg\">\n                            <Briefcase className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" />\n                          </div>\n                          <div>\n                            <div className=\"font-medium text-slate-900 dark:text-slate-100\">\n                              {c.title || `Case ${c.id.slice(0, 8)}`}\n                            </div>\n                            <div className=\"text-sm text-slate-500\">{c.id}</div>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"col-span-3 text-slate-700 dark:text-slate-300\">\n                        {c.subject_name || 'Unknown'}\n                      </div>\n                      <div className=\"col-span-2\">\n                        <span className={`px-2.5 py-1 rounded-full text-xs font-medium ${getStatusColor(c.status)}`}>\n                          {c.status}\n                        </span>\n                      </div>\n                      <div className=\"col-span-2\">\n                        <span className={`font-semibold ${getRiskColor(c.risk_score)}`}>\n                          {c.risk_score}\n                        </span>\n                      </div>\n                      <div className=\"col-span-1\">\n                        <ChevronRight className=\"w-5 h-5 text-slate-300\" />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {filteredCases.length === 0 && (\n        <div className=\"text-center py-12\">\n          <Briefcase className=\"w-12 h-12 text-slate-300 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-slate-900 dark:text-slate-100\">No cases found</h3>\n          <p className=\"text-slate-500 mt-1\">Try adjusting your search criteria</p>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/charts/ChartWrappers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/charts/FinancialSankey.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/collaboration/ActivityFeed.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[720,723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[720,723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5194,5197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5194,5197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport {\n  Activity,\n  User,\n  FileText,\n  MessageSquare,\n  AlertTriangle,\n  CheckCircle,\n  Clock,\n  Filter,\n  RefreshCw\n} from 'lucide-react';\n\ninterface ActivityItem {\n  id: string;\n  type: 'comment' | 'file_upload' | 'status_change' | 'user_action' | 'alert' | 'completion';\n  title: string;\n  description: string;\n  user: {\n    id: string;\n    name: string;\n    avatar?: string;\n  };\n  timestamp: string;\n  metadata?: {\n    case_id?: string;\n    file_name?: string;\n    old_status?: string;\n    new_status?: string;\n    comment_count?: number;\n    [key: string]: any;\n  };\n  is_read?: boolean;\n}\n\ninterface ActivityFeedProps {\n  activities: ActivityItem[];\n  currentUserId: string;\n  onActivityClick?: (activity: ActivityItem) => void;\n  onMarkAsRead?: (activityId: string) => void;\n  onRefresh?: () => void;\n  isLoading?: boolean;\n}\n\nexport function ActivityFeed({\n  activities,\n  currentUserId,\n  onActivityClick,\n  onMarkAsRead,\n  onRefresh,\n  isLoading = false\n}: ActivityFeedProps) {\n  const [filter, setFilter] = useState<'all' | 'unread' | 'mine'>('all');\n  const [typeFilter, setTypeFilter] = useState<string>('all');\n\n  // Filter activities based on current filters\n  const filteredActivities = useMemo(() => {\n    return activities.filter(activity => {\n      // Read status filter\n      if (filter === 'unread' && activity.is_read) return false;\n      if (filter === 'mine' && activity.user.id !== currentUserId) return false;\n\n      // Type filter\n      if (typeFilter !== 'all' && activity.type !== typeFilter) return false;\n\n      return true;\n    });\n  }, [activities, filter, typeFilter, currentUserId]);\n\n  // Group activities by date\n  const groupedActivities = useMemo(() => {\n    const groups: { [date: string]: ActivityItem[] } = {};\n\n    filteredActivities.forEach(activity => {\n      const date = new Date(activity.timestamp).toDateString();\n      if (!groups[date]) {\n        groups[date] = [];\n      }\n      groups[date].push(activity);\n    });\n\n    // Sort dates in descending order\n    return Object.entries(groups)\n      .sort(([a], [b]) => new Date(b).getTime() - new Date(a).getTime());\n  }, [filteredActivities]);\n\n  const getActivityIcon = (type: string) => {\n    switch (type) {\n      case 'comment': return <MessageSquare className=\"h-4 w-4 text-blue-500\" />;\n      case 'file_upload': return <FileText className=\"h-4 w-4 text-green-500\" />;\n      case 'status_change': return <CheckCircle className=\"h-4 w-4 text-purple-500\" />;\n      case 'user_action': return <User className=\"h-4 w-4 text-slate-500\" />;\n      case 'alert': return <AlertTriangle className=\"h-4 w-4 text-amber-500\" />;\n      case 'completion': return <CheckCircle className=\"h-4 w-4 text-emerald-500\" />;\n      default: return <Activity className=\"h-4 w-4 text-slate-500\" />;\n    }\n  };\n\n  const getActivityColor = (type: string) => {\n    switch (type) {\n      case 'comment': return 'border-l-blue-500';\n      case 'file_upload': return 'border-l-green-500';\n      case 'status_change': return 'border-l-purple-500';\n      case 'user_action': return 'border-l-slate-500';\n      case 'alert': return 'border-l-amber-500';\n      case 'completion': return 'border-l-emerald-500';\n      default: return 'border-l-slate-500';\n    }\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / (1000 * 60));\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n\n    return date.toLocaleDateString();\n  };\n\n  const unreadCount = activities.filter(a => !a.is_read).length;\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Activity className=\"h-5 w-5\" />\n            Activity Feed\n            {unreadCount > 0 && (\n              <span className=\"bg-red-500 text-white text-xs px-2 py-1 rounded-full\">\n                {unreadCount}\n              </span>\n            )}\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            {onRefresh && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={onRefresh}\n                disabled={isLoading}\n              >\n                <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"flex items-center gap-4 mt-4\">\n          <div className=\"flex items-center gap-2\">\n            <Filter className=\"h-4 w-4 text-slate-500\" />\n            <select\n              value={filter}\n              onChange={(e) => setFilter(e.target.value as any)}\n              className=\"px-2 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n            >\n              <option value=\"all\">All Activities</option>\n              <option value=\"unread\">Unread Only</option>\n              <option value=\"mine\">My Activities</option>\n            </select>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-slate-600 dark:text-slate-400\">Type:</span>\n            <select\n              value={typeFilter}\n              onChange={(e) => setTypeFilter(e.target.value)}\n              className=\"px-2 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n            >\n              <option value=\"all\">All Types</option>\n              <option value=\"comment\">Comments</option>\n              <option value=\"file_upload\">File Uploads</option>\n              <option value=\"status_change\">Status Changes</option>\n              <option value=\"user_action\">User Actions</option>\n              <option value=\"alert\">Alerts</option>\n              <option value=\"completion\">Completions</option>\n            </select>\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent>\n        {isLoading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <RefreshCw className=\"h-6 w-6 animate-spin text-slate-400\" />\n          </div>\n        ) : filteredActivities.length === 0 ? (\n          <div className=\"text-center py-8 text-slate-500\">\n            <Activity className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n            <p>No activities found</p>\n            <p className=\"text-sm mt-1\">Try adjusting your filters</p>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {groupedActivities.map(([date, dayActivities]) => (\n              <div key={date}>\n                {/* Date Header */}\n                <div className=\"flex items-center gap-2 mb-3\">\n                  <Clock className=\"h-4 w-4 text-slate-400\" />\n                  <span className=\"text-sm font-medium text-slate-600 dark:text-slate-400\">\n                    {new Date(date).toLocaleDateString('en-US', {\n                      weekday: 'long',\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric'\n                    })}\n                  </span>\n                </div>\n\n                {/* Activities for this date */}\n                <div className=\"space-y-3\">\n                  {dayActivities.map((activity) => (\n                    <div\n                      key={activity.id}\n                      onClick={() => onActivityClick?.(activity)}\n                      className={`flex gap-3 p-3 rounded-lg border-l-4 cursor-pointer transition-colors ${\n                        activity.is_read\n                          ? 'bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800'\n                          : 'bg-blue-50 dark:bg-blue-500/10 border-blue-500'\n                      } ${getActivityColor(activity.type)}`}\n                    >\n                      {/* Activity Icon */}\n                      <div className=\"flex-shrink-0 mt-1\">\n                        {getActivityIcon(activity.type)}\n                      </div>\n\n                      {/* Activity Content */}\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-medium text-slate-900 dark:text-slate-100 text-sm\">\n                              {activity.title}\n                            </h4>\n                            <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-1\">\n                              {activity.description}\n                            </p>\n\n                            {/* Metadata */}\n                            {activity.metadata && (\n                              <div className=\"flex flex-wrap gap-2 mt-2\">\n                                {activity.metadata.case_id && (\n                                  <span className=\"text-xs bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded\">\n                                    Case: {activity.metadata.case_id.slice(0, 8)}\n                                  </span>\n                                )}\n                                {activity.metadata.file_name && (\n                                  <span className=\"text-xs bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-300 px-2 py-1 rounded\">\n                                    {activity.metadata.file_name}\n                                  </span>\n                                )}\n                                {activity.metadata.old_status && activity.metadata.new_status && (\n                                  <span className=\"text-xs bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300 px-2 py-1 rounded\">\n                                    {activity.metadata.old_status}  {activity.metadata.new_status}\n                                  </span>\n                                )}\n                              </div>\n                            )}\n                          </div>\n\n                          {/* User and Timestamp */}\n                          <div className=\"flex flex-col items-end gap-1 ml-3\">\n                            <div className=\"flex items-center gap-2\">\n                              {activity.user.avatar ? (\n                                <img\n                                  src={activity.user.avatar}\n                                  alt={activity.user.name}\n                                  className=\"w-6 h-6 rounded-full\"\n                                />\n                              ) : (\n                                <div className=\"w-6 h-6 bg-slate-200 dark:bg-slate-700 rounded-full flex items-center justify-center\">\n                                  <User className=\"w-3 h-3 text-slate-500\" />\n                                </div>\n                              )}\n                              <span className=\"text-xs text-slate-500\">\n                                {activity.user.name}\n                              </span>\n                            </div>\n                            <span className=\"text-xs text-slate-400\">\n                              {formatTimestamp(activity.timestamp)}\n                            </span>\n                          </div>\n                        </div>\n\n                        {/* Mark as read button for unread items */}\n                        {!activity.is_read && onMarkAsRead && (\n                          <div className=\"mt-2\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"ghost\"\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                onMarkAsRead(activity.id);\n                              }}\n                              className=\"text-xs h-6\"\n                            >\n                              Mark as read\n                            </Button>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/collaboration/CommentThread.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/collaboration/MentionsNotifications.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardContent' is defined but never used.","line":2,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardHeader' is defined but never used.","line":2,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardTitle' is defined but never used.","line":2,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[634,637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[634,637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport {\n  Bell,\n  AtSign,\n  Check,\n  Settings,\n  Volume2,\n  VolumeX,\n  Mail,\n  MessageSquare\n} from 'lucide-react';\n\ninterface Notification {\n  id: string;\n  type: 'mention' | 'comment' | 'assignment' | 'alert' | 'system';\n  title: string;\n  message: string;\n  timestamp: string;\n  is_read: boolean;\n  priority: 'low' | 'medium' | 'high';\n  action_url?: string;\n  metadata?: {\n    mentioned_by?: string;\n    case_id?: string;\n    comment_id?: string;\n    [key: string]: any;\n  };\n}\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  avatar?: string;\n}\n\ninterface MentionsNotificationsProps {\n  notifications: Notification[];\n  users: User[];\n  currentUserId: string;\n  onNotificationClick?: (notification: Notification) => void;\n  onMarkAsRead?: (notificationId: string) => void;\n  onMarkAllAsRead?: () => void;\n  onSendMention?: (userId: string, message: string) => void;\n  soundEnabled?: boolean;\n  onToggleSound?: () => void;\n}\n\nexport function MentionsNotifications({\n  notifications,\n  users,\n  currentUserId,\n  onNotificationClick,\n  onMarkAsRead,\n  onMarkAllAsRead,\n  onSendMention,\n  soundEnabled = true,\n  onToggleSound\n}: MentionsNotificationsProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [mentionInput, setMentionInput] = useState('');\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [showMentionComposer, setShowMentionComposer] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const unreadCount = notifications.filter(n => !n.is_read).length;\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'mention': return <AtSign className=\"h-4 w-4 text-blue-500\" />;\n      case 'comment': return <MessageSquare className=\"h-4 w-4 text-green-500\" />;\n      case 'assignment': return <Check className=\"h-4 w-4 text-purple-500\" />;\n      case 'alert': return <Bell className=\"h-4 w-4 text-amber-500\" />;\n      case 'system': return <Settings className=\"h-4 w-4 text-slate-500\" />;\n      default: return <Bell className=\"h-4 w-4 text-slate-500\" />;\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'border-l-red-500 bg-red-50 dark:bg-red-500/10';\n      case 'medium': return 'border-l-amber-500 bg-amber-50 dark:bg-amber-500/10';\n      case 'low': return 'border-l-green-500 bg-green-50 dark:bg-green-500/10';\n      default: return 'border-l-slate-500 bg-slate-50 dark:bg-slate-500/10';\n    }\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / (1000 * 60));\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m ago`;\n    if (diffMins < 1440) return `${Math.floor(diffMins / 60)}h ago`;\n    return date.toLocaleDateString();\n  };\n\n  const handleSendMention = () => {\n    if (selectedUser && mentionInput.trim()) {\n      onSendMention?.(selectedUser.id, mentionInput.trim());\n      setMentionInput('');\n      setSelectedUser(null);\n      setShowMentionComposer(false);\n    }\n  };\n\n  const filteredUsers = users.filter(user => user.id !== currentUserId);\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      {/* Notification Bell */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"relative p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors\"\n      >\n        <Bell className=\"h-5 w-5 text-slate-600 dark:text-slate-400\" />\n        {unreadCount > 0 && (\n          <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n            {unreadCount > 9 ? '9+' : unreadCount}\n          </span>\n        )}\n      </button>\n\n      {/* Dropdown */}\n      {isOpen && (\n        <div className=\"absolute right-0 top-full mt-2 w-96 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-50\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700\">\n            <h3 className=\"font-semibold text-slate-900 dark:text-slate-100\">\n              Notifications\n            </h3>\n            <div className=\"flex items-center gap-2\">\n              {onToggleSound && (\n                <button\n                  onClick={onToggleSound}\n                  className=\"p-1 rounded hover:bg-slate-100 dark:hover:bg-slate-800\"\n                >\n                  {soundEnabled ? (\n                    <Volume2 className=\"h-4 w-4 text-slate-500\" />\n                  ) : (\n                    <VolumeX className=\"h-4 w-4 text-slate-500\" />\n                  )}\n                </button>\n              )}\n              {unreadCount > 0 && onMarkAllAsRead && (\n                <Button size=\"sm\" variant=\"outline\" onClick={onMarkAllAsRead}>\n                  Mark all read\n                </Button>\n              )}\n            </div>\n          </div>\n\n          {/* Mention Composer */}\n          {showMentionComposer && (\n            <div className=\"p-4 border-b border-slate-200 dark:border-slate-700\">\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-2\">\n                  <AtSign className=\"h-4 w-4 text-blue-500\" />\n                  <span className=\"font-medium text-slate-900 dark:text-slate-100\">\n                    Mention someone\n                  </span>\n                </div>\n\n                {/* User Selection */}\n                <select\n                  value={selectedUser?.id || ''}\n                  onChange={(e) => {\n                    const user = users.find(u => u.id === e.target.value);\n                    setSelectedUser(user || null);\n                  }}\n                  className=\"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                >\n                  <option value=\"\">Select a user...</option>\n                  {filteredUsers.map(user => (\n                    <option key={user.id} value={user.id}>\n                      {user.name}\n                    </option>\n                  ))}\n                </select>\n\n                {/* Message Input */}\n                <textarea\n                  value={mentionInput}\n                  onChange={(e) => setMentionInput(e.target.value)}\n                  placeholder=\"Type your message...\"\n                  className=\"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900 resize-none\"\n                  rows={3}\n                />\n\n                {/* Actions */}\n                <div className=\"flex justify-end gap-2\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => {\n                      setShowMentionComposer(false);\n                      setMentionInput('');\n                      setSelectedUser(null);\n                    }}\n                  >\n                    Cancel\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    onClick={handleSendMention}\n                    disabled={!selectedUser || !mentionInput.trim()}\n                  >\n                    <Mail className=\"h-3 w-3 mr-1\" />\n                    Send Mention\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Notifications List */}\n          <div className=\"max-h-96 overflow-y-auto\">\n            {notifications.length === 0 ? (\n              <div className=\"p-8 text-center text-slate-500\">\n                <Bell className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                <p>No notifications</p>\n                <p className=\"text-sm mt-1\">You're all caught up!</p>\n              </div>\n            ) : (\n              <div className=\"divide-y divide-slate-200 dark:divide-slate-700\">\n                {notifications.map((notification) => (\n                  <div\n                    key={notification.id}\n                    onClick={() => onNotificationClick?.(notification)}\n                    className={`p-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors ${\n                      !notification.is_read ? getPriorityColor(notification.priority) : ''\n                    }`}\n                  >\n                    <div className=\"flex gap-3\">\n                      <div className=\"flex-shrink-0 mt-1\">\n                        {getNotificationIcon(notification.type)}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-medium text-slate-900 dark:text-slate-100 text-sm\">\n                              {notification.title}\n                            </h4>\n                            <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-1\">\n                              {notification.message}\n                            </p>\n                            <p className=\"text-xs text-slate-500 mt-1\">\n                              {formatTimestamp(notification.timestamp)}\n                            </p>\n                          </div>\n                          {!notification.is_read && (\n                            <div className=\"flex-shrink-0 ml-2\">\n                              <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                            </div>\n                          )}\n                        </div>\n\n                        {/* Metadata */}\n                        {notification.metadata && (\n                          <div className=\"flex flex-wrap gap-1 mt-2\">\n                            {notification.metadata.mentioned_by && (\n                              <span className=\"text-xs bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 px-2 py-1 rounded\">\n                                Mentioned by {notification.metadata.mentioned_by}\n                              </span>\n                            )}\n                            {notification.metadata.case_id && (\n                              <span className=\"text-xs bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded\">\n                                Case: {notification.metadata.case_id.slice(0, 8)}\n                              </span>\n                            )}\n                          </div>\n                        )}\n\n                        {/* Mark as read button */}\n                        {!notification.is_read && onMarkAsRead && (\n                          <div className=\"mt-2\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"ghost\"\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                onMarkAsRead(notification.id);\n                              }}\n                              className=\"text-xs h-6\"\n                            >\n                              Mark as read\n                            </Button>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"p-4 border-t border-slate-200 dark:border-slate-700\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowMentionComposer(!showMentionComposer)}\n              className=\"w-full\"\n            >\n              <AtSign className=\"h-4 w-4 mr-1\" />\n              {showMentionComposer ? 'Cancel Mention' : 'Mention Someone'}\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/collaboration/SharedAIInsights.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tag' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Filter' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onAddComment' is defined but never used.","line":68,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":68,"endColumn":15},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":102,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":102,"endColumn":76,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2681,2856],"text":"{ const aScore = a.votes.upvotes.length - a.votes.downvotes.length;\n          const bScore = b.votes.upvotes.length - b.votes.downvotes.length;\n          return bScore - aScore; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":103,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":103,"endColumn":76,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2681,2856],"text":"{ const aScore = a.votes.upvotes.length - a.votes.downvotes.length;\n          const bScore = b.votes.upvotes.length - b.votes.downvotes.length;\n          return bScore - aScore; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getVoteScore' is assigned a value but never used.","line":144,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":144,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":206,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6643,6646],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6643,6646],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport {\n  Brain,\n  Share2,\n  ThumbsUp,\n  ThumbsDown,\n  MessageSquare,\n  User,\n  Clock,\n  Tag,\n  Filter,\n  Search,\n  Star,\n  StarOff\n} from 'lucide-react';\n\ninterface AIInsight {\n  id: string;\n  title: string;\n  content: string;\n  type: 'prediction' | 'analysis' | 'recommendation' | 'alert' | 'summary';\n  confidence: number;\n  tags: string[];\n  created_by: {\n    id: string;\n    name: string;\n    avatar?: string;\n  };\n  created_at: string;\n  case_id?: string;\n  model_used?: string;\n  votes: {\n    upvotes: string[]; // user IDs\n    downvotes: string[];\n  };\n  comments: Array<{\n    id: string;\n    content: string;\n    author: {\n      id: string;\n      name: string;\n    };\n    created_at: string;\n  }>;\n  is_shared: boolean;\n  visibility: 'private' | 'team' | 'public';\n}\n\ninterface SharedAIInsightsProps {\n  insights: AIInsight[];\n  currentUserId: string;\n  onInsightClick?: (insight: AIInsight) => void;\n  onVote?: (insightId: string, voteType: 'up' | 'down') => void;\n  onShare?: (insightId: string) => void;\n  onAddComment?: (insightId: string, content: string) => void;\n  onToggleFavorite?: (insightId: string) => void;\n  favorites?: string[]; // insight IDs\n}\n\nexport function SharedAIInsights({\n  insights,\n  currentUserId,\n  onInsightClick,\n  onVote,\n  onShare,\n  onAddComment,\n  onToggleFavorite,\n  favorites = []\n}: SharedAIInsightsProps) {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [typeFilter, setTypeFilter] = useState<string>('all');\n  const [sortBy, setSortBy] = useState<'recent' | 'popular' | 'confidence'>('recent');\n  const [showFavoritesOnly, setShowFavoritesOnly] = useState(false);\n\n  // Filter and sort insights\n  const filteredInsights = useMemo(() => {\n    const filtered = insights.filter(insight => {\n      // Search filter\n      if (searchTerm) {\n        const searchLower = searchTerm.toLowerCase();\n        const matchesTitle = insight.title.toLowerCase().includes(searchLower);\n        const matchesContent = insight.content.toLowerCase().includes(searchLower);\n        const matchesTags = insight.tags.some(tag => tag.toLowerCase().includes(searchLower));\n        if (!matchesTitle && !matchesContent && !matchesTags) return false;\n      }\n\n      // Type filter\n      if (typeFilter !== 'all' && insight.type !== typeFilter) return false;\n\n      // Favorites filter\n      if (showFavoritesOnly && !favorites.includes(insight.id)) return false;\n\n      return true;\n    });\n\n    // Sort\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'popular':\n          const aScore = a.votes.upvotes.length - a.votes.downvotes.length;\n          const bScore = b.votes.upvotes.length - b.votes.downvotes.length;\n          return bScore - aScore;\n        case 'confidence':\n          return b.confidence - a.confidence;\n        case 'recent':\n        default:\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n      }\n    });\n\n    return filtered;\n  }, [insights, searchTerm, typeFilter, sortBy, showFavoritesOnly, favorites]);\n\n  const getInsightIcon = (type: string) => {\n    switch (type) {\n      case 'prediction': return '';\n      case 'analysis': return '';\n      case 'recommendation': return '';\n      case 'alert': return '';\n      case 'summary': return '';\n      default: return '';\n    }\n  };\n\n  const getConfidenceColor = (confidence: number) => {\n    if (confidence >= 0.8) return 'text-green-600 bg-green-50 dark:bg-green-500/10';\n    if (confidence >= 0.6) return 'text-amber-600 bg-amber-50 dark:bg-amber-500/10';\n    return 'text-red-600 bg-red-50 dark:bg-red-500/10';\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffHours = diffMs / (1000 * 60 * 60);\n\n    if (diffHours < 1) return 'Just now';\n    if (diffHours < 24) return `${Math.floor(diffHours)}h ago`;\n    return date.toLocaleDateString();\n  };\n\n  const getVoteScore = (insight: AIInsight) => {\n    return insight.votes.upvotes.length - insight.votes.downvotes.length;\n  };\n\n  const hasUserVoted = (insight: AIInsight, voteType: 'up' | 'down') => {\n    const votes = voteType === 'up' ? insight.votes.upvotes : insight.votes.downvotes;\n    return votes.includes(currentUserId);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            Shared AI Insights\n          </h2>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            Collaborative AI-generated insights and analysis\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Brain className=\"h-5 w-5 text-blue-500\" />\n          <span className=\"text-sm text-slate-600 dark:text-slate-400\">\n            {filteredInsights.length} insights\n          </span>\n        </div>\n      </div>\n\n      {/* Filters and Search */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            {/* Search */}\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search insights...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full pl-10 pr-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n              />\n            </div>\n\n            {/* Type Filter */}\n            <select\n              value={typeFilter}\n              onChange={(e) => setTypeFilter(e.target.value)}\n              className=\"px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n            >\n              <option value=\"all\">All Types</option>\n              <option value=\"prediction\">Predictions</option>\n              <option value=\"analysis\">Analysis</option>\n              <option value=\"recommendation\">Recommendations</option>\n              <option value=\"alert\">Alerts</option>\n              <option value=\"summary\">Summaries</option>\n            </select>\n\n            {/* Sort */}\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value as any)}\n              className=\"px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n            >\n              <option value=\"recent\">Most Recent</option>\n              <option value=\"popular\">Most Popular</option>\n              <option value=\"confidence\">Highest Confidence</option>\n            </select>\n\n            {/* Favorites Toggle */}\n            <button\n              onClick={() => setShowFavoritesOnly(!showFavoritesOnly)}\n              className={`flex items-center gap-2 px-3 py-2 text-sm border rounded transition-colors ${\n                showFavoritesOnly\n                  ? 'border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-500/10 dark:text-blue-300'\n                  : 'border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800'\n              }`}\n            >\n              {showFavoritesOnly ? <Star className=\"h-4 w-4\" /> : <StarOff className=\"h-4 w-4\" />}\n              Favorites\n            </button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Insights Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredInsights.map((insight) => (\n          <Card\n            key={insight.id}\n            className=\"cursor-pointer hover:shadow-lg transition-shadow\"\n            onClick={() => onInsightClick?.(insight)}\n          >\n            <CardHeader className=\"pb-3\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-lg\">{getInsightIcon(insight.type)}</span>\n                  <div>\n                    <CardTitle className=\"text-base line-clamp-2\">\n                      {insight.title}\n                    </CardTitle>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <span className={`text-xs px-2 py-1 rounded ${getConfidenceColor(insight.confidence)}`}>\n                        {Math.round(insight.confidence * 100)}% confidence\n                      </span>\n                      <span className=\"text-xs text-slate-500 capitalize\">\n                        {insight.type}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                {onToggleFavorite && (\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onToggleFavorite(insight.id);\n                    }}\n                    className={`p-1 rounded ${\n                      favorites.includes(insight.id)\n                        ? 'text-yellow-500'\n                        : 'text-slate-400 hover:text-slate-600'\n                    }`}\n                  >\n                    {favorites.includes(insight.id) ? <Star className=\"h-4 w-4\" /> : <StarOff className=\"h-4 w-4\" />}\n                  </button>\n                )}\n              </div>\n            </CardHeader>\n\n            <CardContent>\n              <p className=\"text-sm text-slate-600 dark:text-slate-400 line-clamp-3 mb-4\">\n                {insight.content}\n              </p>\n\n              {/* Tags */}\n              {insight.tags.length > 0 && (\n                <div className=\"flex flex-wrap gap-1 mb-4\">\n                  {insight.tags.slice(0, 3).map((tag, idx) => (\n                    <span\n                      key={idx}\n                      className=\"text-xs bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded\"\n                    >\n                      {tag}\n                    </span>\n                  ))}\n                  {insight.tags.length > 3 && (\n                    <span className=\"text-xs text-slate-500\">\n                      +{insight.tags.length - 3} more\n                    </span>\n                  )}\n                </div>\n              )}\n\n              {/* Engagement Metrics */}\n              <div className=\"flex items-center justify-between text-sm text-slate-500 mb-4\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"flex items-center gap-1\">\n                    <ThumbsUp className=\"h-3 w-3\" />\n                    <span>{insight.votes.upvotes.length}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <MessageSquare className=\"h-3 w-3\" />\n                    <span>{insight.comments.length}</span>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <Clock className=\"h-3 w-3\" />\n                  <span>{formatTimestamp(insight.created_at)}</span>\n                </div>\n              </div>\n\n              {/* Author */}\n              <div className=\"flex items-center gap-2 pt-3 border-t border-slate-200 dark:border-slate-700\">\n                {insight.created_by.avatar ? (\n                  <img\n                    src={insight.created_by.avatar}\n                    alt={insight.created_by.name}\n                    className=\"w-6 h-6 rounded-full\"\n                  />\n                ) : (\n                  <div className=\"w-6 h-6 bg-slate-200 dark:bg-slate-700 rounded-full flex items-center justify-center\">\n                    <User className=\"w-3 h-3 text-slate-500\" />\n                  </div>\n                )}\n                <span className=\"text-sm text-slate-600 dark:text-slate-400\">\n                  {insight.created_by.name}\n                </span>\n                {insight.is_shared && (\n                  <Share2 className=\"h-3 w-3 text-blue-500 ml-auto\" />\n                )}\n              </div>\n\n              {/* Vote Buttons */}\n              <div className=\"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200 dark:border-slate-700\">\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onVote?.(insight.id, 'up');\n                  }}\n                  className={`flex items-center gap-1 px-2 py-1 text-xs rounded ${\n                    hasUserVoted(insight, 'up')\n                      ? 'bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-300'\n                      : 'hover:bg-slate-100 dark:hover:bg-slate-800'\n                  }`}\n                >\n                  <ThumbsUp className=\"h-3 w-3\" />\n                  Upvote\n                </button>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onVote?.(insight.id, 'down');\n                  }}\n                  className={`flex items-center gap-1 px-2 py-1 text-xs rounded ${\n                    hasUserVoted(insight, 'down')\n                      ? 'bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-300'\n                      : 'hover:bg-slate-100 dark:hover:bg-slate-800'\n                  }`}\n                >\n                  <ThumbsDown className=\"h-3 w-3\" />\n                  Downvote\n                </button>\n                {onShare && (\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onShare(insight.id);\n                    }}\n                    className=\"flex items-center gap-1 px-2 py-1 text-xs rounded hover:bg-slate-100 dark:hover:bg-slate-800 ml-auto\"\n                  >\n                    <Share2 className=\"h-3 w-3\" />\n                    Share\n                  </button>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {filteredInsights.length === 0 && (\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <Brain className=\"h-12 w-12 text-slate-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-slate-900 dark:text-slate-100 mb-2\">\n              No insights found\n            </h3>\n            <p className=\"text-slate-600 dark:text-slate-400\">\n              {searchTerm || typeFilter !== 'all' || showFavoritesOnly\n                ? 'Try adjusting your filters or search terms'\n                : 'AI insights will appear here as they are generated and shared'\n              }\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/common/SyncStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/compliance/AuditTrail.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[487,490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[487,490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":162,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5410,5413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5410,5413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport { Input } from '../ui/Input';\nimport {\n  Shield,\n  Download,\n  Clock,\n  User,\n  FileText,\n  Database,\n  Settings\n} from 'lucide-react';\n\ninterface AuditEvent {\n  id: string;\n  timestamp: string;\n  user_id: string;\n  user_name: string;\n  action: string;\n  resource_type: string;\n  resource_id: string;\n  details: Record<string, any>;\n  ip_address?: string;\n  user_agent?: string;\n  compliance_flags?: string[];\n}\n\ninterface ComplianceRule {\n  id: string;\n  name: string;\n  description: string;\n  category: 'gdpr' | 'sox' | 'hipaa' | 'pci' | 'custom';\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  is_active: boolean;\n  last_checked?: string;\n  violations_count?: number;\n}\n\ninterface DataRetentionPolicy {\n  id: string;\n  name: string;\n  data_type: string;\n  retention_period_days: number;\n  auto_delete: boolean;\n  last_cleanup?: string;\n  records_affected?: number;\n}\n\ninterface AuditTrailProps {\n  events: AuditEvent[];\n  complianceRules: ComplianceRule[];\n  retentionPolicies: DataRetentionPolicy[];\n  onExportAudit?: (format: 'csv' | 'json' | 'pdf') => void;\n  onRunComplianceCheck?: () => void;\n  onCleanupData?: (policyId: string) => void;\n}\n\nexport function AuditTrail({\n  events,\n  complianceRules,\n  retentionPolicies,\n  onExportAudit,\n  onRunComplianceCheck,\n  onCleanupData\n}: AuditTrailProps) {\n  const [filterUser, setFilterUser] = useState('');\n  const [filterAction, setFilterAction] = useState('');\n  const [filterDateRange, setFilterDateRange] = useState({\n    start: '',\n    end: ''\n  });\n  const [selectedTab, setSelectedTab] = useState<'audit' | 'compliance' | 'retention'>('audit');\n\n  // Filter audit events\n  const filteredEvents = useMemo(() => {\n    return events.filter(event => {\n      const matchesUser = !filterUser || event.user_name.toLowerCase().includes(filterUser.toLowerCase());\n      const matchesAction = !filterAction || event.action.toLowerCase().includes(filterAction.toLowerCase());\n\n      const eventDate = new Date(event.timestamp);\n      const startDate = filterDateRange.start ? new Date(filterDateRange.start) : null;\n      const endDate = filterDateRange.end ? new Date(filterDateRange.end) : null;\n\n      const matchesDateRange = (!startDate || eventDate >= startDate) && (!endDate || eventDate <= endDate);\n\n      return matchesUser && matchesAction && matchesDateRange;\n    });\n  }, [events, filterUser, filterAction, filterDateRange]);\n\n  // Get unique users and actions for filter options\n  const filterOptions = useMemo(() => {\n    const users = [...new Set(events.map(e => e.user_name))];\n    const actions = [...new Set(events.map(e => e.action))];\n    return { users, actions };\n  }, [events]);\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'critical': return 'text-red-600 bg-red-50 dark:bg-red-500/10';\n      case 'high': return 'text-red-500 bg-red-50 dark:bg-red-500/10';\n      case 'medium': return 'text-amber-500 bg-amber-50 dark:bg-amber-500/10';\n      case 'low': return 'text-green-500 bg-green-50 dark:bg-green-500/10';\n      default: return 'text-slate-500 bg-slate-50 dark:bg-slate-500/10';\n    }\n  };\n\n  const getCategoryColor = (category: string) => {\n    switch (category) {\n      case 'gdpr': return 'bg-blue-100 text-blue-700 dark:bg-blue-500/20 dark:text-blue-300';\n      case 'sox': return 'bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-300';\n      case 'hipaa': return 'bg-purple-100 text-purple-700 dark:bg-purple-500/20 dark:text-purple-300';\n      case 'pci': return 'bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-300';\n      default: return 'bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300';\n    }\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffHours = diffMs / (1000 * 60 * 60);\n\n    if (diffHours < 1) return 'Just now';\n    if (diffHours < 24) return `${Math.floor(diffHours)}h ago`;\n    return date.toLocaleString();\n  };\n\n  const tabs = [\n    { id: 'audit', label: 'Audit Trail', icon: FileText },\n    { id: 'compliance', label: 'Compliance', icon: Shield },\n    { id: 'retention', label: 'Data Retention', icon: Database }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            Compliance & Audit\n          </h2>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            Monitor system activity, ensure compliance, and manage data retention\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Shield className=\"h-5 w-5 text-blue-500\" />\n          <span className=\"text-sm text-slate-600 dark:text-slate-400\">\n            SOC 2 Compliant\n          </span>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex gap-2 border-b border-slate-200 dark:border-slate-800\">\n        {tabs.map((tab) => {\n          const Icon = tab.icon;\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setSelectedTab(tab.id as any)}\n              className={`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${\n                selectedTab === tab.id\n                  ? 'border-blue-600 text-blue-600 dark:border-blue-400 dark:text-blue-400'\n                  : 'border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300'\n              }`}\n            >\n              <Icon className=\"h-4 w-4\" />\n              {tab.label}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Audit Trail Tab */}\n      {selectedTab === 'audit' && (\n        <div className=\"space-y-6\">\n          {/* Filters */}\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">User</label>\n                  <select\n                    value={filterUser}\n                    onChange={(e) => setFilterUser(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                  >\n                    <option value=\"\">All Users</option>\n                    {filterOptions.users.map(user => (\n                      <option key={user} value={user}>{user}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Action</label>\n                  <select\n                    value={filterAction}\n                    onChange={(e) => setFilterAction(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                  >\n                    <option value=\"\">All Actions</option>\n                    {filterOptions.actions.map(action => (\n                      <option key={action} value={action}>{action}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Start Date</label>\n                  <Input\n                    type=\"date\"\n                    value={filterDateRange.start}\n                    onChange={(e) => setFilterDateRange(prev => ({ ...prev, start: e.target.value }))}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">End Date</label>\n                  <Input\n                    type=\"date\"\n                    value={filterDateRange.end}\n                    onChange={(e) => setFilterDateRange(prev => ({ ...prev, end: e.target.value }))}\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-2 mt-4\">\n                <Button variant=\"outline\" onClick={() => onExportAudit?.('csv')}>\n                  <Download className=\"h-4 w-4 mr-1\" />\n                  Export CSV\n                </Button>\n                <Button variant=\"outline\" onClick={() => onExportAudit?.('json')}>\n                  <Download className=\"h-4 w-4 mr-1\" />\n                  Export JSON\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Audit Events */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center justify-between\">\n                <span>Audit Events ({filteredEvents.length})</span>\n                <span className=\"text-sm text-slate-500\">\n                  Last 30 days\n                </span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {filteredEvents.map((event) => (\n                  <div\n                    key={event.id}\n                    className=\"flex items-start gap-3 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors\"\n                  >\n                    <div className=\"flex-shrink-0 mt-1\">\n                      <div className=\"w-8 h-8 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center\">\n                        <User className=\"w-4 h-4 text-slate-500\" />\n                      </div>\n                    </div>\n\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <span className=\"font-medium text-slate-900 dark:text-slate-100\">\n                          {event.user_name}\n                        </span>\n                        <span className=\"text-sm text-slate-500\">\n                          {event.action}\n                        </span>\n                        <span className=\"text-xs bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded\">\n                          {event.resource_type}\n                        </span>\n                      </div>\n\n                      <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-2\">\n                        {event.details?.description || `${event.action} on ${event.resource_type}`}\n                      </p>\n\n                      <div className=\"flex items-center gap-4 text-xs text-slate-500\">\n                        <span className=\"flex items-center gap-1\">\n                          <Clock className=\"h-3 w-3\" />\n                          {formatTimestamp(event.timestamp)}\n                        </span>\n                        {event.ip_address && (\n                          <span>IP: {event.ip_address}</span>\n                        )}\n                        {event.compliance_flags && event.compliance_flags.length > 0 && (\n                          <div className=\"flex gap-1\">\n                            {event.compliance_flags.map((flag, idx) => (\n                              <span key={idx} className=\"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 px-2 py-1 rounded\">\n                                {flag}\n                              </span>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n\n                {filteredEvents.length === 0 && (\n                  <div className=\"text-center py-8 text-slate-500\">\n                    <FileText className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                    <p>No audit events found</p>\n                    <p className=\"text-sm mt-1\">Try adjusting your filters</p>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Compliance Tab */}\n      {selectedTab === 'compliance' && (\n        <div className=\"space-y-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold\">Compliance Rules</h3>\n              <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                Automated compliance monitoring and violation detection\n              </p>\n            </div>\n            <Button onClick={onRunComplianceCheck}>\n              <Shield className=\"h-4 w-4 mr-1\" />\n              Run Compliance Check\n            </Button>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {complianceRules.map((rule) => (\n              <Card key={rule.id} className={rule.is_active ? '' : 'opacity-50'}>\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className={`w-2 h-2 rounded-full ${\n                        rule.is_active ? 'bg-green-500' : 'bg-slate-400'\n                      }`} />\n                      <span className={`text-xs px-2 py-1 rounded ${getCategoryColor(rule.category)}`}>\n                        {rule.category.toUpperCase()}\n                      </span>\n                    </div>\n                    <span className={`text-xs px-2 py-1 rounded ${getSeverityColor(rule.severity)}`}>\n                      {rule.severity}\n                    </span>\n                  </div>\n\n                  <h4 className=\"font-medium text-slate-900 dark:text-slate-100 mb-2\">\n                    {rule.name}\n                  </h4>\n\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-3\">\n                    {rule.description}\n                  </p>\n\n                  <div className=\"flex items-center justify-between text-xs text-slate-500\">\n                    <span>Last checked: {rule.last_checked ? formatTimestamp(rule.last_checked) : 'Never'}</span>\n                    {rule.violations_count !== undefined && (\n                      <span className={rule.violations_count > 0 ? 'text-red-600' : 'text-green-600'}>\n                        {rule.violations_count} violations\n                      </span>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Data Retention Tab */}\n      {selectedTab === 'retention' && (\n        <div className=\"space-y-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold\">Data Retention Policies</h3>\n              <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                Automated data lifecycle management and cleanup\n              </p>\n            </div>\n            <Button variant=\"outline\">\n              <Settings className=\"h-4 w-4 mr-1\" />\n              Configure Policies\n            </Button>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {retentionPolicies.map((policy) => (\n              <Card key={policy.id}>\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                      {policy.name}\n                    </h4>\n                    <div className={`w-2 h-2 rounded-full ${\n                      policy.auto_delete ? 'bg-green-500' : 'bg-amber-500'\n                    }`} />\n                  </div>\n\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-600 dark:text-slate-400\">Data Type:</span>\n                      <span className=\"font-medium\">{policy.data_type}</span>\n                    </div>\n\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-600 dark:text-slate-400\">Retention:</span>\n                      <span className=\"font-medium\">{policy.retention_period_days} days</span>\n                    </div>\n\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-600 dark:text-slate-400\">Auto Delete:</span>\n                      <span className={`font-medium ${policy.auto_delete ? 'text-green-600' : 'text-amber-600'}`}>\n                        {policy.auto_delete ? 'Enabled' : 'Manual'}\n                      </span>\n                    </div>\n\n                    {policy.records_affected !== undefined && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-slate-600 dark:text-slate-400\">Records:</span>\n                        <span className=\"font-medium\">{policy.records_affected.toLocaleString()}</span>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"mt-4 pt-3 border-t border-slate-200 dark:border-slate-700\">\n                    <div className=\"flex items-center justify-between text-xs text-slate-500\">\n                      <span>Last cleanup: {policy.last_cleanup ? formatTimestamp(policy.last_cleanup) : 'Never'}</span>\n                      {policy.auto_delete && (\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => onCleanupData?.(policy.id)}\n                          className=\"text-xs h-6\"\n                        >\n                          Run Cleanup\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/dashboard/DataQualityAlerts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/dashboard/PipelineHealthStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/dashboard/RecentActivity.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/dashboard/RiskDistributionChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/dashboard/RiskTrendWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/dashboard/StatCard.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/dashboard/WeeklyActivityChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/forensics/FileUploader.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1025,1028],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1025,1028],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useState, useEffect } from 'react';\nimport { Upload, File, X, CheckCircle, Loader2 } from 'lucide-react';\nimport { cn } from '../../lib/utils';\nimport { ProcessingPipeline, type ProcessingStage } from '../ingestion/ProcessingPipeline';\nimport { useWebSocket } from '../../hooks/useWebSocket';\n\ninterface FileUploaderProps {\n  onUpload: (files: File[]) => void;\n  showProcessing?: boolean;\n  uploadId?: string;\n}\n\nexport function FileUploader({ onUpload, showProcessing = false, uploadId }: FileUploaderProps) {\n  const [isDragging, setIsDragging] = useState(false);\n  const [files, setFiles] = useState<File[]>([]);\n  const [uploadStatus, setUploadStatus] = useState<'idle' | 'uploading' | 'success' | 'error'>('idle');\n  const [currentStage, setCurrentStage] = useState<ProcessingStage>('upload');\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState<string>('');\n\n  // WebSocket integration for processing updates\n  useWebSocket('/ws', {\n    onMessage: (message: any) => {\n      if (message.type === 'upload_progress' && message.payload?.upload_id === uploadId) {\n        setProgress(message.payload.progress || 0);\n      } else if (message.type === 'processing_stage' && message.payload?.upload_id === uploadId) {\n        setCurrentStage(message.payload.stage || 'upload');\n        setProgress(message.payload.progress || 0);\n      } else if (message.type === 'processing_complete' && message.payload?.upload_id === uploadId) {\n        setCurrentStage('complete');\n        setProgress(100);\n        setUploadStatus('success');\n      } else if (message.type === 'processing_error' && message.payload?.upload_id === uploadId) {\n        setError(message.payload.error || 'Processing failed');\n        setUploadStatus('error');\n      }\n    },\n  });\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const droppedFiles = Array.from(e.dataTransfer.files);\n    setFiles((prev) => [...prev, ...droppedFiles]);\n  }, []);\n\n  const handleFileInput = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      const selectedFiles = Array.from(e.target.files);\n      setFiles((prev) => [...prev, ...selectedFiles]);\n    }\n  }, []);\n\n  const removeFile = (index: number) => {\n    setFiles((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  const handleUpload = async () => {\n    if (files.length === 0) return;\n    \n    setUploadStatus('uploading');\n    setCurrentStage('upload');\n    setProgress(0);\n    setError('');\n    \n    // Call the onUpload callback - parent component handles actual upload\n    onUpload(files);\n    \n    // Reset after a delay if not using processing pipeline\n    if (!showProcessing) {\n      setTimeout(() => {\n        setUploadStatus('success');\n        setFiles([]);\n        setTimeout(() => setUploadStatus('idle'), 3000);\n      }, 2000);\n    }\n  };\n\n  useEffect(() => {\n    if (uploadStatus === 'uploading' && showProcessing) {\n      // Simulate stage progression if no WebSocket updates\n      const stages: ProcessingStage[] = ['upload', 'virus_scan', 'ocr', 'metadata', 'forensics', 'indexing', 'complete'];\n      let stageIndex = 0;\n      \n      const interval = setInterval(() => {\n        if (stageIndex < stages.length - 1) {\n          stageIndex++;\n          setCurrentStage(stages[stageIndex]);\n          setProgress((stageIndex / (stages.length - 1)) * 100);\n        } else {\n          clearInterval(interval);\n        }\n      }, 2000);\n\n      return () => clearInterval(interval);\n    }\n  }, [uploadStatus, showProcessing]);\n\n  return (\n    <div className=\"space-y-4\">\n      {showProcessing && uploadStatus === 'uploading' && (\n        <ProcessingPipeline\n          currentStage={currentStage}\n          progress={progress}\n          error={error}\n          estimatedTimeRemaining={Math.max(0, Math.round((100 - progress) * 0.5))}\n        />\n      )}\n\n      <div\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        className={cn(\n          'relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-12 transition-colors backdrop-blur-sm',\n          isDragging\n            ? 'border-purple-500 dark:border-cyan-500 bg-purple-50/50 dark:bg-purple-900/20'\n            : 'border-slate-300 dark:border-slate-700 hover:bg-slate-50/50 dark:hover:bg-slate-800/50',\n          uploadStatus === 'uploading' && 'opacity-50 pointer-events-none'\n        )}\n      >\n        <Upload className=\"h-12 w-12 text-slate-400\" />\n        <p className=\"mt-4 text-sm text-slate-600 dark:text-slate-400\">\n          <span className=\"font-semibold text-blue-600 hover:text-blue-500 dark:text-blue-400\">\n            Click to upload\n          </span>{' '}\n          or drag and drop\n        </p>\n        <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-500\">\n          PDF, PNG, JPG up to 10MB\n        </p>\n        <input\n          type=\"file\"\n          className=\"absolute inset-0 cursor-pointer opacity-0\"\n          onChange={handleFileInput}\n          multiple\n        />\n      </div>\n\n      {files.length > 0 && (\n        <div className=\"space-y-2\">\n          {files.map((file, index) => (\n            <div\n              key={index}\n              className=\"flex items-center justify-between rounded-md border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <File className=\"h-5 w-5 text-slate-400\" />\n                <div>\n                  <p className=\"text-sm font-medium text-slate-900 dark:text-white\">{file.name}</p>\n                  <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n                    {(file.size / 1024 / 1024).toFixed(2)} MB\n                  </p>\n                </div>\n              </div>\n              <button\n                onClick={() => removeFile(index)}\n                className=\"text-slate-400 hover:text-red-500\"\n              >\n                <X className=\"h-5 w-5\" />\n              </button>\n            </div>\n          ))}\n          \n          <div className=\"flex justify-end pt-2\">\n            <button\n              onClick={handleUpload}\n              disabled={uploadStatus === 'uploading'}\n              className=\"inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 disabled:opacity-50\"\n            >\n              {uploadStatus === 'uploading' ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Uploading...\n                </>\n              ) : uploadStatus === 'success' ? (\n                <>\n                  <CheckCircle className=\"mr-2 h-4 w-4\" />\n                  Uploaded\n                </>\n              ) : (\n                'Upload Files'\n              )}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/forensics/ProcessingPipeline.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/forensics/ProcessingPipeline.tsx:26:7\n  24 |       return () => clearInterval(interval);\n  25 |     } else if (status === 'completed') {\n> 26 |       setCurrentStage(5); // All done\n     |       ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  27 |     } else {\n  28 |       setCurrentStage(0);\n  29 |     }","line":26,"column":7,"nodeType":null,"endLine":26,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\nimport { CheckCircle2, Loader2, AlertTriangle, FileText, Search, ShieldCheck, Binary } from 'lucide-react';\n\ninterface ProcessingPipelineProps {\n  status: 'idle' | 'processing' | 'completed' | 'error';\n  stages?: {\n    upload: boolean;\n    scanning: boolean;\n    ocr: boolean;\n    metadata: boolean;\n    forensics: boolean;\n  };\n}\n\nexport const ProcessingPipeline: React.FC<ProcessingPipelineProps> = ({ status }) => {\n  const [currentStage, setCurrentStage] = useState(0);\n\n  // Simulate stage progression when processing\n  useEffect(() => {\n    if (status === 'processing') {\n      const interval = setInterval(() => {\n        setCurrentStage(prev => (prev < 4 ? prev + 1 : prev));\n      }, 1500); // 1.5s per stage\n      return () => clearInterval(interval);\n    } else if (status === 'completed') {\n      setCurrentStage(5); // All done\n    } else {\n      setCurrentStage(0);\n    }\n  }, [status]);\n\n  const steps = [\n    { label: 'Upload', icon: FileText },\n    { label: 'Virus Scan', icon: ShieldCheck },\n    { label: 'OCR Extraction', icon: Search },\n    { label: 'Metadata', icon: Binary },\n    { label: 'Forensics', icon: AlertTriangle },\n  ];\n\n  return (\n    <div className=\"w-full py-6\">\n      <div className=\"flex items-center justify-between relative\">\n        {/* Connection Line */}\n        <div className=\"absolute top-1/2 left-0 w-full h-1 bg-slate-200 dark:bg-slate-700 -z-10\" />\n        <div \n            className=\"absolute top-1/2 left-0 h-1 bg-blue-500 transition-all duration-500\"\n            style={{ width: `${(currentStage / (steps.length - 1)) * 100}%` }} \n        />\n\n        {steps.map((step, index) => {\n          const isCompleted = index < currentStage || status === 'completed';\n          const isActive = index === currentStage && status === 'processing';\n          const Icon = step.icon;\n\n          return (\n            <div key={step.label} className=\"flex flex-col items-center gap-2 bg-white dark:bg-slate-900 px-2\">\n              <div \n                className={`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${\n                  isCompleted \n                    ? 'bg-green-500 border-green-500 text-white' \n                    : isActive \n                    ? 'bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-500 animate-pulse' \n                    : 'bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-300'\n                }`}\n              >\n                {isCompleted ? (\n                   <CheckCircle2 className=\"w-6 h-6\" />\n                ) : isActive ? (\n                   <Loader2 className=\"w-5 h-5 animate-spin\" />\n                ) : (\n                   <Icon className=\"w-5 h-5\" />\n                )}\n              </div>\n              <span className={`text-xs font-medium ${\n                isActive || isCompleted ? 'text-slate-900 dark:text-slate-100' : 'text-slate-400'\n              }`}>\n                {step.label}\n              </span>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/graphs/EntityGraph.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/graphs/EntityGraph.tsx:162:5\n  160 |     }\n  161 |\n> 162 |     setNodePositions(positions);\n      |     ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  163 |   }, [nodes, edges, height]);\n  164 |\n  165 |   // Render the graph","line":162,"column":5,"nodeType":null,"endLine":162,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef, useState } from 'react';\nimport { ZoomIn, ZoomOut, Maximize2, Download } from 'lucide-react';\nimport { Button } from '../ui/Button';\nimport { GraphTools } from '../visualization/GraphTools';\n\ninterface GraphNode {\n  id: string;\n  type: 'person' | 'company' | 'account' | 'transaction';\n  label: string;\n  properties?: Record<string, string | number>;\n}\n\ninterface GraphEdge {\n  id: string;\n  source: string;\n  target: string;\n  type: string;\n  label?: string;\n}\n\ninterface EntityGraphProps {\n  nodes?: GraphNode[];\n  edges?: GraphEdge[];\n  height?: number;\n}\n\n// Mock data for demonstration\nconst MOCK_NODES: GraphNode[] = [\n  { id: 'n1', type: 'person', label: 'John Doe', properties: { role: 'Owner' } },\n  { id: 'n2', type: 'company', label: 'Tech Corp', properties: { status: 'Active' } },\n  { id: 'n3', type: 'company', label: 'Shell LLC', properties: { status: 'Suspicious' } },\n  { id: 'n4', type: 'account', label: 'Account A-001', properties: { balance: 500000 } },\n  { id: 'n5', type: 'account', label: 'Account B-002', properties: { balance: 750000 } },\n  { id: 'n6', type: 'transaction', label: 'Wire Transfer', properties: { amount: 250000 } },\n];\n\nconst MOCK_EDGES: GraphEdge[] = [\n  { id: 'e1', source: 'n1', target: 'n2', type: 'owns', label: 'owns' },\n  { id: 'e2', source: 'n1', target: 'n3', type: 'controls', label: 'controls' },\n  { id: 'e3', source: 'n2', target: 'n4', type: 'has_account', label: 'has' },\n  { id: 'e4', source: 'n3', target: 'n5', type: 'has_account', label: 'has' },\n  { id: 'e5', source: 'n4', target: 'n6', type: 'sent', label: 'sent' },\n  { id: 'e6', source: 'n6', target: 'n5', type: 'received', label: 'received' },\n];\n\nconst NODE_COLORS = {\n  person: { fill: '#3b82f6', stroke: '#2563eb', text: '#ffffff' },\n  company: { fill: '#10b981', stroke: '#059669', text: '#ffffff' },\n  account: { fill: '#f59e0b', stroke: '#d97706', text: '#ffffff' },\n  transaction: { fill: '#8b5cf6', stroke: '#7c3aed', text: '#ffffff' },\n};\n\nconst NODE_RADIUS = 30;\n\ninterface Position {\n  x: number;\n  y: number;\n}\n\nexport function EntityGraph({ \n  nodes = MOCK_NODES, \n  edges = MOCK_EDGES,\n  height = 600 \n}: EntityGraphProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [zoom, setZoom] = useState(1);\n  const [nodePositions, setNodePositions] = useState<Map<string, Position>>(new Map());\n  const [selectedNode, setSelectedNode] = useState<string | null>(null);\n\n  // Simple force-directed layout simulation\n  useEffect(() => {\n    if (!canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const width = rect.width;\n    const centerX = width / 2;\n    const centerY = height / 2;\n\n    // Initialize positions in a circle\n    const positions = new Map<string, Position>();\n    nodes.forEach((node, i) => {\n      const angle = (i / nodes.length) * 2 * Math.PI;\n      const radius = Math.min(width, height) / 3;\n      positions.set(node.id, {\n        x: centerX + radius * Math.cos(angle),\n        y: centerY + radius * Math.sin(angle),\n      });\n    });\n\n    // Simple force simulation\n    const iterations = 100;\n    const repulsionStrength = 5000;\n    const attractionStrength = 0.01;\n\n    for (let iter = 0; iter < iterations; iter++) {\n      const forces = new Map<string, { fx: number; fy: number }>();\n      \n      // Initialize forces\n      nodes.forEach(node => {\n        forces.set(node.id, { fx: 0, fy: 0 });\n      });\n\n      // Repulsion between all nodes\n      for (let i = 0; i < nodes.length; i++) {\n        for (let j = i + 1; j < nodes.length; j++) {\n          const n1 = nodes[i];\n          const n2 = nodes[j];\n          const p1 = positions.get(n1.id)!;\n          const p2 = positions.get(n2.id)!;\n          \n          const dx = p2.x - p1.x;\n          const dy = p2.y - p1.y;\n          const dist = Math.sqrt(dx * dx + dy * dy) || 1;\n          \n          const force = repulsionStrength / (dist * dist);\n          const fx = (dx / dist) * force;\n          const fy = (dy / dist) * force;\n          \n          const f1 = forces.get(n1.id)!;\n          const f2 = forces.get(n2.id)!;\n          f1.fx -= fx;\n          f1.fy -= fy;\n          f2.fx += fx;\n          f2.fy += fy;\n        }\n      }\n\n      // Attraction along edges\n      edges.forEach(edge => {\n        const p1 = positions.get(edge.source)!;\n        const p2 = positions.get(edge.target)!;\n        \n        const dx = p2.x - p1.x;\n        const dy = p2.y - p1.y;\n        \n        const fx = dx * attractionStrength;\n        const fy = dy * attractionStrength;\n        \n        const f1 = forces.get(edge.source)!;\n        const f2 = forces.get(edge.target)!;\n        f1.fx += fx;\n        f1.fy += fy;\n        f2.fx -= fx;\n        f2.fy -= fy;\n      });\n\n      // Apply forces\n      nodes.forEach(node => {\n        const pos = positions.get(node.id)!;\n        const force = forces.get(node.id)!;\n        \n        pos.x += force.fx * 0.1;\n        pos.y += force.fy * 0.1;\n        \n        // Keep within bounds\n        pos.x = Math.max(NODE_RADIUS, Math.min(width - NODE_RADIUS, pos.x));\n        pos.y = Math.max(NODE_RADIUS, Math.min(height - NODE_RADIUS, pos.y));\n      });\n    }\n\n    setNodePositions(positions);\n  }, [nodes, edges, height]);\n\n  // Render the graph\n  useEffect(() => {\n    if (!canvasRef.current || nodePositions.size === 0) return;\n    const canvas = canvasRef.current;\n    canvas.width = canvas.offsetWidth;\n    canvas.height = height;\n    \n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n    \n    // Clear\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    \n    // Apply zoom\n    ctx.save();\n    ctx.scale(zoom, zoom);\n    \n    // Draw edges\n    ctx.lineWidth = 2;\n    edges.forEach(edge => {\n        const p1 = nodePositions.get(edge.source);\n        const p2 = nodePositions.get(edge.target);\n        if (p1 && p2) {\n            ctx.beginPath();\n            ctx.moveTo(p1.x, p1.y);\n            ctx.lineTo(p2.x, p2.y);\n            ctx.strokeStyle = '#cbd5e1'; // slate-300\n            ctx.stroke();\n        }\n    });\n\n    // Draw nodes\n    nodes.forEach(node => {\n        const pos = nodePositions.get(node.id);\n        if (pos) {\n            const color = NODE_COLORS[node.type];\n            \n            // Node circle\n            ctx.beginPath();\n            ctx.arc(pos.x, pos.y, NODE_RADIUS, 0, 2 * Math.PI);\n            ctx.fillStyle = color.fill;\n            ctx.fill();\n            ctx.strokeStyle = color.stroke;\n            ctx.lineWidth = 2;\n            ctx.stroke();\n            \n            // Selection highlight\n            if (node.id === selectedNode) {\n                ctx.strokeStyle = '#000';\n                ctx.lineWidth = 3;\n                ctx.stroke();\n            }\n            \n            // Label\n            ctx.fillStyle = '#fff';\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'middle';\n            ctx.font = '12px sans-serif';\n            ctx.fillText(node.label.substring(0, 10), pos.x, pos.y);\n        }\n    });\n    \n    ctx.restore();\n  }, [nodePositions, edges, nodes, zoom, selectedNode, height]);\n\n\n  const selectedNodeData = selectedNode ? nodes.find(n => n.id === selectedNode) : null;\n\n  const handleZoomIn = () => setZoom(prev => Math.min(prev * 1.2, 5));\n  const handleZoomOut = () => setZoom(prev => Math.max(prev / 1.2, 0.1));\n  const handleReset = () => setZoom(1);\n\n  const handleCanvasClick = () => {\n      // Placeholder for hit testing\n      // In a real implementation, we would check if click coords intersect with any node\n      setSelectedNode(null);\n  };\n\n  const [isSimulating, setIsSimulating] = useState(false);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* ... header ... */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">\n          Entity Relationship Graph\n        </h3>\n        \n        {/* Controls */}\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleZoomOut}\n            className=\"gap-2\"\n          >\n            <ZoomOut className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleZoomIn}\n            className=\"gap-2\"\n          >\n            <ZoomIn className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleReset}\n            className=\"gap-2\"\n          >\n            <Maximize2 className=\"h-4 w-4\" />\n            Reset\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"gap-2\"\n          >\n            <Download className=\"h-4 w-4\" />\n            Export\n          </Button>\n        </div>\n      </div>\n\n      {/* Graph canvas */}\n      <div className=\"relative rounded-lg border border-slate-200 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 overflow-hidden\">\n        <GraphTools \n             isSimulating={isSimulating}\n             onSimulationToggle={setIsSimulating}\n             onShortestPath={(source, target) => console.log('Find path', source, target)}\n        />\n        <canvas\n          ref={canvasRef}\n          className=\"w-full cursor-pointer\"\n          style={{ height: `${height}px` }}\n          onClick={handleCanvasClick}\n        />\n\n        {/* Selected node info */}\n        {selectedNodeData && (\n          <div className=\"absolute top-4 right-4 rounded-lg border border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 p-4 shadow-lg max-w-xs\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <div \n                className=\"h-3 w-3 rounded-full\" \n                style={{ backgroundColor: NODE_COLORS[selectedNodeData.type].fill }}\n              />\n              <h4 className=\"font-semibold text-slate-900 dark:text-slate-100\">\n                {selectedNodeData.label}\n              </h4>\n            </div>\n            <p className=\"text-xs text-slate-500 dark:text-slate-400 mb-2 capitalize\">\n              {selectedNodeData.type}\n            </p>\n            {selectedNodeData.properties && (\n              <div className=\"space-y-1 text-sm\">\n                {Object.entries(selectedNodeData.properties).map(([key, value]) => (\n                  <div key={key} className=\"flex justify-between\">\n                    <span className=\"text-slate-500 dark:text-slate-400 capitalize\">\n                      {key}:\n                    </span>\n                      <span className=\"font-medium text-slate-900 dark:text-slate-100\">\n                        {(typeof value === 'number' && (key.includes('amount') || key.includes('balance')))\n                          ? `$${value.toLocaleString()}`\n                          : value}\n                      </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Legend */}\n      <div className=\"flex items-center gap-6 text-sm text-slate-600 dark:text-slate-400\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-3 w-3 rounded-full bg-blue-600\" />\n          <span>Person</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-3 w-3 rounded-full bg-emerald-600\" />\n          <span>Company</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-3 w-3 rounded-full bg-amber-600\" />\n          <span>Account</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-3 w-3 rounded-full bg-violet-600\" />\n          <span>Transaction</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ingestion/CSVWizard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ingestion/ForensicResults.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ingestion/ForensicsSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ingestion/ProcessingPipeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ingestion/UploadHistory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ingestion/UploadZone.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/layout/AppShell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/layout/Header.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/layout/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/layout/Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/modal/CameraModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/predictive/PredictiveDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":132,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4249,4252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4249,4252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  TrendingUp,\n  TrendingDown,\n  AlertTriangle,\n  Clock,\n  Users,\n  DollarSign,\n  Target,\n  Zap\n} from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { api } from '../../lib/api';\n\ninterface CaseOutcomePrediction {\n  prediction: string;\n  confidence: number;\n  reasoning: string;\n  factors: string[];\n  risk_assessment: string;\n  recommendations: string[];\n}\n\ninterface RiskForecast {\n  forecast: Array<{\n    date: string;\n    risk_score: number;\n  }>;\n  trend: string;\n  confidence: number;\n  reasoning: string;\n}\n\ninterface ResourceEstimate {\n  estimated_time: string;\n  estimated_cost: number;\n  personnel_needed: string[];\n  confidence: number;\n  based_on_similar_cases: number;\n}\n\ninterface PatternAlert {\n  type: string;\n  severity: string;\n  message: string;\n  action_required: string;\n}\n\nexport function PredictiveDashboard() {\n  const { caseId } = useParams<{ caseId: string }>();\n  const [activeTab, setActiveTab] = useState<'outcome' | 'risk' | 'resources' | 'alerts'>('outcome');\n\n  // Fetch predictive data\n  const { data: outcomePrediction, isLoading: outcomeLoading } = useQuery<CaseOutcomePrediction>({\n    queryKey: ['predictive', 'outcome', caseId],\n    queryFn: () => api.get(`/predictive/cases/${caseId}/outcome-prediction`),\n    enabled: !!caseId\n  });\n\n  const { data: riskForecast, isLoading: riskLoading } = useQuery<RiskForecast>({\n    queryKey: ['predictive', 'risk', caseId],\n    queryFn: () => api.get(`/predictive/cases/${caseId}/risk-forecast`),\n    enabled: !!caseId\n  });\n\n  const { data: resourceEstimate, isLoading: resourceLoading } = useQuery<ResourceEstimate>({\n    queryKey: ['predictive', 'resources', caseId],\n    queryFn: () => api.get(`/predictive/cases/${caseId}/resource-estimate`),\n    enabled: !!caseId\n  });\n\n  const { data: patternAlerts, isLoading: alertsLoading } = useQuery<PatternAlert[]>({\n    queryKey: ['predictive', 'alerts', caseId],\n    queryFn: () => api.get(`/predictive/cases/${caseId}/pattern-alerts`),\n    enabled: !!caseId\n  });\n\n  const tabs = [\n    { id: 'outcome', label: 'Outcome Prediction', icon: Target },\n    { id: 'risk', label: 'Risk Forecast', icon: TrendingUp },\n    { id: 'resources', label: 'Resource Estimate', icon: Users },\n    { id: 'alerts', label: 'Pattern Alerts', icon: AlertTriangle }\n  ];\n\n  const getOutcomeColor = (prediction: string) => {\n    switch (prediction.toLowerCase()) {\n      case 'approved': return 'text-green-600 bg-green-50 dark:bg-green-500/10';\n      case 'denied': return 'text-red-600 bg-red-50 dark:bg-red-500/10';\n      case 'escalated': return 'text-amber-600 bg-amber-50 dark:bg-amber-500/10';\n      default: return 'text-blue-600 bg-blue-50 dark:bg-blue-500/10';\n    }\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity.toLowerCase()) {\n      case 'high': return 'text-red-600 bg-red-50 dark:bg-red-500/10';\n      case 'medium': return 'text-amber-600 bg-amber-50 dark:bg-amber-500/10';\n      case 'low': return 'text-green-600 bg-green-50 dark:bg-green-500/10';\n      default: return 'text-slate-600 bg-slate-50 dark:bg-slate-500/10';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            Predictive Analytics\n          </h2>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            AI-powered insights and predictions for case {caseId}\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Zap className=\"h-5 w-5 text-blue-500\" />\n          <span className=\"text-sm text-slate-600 dark:text-slate-400\">\n            Powered by AI Analysis\n          </span>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex gap-2 border-b border-slate-200 dark:border-slate-800\">\n        {tabs.map((tab) => {\n          const Icon = tab.icon;\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as any)}\n              className={`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${\n                activeTab === tab.id\n                  ? 'border-blue-600 text-blue-600 dark:border-blue-400 dark:text-blue-400'\n                  : 'border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300'\n              }`}\n            >\n              <Icon className=\"h-4 w-4\" />\n              {tab.label}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Content */}\n      <div className=\"space-y-6\">\n        {/* Outcome Prediction Tab */}\n        {activeTab === 'outcome' && (\n          <div className=\"space-y-6\">\n            {outcomeLoading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\" />\n              </div>\n            ) : outcomePrediction ? (\n              <>\n                {/* Prediction Summary */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Target className=\"h-5 w-5 text-blue-500\" />\n                      Case Outcome Prediction\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                      <div className=\"text-center\">\n                        <div className={`inline-flex items-center px-4 py-2 rounded-lg font-medium ${getOutcomeColor(outcomePrediction.prediction)}`}>\n                          {outcomePrediction.prediction.toUpperCase()}\n                        </div>\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-2\">Predicted Outcome</p>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-3xl font-bold text-blue-600\">\n                          {(outcomePrediction.confidence * 100).toFixed(0)}%\n                        </div>\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-2\">Confidence Level</p>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-medium text-slate-900 dark:text-slate-100\">\n                          {outcomePrediction.risk_assessment}\n                        </div>\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-2\">Risk Assessment</p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* Factors and Recommendations */}\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Key Factors</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <ul className=\"space-y-2\">\n                        {outcomePrediction.factors.map((factor, idx) => (\n                          <li key={idx} className=\"flex items-start gap-2\">\n                            <div className=\"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0\" />\n                            <span className=\"text-sm\">{factor}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Recommendations</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <ul className=\"space-y-2\">\n                        {outcomePrediction.recommendations.map((rec, idx) => (\n                          <li key={idx} className=\"flex items-start gap-2\">\n                            <div className=\"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0\" />\n                            <span className=\"text-sm\">{rec}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </CardContent>\n                  </Card>\n                </div>\n\n                {/* Reasoning */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Analysis Reasoning</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <p className=\"text-slate-700 dark:text-slate-300\">{outcomePrediction.reasoning}</p>\n                  </CardContent>\n                </Card>\n              </>\n            ) : (\n              <Card>\n                <CardContent className=\"py-12 text-center\">\n                  <Target className=\"h-12 w-12 text-slate-400 mx-auto mb-4\" />\n                  <p className=\"text-slate-600 dark:text-slate-400\">No prediction data available</p>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        )}\n\n        {/* Risk Forecast Tab */}\n        {activeTab === 'risk' && (\n          <div className=\"space-y-6\">\n            {riskLoading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\" />\n              </div>\n            ) : riskForecast ? (\n              <>\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <TrendingUp className=\"h-5 w-5 text-blue-500\" />\n                      Risk Score Forecast (30 Days)\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-medium\">Trend:</span>\n                        <div className={`flex items-center gap-1 px-3 py-1 rounded-full text-sm ${\n                          riskForecast.trend === 'increasing' ? 'bg-red-100 text-red-700' :\n                          riskForecast.trend === 'decreasing' ? 'bg-green-100 text-green-700' :\n                          'bg-slate-100 text-slate-700'\n                        }`}>\n                          {riskForecast.trend === 'increasing' && <TrendingUp className=\"h-3 w-3\" />}\n                          {riskForecast.trend === 'decreasing' && <TrendingDown className=\"h-3 w-3\" />}\n                          <span className=\"capitalize\">{riskForecast.trend}</span>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-medium\">Confidence:</span>\n                        <span className=\"text-blue-600 font-medium\">\n                          {(riskForecast.confidence * 100).toFixed(0)}%\n                        </span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Forecast Timeline</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3\">\n                      {riskForecast.forecast.slice(0, 7).map((point, idx) => (\n                        <div key={idx} className=\"flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-800 last:border-b-0\">\n                          <span className=\"text-sm text-slate-600 dark:text-slate-400\">\n                            {new Date(point.date).toLocaleDateString()}\n                          </span>\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"w-20 bg-slate-200 dark:bg-slate-700 rounded-full h-2\">\n                              <div\n                                className=\"bg-blue-500 h-2 rounded-full\"\n                                style={{ width: `${point.risk_score}%` }}\n                              />\n                            </div>\n                            <span className=\"text-sm font-medium w-12 text-right\">\n                              {point.risk_score}\n                            </span>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              </>\n            ) : (\n              <Card>\n                <CardContent className=\"py-12 text-center\">\n                  <TrendingUp className=\"h-12 w-12 text-slate-400 mx-auto mb-4\" />\n                  <p className=\"text-slate-600 dark:text-slate-400\">No forecast data available</p>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        )}\n\n        {/* Resource Estimate Tab */}\n        {activeTab === 'resources' && (\n          <div className=\"space-y-6\">\n            {resourceLoading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\" />\n              </div>\n            ) : resourceEstimate ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Clock className=\"h-5 w-5 text-blue-500\" />\n                      Estimated Time\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold text-blue-600\">\n                      {resourceEstimate.estimated_time}\n                    </div>\n                    <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-1\">\n                      Based on {resourceEstimate.based_on_similar_cases} similar cases\n                    </p>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <DollarSign className=\"h-5 w-5 text-green-500\" />\n                      Estimated Cost\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold text-green-600\">\n                      ${resourceEstimate.estimated_cost.toLocaleString()}\n                    </div>\n                    <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-1\">\n                      {(resourceEstimate.confidence * 100).toFixed(0)}% confidence\n                    </p>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Users className=\"h-5 w-5 text-purple-500\" />\n                      Personnel Needed\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      {resourceEstimate.personnel_needed.map((person, idx) => (\n                        <div key={idx} className=\"flex items-center gap-2\">\n                          <div className=\"w-2 h-2 bg-purple-500 rounded-full\" />\n                          <span className=\"text-sm\">{person}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            ) : (\n              <Card>\n                <CardContent className=\"py-12 text-center\">\n                  <Users className=\"h-12 w-12 text-slate-400 mx-auto mb-4\" />\n                  <p className=\"text-slate-600 dark:text-slate-400\">No resource estimate available</p>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        )}\n\n        {/* Pattern Alerts Tab */}\n        {activeTab === 'alerts' && (\n          <div className=\"space-y-6\">\n            {alertsLoading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\" />\n              </div>\n            ) : patternAlerts && patternAlerts.length > 0 ? (\n              <div className=\"space-y-4\">\n                {patternAlerts.map((alert, idx) => (\n                  <Card key={idx} className={`border-l-4 ${\n                    alert.severity === 'high' ? 'border-l-red-500' :\n                    alert.severity === 'medium' ? 'border-l-amber-500' :\n                    'border-l-green-500'\n                  }`}>\n                    <CardContent className=\"pt-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <AlertTriangle className={`h-4 w-4 ${\n                              alert.severity === 'high' ? 'text-red-500' :\n                              alert.severity === 'medium' ? 'text-amber-500' :\n                              'text-green-500'\n                            }`} />\n                            <span className={`text-sm font-medium px-2 py-1 rounded ${getSeverityColor(alert.severity)}`}>\n                              {alert.severity.toUpperCase()}\n                            </span>\n                            <span className=\"text-sm font-medium text-slate-600 dark:text-slate-400\">\n                              {alert.type.replace('_', ' ').toUpperCase()}\n                            </span>\n                          </div>\n                          <p className=\"text-slate-900 dark:text-slate-100 mb-2\">\n                            {alert.message}\n                          </p>\n                          <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                            <strong>Action Required:</strong> {alert.action_required}\n                          </p>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <Card>\n                <CardContent className=\"py-12 text-center\">\n                  <AlertTriangle className=\"h-12 w-12 text-green-400 mx-auto mb-4\" />\n                  <p className=\"text-slate-600 dark:text-slate-400\">No pattern alerts detected</p>\n                  <p className=\"text-sm text-slate-500 mt-1\">Case appears to be within normal parameters</p>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/predictive/ScenarioSimulation.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3216,3219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3216,3219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useMutation } from '@tanstack/react-query';\nimport {\n  Play,\n  Settings,\n  TrendingUp,\n  AlertTriangle,\n  DollarSign,\n  Users,\n  Zap,\n  Target\n} from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport { api } from '../../lib/api';\n\ninterface ScenarioResult {\n  scenario: string;\n  baseline_outcome?: string;\n  simulated_outcome?: string;\n  impact?: string;\n  confidence?: number;\n  factors_affected?: string[];\n  monthly_capacity?: number;\n  burn_rate?: number;\n  bottlenecks?: string[];\n  recommendations?: string[];\n  affected_cases?: number;\n  risk_increase?: number;\n  critical_dependencies?: string[];\n  overall_risk?: number;\n}\n\nexport function ScenarioSimulation() {\n  const [activeScenario, setActiveScenario] = useState<string>('what_if');\n  const [scenarioParams, setScenarioParams] = useState<Record<string, unknown>>({});\n\n  const scenarios = [\n    {\n      id: 'what_if',\n      name: 'What-If Analysis',\n      description: 'Simulate how changes affect case outcomes',\n      icon: Target,\n      params: {\n        scenario: { type: 'text', label: 'Scenario Description', placeholder: 'e.g., Increase review threshold by 20%' },\n        changes: { type: 'textarea', label: 'Specific Changes', placeholder: 'Describe the changes to simulate...' }\n      }\n    },\n    {\n      id: 'burn_rate',\n      name: 'Burn Rate Prediction',\n      description: 'Predict resource utilization and capacity',\n      icon: TrendingUp,\n      params: {\n        case_load: { type: 'number', label: 'Monthly Case Load', default: 50 },\n        avg_resolution_time: { type: 'number', label: 'Avg Resolution Time (days)', default: 14 }\n      }\n    },\n    {\n      id: 'vendor_stress',\n      name: 'Vendor Stress Testing',\n      description: 'Test vendor dependency impacts',\n      icon: AlertTriangle,\n      params: {\n        vendor_id: { type: 'text', label: 'Vendor ID', placeholder: 'e.g., VENDOR_001' },\n        stress_factor: { type: 'number', label: 'Stress Factor (0-2)', default: 1.0, min: 0, max: 2, step: 0.1 }\n      }\n    },\n    {\n      id: 'dependency_risk',\n      name: 'Dependency Risk Modeling',\n      description: 'Analyze system dependency risks',\n      icon: Zap,\n      params: {\n        dependencies: { type: 'textarea', label: 'Dependencies (one per line)', placeholder: 'External API\\nDatabase Service\\nCloud Storage' }\n      }\n    }\n  ];\n\n  const runSimulationMutation = useMutation({\n    mutationFn: (data: Record<string, unknown>) => api.post<ScenarioResult>('/predictive/simulation/scenario', data),\n    onSuccess: (data) => {\n      console.log('Simulation result:', data);\n    }\n  });\n\n  const handleRunSimulation = () => {\n    const scenario = scenarios.find(s => s.id === activeScenario);\n    if (!scenario) return;\n\n    const params = {\n      scenario_type: activeScenario,\n      parameters: scenarioParams\n    };\n\n    runSimulationMutation.mutate(params);\n  };\n\n  const updateParam = (key: string, value: unknown) => {\n    setScenarioParams((prev: Record<string, unknown>) => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n\n  const renderParameterInput = (key: string, config: any) => {\n    const value = scenarioParams[key] ?? config.default ?? '';\n\n    switch (config.type) {\n      case 'text':\n        return (\n          <input\n            type=\"text\"\n            value={value}\n            onChange={(e) => updateParam(key, e.target.value)}\n            placeholder={config.placeholder}\n            className=\"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100\"\n          />\n        );\n      case 'number':\n        return (\n          <input\n            type=\"number\"\n            value={value}\n            onChange={(e) => updateParam(key, parseFloat(e.target.value))}\n            placeholder={config.placeholder}\n            min={config.min}\n            max={config.max}\n            step={config.step}\n            className=\"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100\"\n          />\n        );\n      case 'textarea':\n        return (\n          <textarea\n            value={value}\n            onChange={(e) => updateParam(key, e.target.value)}\n            placeholder={config.placeholder}\n            rows={3}\n            className=\"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100\"\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  const renderResults = (result: ScenarioResult) => {\n    if (activeScenario === 'what_if') {\n      return (\n        <div className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <Card>\n              <CardContent className=\"pt-4\">\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-medium text-slate-600 dark:text-slate-400\">Baseline</div>\n                  <div className=\"text-2xl font-bold text-slate-900 dark:text-slate-100 capitalize\">\n                    {result.baseline_outcome}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-4\">\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-medium text-slate-600 dark:text-slate-400\">Simulated</div>\n                  <div className=\"text-2xl font-bold text-blue-600 capitalize\">\n                    {result.simulated_outcome}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-4\">\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-medium text-slate-600 dark:text-slate-400\">Impact</div>\n                  <div className={`text-2xl font-bold capitalize ${\n                    result.impact === 'positive' ? 'text-green-600' :\n                    result.impact === 'negative' ? 'text-red-600' :\n                    'text-slate-600'\n                  }`}>\n                    {result.impact}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Factors Affected</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex flex-wrap gap-2\">\n                {result.factors_affected?.map((factor, idx) => (\n                  <span key={idx} className=\"px-3 py-1 bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded-full text-sm\">\n                    {factor}\n                  </span>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      );\n    }\n\n    if (activeScenario === 'burn_rate') {\n      return (\n        <div className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <Card>\n              <CardContent className=\"pt-4\">\n                <div className=\"text-center\">\n                  <Users className=\"h-8 w-8 text-blue-500 mx-auto mb-2\" />\n                  <div className=\"text-lg font-medium text-slate-600 dark:text-slate-400\">Monthly Capacity</div>\n                  <div className=\"text-2xl font-bold text-blue-600\">\n                    {result.monthly_capacity}\n                  </div>\n                  <div className=\"text-sm text-slate-500\">cases/month</div>\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-4\">\n                <div className=\"text-center\">\n                  <DollarSign className=\"h-8 w-8 text-green-500 mx-auto mb-2\" />\n                  <div className=\"text-lg font-medium text-slate-600 dark:text-slate-400\">Burn Rate</div>\n                  <div className=\"text-2xl font-bold text-green-600\">\n                    ${result.burn_rate?.toLocaleString()}\n                  </div>\n                  <div className=\"text-sm text-slate-500\">per month</div>\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-4\">\n                <div className=\"text-center\">\n                  <AlertTriangle className=\"h-8 w-8 text-amber-500 mx-auto mb-2\" />\n                  <div className=\"text-lg font-medium text-slate-600 dark:text-slate-400\">Bottlenecks</div>\n                  <div className=\"text-2xl font-bold text-amber-600\">\n                    {result.bottlenecks?.length || 0}\n                  </div>\n                  <div className=\"text-sm text-slate-500\">identified</div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {result.bottlenecks && result.bottlenecks.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Identified Bottlenecks</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ul className=\"space-y-2\">\n                  {result.bottlenecks.map((bottleneck, idx) => (\n                    <li key={idx} className=\"flex items-center gap-2\">\n                      <AlertTriangle className=\"h-4 w-4 text-amber-500\" />\n                      <span className=\"text-slate-700 dark:text-slate-300\">{bottleneck}</span>\n                    </li>\n                  ))}\n                </ul>\n              </CardContent>\n            </Card>\n          )}\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Recommendations</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ul className=\"space-y-2\">\n                {result.recommendations?.map((rec, idx) => (\n                  <li key={idx} className=\"flex items-start gap-2\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0\" />\n                    <span className=\"text-slate-700 dark:text-slate-300\">{rec}</span>\n                  </li>\n                ))}\n              </ul>\n            </CardContent>\n          </Card>\n        </div>\n      );\n    }\n\n    if (activeScenario === 'vendor_stress') {\n      return (\n        <div className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <Card>\n              <CardContent className=\"pt-4\">\n                <div className=\"text-center\">\n                  <AlertTriangle className=\"h-8 w-8 text-red-500 mx-auto mb-2\" />\n                  <div className=\"text-lg font-medium text-slate-600 dark:text-slate-400\">Affected Cases</div>\n                  <div className=\"text-2xl font-bold text-red-600\">\n                    {result.affected_cases}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-4\">\n                <div className=\"text-center\">\n                  <TrendingUp className=\"h-8 w-8 text-amber-500 mx-auto mb-2\" />\n                  <div className=\"text-lg font-medium text-slate-600 dark:text-slate-400\">Risk Increase</div>\n                  <div className=\"text-2xl font-bold text-amber-600\">\n                    +{result.risk_increase}%\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-4\">\n                <div className=\"text-center\">\n                  <Settings className=\"h-8 w-8 text-blue-500 mx-auto mb-2\" />\n                  <div className=\"text-lg font-medium text-slate-600 dark:text-slate-400\">Stress Factor</div>\n                  <div className=\"text-2xl font-bold text-blue-600\">\n                    {(scenarioParams.stress_factor as number) || 1.0}x\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      );\n    }\n\n    if (activeScenario === 'dependency_risk') {\n      return (\n        <div className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Dependency Risk Assessment</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"font-medium\">Overall Risk Level:</span>\n                  <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n                    (result.overall_risk || 0) > 0.7 ? 'bg-red-100 text-red-700' :\n                    (result.overall_risk || 0) > 0.4 ? 'bg-amber-100 text-amber-700' :\n                    'bg-green-100 text-green-700'\n                  }`}>\n                    {((result.overall_risk || 0) * 100).toFixed(0)}% Risk\n                  </span>\n                </div>\n\n                {result.critical_dependencies && result.critical_dependencies.length > 0 && (\n                  <div>\n                    <h4 className=\"font-medium mb-2\">Critical Dependencies:</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {result.critical_dependencies.map((dep: string, idx: number) => (\n                        <span key={idx} className=\"px-3 py-1 bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300 rounded-full text-sm\">\n                          {dep}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                <div>\n                  <h4 className=\"font-medium mb-2\">Recommendations:</h4>\n                  <ul className=\"space-y-1\">\n                    {result.recommendations?.map((rec: string, idx: number) => (\n                      <li key={idx} className=\"flex items-start gap-2 text-sm\">\n                        <div className=\"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0\" />\n                        <span className=\"text-slate-700 dark:text-slate-300\">{rec}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            Scenario Simulation\n          </h2>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            Test different scenarios and predict outcomes\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Zap className=\"h-5 w-5 text-blue-500\" />\n          <span className=\"text-sm text-slate-600 dark:text-slate-400\">\n            Predictive Modeling\n          </span>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Scenario Selection */}\n        <div className=\"lg:col-span-1\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Choose Scenario</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {scenarios.map((scenario) => {\n                  const Icon = scenario.icon;\n                  return (\n                    <button\n                      key={scenario.id}\n                      onClick={() => setActiveScenario(scenario.id)}\n                      className={`w-full text-left p-4 rounded-lg border transition-all ${\n                        activeScenario === scenario.id\n                          ? 'border-blue-500 bg-blue-50 dark:bg-blue-500/10'\n                          : 'border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600'\n                      }`}\n                    >\n                      <div className=\"flex items-start gap-3\">\n                        <Icon className={`h-5 w-5 mt-0.5 ${\n                          activeScenario === scenario.id ? 'text-blue-500' : 'text-slate-400'\n                        }`} />\n                        <div>\n                          <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                            {scenario.name}\n                          </h4>\n                          <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-1\">\n                            {scenario.description}\n                          </p>\n                        </div>\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Parameters and Results */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Parameters */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Parameters</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {Object.entries(scenarios.find(s => s.id === activeScenario)?.params || {}).map(([key, config]) => (\n                  <div key={key}>\n                    <label className=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2\">\n                      {config.label}\n                    </label>\n                    {renderParameterInput(key, config)}\n                  </div>\n                ))}\n\n                <Button\n                  onClick={handleRunSimulation}\n                  disabled={runSimulationMutation.isPending}\n                  className=\"w-full\"\n                >\n                  <Play className=\"h-4 w-4 mr-2\" />\n                  {runSimulationMutation.isPending ? 'Running Simulation...' : 'Run Simulation'}\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Results */}\n          {runSimulationMutation.data && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Simulation Results</CardTitle>\n              </CardHeader>\n              <CardContent>\n                {renderResults(runSimulationMutation.data)}\n              </CardContent>\n            </Card>\n          )}\n\n          {runSimulationMutation.isError && (\n            <Card className=\"border-red-200 dark:border-red-800\">\n              <CardContent className=\"pt-6\">\n                <div className=\"text-center text-red-600 dark:text-red-400\">\n                  <AlertTriangle className=\"h-8 w-8 mx-auto mb-2\" />\n                  <p>Simulation failed. Please check your parameters and try again.</p>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/predictive/TrendAnalysis.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/pwa/OfflineSyncStatus.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2140,2143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2140,2143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button } from '../ui/Button';\nimport { Wifi, WifiOff, RefreshCw } from 'lucide-react';\n\n/**\n * Component that shows offline status and manual sync trigger\n * Monitors online/offline events and displays sync status\n */\nexport function OfflineSyncStatus() {\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [pendingItems, setPendingItems] = useState(0);\n\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  // Check IndexedDB for pending items\n  useEffect(() => {\n    const checkPendingItems = async () => {\n      if (!isOnline) {\n        try {\n          const db = await new Promise<IDBDatabase>((resolve, reject) => {\n            const request = indexedDB.open('SyncQueue', 1);\n            request.onsuccess = () => resolve(request.result);\n            request.onerror = () => reject(request.error);\n          });\n\n          const tx = db.transaction('pending', 'readonly');\n          const store = tx.objectStore('pending');\n          const countRequest = store.count();\n\n          countRequest.onsuccess = () => {\n            setPendingItems(countRequest.result);\n          };\n\n          db.close();\n        } catch (err) {\n          console.error('Failed to check pending items:', err);\n        }\n      }\n    };\n\n    checkPendingItems();\n    const interval = setInterval(checkPendingItems, 5000);\n\n    return () => clearInterval(interval);\n  }, [isOnline]);\n\n  const handleManualSync = async () => {\n    if ('serviceWorker' in navigator) {\n      setIsSyncing(true);\n      try {\n        const registration = await navigator.serviceWorker.ready;\n        if ('sync' in registration) {\n          await (registration as any).sync.register('sync-queue');\n        }\n      } catch (err) {\n        console.error('Failed to trigger sync:', err);\n      } finally {\n        setIsSyncing(false);\n      }\n    }\n  };\n\n  if (isOnline && pendingItems === 0) {\n    return null;\n  }\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        exit={{ opacity: 0, y: -20 }}\n        className={`px-4 py-3 flex items-center justify-between gap-4 ${\n          isOnline\n            ? 'bg-green-50 border-b border-green-200'\n            : 'bg-amber-50 border-b border-amber-200'\n        }`}\n      >\n        <div className=\"flex items-center gap-3\">\n          {isOnline ? (\n            <>\n              <Wifi size={20} className=\"text-green-600\" />\n              <div className=\"text-sm text-green-800\">\n                <p className=\"font-semibold\">Syncing offline changes</p>\n                {pendingItems > 0 && (\n                  <p className=\"text-green-700\">{pendingItems} item{pendingItems !== 1 ? 's' : ''} pending</p>\n                )}\n              </div>\n            </>\n          ) : (\n            <>\n              <WifiOff size={20} className=\"text-amber-600\" />\n              <div className=\"text-sm text-amber-800\">\n                <p className=\"font-semibold\">You are offline</p>\n                <p className=\"text-amber-700\">\n                  {pendingItems} action{pendingItems !== 1 ? 's' : ''} will sync when online\n                </p>\n              </div>\n            </>\n          )}\n        </div>\n\n        {isOnline && pendingItems > 0 && (\n          <Button\n            onClick={handleManualSync}\n            disabled={isSyncing}\n            size=\"sm\"\n            variant=\"secondary\"\n          >\n            {isSyncing ? (\n              <>\n                <RefreshCw size={16} className=\"mr-1 animate-spin\" />\n                Syncing...\n              </>\n            ) : (\n              <>\n                <RefreshCw size={16} className=\"mr-1\" />\n                Sync Now\n              </>\n            )}\n          </Button>\n        )}\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nexport default OfflineSyncStatus;\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/pwa/PWAInstallBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/reconciliation/AdjudicationPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/reconciliation/ConflictResolver.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/reconciliation/MatchingEngine.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/reconciliation/TransactionColumns.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":113,"column":81,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":113,"endColumn":89},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":113,"column":129,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":113,"endColumn":137}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { ChevronDown, Search } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\n\ninterface Transaction {\n  id: string;\n  date: string;\n  description: string;\n  amount: number;\n  reference: string;\n  status: 'matched' | 'unmatched' | 'dispute';\n}\n\ninterface TransactionColumnsProps {\n  sourceTransactions?: Transaction[];\n  targetTransactions?: Transaction[];\n  isLoading?: boolean;\n}\n\nexport function TransactionColumns({\n  sourceTransactions = [],\n  targetTransactions = [],\n  isLoading = false,\n}: TransactionColumnsProps) {\n  const [searchSource, setSearchSource] = useState('');\n  const [searchTarget, setSearchTarget] = useState('');\n  const [expandedSource, setExpandedSource] = useState<string | null>(null);\n  const [expandedTarget, setExpandedTarget] = useState<string | null>(null);\n\n  const defaultSourceTransactions: Transaction[] = [\n    {\n      id: 's1',\n      date: '2025-12-01',\n      description: 'Vendor Payment - ABC Corp',\n      amount: 150000,\n      reference: 'INV-001',\n      status: 'matched',\n    },\n    {\n      id: 's2',\n      date: '2025-12-02',\n      description: 'Operating Expenses',\n      amount: 25000,\n      reference: 'EXP-001',\n      status: 'unmatched',\n    },\n    {\n      id: 's3',\n      date: '2025-12-05',\n      description: 'Transfer to XYZ Ltd',\n      amount: 200000,\n      reference: 'TRF-001',\n      status: 'dispute',\n    },\n  ];\n\n  const defaultTargetTransactions: Transaction[] = [\n    {\n      id: 't1',\n      date: '2025-12-01',\n      description: 'Payment ABC',\n      amount: 150000,\n      reference: 'PY-2025-001',\n      status: 'matched',\n    },\n    {\n      id: 't2',\n      date: '2025-12-03',\n      description: 'Operational Cost',\n      amount: 25000,\n      reference: 'PY-2025-002',\n      status: 'unmatched',\n    },\n    {\n      id: 't3',\n      date: '2025-12-06',\n      description: 'External Transfer',\n      amount: 200000,\n      reference: 'PY-2025-003',\n      status: 'dispute',\n    },\n  ];\n\n  const source = sourceTransactions.length > 0 ? sourceTransactions : defaultSourceTransactions;\n  const target = targetTransactions.length > 0 ? targetTransactions : defaultTargetTransactions;\n\n  const filteredSource = source.filter(\n    t => t.description.toLowerCase().includes(searchSource.toLowerCase()) ||\n         t.reference.toLowerCase().includes(searchSource.toLowerCase())\n  );\n\n  const filteredTarget = target.filter(\n    t => t.description.toLowerCase().includes(searchTarget.toLowerCase()) ||\n         t.reference.toLowerCase().includes(searchTarget.toLowerCase())\n  );\n\n  const statusConfig = {\n    matched: { color: 'bg-green-50', badge: 'bg-green-100 text-green-700' },\n    unmatched: { color: 'bg-slate-50', badge: 'bg-slate-100 text-slate-700' },\n    dispute: { color: 'bg-red-50', badge: 'bg-red-100 text-red-700' },\n  };\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"h-96 flex items-center justify-center\">\n          <div className=\"text-slate-500\">Loading transactions...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const renderColumn = (transactions: Transaction[], search: string, setSearch: Function, expanded: string | null, setExpanded: Function, columnTitle: string) => (\n    <div className=\"flex-1 flex flex-col\">\n      <h3 className=\"font-semibold mb-3\">{columnTitle}</h3>\n      <div className=\"relative mb-3\">\n        <Search className=\"absolute left-2 top-2.5 w-4 h-4 text-slate-400\" />\n        <input\n          type=\"text\"\n          placeholder=\"Search...\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n          className=\"w-full pl-8 pr-3 py-2 border border-slate-200 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        />\n      </div>\n      <div className=\"flex-1 overflow-y-auto space-y-2 pr-2\">\n        {transactions.map(transaction => {\n          const config = statusConfig[transaction.status];\n          const isExpanded = expanded === transaction.id;\n\n          return (\n            <div\n              key={transaction.id}\n              className={`${config.color} border border-slate-200 rounded p-2 cursor-pointer hover:shadow-sm transition-all`}\n              onClick={() => setExpanded(isExpanded ? null : transaction.id)}\n            >\n              <div className=\"flex items-start gap-2\">\n                <ChevronDown\n                  className={`w-4 h-4 flex-shrink-0 mt-0.5 transition-transform ${\n                    isExpanded ? 'rotate-180' : ''\n                  }`}\n                />\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium truncate\">{transaction.reference}</p>\n                  <p className=\"text-xs text-slate-600 truncate\">{transaction.description}</p>\n                  <div className=\"flex justify-between items-center mt-1\">\n                    <span className={`text-xs font-medium px-1.5 py-0.5 rounded ${config.badge}`}>\n                      {transaction.status}\n                    </span>\n                    <span className=\"font-semibold text-sm\">\n                      ${transaction.amount.toLocaleString()}\n                    </span>\n                  </div>\n                </div>\n              </div>\n              {isExpanded && (\n                <div className=\"mt-2 pt-2 border-t border-slate-200 text-xs text-slate-600\">\n                  <p>Date: {transaction.date}</p>\n                  <p>ID: {transaction.id}</p>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Transaction Reconciliation</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex gap-4 h-96\">\n          {renderColumn(filteredSource, searchSource, setSearchSource, expandedSource, setExpandedSource, 'Source System')}\n          <div className=\"w-px bg-slate-200\" />\n          {renderColumn(filteredTarget, searchTarget, setSearchTarget, expandedTarget, setExpandedTarget, 'Target System')}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/reconciliation/VirtualTransactionList.tsx","messages":[{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/reconciliation/VirtualTransactionList.tsx:40:26\n  38 |   const parentRef = useRef<HTMLDivElement>(null);\n  39 |\n> 40 |   const rowVirtualizer = useVirtualizer({\n     |                          ^^^^^^^^^^^^^^ TanStack Virtual's `useVirtualizer()` API returns functions that cannot be memoized safely\n  41 |     count: transactions.length,\n  42 |     getScrollElement: () => parentRef.current,\n  43 |     estimateSize: () => 100, // Estimate based on visual average","line":40,"column":26,"nodeType":null,"endLine":40,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useRef } from 'react';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport { Check, AlertTriangle, Unlink, ExternalLink } from 'lucide-react';\nimport { Button } from '../ui/Button';\n\n// Re-using types from parent or defining shared types would be better, \n// but for now I'll duplicate the interface to keep this component self-contained for the refactor.\ninterface Transaction {\n  id: string;\n  date: string;\n  description: string;\n  amount: number;\n  account: string;\n  category: string;\n  source: 'internal' | 'external';\n  matchStatus: 'matched' | 'unmatched' | 'pending' | 'conflict';\n  matchedWith?: string;\n  confidence?: number;\n}\n\ninterface VirtualTransactionListProps {\n  transactions: Transaction[];\n  selectedId: string | null;\n  onSelect: (id: string) => void;\n  onUnmatch?: (id: string) => void;\n  colorTheme: 'blue' | 'purple';\n  height?: number; // Optional fixed height for the container\n}\n\nexport function VirtualTransactionList({\n  transactions,\n  selectedId,\n  onSelect,\n  onUnmatch,\n  colorTheme,\n  height = 600\n}: VirtualTransactionListProps) {\n  const parentRef = useRef<HTMLDivElement>(null);\n\n  const rowVirtualizer = useVirtualizer({\n    count: transactions.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => 100, // Estimate based on visual average\n    overscan: 5,\n  });\n\n  const getStatusBadge = (status: Transaction['matchStatus'], confidence?: number) => {\n    const baseClasses = 'px-2 py-1 rounded-full text-xs font-medium inline-flex items-center gap-1';\n    switch (status) {\n      case 'matched':\n        return <span className={`${baseClasses} bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400`}><Check className=\"h-3 w-3\" /> Matched</span>;\n      case 'unmatched':\n        return <span className={`${baseClasses} bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400`}>Unmatched</span>;\n      case 'pending':\n        return <span className={`${baseClasses} bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400`}><AlertTriangle className=\"h-3 w-3\" /> Review ({Math.round((confidence || 0) * 100)}%)</span>;\n      case 'conflict':\n        return <span className={`${baseClasses} bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400`}><AlertTriangle className=\"h-3 w-3\" /> Conflict</span>;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div \n      ref={parentRef} \n      className=\"w-full overflow-y-auto pr-2\"\n      style={{ height: height }}\n    >\n      <div\n        style={{\n          height: `${rowVirtualizer.getTotalSize()}px`,\n          width: '100%',\n          position: 'relative',\n        }}\n      >\n        {rowVirtualizer.getVirtualItems().map((virtualRow) => {\n          const transaction = transactions[virtualRow.index];\n          const isSelected = selectedId === transaction.id;\n          \n          return (\n            <div\n              key={transaction.id}\n              style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: `${virtualRow.size}px`,\n                transform: `translateY(${virtualRow.start}px)`,\n                paddingBottom: '8px' // Gap between items\n              }}\n              ref={rowVirtualizer.measureElement}\n              data-index={virtualRow.index}\n            >\n              <div\n                className={`p-4 rounded-lg border transition-all cursor-pointer h-full ${\n                  isSelected\n                    ? colorTheme === 'blue' \n                        ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md ring-1 ring-blue-500' \n                        : 'border-purple-500 bg-purple-50 dark:bg-purple-900/20 shadow-md ring-1 ring-purple-500'\n                    : transaction.matchStatus === 'matched'\n                    ? 'border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/10'\n                    : 'border-slate-200 dark:border-slate-800 hover:border-slate-300 dark:hover:border-slate-700 hover:shadow-sm'\n                }`}\n                onClick={() => onSelect(transaction.id)}\n              >\n                <div className=\"flex items-start justify-between gap-4\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-800 px-1 rounded\">\n                        {transaction.id.slice(0, 8)}...\n                      </span>\n                      {getStatusBadge(transaction.matchStatus, transaction.confidence)}\n                    </div>\n                    <p className=\"font-medium truncate text-slate-900 dark:text-slate-100\" title={transaction.description}>\n                      {transaction.description}\n                    </p>\n                    <p className=\"text-sm text-slate-500 flex items-center gap-1 mt-1\">\n                      <span>{transaction.date}</span>\n                      <span></span>\n                      <span>{transaction.account}</span>\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className={`font-bold text-lg ${\n                      transaction.amount < 0 ? 'text-red-600 dark:text-red-400' : 'text-slate-900 dark:text-slate-100'\n                    }`}>\n                      ${Math.abs(transaction.amount).toLocaleString()}\n                    </p>\n                    <p className=\"text-xs text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded-full inline-block mt-1\">\n                      {transaction.category}\n                    </p>\n                  </div>\n                </div>\n                \n                {transaction.matchedWith && (\n                  <div className=\"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between\">\n                    <span className=\"text-xs text-slate-500 flex items-center gap-1\">\n                      <ExternalLink className=\"h-3 w-3\" />\n                      Matched: <span className=\"font-mono\">{transaction.matchedWith.slice(0, 8)}...</span>\n                    </span>\n                    {onUnmatch && (\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\"\n                        className=\"h-6 px-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          onUnmatch(transaction.id);\n                        }}\n                      >\n                        <Unlink className=\"h-3 w-3 mr-1\" /> Unmatch\n                      </Button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/reports/ReportBuilder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/reports/ScheduledReports.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[669,672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[669,672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":173,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":173,"endColumn":101,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4835,5010],"text":"{ const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n        return `Weekly on ${days[schedule.day_of_week || 0]} at ${schedule.time}`; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":248,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":248,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7795,7798],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7795,7798],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":306,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10410,10413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10410,10413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport { Input } from '../ui/Input';\nimport {\n  Calendar,\n  Mail,\n  Play,\n  Pause,\n  Trash2,\n  Edit,\n  Plus\n} from 'lucide-react';\n\ninterface ScheduledReport {\n  id: string;\n  name: string;\n  template_id: string;\n  template_name: string;\n  schedule: {\n    frequency: 'daily' | 'weekly' | 'monthly';\n    time: string; // HH:MM format\n    day_of_week?: number; // 0-6 for weekly\n    day_of_month?: number; // 1-31 for monthly\n  };\n  recipients: string[];\n  format: 'pdf' | 'excel' | 'both';\n  filters?: Record<string, any>;\n  is_active: boolean;\n  last_run?: string;\n  next_run?: string;\n  created_by: string;\n  created_at: string;\n}\n\ninterface ScheduledReportsProps {\n  reports: ScheduledReport[];\n  templates: Array<{ id: string; name: string; type: string }>;\n  onCreateReport?: (report: Omit<ScheduledReport, 'id' | 'created_at' | 'last_run' | 'next_run'>) => void;\n  onUpdateReport?: (id: string, updates: Partial<ScheduledReport>) => void;\n  onDeleteReport?: (id: string) => void;\n  onRunNow?: (id: string) => void;\n}\n\nexport function ScheduledReports({\n  reports,\n  templates,\n  onCreateReport,\n  onUpdateReport,\n  onDeleteReport,\n  onRunNow\n}: ScheduledReportsProps) {\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [editingReport, setEditingReport] = useState<ScheduledReport | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    template_id: '',\n    frequency: 'weekly' as 'daily' | 'weekly' | 'monthly',\n    time: '09:00',\n    day_of_week: 1, // Monday\n    day_of_month: 1,\n    recipients: [] as string[],\n    format: 'pdf' as 'pdf' | 'excel' | 'both',\n    filters: {}\n  });\n\n  const activeReports = useMemo(() => reports.filter(r => r.is_active), [reports]);\n  const inactiveReports = useMemo(() => reports.filter(r => !r.is_active), [reports]);\n\n  const handleCreateReport = () => {\n    if (!formData.name || !formData.template_id || formData.recipients.length === 0) return;\n\n    const template = templates.find(t => t.id === formData.template_id);\n    const template_name = template?.name || 'Unknown Template';\n\n    const schedule = {\n      frequency: formData.frequency,\n      time: formData.time,\n      ...(formData.frequency === 'weekly' && { day_of_week: formData.day_of_week }),\n      ...(formData.frequency === 'monthly' && { day_of_month: formData.day_of_month })\n    };\n\n    onCreateReport?.({\n      name: formData.name,\n      template_id: formData.template_id,\n      template_name,\n      schedule,\n      recipients: formData.recipients,\n      format: formData.format,\n      filters: formData.filters,\n      is_active: true,\n      created_by: 'current_user' // This would come from auth context\n    });\n\n    resetForm();\n  };\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      template_id: '',\n      frequency: 'weekly',\n      time: '09:00',\n      day_of_week: 1,\n      day_of_month: 1,\n      recipients: [],\n      format: 'pdf',\n      filters: {}\n    });\n    setShowCreateForm(false);\n    setEditingReport(null);\n  };\n\n  const startEditing = (report: ScheduledReport) => {\n    setEditingReport(report);\n    setFormData({\n      name: report.name,\n      template_id: report.template_id,\n      frequency: report.schedule.frequency,\n      time: report.schedule.time,\n      day_of_week: report.schedule.day_of_week || 1,\n      day_of_month: report.schedule.day_of_month || 1,\n      recipients: report.recipients,\n      format: report.format,\n      filters: report.filters || {}\n    });\n    setShowCreateForm(true);\n  };\n\n  const handleUpdateReport = () => {\n    if (!editingReport) return;\n\n    const schedule = {\n      frequency: formData.frequency,\n      time: formData.time,\n      ...(formData.frequency === 'weekly' && { day_of_week: formData.day_of_week }),\n      ...(formData.frequency === 'monthly' && { day_of_month: formData.day_of_month })\n    };\n\n    onUpdateReport?.(editingReport.id, {\n      name: formData.name,\n      template_id: formData.template_id,\n      schedule,\n      recipients: formData.recipients,\n      format: formData.format,\n      filters: formData.filters\n    });\n\n    resetForm();\n  };\n\n  const addRecipient = (email: string) => {\n    if (email && !formData.recipients.includes(email)) {\n      setFormData(prev => ({\n        ...prev,\n        recipients: [...prev.recipients, email]\n      }));\n    }\n  };\n\n  const removeRecipient = (email: string) => {\n    setFormData(prev => ({\n      ...prev,\n      recipients: prev.recipients.filter(r => r !== email)\n    }));\n  };\n\n  const getFrequencyLabel = (schedule: ScheduledReport['schedule']) => {\n    switch (schedule.frequency) {\n      case 'daily':\n        return `Daily at ${schedule.time}`;\n      case 'weekly':\n        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n        return `Weekly on ${days[schedule.day_of_week || 0]} at ${schedule.time}`;\n      case 'monthly':\n        return `Monthly on day ${schedule.day_of_month} at ${schedule.time}`;\n      default:\n        return 'Unknown schedule';\n    }\n  };\n\n  const getStatusColor = (isActive: boolean) => {\n    return isActive\n      ? 'text-green-600 bg-green-50 dark:bg-green-500/10'\n      : 'text-slate-600 bg-slate-50 dark:bg-slate-500/10';\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            Scheduled Reports\n          </h2>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            Automate report generation and delivery\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button onClick={() => setShowCreateForm(true)}>\n            <Plus className=\"h-4 w-4 mr-1\" />\n            Schedule Report\n          </Button>\n        </div>\n      </div>\n\n      {/* Create/Edit Form */}\n      {showCreateForm && (\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              {editingReport ? 'Edit Scheduled Report' : 'Create Scheduled Report'}\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Report Name</label>\n                <Input\n                  value={formData.name}\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"Enter report name\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Template</label>\n                <select\n                  value={formData.template_id}\n                  onChange={(e) => setFormData(prev => ({ ...prev, template_id: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                  aria-label=\"Select Template\"\n                >\n                  <option value=\"\">Select template</option>\n                  {templates.map(template => (\n                    <option key={template.id} value={template.id}>\n                      {template.name} ({template.type})\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Frequency</label>\n                <select\n                  value={formData.frequency}\n                  onChange={(e) => setFormData(prev => ({ ...prev, frequency: e.target.value as any }))}\n                  className=\"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                  aria-label=\"Select Frequency\"\n                >\n                  <option value=\"daily\">Daily</option>\n                  <option value=\"weekly\">Weekly</option>\n                  <option value=\"monthly\">Monthly</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Time</label>\n                <Input\n                  type=\"time\"\n                  value={formData.time}\n                  onChange={(e) => setFormData(prev => ({ ...prev, time: e.target.value }))}\n                  aria-label=\"Select Time\"\n                />\n              </div>\n\n              {formData.frequency === 'weekly' && (\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Day of Week</label>\n                  <select\n                    value={formData.day_of_week}\n                    onChange={(e) => setFormData(prev => ({ ...prev, day_of_week: parseInt(e.target.value) }))}\n                    className=\"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                    aria-label=\"Select Day of Week\"\n                  >\n                    <option value={0}>Sunday</option>\n                    <option value={1}>Monday</option>\n                    <option value={2}>Tuesday</option>\n                    <option value={3}>Wednesday</option>\n                    <option value={4}>Thursday</option>\n                    <option value={5}>Friday</option>\n                    <option value={6}>Saturday</option>\n                  </select>\n                </div>\n              )}\n\n              {formData.frequency === 'monthly' && (\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Day of Month</label>\n                  <Input\n                    type=\"number\"\n                    min={1}\n                    max={31}\n                    value={formData.day_of_month}\n                    onChange={(e) => setFormData(prev => ({ ...prev, day_of_month: parseInt(e.target.value) }))}\n                    aria-label=\"Select Day of Month\"\n                  />\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Format</label>\n                <select\n                  value={formData.format}\n                  onChange={(e) => setFormData(prev => ({ ...prev, format: e.target.value as any }))}\n                  className=\"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900\"\n                  aria-label=\"Select Format\"\n                >\n                  <option value=\"pdf\">PDF</option>\n                  <option value=\"excel\">Excel</option>\n                  <option value=\"both\">Both</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Recipients */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Recipients</label>\n              <div className=\"flex gap-2 mb-2\">\n                <Input\n                  placeholder=\"Enter email address\"\n                  onKeyPress={(e) => {\n                    if (e.key === 'Enter') {\n                      addRecipient((e.target as HTMLInputElement).value);\n                      (e.target as HTMLInputElement).value = '';\n                    }\n                  }}\n                />\n                <Button\n                  variant=\"outline\"\n                  onClick={() => {\n                    const input = document.querySelector('input[placeholder=\"Enter email address\"]') as HTMLInputElement;\n                    if (input?.value) {\n                      addRecipient(input.value);\n                      input.value = '';\n                    }\n                  }}\n                >\n                  Add\n                </Button>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {formData.recipients.map(email => (\n                  <span\n                    key={email}\n                    className=\"flex items-center gap-1 bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 px-2 py-1 rounded text-sm\"\n                  >\n                    <Mail className=\"h-3 w-3\" />\n                    {email}\n                    <button\n                      onClick={() => removeRecipient(email)}\n                      className=\"ml-1 hover:text-red-600\"\n                    >\n                      \n                    </button>\n                  </span>\n                ))}\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex justify-end gap-2 pt-4 border-t border-slate-200 dark:border-slate-700\">\n              <Button variant=\"outline\" onClick={resetForm}>\n                Cancel\n              </Button>\n              <Button onClick={editingReport ? handleUpdateReport : handleCreateReport}>\n                {editingReport ? 'Update Report' : 'Create Report'}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Active Reports */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <Play className=\"h-5 w-5 text-green-500\" />\n          Active Reports ({activeReports.length})\n        </h3>\n\n        {activeReports.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-8 text-center\">\n              <Calendar className=\"h-8 w-8 text-slate-400 mx-auto mb-2\" />\n              <p className=\"text-slate-600 dark:text-slate-400\">No active scheduled reports</p>\n              <p className=\"text-sm mt-1\">Create your first scheduled report above</p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid gap-4\">\n            {activeReports.map((report) => (\n              <Card key={report.id}>\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                          {report.name}\n                        </h4>\n                        <span className={`text-xs px-2 py-1 rounded ${getStatusColor(report.is_active)}`}>\n                          Active\n                        </span>\n                      </div>\n\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm\">\n                        <div>\n                          <span className=\"text-slate-600 dark:text-slate-400\">Template:</span>\n                          <div className=\"font-medium\">{report.template_name}</div>\n                        </div>\n\n                        <div>\n                          <span className=\"text-slate-600 dark:text-slate-400\">Schedule:</span>\n                          <div className=\"font-medium\">{getFrequencyLabel(report.schedule)}</div>\n                        </div>\n\n                        <div>\n                          <span className=\"text-slate-600 dark:text-slate-400\">Recipients:</span>\n                          <div className=\"font-medium\">{report.recipients.length}</div>\n                        </div>\n\n                        <div>\n                          <span className=\"text-slate-600 dark:text-slate-400\">Format:</span>\n                          <div className=\"font-medium capitalize\">{report.format}</div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center gap-4 mt-3 text-xs text-slate-500\">\n                        {report.last_run && (\n                          <span>Last run: {new Date(report.last_run).toLocaleString()}</span>\n                        )}\n                        {report.next_run && (\n                          <span>Next run: {new Date(report.next_run).toLocaleString()}</span>\n                        )}\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center gap-1 ml-4\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => onRunNow?.(report.id)}\n                      >\n                        <Play className=\"h-3 w-3\" />\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => startEditing(report)}\n                      >\n                        <Edit className=\"h-3 w-3\" />\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => onUpdateReport?.(report.id, { is_active: false })}\n                        className=\"text-amber-600 hover:text-amber-700\"\n                      >\n                        <Pause className=\"h-3 w-3\" />\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => onDeleteReport?.(report.id)}\n                        className=\"text-red-600 hover:text-red-700\"\n                      >\n                        <Trash2 className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Inactive Reports */}\n      {inactiveReports.length > 0 && (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <Pause className=\"h-5 w-5 text-slate-500\" />\n            Inactive Reports ({inactiveReports.length})\n          </h3>\n\n          <div className=\"grid gap-4\">\n            {inactiveReports.map((report) => (\n              <Card key={report.id} className=\"opacity-75\">\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                        {report.name}\n                      </h4>\n                      <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                        {report.template_name}  {getFrequencyLabel(report.schedule)}\n                      </p>\n                    </div>\n\n                    <div className=\"flex items-center gap-1\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => onUpdateReport?.(report.id, { is_active: true })}\n                        className=\"text-green-600 hover:text-green-700\"\n                      >\n                        <Play className=\"h-3 w-3\" />\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => onDeleteReport?.(report.id)}\n                        className=\"text-red-600 hover:text-red-700\"\n                      >\n                        <Trash2 className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/search/GlobalSearch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/settings/APIKeysManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/settings/AuditLogViewer.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/settings/AuditLogViewer.tsx:23:21\n  21 |   const [filterStatus, setFilterStatus] = useState('all');\n  22 |   const [dateRange, setDateRange] = useState({\n> 23 |     start: new Date(Date.now() - 30 * 24 * 3600000).toISOString().split('T')[0],\n     |                     ^^^^^^^^^^ Cannot call impure function\n  24 |     end: new Date().toISOString().split('T')[0],\n  25 |   });\n  26 |","line":23,"column":21,"nodeType":null,"endLine":23,"endColumn":31},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/settings/AuditLogViewer.tsx:30:27\n  28 |     {\n  29 |       id: '1',\n> 30 |       timestamp: new Date(Date.now() - 2 * 3600000).toISOString(),\n     |                           ^^^^^^^^^^ Cannot call impure function\n  31 |       action: 'Login',\n  32 |       user: 'john.doe@company.com',\n  33 |       resource: 'Authentication',","line":30,"column":27,"nodeType":null,"endLine":30,"endColumn":37},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/settings/AuditLogViewer.tsx:38:27\n  36 |     {\n  37 |       id: '2',\n> 38 |       timestamp: new Date(Date.now() - 5 * 3600000).toISOString(),\n     |                           ^^^^^^^^^^ Cannot call impure function\n  39 |       action: 'Case Updated',\n  40 |       user: 'jane.smith@company.com',\n  41 |       resource: 'Case #12345',","line":38,"column":27,"nodeType":null,"endLine":38,"endColumn":37},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/settings/AuditLogViewer.tsx:47:27\n  45 |     {\n  46 |       id: '3',\n> 47 |       timestamp: new Date(Date.now() - 24 * 3600000).toISOString(),\n     |                           ^^^^^^^^^^ Cannot call impure function\n  48 |       action: 'Failed Login',\n  49 |       user: 'unknown@company.com',\n  50 |       resource: 'Authentication',","line":47,"column":27,"nodeType":null,"endLine":47,"endColumn":37},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/settings/AuditLogViewer.tsx:55:27\n  53 |     {\n  54 |       id: '4',\n> 55 |       timestamp: new Date(Date.now() - 48 * 3600000).toISOString(),\n     |                           ^^^^^^^^^^ Cannot call impure function\n  56 |       action: 'Data Export',\n  57 |       user: 'bob.johnson@company.com',\n  58 |       resource: 'Case Data Export',","line":55,"column":27,"nodeType":null,"endLine":55,"endColumn":37},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/settings/AuditLogViewer.tsx:64:27\n  62 |     {\n  63 |       id: '5',\n> 64 |       timestamp: new Date(Date.now() - 72 * 3600000).toISOString(),\n     |                           ^^^^^^^^^^ Cannot call impure function\n  65 |       action: 'Settings Changed',\n  66 |       user: 'admin@company.com',\n  67 |       resource: 'System Settings',","line":64,"column":27,"nodeType":null,"endLine":64,"endColumn":37}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { LogOut } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\n\ninterface AuditLogEntry {\n  id: string;\n  timestamp: string;\n  action: string;\n  user: string;\n  resource: string;\n  changes?: string;\n  status: 'success' | 'failed';\n}\n\ninterface AuditLogViewerProps {\n  entries?: AuditLogEntry[];\n}\n\nexport function AuditLogViewer({ entries }: AuditLogViewerProps) {\n  const [filterAction, setFilterAction] = useState('all');\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [dateRange, setDateRange] = useState({\n    start: new Date(Date.now() - 30 * 24 * 3600000).toISOString().split('T')[0],\n    end: new Date().toISOString().split('T')[0],\n  });\n\n  const defaultEntries: AuditLogEntry[] = [\n    {\n      id: '1',\n      timestamp: new Date(Date.now() - 2 * 3600000).toISOString(),\n      action: 'Login',\n      user: 'john.doe@company.com',\n      resource: 'Authentication',\n      status: 'success',\n    },\n    {\n      id: '2',\n      timestamp: new Date(Date.now() - 5 * 3600000).toISOString(),\n      action: 'Case Updated',\n      user: 'jane.smith@company.com',\n      resource: 'Case #12345',\n      changes: 'Status changed from Open to In Review',\n      status: 'success',\n    },\n    {\n      id: '3',\n      timestamp: new Date(Date.now() - 24 * 3600000).toISOString(),\n      action: 'Failed Login',\n      user: 'unknown@company.com',\n      resource: 'Authentication',\n      status: 'failed',\n    },\n    {\n      id: '4',\n      timestamp: new Date(Date.now() - 48 * 3600000).toISOString(),\n      action: 'Data Export',\n      user: 'bob.johnson@company.com',\n      resource: 'Case Data Export',\n      changes: '500 records exported',\n      status: 'success',\n    },\n    {\n      id: '5',\n      timestamp: new Date(Date.now() - 72 * 3600000).toISOString(),\n      action: 'Settings Changed',\n      user: 'admin@company.com',\n      resource: 'System Settings',\n      changes: 'Session timeout changed from 30 to 60 minutes',\n      status: 'success',\n    },\n  ];\n\n  const data = entries || defaultEntries;\n  const actions = ['all', ...new Set(data.map(e => e.action))];\n\n  const filtered = data.filter(entry => {\n    const matchAction = filterAction === 'all' || entry.action === filterAction;\n    const matchStatus = filterStatus === 'all' || entry.status === filterStatus;\n    const entryDate = new Date(entry.timestamp).toISOString().split('T')[0];\n    const matchDate =\n      entryDate >= dateRange.start && entryDate <= dateRange.end;\n    return matchAction && matchStatus && matchDate;\n  });\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <LogOut className=\"w-5 h-5\" /> Audit Log\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-3 p-3 bg-slate-50 rounded border border-slate-200\">\n            <div>\n              <label className=\"block text-xs font-medium mb-1\">Action</label>\n              <select\n                value={filterAction}\n                onChange={(e) => setFilterAction(e.target.value)}\n                className=\"w-full px-2 py-1 border border-slate-200 rounded text-sm\"\n              >\n                {actions.map(action => (\n                  <option key={action} value={action}>\n                    {action === 'all' ? 'All Actions' : action}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium mb-1\">Status</label>\n              <select\n                value={filterStatus}\n                onChange={(e) => setFilterStatus(e.target.value)}\n                className=\"w-full px-2 py-1 border border-slate-200 rounded text-sm\"\n              >\n                <option value=\"all\">All Status</option>\n                <option value=\"success\">Success</option>\n                <option value=\"failed\">Failed</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium mb-1\">Start Date</label>\n              <input\n                type=\"date\"\n                value={dateRange.start}\n                onChange={(e) => setDateRange({ ...dateRange, start: e.target.value })}\n                className=\"w-full px-2 py-1 border border-slate-200 rounded text-sm\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium mb-1\">End Date</label>\n              <input\n                type=\"date\"\n                value={dateRange.end}\n                onChange={(e) => setDateRange({ ...dateRange, end: e.target.value })}\n                className=\"w-full px-2 py-1 border border-slate-200 rounded text-sm\"\n              />\n            </div>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm\">\n              <thead>\n                <tr className=\"border-b border-slate-200\">\n                  <th className=\"text-left py-2 px-2 font-semibold\">Timestamp</th>\n                  <th className=\"text-left py-2 px-2 font-semibold\">Action</th>\n                  <th className=\"text-left py-2 px-2 font-semibold\">User</th>\n                  <th className=\"text-left py-2 px-2 font-semibold\">Resource</th>\n                  <th className=\"text-left py-2 px-2 font-semibold\">Changes</th>\n                  <th className=\"text-left py-2 px-2 font-semibold\">Status</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filtered.map(entry => (\n                  <tr key={entry.id} className=\"border-b border-slate-100 hover:bg-slate-50\">\n                    <td className=\"py-2 px-2 text-xs\">\n                      {new Date(entry.timestamp).toLocaleString()}\n                    </td>\n                    <td className=\"py-2 px-2 font-medium\">{entry.action}</td>\n                    <td className=\"py-2 px-2\">{entry.user}</td>\n                    <td className=\"py-2 px-2\">{entry.resource}</td>\n                    <td className=\"py-2 px-2 text-xs text-slate-600\">\n                      {entry.changes || '-'}\n                    </td>\n                    <td className=\"py-2 px-2\">\n                      <span\n                        className={`text-xs font-medium px-2 py-1 rounded ${\n                          entry.status === 'success'\n                            ? 'bg-green-100 text-green-700'\n                            : 'bg-red-100 text-red-700'\n                        }`}\n                      >\n                        {entry.status}\n                      </span>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"text-xs text-slate-600 text-center\">\n            Showing {filtered.length} of {data.length} entries\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/settings/NotificationPreferences.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/settings/ProfileSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/settings/SecuritySettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[216,219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[216,219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Lock, Eye, EyeOff, Shield } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\n\ninterface SecuritySettingsProps {\n  onSave?: (data: any) => void;\n}\n\nexport function SecuritySettings({ onSave }: SecuritySettingsProps) {\n  const [showPasswords, setShowPasswords] = useState(false);\n  const [passwords, setPasswords] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmPassword: '',\n  });\n  const [twoFactor, setTwoFactor] = useState({\n    enabled: false,\n    method: '2fa' as '2fa' | 'email' | 'sms',\n  });\n  const [other, setOther] = useState({\n    sessionTimeout: 30,\n    loginAlerts: true,\n  });\n\n  const handlePasswordChange = (field: keyof typeof passwords, value: string) => {\n    setPasswords(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleSavePassword = () => {\n    if (passwords.newPassword !== passwords.confirmPassword) {\n      alert('Passwords do not match');\n      return;\n    }\n    onSave?.(passwords);\n    setPasswords({ currentPassword: '', newPassword: '', confirmPassword: '' });\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Lock className=\"w-5 h-5\" /> Change Password\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Current Password</label>\n              <input\n                type=\"password\"\n                placeholder=\"Enter current password\"\n                className=\"w-full px-3 py-2 border border-slate-200 rounded text-sm\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">New Password</label>\n              <div className=\"relative\">\n                <input\n                  type={showPasswords ? 'text' : 'password'}\n                  placeholder=\"Enter new password\"\n                  value={passwords.newPassword}\n                  onChange={(e) => handlePasswordChange('newPassword', e.target.value)}\n                  className=\"w-full px-3 py-2 pr-10 border border-slate-200 rounded text-sm\"\n                />\n                <button\n                  onClick={() => setShowPasswords(!showPasswords)}\n                  className=\"absolute right-3 top-2.5 text-slate-500 hover:text-slate-700\"\n                >\n                  {showPasswords ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                </button>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Confirm New Password</label>\n              <input\n                type={showPasswords ? 'text' : 'password'}\n                placeholder=\"Confirm new password\"\n                value={passwords.confirmPassword}\n                onChange={(e) => handlePasswordChange('confirmPassword', e.target.value)}\n                className=\"w-full px-3 py-2 border border-slate-200 rounded text-sm\"\n              />\n            </div>\n\n            <button\n              onClick={handleSavePassword}\n              className=\"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium\"\n            >\n              Update Password\n            </button>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Shield className=\"w-5 h-5\" /> Two-Factor Authentication\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">Enable 2FA</span>\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={twoFactor.enabled}\n                  onChange={(e) => setTwoFactor({ ...twoFactor, enabled: e.target.checked })}\n                  className=\"w-4 h-4 rounded border-slate-300\"\n                />\n                <span className=\"text-sm\">{twoFactor.enabled ? 'Enabled' : 'Disabled'}</span>\n              </label>\n            </div>\n\n            {twoFactor.enabled && (\n              <>\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Authentication Method</label>\n                  <select\n                    value={twoFactor.method}\n                    onChange={(e) =>\n                      setTwoFactor({ ...twoFactor, method: e.target.value as '2fa' | 'email' | 'sms' })\n                    }\n                    className=\"w-full px-3 py-2 border border-slate-200 rounded text-sm\"\n                  >\n                    <option value=\"2fa\">Authenticator App</option>\n                    <option value=\"email\">Email</option>\n                    <option value=\"sms\">SMS</option>\n                  </select>\n                </div>\n\n                <button className=\"w-full px-4 py-2 border border-blue-600 text-blue-600 rounded hover:bg-blue-50 text-sm font-medium\">\n                  Setup 2FA\n                </button>\n              </>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Session & Alerts</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Session Timeout (minutes)</label>\n              <input\n                type=\"number\"\n                value={other.sessionTimeout}\n                onChange={(e) => setOther({ ...other, sessionTimeout: parseInt(e.target.value) })}\n                min={5}\n                max={480}\n                className=\"w-full px-3 py-2 border border-slate-200 rounded text-sm\"\n              />\n              <p className=\"text-xs text-slate-500 mt-1\">Auto-logout after inactivity</p>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <label className=\"text-sm font-medium\">Login Alerts</label>\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={other.loginAlerts}\n                  onChange={(e) => setOther({ ...other, loginAlerts: e.target.checked })}\n                  className=\"w-4 h-4 rounded border-slate-300\"\n                />\n                <span className=\"text-sm\">{other.loginAlerts ? 'Enabled' : 'Disabled'}</span>\n              </label>\n            </div>\n\n            <button\n              onClick={() => onSave?.(other)}\n              className=\"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium\"\n            >\n              Save Settings\n            </button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/settings/TeamManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/settings/ThemeCustomization.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/summary/ActionButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/summary/ChartEmbed.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/summary/KeyFindings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/summary/PDFGenerator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/summary/SuccessBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/summary/SummaryCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/sync/SyncStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Button.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Card.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/ErrorBoundary.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AsyncErrorComponent' is assigned a value but never used.","line":16,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { describe, it, expect, vi } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { ErrorBoundary } from './ErrorBoundary';\nimport { render } from '../../test/test-utils';\n\n// Component that throws an error\nconst ErrorComponent = ({ shouldThrow = true }: { shouldThrow?: boolean }) => {\n  if (shouldThrow) {\n    throw new Error('Test error');\n  }\n  return <div>No error</div>;\n};\n\n// Component that throws an async error\nconst AsyncErrorComponent = () => {\n  React.useEffect(() => {\n    throw new Error('Async error');\n  }, []);\n  return <div>Async component</div>;\n};\n\ndescribe('ErrorBoundary', () => {\n  // Mock console.error to avoid noise in tests\n  const originalError = console.error;\n  beforeEach(() => {\n    console.error = vi.fn();\n  });\n\n  afterEach(() => {\n    console.error = originalError;\n  });\n\n  it('renders children when no error occurs', () => {\n    render(\n      <ErrorBoundary>\n        <div>Test content</div>\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('Test content')).toBeInTheDocument();\n  });\n\n  it('renders fallback UI when error occurs', () => {\n    render(\n      <ErrorBoundary>\n        <ErrorComponent />\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('Something went wrong')).toBeInTheDocument();\n    expect(screen.getByText(/Test error/)).toBeInTheDocument();\n    expect(screen.getByRole('button', { name: /try again/i })).toBeInTheDocument();\n  });\n\n  it('renders custom fallback when provided', () => {\n    const customFallback = <div>Custom error message</div>;\n\n    render(\n      <ErrorBoundary fallback={customFallback}>\n        <ErrorComponent />\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('Custom error message')).toBeInTheDocument();\n    expect(screen.queryByText('Something went wrong')).not.toBeInTheDocument();\n  });\n\n  it('allows retry when Try Again button is clicked', async () => {\n    let shouldThrow = true;\n\n    const RetryComponent = () => {\n      shouldThrow = false;\n      return <ErrorComponent shouldThrow={shouldThrow} />;\n    };\n\n    render(\n      <ErrorBoundary>\n        <RetryComponent />\n      </ErrorBoundary>\n    );\n\n    // Initially shows error\n    expect(screen.getByText('Something went wrong')).toBeInTheDocument();\n\n    // Click retry\n    const retryButton = screen.getByRole('button', { name: /try again/i });\n    fireEvent.click(retryButton);\n\n    // Should now show the normal content\n    await waitFor(() => {\n      expect(screen.getByText('No error')).toBeInTheDocument();\n    });\n  });\n\n  it('logs error to console', () => {\n    render(\n      <ErrorBoundary>\n        <ErrorComponent />\n      </ErrorBoundary>\n    );\n\n    expect(console.error).toHaveBeenCalled();\n  });\n\n  it('handles different error types', () => {\n    const StringErrorComponent = () => {\n      throw 'String error';\n    };\n\n    render(\n      <ErrorBoundary>\n        <StringErrorComponent />\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('Something went wrong')).toBeInTheDocument();\n  });\n\n  it('handles null error', () => {\n    const NullErrorComponent = () => {\n      throw null;\n    };\n\n    render(\n      <ErrorBoundary>\n        <NullErrorComponent />\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('Something went wrong')).toBeInTheDocument();\n    expect(screen.getByText(/An unexpected error occurred/)).toBeInTheDocument();\n  });\n\n  it('handles errors with custom error messages', () => {\n    const CustomErrorComponent = () => {\n      const error = new Error('Custom error message');\n      error.name = 'CustomError';\n      throw error;\n    };\n\n    render(\n      <ErrorBoundary>\n        <CustomErrorComponent />\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('Custom error message')).toBeInTheDocument();\n  });\n\n  it('maintains error state across re-renders', () => {\n    const { rerender } = render(\n      <ErrorBoundary>\n        <ErrorComponent />\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('Something went wrong')).toBeInTheDocument();\n\n    // Re-render with same error\n    rerender(\n      <ErrorBoundary>\n        <ErrorComponent />\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('Something went wrong')).toBeInTheDocument();\n  });\n\n  it('resets error state when children change', () => {\n    const { rerender } = render(\n      <ErrorBoundary>\n        <ErrorComponent />\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('Something went wrong')).toBeInTheDocument();\n\n    // Re-render with different children\n    rerender(\n      <ErrorBoundary>\n        <div>New content</div>\n      </ErrorBoundary>\n    );\n\n    expect(screen.getByText('New content')).toBeInTheDocument();\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/ExportComponents.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2481,2484],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2481,2484],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":202,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":202,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":215,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":215,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":227,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":227,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":239,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":239,"endColumn":15}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Export Components\n * Reusable UI components for export functionality\n */\n\nimport { useState, useRef } from 'react';\nimport { Download, FileSpreadsheet, FileText, Image, ChevronDown, Loader2 } from 'lucide-react';\nimport { cn } from '../../lib/utils';\nimport {\n  exportToCSV,\n  exportDataToExcel,\n  exportTableToPDF,\n  exportChartToPNG,\n  generateFilename,\n} from '../../lib/exportUtils';\n\n// ============================================================================\n// Export Dropdown Button\n// ============================================================================\n\nexport interface ExportColumn {\n  key: string;\n  header: string;\n}\n\ninterface ExportDropdownProps {\n  data: Record<string, unknown>[];\n  columns?: ExportColumn[];\n  filename: string;\n  title?: string;\n  chartRef?: React.RefObject<HTMLElement>;\n  formats?: ('csv' | 'excel' | 'pdf' | 'png')[];\n  className?: string;\n  disabled?: boolean;\n}\n\nexport function ExportDropdown({\n  data,\n  columns,\n  filename,\n  title,\n  chartRef,\n  formats = ['csv', 'excel', 'pdf'],\n  className,\n  disabled,\n}: ExportDropdownProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isExporting, setIsExporting] = useState<string | null>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  const handleExport = async (format: string) => {\n    setIsExporting(format);\n    setIsOpen(false);\n\n    try {\n      const timestampedFilename = generateFilename(filename);\n\n      switch (format) {\n        case 'csv':\n          exportToCSV(data, timestampedFilename, columns);\n          break;\n        case 'excel':\n          exportDataToExcel(data, timestampedFilename);\n          break;\n        case 'pdf':\n          exportTableToPDF(data, columns || [], timestampedFilename, title);\n          break;\n        case 'png':\n          if (chartRef?.current) {\n            await exportChartToPNG(chartRef.current, timestampedFilename);\n          }\n          break;\n      }\n    } catch (error) {\n      console.error('Export failed:', error);\n    } finally {\n      setIsExporting(null);\n    }\n  };\n\n  const formatOptions = [\n    { id: 'csv', label: 'CSV', icon: FileText, description: 'Comma-separated values' },\n    { id: 'excel', label: 'Excel', icon: FileSpreadsheet, description: 'Microsoft Excel (.xlsx)' },\n    { id: 'pdf', label: 'PDF', icon: FileText, description: 'Adobe PDF document' },\n    { id: 'png', label: 'Image', icon: Image, description: 'PNG image' },\n  ].filter((opt) => formats.includes(opt.id as any));\n\n  return (\n    <div className={cn('relative', className)} ref={dropdownRef}>\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        disabled={disabled || isExporting !== null}\n        className={cn(\n          'flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors',\n          'bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700',\n          'hover:bg-slate-50 dark:hover:bg-slate-700',\n          'disabled:opacity-50 disabled:cursor-not-allowed'\n        )}\n      >\n        {isExporting ? (\n          <Loader2 className=\"w-4 h-4 animate-spin\" />\n        ) : (\n          <Download className=\"w-4 h-4\" />\n        )}\n        <span>Export</span>\n        <ChevronDown className={cn('w-4 h-4 transition-transform', isOpen && 'rotate-180')} />\n      </button>\n\n      {isOpen && (\n        <>\n          <div\n            className=\"fixed inset-0 z-10\"\n            onClick={() => setIsOpen(false)}\n          />\n          <div className=\"absolute right-0 mt-2 w-56 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-lg z-20 overflow-hidden\">\n            {formatOptions.map((option) => (\n              <button\n                key={option.id}\n                onClick={() => handleExport(option.id)}\n                className=\"w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-left\"\n              >\n                <option.icon className=\"w-5 h-5 text-slate-400\" />\n                <div>\n                  <div className=\"font-medium text-sm text-slate-900 dark:text-slate-100\">\n                    {option.label}\n                  </div>\n                  <div className=\"text-xs text-slate-500\">{option.description}</div>\n                </div>\n              </button>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\n// ============================================================================\n// Quick Export Buttons\n// ============================================================================\n\ninterface QuickExportButtonProps {\n  onClick: () => void;\n  format: 'csv' | 'excel' | 'pdf' | 'png';\n  loading?: boolean;\n  className?: string;\n}\n\nexport function QuickExportButton({\n  onClick,\n  format,\n  loading,\n  className,\n}: QuickExportButtonProps) {\n  const icons = {\n    csv: FileText,\n    excel: FileSpreadsheet,\n    pdf: FileText,\n    png: Image,\n  };\n\n  const labels = {\n    csv: 'Export CSV',\n    excel: 'Export Excel',\n    pdf: 'Export PDF',\n    png: 'Export Image',\n  };\n\n  const Icon = icons[format];\n\n  return (\n    <button\n      onClick={onClick}\n      disabled={loading}\n      className={cn(\n        'flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium',\n        'bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200',\n        'hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors',\n        'disabled:opacity-50',\n        className\n      )}\n    >\n      {loading ? (\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\n      ) : (\n        <Icon className=\"w-4 h-4\" />\n      )}\n      {labels[format]}\n    </button>\n  );\n}\n\n// ============================================================================\n// useExport Hook\n// ============================================================================\n\nexport interface UseExportOptions {\n  filename: string;\n  title?: string;\n}\n\nexport function useExport<T extends Record<string, unknown>>(\n  data: T[],\n  columns: ExportColumn[],\n  options: UseExportOptions\n) {\n  const [isExporting, setIsExporting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const exportCSV = async () => {\n    setIsExporting(true);\n    setError(null);\n    try {\n      exportToCSV(data, generateFilename(options.filename), columns);\n    } catch (e) {\n      setError('Failed to export CSV');\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  const exportExcel = async () => {\n    setIsExporting(true);\n    setError(null);\n    try {\n      exportDataToExcel(data, generateFilename(options.filename));\n    } catch (e) {\n      setError('Failed to export Excel');\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  const exportPDF = async () => {\n    setIsExporting(true);\n    setError(null);\n    try {\n      exportTableToPDF(data, columns, generateFilename(options.filename), options.title);\n    } catch (e) {\n      setError('Failed to export PDF');\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  return {\n    isExporting,\n    error,\n    exportCSV,\n    exportExcel,\n    exportPDF,\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Input.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Input.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":4,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":4,"endColumn":28,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[78,155],"text":"type InputProps = React.InputHTMLAttributes<HTMLInputElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { cn } from \"../../lib/utils\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Loading.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/Tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/ui/VirtualTable.tsx","messages":[{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/ui/VirtualTable.tsx:79:26\n  77 |\n  78 |   // Setup virtualizer\n> 79 |   const rowVirtualizer = useVirtualizer({\n     |                          ^^^^^^^^^^^^^^ TanStack Virtual's `useVirtualizer()` API returns functions that cannot be memoized safely\n  80 |     count: data.length,\n  81 |     getScrollElement: () => parentRef.current,\n  82 |     estimateSize: () => rowHeight,","line":79,"column":26,"nodeType":null,"endLine":79,"endColumn":40},{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/ui/VirtualTable.tsx:297:23\n  295 |   const parentRef = useRef<HTMLDivElement>(null);\n  296 |\n> 297 |   const virtualizer = useVirtualizer({\n      |                       ^^^^^^^^^^^^^^ TanStack Virtual's `useVirtualizer()` API returns functions that cannot be memoized safely\n  298 |     count: items.length,\n  299 |     getScrollElement: () => parentRef.current,\n  300 |     estimateSize: () => itemHeight,","line":297,"column":23,"nodeType":null,"endLine":297,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Virtual Table Component\n * Phase 3: Performance Optimization - Virtual Scrolling\n * \n * Efficiently renders large datasets using virtualization\n */\n\nimport { useRef, useMemo, useCallback } from 'react';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport { cn } from '../../lib/utils';\nimport { ChevronUp, ChevronDown, ChevronsUpDown } from 'lucide-react';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface VirtualTableColumn<T> {\n  key: keyof T | string;\n  header: string;\n  width?: number;\n  minWidth?: number;\n  maxWidth?: number;\n  sortable?: boolean;\n  sticky?: boolean;\n  render?: (value: unknown, row: T, index: number) => React.ReactNode;\n  headerRender?: () => React.ReactNode;\n  align?: 'left' | 'center' | 'right';\n}\n\nexport interface VirtualTableProps<T> {\n  data: T[];\n  columns: VirtualTableColumn<T>[];\n  rowHeight?: number;\n  headerHeight?: number;\n  maxHeight?: number;\n  onRowClick?: (row: T, index: number) => void;\n  onSort?: (key: string, direction: 'asc' | 'desc') => void;\n  sortKey?: string;\n  sortDirection?: 'asc' | 'desc';\n  selectedRows?: Set<number>;\n  onSelectRow?: (index: number, selected: boolean) => void;\n  getRowId?: (row: T) => string | number;\n  className?: string;\n  emptyMessage?: string;\n  loading?: boolean;\n  stickyHeader?: boolean;\n}\n\n// ============================================================================\n// Virtual Table Component\n// ============================================================================\n\nexport function VirtualTable<T extends Record<string, unknown>>({\n  data,\n  columns,\n  rowHeight = 48,\n  headerHeight = 48,\n  maxHeight = 600,\n  onRowClick,\n  onSort,\n  sortKey,\n  sortDirection,\n  selectedRows,\n  // onSelectRow is available via props but not used in current implementation\n  getRowId,\n  className,\n  emptyMessage = 'No data available',\n  loading = false,\n  stickyHeader = true,\n}: VirtualTableProps<T>) {\n  const parentRef = useRef<HTMLDivElement>(null);\n\n  // Calculate total width\n  const totalWidth = useMemo(() => {\n    return columns.reduce((acc, col) => acc + (col.width || 150), 0);\n  }, [columns]);\n\n  // Setup virtualizer\n  const rowVirtualizer = useVirtualizer({\n    count: data.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => rowHeight,\n    overscan: 10, // Render extra rows for smoother scrolling\n  });\n\n  // Get nested value from object\n  const getValue = useCallback((row: T, key: string): unknown => {\n    const keys = key.split('.');\n    let value: unknown = row;\n    for (const k of keys) {\n      if (value && typeof value === 'object') {\n        value = (value as Record<string, unknown>)[k];\n      } else {\n        return undefined;\n      }\n    }\n    return value;\n  }, []);\n\n  // Handle sort click\n  const handleSortClick = (key: string) => {\n    if (!onSort) return;\n    const newDirection = sortKey === key && sortDirection === 'asc' ? 'desc' : 'asc';\n    onSort(key, newDirection);\n  };\n\n  // Render sort icon\n  const renderSortIcon = (key: string) => {\n    if (sortKey !== key) {\n      return <ChevronsUpDown className=\"w-4 h-4 opacity-30\" />;\n    }\n    return sortDirection === 'asc' ? (\n      <ChevronUp className=\"w-4 h-4 text-blue-500\" />\n    ) : (\n      <ChevronDown className=\"w-4 h-4 text-blue-500\" />\n    );\n  };\n\n  // Loading state\n  if (loading) {\n    return (\n      <div\n        className={cn(\n          'border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden',\n          className\n        )}\n        style={{ height: maxHeight }}\n      >\n        <div className=\"flex items-center justify-center h-full\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\" />\n        </div>\n      </div>\n    );\n  }\n\n  // Empty state\n  if (data.length === 0) {\n    return (\n      <div\n        className={cn(\n          'border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden',\n          className\n        )}\n        style={{ height: maxHeight }}\n      >\n        <div className=\"flex items-center justify-center h-full text-slate-500\">\n          {emptyMessage}\n        </div>\n      </div>\n    );\n  }\n\n  const virtualRows = rowVirtualizer.getVirtualItems();\n\n  return (\n    <div\n      className={cn(\n        'border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden',\n        className\n      )}\n    >\n      {/* Scrollable container */}\n      <div\n        ref={parentRef}\n        className=\"overflow-auto\"\n        style={{ maxHeight, minWidth: totalWidth }}\n      >\n        {/* Table */}\n        <table className=\"w-full border-collapse\" style={{ minWidth: totalWidth }}>\n          {/* Header */}\n          <thead\n            className={cn(\n              'bg-slate-50 dark:bg-slate-800',\n              stickyHeader && 'sticky top-0 z-10'\n            )}\n          >\n            <tr>\n              {columns.map((column) => (\n                <th\n                  key={String(column.key)}\n                  className={cn(\n                    'px-4 py-3 text-sm font-medium text-slate-700 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700',\n                    column.sortable && 'cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700',\n                    column.sticky && 'sticky left-0 bg-slate-50 dark:bg-slate-800 z-20',\n                    column.align === 'center' && 'text-center',\n                    column.align === 'right' && 'text-right'\n                  )}\n                  style={{\n                    width: column.width,\n                    minWidth: column.minWidth || column.width,\n                    maxWidth: column.maxWidth,\n                    height: headerHeight,\n                  }}\n                  onClick={() => column.sortable && handleSortClick(String(column.key))}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    {column.headerRender ? column.headerRender() : column.header}\n                    {column.sortable && renderSortIcon(String(column.key))}\n                  </div>\n                </th>\n              ))}\n            </tr>\n          </thead>\n\n          {/* Body with virtualization */}\n          <tbody\n            style={{\n              height: `${rowVirtualizer.getTotalSize()}px`,\n              position: 'relative',\n            }}\n          >\n            {virtualRows.map((virtualRow) => {\n              const row = data[virtualRow.index];\n              const rowId = getRowId ? getRowId(row) : virtualRow.index;\n              const isSelected = selectedRows?.has(virtualRow.index);\n\n              return (\n                <tr\n                  key={rowId}\n                  data-index={virtualRow.index}\n                  ref={rowVirtualizer.measureElement}\n                  className={cn(\n                    'border-b border-slate-100 dark:border-slate-800',\n                    'hover:bg-slate-50 dark:hover:bg-slate-800/50',\n                    onRowClick && 'cursor-pointer',\n                    isSelected && 'bg-blue-50 dark:bg-blue-900/20'\n                  )}\n                  style={{\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: '100%',\n                    transform: `translateY(${virtualRow.start}px)`,\n                    height: rowHeight,\n                  }}\n                  onClick={() => onRowClick?.(row, virtualRow.index)}\n                >\n                  {columns.map((column) => {\n                    const value = getValue(row, String(column.key));\n                    return (\n                      <td\n                        key={String(column.key)}\n                        className={cn(\n                          'px-4 py-3 text-sm text-slate-900 dark:text-slate-100',\n                          column.sticky && 'sticky left-0 bg-white dark:bg-slate-900 z-10',\n                          column.align === 'center' && 'text-center',\n                          column.align === 'right' && 'text-right'\n                        )}\n                        style={{\n                          width: column.width,\n                          minWidth: column.minWidth || column.width,\n                          maxWidth: column.maxWidth,\n                        }}\n                      >\n                        {column.render\n                          ? column.render(value, row, virtualRow.index)\n                          : String(value ?? '')}\n                      </td>\n                    );\n                  })}\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Footer with row count */}\n      <div className=\"px-4 py-2 bg-slate-50 dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500\">\n        Showing {data.length.toLocaleString()} rows\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Virtual List (for non-table scenarios)\n// ============================================================================\n\ninterface VirtualListProps<T> {\n  items: T[];\n  renderItem: (item: T, index: number) => React.ReactNode;\n  itemHeight?: number;\n  maxHeight?: number;\n  className?: string;\n}\n\nexport function VirtualList<T>({\n  items,\n  renderItem,\n  itemHeight = 60,\n  maxHeight = 400,\n  className,\n}: VirtualListProps<T>) {\n  const parentRef = useRef<HTMLDivElement>(null);\n\n  const virtualizer = useVirtualizer({\n    count: items.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => itemHeight,\n    overscan: 5,\n  });\n\n  return (\n    <div\n      ref={parentRef}\n      className={cn('overflow-auto', className)}\n      style={{ maxHeight }}\n    >\n      <div\n        style={{\n          height: `${virtualizer.getTotalSize()}px`,\n          width: '100%',\n          position: 'relative',\n        }}\n      >\n        {virtualizer.getVirtualItems().map((virtualItem) => (\n          <div\n            key={virtualItem.key}\n            style={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              width: '100%',\n              height: `${virtualItem.size}px`,\n              transform: `translateY(${virtualItem.start}px)`,\n            }}\n          >\n            {renderItem(items[virtualItem.index], virtualItem.index)}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/AIInsightPanel.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/AIInsightPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_data' is defined but never used.","line":8,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":45}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Sparkles, TrendingUp, AlertTriangle, Info } from 'lucide-react';\n\ninterface AIInsightPanelProps {\n  data?: unknown;  // Reserved for future dynamic insight generation\n  chartType: 'sankey' | 'timeline' | 'graph' | 'heatmap' | 'waterfall' | 'benchmark';\n}\n\nexport function AIInsightPanel({ data: _data, chartType }: AIInsightPanelProps) {\n  // Generate insights based on chart type and data\n  const getInsights = () => {\n    switch (chartType) {\n      case 'sankey':\n        return {\n          title: 'Cash Flow Pattern Analysis',\n          insights: [\n            {\n              type: 'pattern',\n              icon: TrendingUp,\n              text: 'Circular flow detected between 3 entities (Shell Company A  Vendor B  Shell Company A)',\n              confidence: 92,\n              color: 'text-red-500 bg-red-500/10'\n            },\n            {\n              type: 'anomaly',\n              icon: AlertTriangle,\n              text: 'Unusually high transaction velocity: 15 transfers in 48 hours',\n              confidence: 87,\n              color: 'text-orange-500 bg-orange-500/10'\n            },\n            {\n              type: 'recommendation',\n              icon: Sparkles,\n              text: 'Investigate entity relationships for potential kickback scheme',\n              confidence: 85,\n              color: 'text-purple-500 bg-purple-500/10'\n            }\n          ]\n        };\n      \n      case 'timeline':\n        return {\n          title: 'Temporal Pattern Insights',\n          insights: [\n            {\n              type: 'pattern',\n              icon: TrendingUp,\n              text: 'Transaction clustering on weekends and holidays (red flag)',\n              confidence: 90,\n              color: 'text-red-500 bg-red-500/10'\n            },\n            {\n              type: 'insight',\n              icon: Info,\n              text: 'Average transaction gap: 2.3 days (normal range: 5-7 days)',\n              confidence: 75,\n              color: 'text-blue-500 bg-blue-500/10'\n            }\n          ]\n        };\n      \n      case 'graph':\n        return {\n          title: 'Network Analysis & Entity Relationships',\n          insights: [\n            {\n              type: 'anomaly',\n              icon: AlertTriangle,\n              text: '4 entities share the same registered address (shell company indicator)',\n              confidence: 94,\n              color: 'text-red-500 bg-red-500/10'\n            },\n            {\n              type: 'pattern',\n              icon: TrendingUp,\n              text: 'Hub-and-spoke pattern with central entity processing 87% of funds',\n              confidence: 88,\n              color: 'text-orange-500 bg-orange-500/10'\n            }\n          ]\n        };\n      \n      case 'heatmap':\n        return {\n          title: 'Activity Pattern Analysis',\n          insights: [\n            {\n              type: 'pattern',\n              icon: TrendingUp,\n              text: 'Unusual activity spike on Tuesday evenings (18:00-22:00)',\n              confidence: 82,\n              color: 'text-orange-500 bg-orange-500/10'\n            },\n            {\n              type: 'recommendation',\n              icon: Sparkles,\n              text: 'Cross-reference with employee work schedules for after-hours access',\n              confidence: 78,\n              color: 'text-purple-500 bg-purple-500/10'\n            }\n          ]\n        };\n      \n      case 'waterfall':\n        return {\n          title: 'Financial Flow Breakdown',\n          insights: [\n            {\n              type: 'anomaly',\n              icon: AlertTriangle,\n              text: 'Unexplained $127K discrepancy in cash reconciliation',\n              confidence: 96,\n              color: 'text-red-500 bg-red-500/10'\n            },\n            {\n              type: 'insight',\n              icon: Info,\n              text: 'Total exposure: $847K across 23 transactions',\n              confidence: 100,\n              color: 'text-blue-500 bg-blue-500/10'\n            }\n          ]\n        };\n      \n      case 'benchmark':\n        return {\n          title: 'Peer Benchmark Comparison',\n          insights: [\n            {\n              type: 'anomaly',\n              icon: AlertTriangle,\n              text: 'Transaction ratio 340% above industry peer average (major outlier)',\n              confidence: 91,\n              color: 'text-red-500 bg-red-500/10'\n            },\n            {\n              type: 'recommendation',\n              icon: Sparkles,\n              text: 'Request detailed justification for volume variance',\n              confidence: 85,\n              color: 'text-purple-500 bg-purple-500/10'\n            }\n          ]\n        };\n      \n      default:\n        return {\n          title: 'AI Insights',\n          insights: [\n            {\n              type: 'insight',\n              icon: Info,\n              text: 'No specific anomalies detected in current view',\n              confidence: 70,\n              color: 'text-blue-500 bg-blue-500/10'\n            }\n          ]\n        };\n    }\n  };\n\n  const { title, insights } = getInsights();\n\n  return (\n    <div className=\"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <Sparkles className=\"w-5 h-5 text-purple-500\" />\n        <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white\">\n          {title}\n        </h3>\n      </div>\n\n      <div className=\"space-y-3\">\n        {insights.map((insight, idx) => {\n          const Icon = insight.icon;\n          return (\n            <div\n              key={idx}\n              className={`p-4 rounded-lg border ${insight.color.split(' ')[1]} ${insight.color.split(' ')[0].replace('text-', 'border-')}/20`}\n            >\n              <div className=\"flex items-start gap-3\">\n                <Icon className={`w-5 h-5 ${insight.color.split(' ')[0]} shrink-0 mt-0.5`} />\n                <div className=\"flex-1\">\n                  <p className=\"text-sm text-slate-700 dark:text-slate-300 mb-2\">\n                    {insight.text}\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-1.5\">\n                      <div\n                        className={`h-1.5 rounded-full ${insight.color.split(' ')[0].replace('text-', 'bg-')}`}\n                        style={{ width: `${insight.confidence}%` }}\n                      />\n                    </div>\n                    <span className=\"text-xs font-medium text-slate-500 dark:text-slate-400\">\n                      {insight.confidence}% confidence\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      <div className=\"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700\">\n        <button className=\"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium\">\n          View Detailed Analysis \n        </button>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/ActivityHeatmap.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/ActivityHeatmap.tsx:46:32\n  44 |\n  45 | export function ActivityHeatmap({ title = 'Activity Heatmap', data = [], onExport }: ActivityHeatmapProps) {\n> 46 |   const heatmapId = `heatmap-${Math.random().toString(36).slice(2, 8)}`;\n     |                                ^^^^^^^^^^^^^ Cannot call impure function\n  47 |   const width = 80 + HOURS.length * CELL;\n  48 |   const height = 40 + DAYS.length * CELL;\n  49 |   const [tooltip, setTooltip] = useState<TooltipState>({ show: false, day: '', hour: 0, value: 0 });","line":46,"column":32,"nodeType":null,"endLine":46,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":94,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":43}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { useState } from 'react';\nimport { Button } from '../ui/Button';\n\ninterface HeatCell {\n  day: string;\n  hour: number;\n  value: number;\n}\n\ninterface ActivityHeatmapProps {\n  title?: string;\n  data?: HeatCell[];\n  onExport?: (id: string) => void;\n  fitToContainer?: boolean;\n}\n\ninterface TooltipState {\n  show: boolean;\n  day: string;\n  hour: number;\n  value: number;\n}\n\nconst DAYS = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\nconst HOURS = [0, 4, 8, 12, 16, 20];\nconst CELL = 38;\n\nfunction cellColor(value: number): string {\n  if (value === 0) return '#f8fafc';\n  if (value < 4) return '#bfdbfe';\n  if (value < 8) return '#60a5fa';\n  if (value < 11) return '#2563eb';\n  return '#1d4ed8';\n}\n\nfunction legendColorClass(value: number): string {\n  if (value === 0) return 'bg-slate-50';\n  if (value < 4) return 'bg-blue-200';\n  if (value < 8) return 'bg-blue-400';\n  if (value < 11) return 'bg-blue-700';\n  return 'bg-blue-800';\n}\n\nexport function ActivityHeatmap({ title = 'Activity Heatmap', data = [], onExport }: ActivityHeatmapProps) {\n  const heatmapId = `heatmap-${Math.random().toString(36).slice(2, 8)}`;\n  const width = 80 + HOURS.length * CELL;\n  const height = 40 + DAYS.length * CELL;\n  const [tooltip, setTooltip] = useState<TooltipState>({ show: false, day: '', hour: 0, value: 0 });\n\n  return (\n    <Card>\n      <CardHeader className=\"flex items-center justify-between\">\n        <CardTitle className=\"text-lg\">{title}</CardTitle>\n        {onExport && (\n          <Button size=\"sm\" variant=\"outline\" onClick={() => onExport(heatmapId)}>\n            Export SVG/PNG\n          </Button>\n        )}\n      </CardHeader>\n      <CardContent>\n        <div className=\"overflow-x-auto\">\n          <svg id={heatmapId} width={width} height={height} role=\"img\">\n            <g transform=\"translate(60,20)\">\n              {HOURS.map((hour, idx) => (\n                <text\n                  key={`h-${hour}`}\n                  x={idx * CELL + CELL / 2}\n                  y={-6}\n                  textAnchor=\"middle\"\n                  fontSize={11}\n                  fill=\"#475569\"\n                >\n                  {hour}:00\n                </text>\n              ))}\n\n              {DAYS.map((day, row) => (\n                <g key={day} transform={`translate(0, ${row * CELL})`}>\n                  <text x={-12} y={CELL / 2} textAnchor=\"end\" alignmentBaseline=\"middle\" fontSize={12} fill=\"#0f172a\">\n                    {day}\n                  </text>\n                  {HOURS.map((hour, col) => {\n                    const cell = data.find((d) => d.day === day && d.hour === hour);\n                    const value = cell?.value ?? 0;\n                    return (\n                      <g key={`${day}-${hour}`} transform={`translate(${col * CELL}, 0)`}>\n                        <rect\n                          width={CELL - 6}\n                          height={CELL - 6}\n                          rx={6}\n                          ry={6}\n                          fill={cellColor(value)}\n                          onMouseEnter={(e) => {\n                            setTooltip({\n                              show: true,\n                              day,\n                              hour,\n                              value\n                            });\n                          }}\n                          onMouseLeave={() => setTooltip({ ...tooltip, show: false })}\n                          className=\"cursor-pointer\"\n                        />\n                        {value > 0 && (\n                          <text\n                            x={(CELL - 6) / 2}\n                            y={(CELL - 6) / 2 + 4}\n                            textAnchor=\"middle\"\n                            fontSize={11}\n                            fill=\"#ffffff\"\n                          >\n                            {value}\n                          </text>\n                        )}\n                      </g>\n                    );\n                  })}\n                </g>\n              ))}\n            </g>\n          </svg>\n        </div>\n\n        {/* Legend */}\n        <div className=\"mt-4 flex items-center justify-between text-sm\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-slate-600\">Less</span>\n            <div className=\"flex gap-1\">\n              {[0, 4, 8, 12].map(level => (\n                <div\n                  key={level}\n                  className={`w-4 h-4 rounded ${legendColorClass(level)}`}\n                />\n              ))}\n            </div>\n            <span className=\"text-slate-600\">More</span>\n          </div>\n          <div className=\"text-slate-500\">Activity intensity</div>\n        </div>\n\n        {/* Tooltip */}\n        {tooltip.show && (\n          <div\n            className=\"mt-3 inline-block rounded-lg bg-slate-900 px-3 py-2 text-sm text-white shadow-lg\"\n          >\n            <div className=\"font-medium\">{tooltip.day}, {tooltip.hour}:00</div>\n            <div>Activity: {tooltip.value} transactions</div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default ActivityHeatmap;\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/BankStatementPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/CashflowChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/ExpenseCategoryPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/ForceDirectedGraph.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fitToContainer' is defined but never used.","line":58,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'nodes' conditional could make the dependencies of useEffect Hook (at line 206) change on every render. Move it inside the useEffect callback. Alternatively, wrap the initialization of 'nodes' in its own useMemo() Hook.","line":62,"column":9,"nodeType":"VariableDeclarator","endLine":64,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'links' conditional could make the dependencies of useEffect Hook (at line 206) change on every render. Move it inside the useEffect callback. Alternatively, wrap the initialization of 'links' in its own useMemo() Hook.","line":66,"column":9,"nodeType":"VariableDeclarator","endLine":68,"endColumn":22},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/ForceDirectedGraph.tsx:72:48\n  70 |   const simulationRef = useRef<d3.Simulation<NodeDatum, LinkDatum> | null>(null);\n  71 |   const [isRunning, setIsRunning] = useState(true);\n> 72 |   const graphId = useMemo(() => `force-graph-${Math.random().toString(36).slice(2, 8)}`, []);\n     |                                                ^^^^^^^^^^^^^ Cannot call impure function\n  73 |\n  74 |   const stabilizeLayout = () => {\n  75 |     if (simulationRef.current) {","line":72,"column":48,"nodeType":null,"endLine":72,"endColumn":61}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useMemo, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\n\ninterface NodeDatum extends d3.SimulationNodeDatum {\n  id: string;\n  label: string;\n  group: number;\n}\n\ninterface LinkDatum extends d3.SimulationLinkDatum<NodeDatum> {\n  source: string | NodeDatum;\n  target: string | NodeDatum;\n  value: number;\n}\n\ninterface GraphData {\n  nodes: Array<{\n    id: string;\n    name: string;\n    group: number;\n    value?: number;\n    color?: string;\n  }>;\n  links: Array<{\n    source: string;\n    target: string;\n    value?: number;\n    type?: string;\n  }>;\n}\n\ninterface ForceDirectedGraphProps {\n  title?: string;\n  data?: GraphData;\n  nodes?: NodeDatum[];\n  links?: LinkDatum[];\n  height?: number;\n  onExport?: (id: string) => void;\n  highlightedNodes?: string[];\n  highlightedLinks?: Array<{ source: string; target: string }>;\n  isRunningExternal?: boolean;\n  fitToContainer?: boolean;\n  onReset?: () => void;\n}\n\nexport function ForceDirectedGraph({\n  title = 'Force-Directed Graph',\n  data,\n  nodes: propNodes,\n  links: propLinks,\n  height = 360,\n  onExport,\n  highlightedNodes,\n  highlightedLinks,\n  isRunningExternal,\n  fitToContainer,\n  onReset,\n}: ForceDirectedGraphProps) {\n  // Use data prop if provided, otherwise fall back to individual props\n  const nodes = data\n    ? data.nodes.map((n) => ({ id: n.id, label: n.name, group: n.group, value: n.value }))\n    : propNodes || [];\n\n  const links = data\n    ? data.links.map((l) => ({ source: l.source, target: l.target, value: l.value || 1 }))\n    : propLinks || [];\n  const svgRef = useRef<SVGSVGElement | null>(null);\n  const simulationRef = useRef<d3.Simulation<NodeDatum, LinkDatum> | null>(null);\n  const [isRunning, setIsRunning] = useState(true);\n  const graphId = useMemo(() => `force-graph-${Math.random().toString(36).slice(2, 8)}`, []);\n\n  const stabilizeLayout = () => {\n    if (simulationRef.current) {\n      simulationRef.current.alpha(0.05);\n      simulationRef.current.stop();\n    }\n  };\n\n  const resetView = () => {\n    setHighlightNodesLocal([]);\n    setHighlightLinksLocal([]);\n    setIsRunning(true);\n    simulationRef.current?.alpha(0.9).restart();\n    onReset?.();\n  };\n\n  // Local mirrors for reset button to clear transient highlights when not controlled externally\n  const [highlightNodesLocal, setHighlightNodesLocal] = useState<string[]>([]);\n  const [highlightLinksLocal, setHighlightLinksLocal] = useState<Array<{ source: string; target: string }>>([]);\n\n  useEffect(() => {\n    setHighlightNodesLocal(highlightedNodes || []);\n    setHighlightLinksLocal(highlightedLinks || []);\n  }, [highlightedNodes, highlightedLinks]);\n\n  useEffect(() => {\n    if (!svgRef.current) return;\n\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    const width = svgRef.current.clientWidth || 640;\n\n    const highlightNodeSet = new Set(highlightNodesLocal || []);\n    const highlightLinkSet = new Set(\n      (highlightLinksLocal || []).map((l) => `${l.source}::${l.target}`)\n    );\n\n    const getLinkKey = (d: LinkDatum) => {\n      const s = typeof d.source === 'string' ? d.source : d.source.id;\n      const t = typeof d.target === 'string' ? d.target : d.target.id;\n      return `${s}::${t}`;\n    };\n\n    const isLinkHighlighted = (d: LinkDatum) => {\n      const key = getLinkKey(d);\n      const revKey = key.split('::').reverse().join('::');\n      return highlightLinkSet.has(key) || highlightLinkSet.has(revKey);\n    };\n\n    const simulation = d3\n      .forceSimulation<NodeDatum>(nodes.map(n => ({ ...n })))\n      .force('link', d3.forceLink<NodeDatum, LinkDatum>(links).id((d) => d.id).distance(120))\n      .force('charge', d3.forceManyBody().strength(-160))\n      .force('center', d3.forceCenter(width / 2, height / 2))\n      .force('collision', d3.forceCollide(40));\n\n    simulationRef.current = simulation;\n\n    const link = svg\n      .append('g')\n      .attr('stroke', '#cbd5e1')\n      .attr('stroke-opacity', 0.6)\n      .selectAll('line')\n      .data(simulation.force<d3.ForceLink<NodeDatum, LinkDatum>>('link')?.links() || [])\n      .join('line')\n      .attr('stroke-width', (d) => Math.max(1, Math.sqrt(d.value || 1)))\n      .attr('stroke', (d) => (isLinkHighlighted(d) ? '#f97316' : '#cbd5e1'))\n      .attr('stroke-opacity', (d) => (isLinkHighlighted(d) ? 0.95 : 0.6));\n\n    const color = d3.scaleOrdinal(d3.schemeTableau10);\n\n    const node = svg\n      .append('g')\n      .attr('stroke', '#fff')\n      .attr('stroke-width', 1.5)\n      .selectAll('circle')\n      .data(simulation.nodes())\n      .join('circle')\n      .attr('r', (d) => (highlightNodeSet.has(d.id) ? 18 : 16))\n      .attr('fill', (d) =>\n        highlightNodeSet.has(d.id) ? '#f97316' : (color(String(d.group)) as string)\n      )\n      .call(\n        d3\n          .drag<SVGCircleElement, NodeDatum>()\n          .on('start', (event, d) => {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            d.fx = d.x;\n            d.fy = d.y;\n          })\n          .on('drag', (event, d) => {\n            d.fx = event.x;\n            d.fy = event.y;\n          })\n          .on('end', (event, d) => {\n            if (!event.active) simulation.alphaTarget(0);\n            d.fx = null;\n            d.fy = null;\n          })\n      );\n\n    const labels = svg\n      .append('g')\n      .selectAll('text')\n      .data(simulation.nodes())\n      .join('text')\n      .text((d) => d.label)\n      .attr('font-size', 11)\n      .attr('fill', (d) => (highlightNodeSet.has(d.id) ? '#0f172a' : '#0f172a'))\n      .attr('text-anchor', 'middle')\n      .attr('dy', 30);\n\n    simulation.on('tick', () => {\n      link\n        .attr('x1', (d) => (d.source as NodeDatum).x as number)\n        .attr('y1', (d) => (d.source as NodeDatum).y as number)\n        .attr('x2', (d) => (d.target as NodeDatum).x as number)\n        .attr('y2', (d) => (d.target as NodeDatum).y as number);\n\n      node\n        .attr('cx', (d) => d.x as number)\n        .attr('cy', (d) => d.y as number);\n\n      labels\n        .attr('x', (d) => d.x as number)\n        .attr('y', (d) => d.y as number);\n    });\n\n    return () => {\n      simulation.stop();\n      simulationRef.current = null;\n    };\n  }, [nodes, links, height, highlightNodesLocal, highlightLinksLocal]);\n\n  useEffect(() => {\n    const running = typeof isRunningExternal === 'boolean' ? isRunningExternal : isRunning;\n\n    if (!svgRef.current) return;\n    if (running) {\n      d3.select(svgRef.current).transition().duration(150).style('opacity', 1);\n      if (simulationRef.current) {\n        simulationRef.current.alpha(0.8).restart();\n      }\n    } else {\n      d3.select(svgRef.current).transition().duration(150).style('opacity', 0.45);\n      simulationRef.current?.stop();\n    }\n  }, [isRunning, isRunningExternal]);\n\n  return (\n    <Card>\n      <CardHeader className=\"flex items-center justify-between\">\n        <CardTitle className=\"text-lg\">{title}</CardTitle>\n        <div className=\"flex gap-2\">\n          {typeof isRunningExternal !== 'boolean' && (\n            <Button size=\"sm\" variant=\"outline\" onClick={() => setIsRunning((prev) => !prev)}>\n              {isRunning ? 'Pause' : 'Resume'}\n            </Button>\n          )}\n          <Button size=\"sm\" variant=\"outline\" onClick={stabilizeLayout}>\n            Stabilize layout\n          </Button>\n          <Button size=\"sm\" variant=\"outline\" onClick={resetView}>\n            Reset view\n          </Button>\n          {onExport && (\n            <Button size=\"sm\" variant=\"outline\" onClick={() => onExport(graphId)}>\n              Export SVG/PNG\n            </Button>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent>\n        <svg ref={svgRef} id={graphId} role=\"img\" width=\"100%\" height={height} />\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default ForceDirectedGraph;\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/FraudDetectionPanel.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":59,"column":21,"nodeType":"Identifier","endLine":59,"endColumn":28},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":68,"column":32,"nodeType":"Identifier","endLine":68,"endColumn":39},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":80,"column":23,"nodeType":"Identifier","endLine":80,"endColumn":30}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo } from 'react';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  Cell,\n  PieChart,\n  Pie,\n  Legend\n} from 'recharts';\nimport { AlertTriangle, TrendingUp, Shield, Brain } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\ninterface FraudIndicator {\n  id: string;\n  type: string;\n  severity: 'high' | 'medium' | 'low';\n  description: string;\n  amount: number;\n  count: number;\n  trend: 'up' | 'down' | 'stable';\n}\n\ninterface FraudDetectionPanelProps {\n  indicators?: FraudIndicator[];\n  riskScore?: number;\n}\n\nconst SEVERITY_COLORS = {\n  high: '#ef4444',\n  medium: '#f59e0b',\n  low: '#3b82f6'\n};\n\nconst formatCurrency = (value: number) => `$${(value / 1000).toFixed(0)}K`;\n\nexport function FraudDetectionPanel({ indicators = [], riskScore = 0 }: FraudDetectionPanelProps) {\n  // Empty state\n  if (!indicators || indicators.length === 0) {\n    return (\n      <div className=\"py-12 text-center space-y-6\">\n        <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/10 rounded-xl p-8 max-w-md mx-auto\">\n          <Shield className=\"h-16 w-16 text-green-500 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-green-700 dark:text-green-300 mb-2\">\n            No Fraud Indicators Detected\n          </h3>\n          <p className=\"text-sm text-green-600/80 dark:text-green-400/80\">\n            This case appears clean based on current transaction patterns\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  const chartData = useMemo(() => \n    indicators.map(i => ({\n      name: i.type,\n      amount: i.amount,\n      count: i.count,\n      severity: i.severity\n    }))\n  , [indicators]);\n\n  const severityDistribution = useMemo(() => {\n    const dist = { high: 0, medium: 0, low: 0 };\n    indicators.forEach(i => {\n      dist[i.severity] += i.amount;\n    });\n    return [\n      { name: 'High Risk', value: dist.high, color: SEVERITY_COLORS.high },\n      { name: 'Medium Risk', value: dist.medium, color: SEVERITY_COLORS.medium },\n      { name: 'Low Risk', value: dist.low, color: SEVERITY_COLORS.low }\n    ];\n  }, [indicators]);\n\n  const totalAmount = useMemo(() => \n    indicators.reduce((sum, i) => sum + i.amount, 0)\n  , [indicators]);\n\n  const getRiskLevel = (score: number) => {\n    if (score >= 70) return { label: 'High Risk', color: 'text-red-500', bg: 'bg-red-500' };\n    if (score >= 40) return { label: 'Medium Risk', color: 'text-amber-500', bg: 'bg-amber-500' };\n    return { label: 'Low Risk', color: 'text-green-500', bg: 'bg-green-500' };\n  };\n\n  const risk = getRiskLevel(riskScore);\n\n  return (\n    <div className=\"space-y-6\">\n       {/* Risk Score Header */}\n       <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n         <motion.div\n           initial={{ scale: 0.9, opacity: 0 }}\n           animate={{ scale: 1, opacity: 1 }}\n           className=\"bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-6 text-white\"\n         >\n           <div className=\"flex items-center justify-between mb-4\">\n             <div className=\"flex items-center gap-2\">\n               <Shield className=\"h-8 w-8 text-slate-400\" />\n               <Brain className=\"h-5 w-5 text-blue-400\" />\n             </div>\n             <span className={`px-3 py-1 rounded-full text-sm font-medium ${risk.bg}`}>\n               {risk.label}\n             </span>\n           </div>\n          <div className=\"text-5xl font-bold mb-2\">{riskScore}</div>\n           <p className=\"text-slate-400 text-sm\">AI-Calculated Risk Score</p>\n          <div className=\"mt-4 h-2 bg-slate-700 rounded-full overflow-hidden\">\n            <motion.div\n              initial={{ width: 0 }}\n              animate={{ width: `${riskScore}%` }}\n              transition={{ duration: 1, ease: 'easeOut' }}\n              className={risk.bg}\n              style={{ height: '100%' }}\n            />\n          </div>\n        </motion.div>\n\n        <div className=\"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <AlertTriangle className=\"h-5 w-5 text-red-500\" />\n            <span className=\"font-semibold\">Flagged Amount</span>\n          </div>\n          <div className=\"text-3xl font-bold text-red-600\">\n            ${totalAmount.toLocaleString()}\n          </div>\n          <p className=\"text-slate-500 text-sm mt-1\">\n            Across {indicators.length} indicator types\n          </p>\n        </div>\n\n        <div className=\"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <TrendingUp className=\"h-5 w-5 text-amber-500\" />\n            <span className=\"font-semibold\">Alert Trend</span>\n          </div>\n          <div className=\"text-3xl font-bold text-amber-600\">\n            +{indicators.filter(i => i.trend === 'up').length}\n          </div>\n          <p className=\"text-slate-500 text-sm mt-1\">\n            Indicators trending up this period\n          </p>\n        </div>\n      </div>\n\n      {/* Charts Row */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Bar Chart */}\n        <div className=\"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800\">\n          <h3 className=\"font-semibold mb-4\">Flagged Amount by Type</h3>\n          <ResponsiveContainer width=\"100%\" height={250}>\n            <BarChart data={chartData} layout=\"vertical\" margin={{ left: 80 }}>\n              <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-slate-200 dark:stroke-slate-700\" />\n              <XAxis type=\"number\" tickFormatter={formatCurrency} />\n              <YAxis type=\"category\" dataKey=\"name\" tick={{ fontSize: 12 }} />\n              <Tooltip \n                formatter={(value: number) => [`$${value.toLocaleString()}`, 'Amount']}\n                contentStyle={{ \n                  backgroundColor: 'var(--tooltip-bg, #fff)', \n                  border: '1px solid var(--tooltip-border, #e2e8f0)' \n                }}\n              />\n              <Bar dataKey=\"amount\" radius={[0, 4, 4, 0]}>\n                {chartData.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={SEVERITY_COLORS[entry.severity]} />\n                ))}\n              </Bar>\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n\n        {/* Pie Chart */}\n        <div className=\"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800\">\n          <h3 className=\"font-semibold mb-4\">Risk Distribution</h3>\n          <ResponsiveContainer width=\"100%\" height={250}>\n            <PieChart>\n              <Pie\n                data={severityDistribution}\n                cx=\"50%\"\n                cy=\"50%\"\n                innerRadius={60}\n                outerRadius={90}\n                paddingAngle={5}\n                dataKey=\"value\"\n              >\n                {severityDistribution.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={entry.color} />\n                ))}\n              </Pie>\n              <Tooltip formatter={(value: number) => `$${value.toLocaleString()}`} />\n              <Legend />\n            </PieChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n\n      {/* Indicator List */}\n      <div className=\"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden\">\n        <div className=\"p-4 border-b border-slate-200 dark:border-slate-800\">\n          <h3 className=\"font-semibold\">Fraud Indicators Detail</h3>\n        </div>\n        <div className=\"divide-y divide-slate-200 dark:divide-slate-800\">\n          {indicators.map((indicator) => (\n            <motion.div\n              key={indicator.id}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              className=\"p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors\"\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className={`h-3 w-3 rounded-full`} style={{ backgroundColor: SEVERITY_COLORS[indicator.severity] }} />\n                  <div>\n                    <p className=\"font-medium\">{indicator.type}</p>\n                    <p className=\"text-sm text-slate-500\">{indicator.description}</p>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"font-bold\">${indicator.amount.toLocaleString()}</p>\n                  <p className=\"text-sm text-slate-500\">{indicator.count} occurrences</p>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/GraphTools.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/MilestoneTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/PeerBenchmarkChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/PhaseControlPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/SankeyFlow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_fitToContainer' is defined but never used.","line":40,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":34},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/SankeyFlow.tsx:50:29\n  48 |     color: link.color\n  49 |   })) : (propLinks || []);\n> 50 |   const chartId = `sankey-${Math.random().toString(36).slice(2, 8)}`;\n     |                             ^^^^^^^^^^^^^ Cannot call impure function\n  51 |\n  52 |   return (\n  53 |     <Card>","line":50,"column":29,"nodeType":null,"endLine":50,"endColumn":42}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Sankey, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Button } from '../ui/Button';\n\ninterface SankeyNode {\n  id: string;\n  name: string;\n  color?: string;\n}\n\ninterface SankeyLink {\n  source: string | number;\n  target: string | number;\n  value: number;\n  color?: string;\n}\n\ninterface SankeyData {\n  nodes: SankeyNode[];\n  links: SankeyLink[];\n}\n\ninterface SankeyFlowProps {\n  title?: string;\n  data?: SankeyData;\n  nodes?: SankeyNode[];\n  links?: SankeyLink[];\n  height?: number;\n  onExport?: (id: string) => void;\n  fitToContainer?: boolean;\n}\n\nexport function SankeyFlow({\n  title = 'Financial Flow (Sankey)',\n  data,\n  nodes: propNodes,\n  links: propLinks,\n  height = 360,\n  onExport,\n  fitToContainer: _fitToContainer,\n}: SankeyFlowProps) {\n  // Use data prop if provided, otherwise fall back to individual props\n  const nodes = data ? data.nodes : (propNodes || []);\n  const links = data ? data.links.map(link => ({\n    source: typeof link.source === 'string' ? nodes.findIndex(n => n.id === link.source) : link.source,\n    target: typeof link.target === 'string' ? nodes.findIndex(n => n.id === link.target) : link.target,\n    value: link.value,\n    color: link.color\n  })) : (propLinks || []);\n  const chartId = `sankey-${Math.random().toString(36).slice(2, 8)}`;\n\n  return (\n    <Card>\n      <CardHeader className=\"flex items-center justify-between\">\n        <CardTitle className=\"text-lg\">{title}</CardTitle>\n        {onExport && (\n          <Button size=\"sm\" variant=\"outline\" onClick={() => onExport(chartId)}>\n            Export SVG/PNG\n          </Button>\n        )}\n      </CardHeader>\n      <CardContent>\n        {nodes.length === 0 || links.length === 0 ? (\n          <div className=\"h-96 flex items-center justify-center text-slate-500\">\n            <div className=\"text-center\">\n              <div className=\"text-4xl mb-2\"></div>\n              <p>No financial flow data available</p>\n              <p className=\"text-sm\">Transaction data will appear here</p>\n            </div>\n          </div>\n        ) : (\n          <ResponsiveContainer width=\"100%\" height={height}>\n            <Sankey\n              data={{ nodes, links }}\n              nodePadding={18}\n              margin={{ left: 10, right: 10, top: 10, bottom: 10 }}\n              linkCurvature={0.5}\n            >\n              <Tooltip\n                formatter={(value: number, name: string) => [\n                  `$${value.toLocaleString()}`,\n                  name\n                ]}\n                labelFormatter={(label) => `Flow: ${label}`}\n              />\n              <Legend />\n            </Sankey>\n          </ResponsiveContainer>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default SankeyFlow;\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/TimelineZoom.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'entityType'. Either exclude it or remove the dependency array.","line":64,"column":6,"nodeType":"ArrayExpression","endLine":64,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [data, timeRange]","fix":{"range":[1671,1700],"text":"[data, timeRange]"}}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/TimelineZoom.tsx:69:22\n  67 |   const defaultEvents = useMemo(() => {\n  68 |     return Array.from({ length: 30 }, (_, i) => ({\n> 69 |       date: new Date(Date.now() - (30 - i) * 24 * 3600000).toLocaleDateString('en-US', {\n     |                      ^^^^^^^^^^ Cannot call impure function\n  70 |         month: 'short',\n  71 |         day: 'numeric',\n  72 |       }),","line":69,"column":22,"nodeType":null,"endLine":69,"endColumn":32},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/TimelineZoom.tsx:73:70\n  71 |         day: 'numeric',\n  72 |       }),\n> 73 |       event: ['Deposit', 'Withdrawal', 'Transfer', 'Fee'][Math.floor(Math.random() * 4)],\n     |                                                                      ^^^^^^^^^^^^^ Cannot call impure function\n  74 |       amount: Math.floor(Math.random() * 100000) + 10000,\n  75 |       category: ['operating', 'vendor', 'dispute'][Math.floor(Math.random() * 3)],\n  76 |     }));","line":73,"column":70,"nodeType":null,"endLine":73,"endColumn":83},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/TimelineZoom.tsx:74:26\n  72 |       }),\n  73 |       event: ['Deposit', 'Withdrawal', 'Transfer', 'Fee'][Math.floor(Math.random() * 4)],\n> 74 |       amount: Math.floor(Math.random() * 100000) + 10000,\n     |                          ^^^^^^^^^^^^^ Cannot call impure function\n  75 |       category: ['operating', 'vendor', 'dispute'][Math.floor(Math.random() * 3)],\n  76 |     }));\n  77 |   }, []);","line":74,"column":26,"nodeType":null,"endLine":74,"endColumn":39},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/TimelineZoom.tsx:75:63\n  73 |       event: ['Deposit', 'Withdrawal', 'Transfer', 'Fee'][Math.floor(Math.random() * 4)],\n  74 |       amount: Math.floor(Math.random() * 100000) + 10000,\n> 75 |       category: ['operating', 'vendor', 'dispute'][Math.floor(Math.random() * 3)],\n     |                                                               ^^^^^^^^^^^^^ Cannot call impure function\n  76 |     }));\n  77 |   }, []);\n  78 |","line":75,"column":63,"nodeType":null,"endLine":75,"endColumn":76},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":160,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5319,5322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5319,5322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { ZoomIn, ZoomOut, Filter } from 'lucide-react';\nimport {\n  ComposedChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n} from 'recharts';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\n\ninterface TimelineEvent {\n  date: string;\n  event: string;\n  amount: number;\n  category: string;\n}\n\ninterface CashflowData {\n  date: string;\n  inflow: number;\n  outflow: number;\n  balance: number;\n}\n\ninterface TimelineFilters {\n  timeRange: string;\n  entityType: string;\n}\n\ninterface TimelineZoomProps {\n  data?: CashflowData[];\n  filters?: TimelineFilters;\n  events?: TimelineEvent[];\n  isLoading?: boolean;\n}\n\nexport function TimelineZoom({ data, filters, isLoading = false }: TimelineZoomProps) {\n  const [timeRange, setTimeRange] = useState(filters?.timeRange || '30d');\n  const [entityType, setEntityType] = useState(filters?.entityType || 'all');\n\n  const events = useMemo(() => {\n    let filteredData = data || [];\n\n    // Apply time range filter\n    if (timeRange !== 'all') {\n      const days = timeRange === '7d' ? 7 : timeRange === '30d' ? 30 : 90;\n      const cutoff = new Date();\n      cutoff.setDate(cutoff.getDate() - days);\n      filteredData = filteredData.filter(flow => new Date(flow.date) >= cutoff);\n    }\n\n    // Apply entity type filter (for future use)\n    // Currently all data is included\n\n    return filteredData?.map(flow => ({\n      date: flow.date,\n      event: `Net: $${(flow.inflow - flow.outflow).toFixed(2)}`,\n      amount: flow.inflow - flow.outflow,\n      category: (flow.inflow - flow.outflow) >= 0 ? 'inflow' : 'outflow'\n    })) || [];\n  }, [data, timeRange, entityType]);\n  const [zoomLevel, setZoomLevel] = useState(1);\n\n  const defaultEvents = useMemo(() => {\n    return Array.from({ length: 30 }, (_, i) => ({\n      date: new Date(Date.now() - (30 - i) * 24 * 3600000).toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n      }),\n      event: ['Deposit', 'Withdrawal', 'Transfer', 'Fee'][Math.floor(Math.random() * 4)],\n      amount: Math.floor(Math.random() * 100000) + 10000,\n      category: ['operating', 'vendor', 'dispute'][Math.floor(Math.random() * 3)],\n    }));\n  }, []);\n\n  const chartData = events.length > 0 ? events : defaultEvents;\n  // const displayedData = data.slice(Math.floor(data.length * (1 - 1 / zoomLevel)));\n\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>Timeline with Zoom</CardTitle>\n        </CardHeader>\n        <CardContent className=\"h-80 flex items-center justify-center\">\n          <div className=\"text-slate-500\">Loading timeline...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle>Transaction Timeline</CardTitle>\n          <div className=\"flex items-center gap-4\">\n            {/* Filters */}\n            <div className=\"flex items-center gap-2 text-sm\">\n              <Filter className=\"h-4 w-4 text-slate-500\" />\n              <select\n                value={timeRange}\n                onChange={(e) => setTimeRange(e.target.value)}\n                className=\"px-2 py-1 border border-slate-200 rounded text-xs\"\n              >\n                <option value=\"7d\">Last 7 days</option>\n                <option value=\"30d\">Last 30 days</option>\n                <option value=\"90d\">Last 90 days</option>\n                <option value=\"all\">All time</option>\n              </select>\n              <select\n                value={entityType}\n                onChange={(e) => setEntityType(e.target.value)}\n                className=\"px-2 py-1 border border-slate-200 rounded text-xs\"\n              >\n                <option value=\"all\">All Types</option>\n                <option value=\"inflow\">Inflows</option>\n                <option value=\"outflow\">Outflows</option>\n              </select>\n            </div>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setZoomLevel(Math.max(1, zoomLevel - 0.5))}\n                className=\"p-1 hover:bg-slate-100 rounded\"\n              >\n                <ZoomOut className=\"w-4 h-4\" />\n              </button>\n              <span className=\"text-sm text-slate-600 px-2 py-1\">{zoomLevel.toFixed(1)}x</span>\n              <button\n                onClick={() => setZoomLevel(Math.min(4, zoomLevel + 0.5))}\n                className=\"p-1 hover:bg-slate-100 rounded\"\n              >\n                <ZoomIn className=\"w-4 h-4\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={250}>\n          <ComposedChart\n            data={chartData}\n            margin={{ top: 20, right: 30, left: 0, bottom: 50 }}\n          >\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-slate-200\" />\n            <XAxis\n              dataKey=\"date\"\n              angle={-45}\n              textAnchor=\"end\"\n              height={100}\n              className=\"text-xs\"\n            />\n            <YAxis className=\"text-xs\" />\n            <Tooltip\n              contentStyle={{ backgroundColor: '#f8fafc', border: '1px solid #e2e8f0' }}\n              formatter={(value: any) => `$${(value as number).toLocaleString()}`}\n            />\n            <Bar dataKey=\"amount\" fill=\"#3b82f6\" name=\"Amount\" />\n          </ComposedChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/VisualizationDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/VisualizationNetwork.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1361,1364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1361,1364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport { Share2, TrendingUp, Calendar, AlertTriangle } from 'lucide-react';\nimport { ForceDirectedGraph } from './ForceDirectedGraph';\nimport { SankeyFlow } from './SankeyFlow';\nimport { TimelineZoom } from './TimelineZoom';\nimport { ActivityHeatmap } from './ActivityHeatmap';\nimport { GraphTools } from './GraphTools';\nimport { api } from '../../lib/api';\nimport { exportBoth } from '../../lib/svgExport';\n\n// --- Types ---\ninterface GraphNode {\n  data: {\n    id: string;\n    label: string;\n    type: string;\n    risk_score?: number;\n  };\n}\n\ninterface GraphEdge {\n  data: {\n    source: string;\n    target: string;\n    weight?: number;\n    id?: string;\n    type?: string;\n  };\n}\n\nexport interface GraphData {\n  elements: {\n    nodes: GraphNode[];\n    edges: GraphEdge[];\n  };\n}\n\nexport interface FinancialData {\n  cashflow_data: Array<{\n    date: string;\n    inflow: number;\n    outflow: number;\n    balance: number;\n  }>;\n}\n\ninterface SankeyNode {\n  id: string;\n  name: string;\n  color?: string;\n}\n\ninterface SankeyLink {\n  source: string;\n  target: string;\n  value: number;\n  color?: string;\n}\n\ninterface SankeyData {\n  nodes: SankeyNode[];\n  links: SankeyLink[];\n}\n\ninterface HeatmapData {\n  day: string;\n  hour: number;\n  value: number;\n  intensity: number;\n}\n\n// --- Utils ---\nconst parsePathResponse = (result: any): string[] => {\n  const candidate = result?.path ?? result?.data?.path ?? result?.data?.shortest_path;\n  if (Array.isArray(candidate)) return candidate.map((id) => String(id));\n  return [];\n};\n\ninterface VisualizationNetworkProps {\n  graphData?: GraphData;\n  financialData?: FinancialData;\n  isLoading?: boolean;\n}\n\nexport function VisualizationNetwork({ graphData, financialData, isLoading = false }: VisualizationNetworkProps) {\n  const [isGraphSimulating, setIsGraphSimulating] = useState(false);\n  const [highlightNodes, setHighlightNodes] = useState<string[]>([]);\n  const [highlightLinks, setHighlightLinks] = useState<Array<{ source: string; target: string }>>([]);\n  const [graphStatus, setGraphStatus] = useState<string | null>(null);\n  const [graphStatusTone, setGraphStatusTone] = useState<'info' | 'warn' | 'error'>('info');\n\n  // Transform graph data for ForceDirectedGraph\n  const forceGraphData = useMemo(() => {\n    if (!graphData?.elements) return { nodes: [], links: [] };\n\n    const nodes = graphData.elements.nodes.map(node => ({\n        id: node.data.id,\n        name: node.data.label,\n        group: node.data.type === 'subject' ? 1 : node.data.type === 'bank' ? 2 : 3,\n        value: node.data.risk_score || 1,\n        color: node.data.type === 'subject' ? '#3b82f6' :\n                node.data.type === 'bank' ? '#10b981' : '#f59e0b'\n    }));\n\n    const links = graphData.elements.edges.map(edge => ({\n        source: edge.data.source,\n        target: edge.data.target,\n        value: edge.data.weight || 1,\n        type: edge.data.type || 'default'\n    }));\n\n    return { nodes, links };\n  }, [graphData]);\n\n  // Transform data for Sankey diagram\n  const sankeyData = useMemo((): SankeyData => {\n    if (!financialData?.cashflow_data) return { nodes: [], links: [] };\n\n    const nodes: SankeyNode[] = [];\n    const links: SankeyLink[] = [];\n    const nodeMap = new Map<string, number>();\n\n    const addNode = (name: string, color?: string) => {\n        if (!nodeMap.has(name)) {\n        nodeMap.set(name, nodes.length);\n        nodes.push({ id: name, name, color });\n        }\n        return nodeMap.get(name)!;\n    };\n\n    financialData.cashflow_data.forEach((flow) => {\n        const inflowNode = addNode('Income', '#10b981');\n        const outflowNode = addNode('Expenses', '#ef4444');\n        const balanceNode = addNode('Balance', '#3b82f6');\n\n        if (flow.inflow > 0) {\n        links.push({\n            source: nodes[inflowNode].id,\n            target: nodes[balanceNode].id,\n            value: flow.inflow,\n            color: '#10b981'\n        });\n        }\n\n        if (flow.outflow > 0) {\n        links.push({\n            source: nodes[balanceNode].id,\n            target: nodes[outflowNode].id,\n            value: flow.outflow,\n            color: '#ef4444'\n        });\n        }\n    });\n\n    return { nodes, links };\n  }, [financialData]);\n\n  // Generate heatmap data\n  const heatmapData = useMemo((): HeatmapData[] => {\n    if (!financialData?.cashflow_data) return [];\n\n    const heatmap: HeatmapData[] = [];\n\n    financialData.cashflow_data.forEach(flow => {\n        const date = new Date(flow.date);\n        const day = date.toLocaleDateString('en-US', { weekday: 'short' });\n        const hour = date.getHours();\n\n        const intensity = Math.min(100, (flow.inflow + flow.outflow) / 100);\n\n        heatmap.push({\n        day,\n        hour,\n        value: flow.inflow + flow.outflow,\n        intensity\n        });\n    });\n\n    return heatmap;\n  }, [financialData]);\n\n  return (\n    <div className=\"space-y-6\">\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n        <div className=\"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4\">\n            <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n            <Share2 className=\"h-5 w-5 text-blue-500\" />\n            Entity Network\n            </h3>\n            {isLoading ? (\n            <div className=\"h-96 flex items-center justify-center\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\" />\n            </div>\n            ) : forceGraphData.nodes.length > 0 ? (\n            <ForceDirectedGraph\n                data={forceGraphData}\n                isRunningExternal={isGraphSimulating}\n                highlightedNodes={highlightNodes}\n                highlightedLinks={highlightLinks}\n                onReset={() => {\n                setHighlightNodes([]);\n                setHighlightLinks([]);\n                setGraphStatus(null);\n                }}\n                onExport={(id) => exportBoth(id, 'network-graph', true)}\n            />\n            ) : (\n            <div className=\"h-96 flex items-center justify-center text-slate-500\">\n                No network data available\n            </div>\n            )}\n            <div className=\"mt-3 flex flex-wrap gap-3 text-xs text-slate-600 dark:text-slate-400\">\n            <span className=\"flex items-center gap-1\"><span className=\"h-3 w-3 rounded-full bg-blue-500\" /> Subject</span>\n            <span className=\"flex items-center gap-1\"><span className=\"h-3 w-3 rounded-full bg-emerald-500\" /> Bank</span>\n            <span className=\"flex items-center gap-1\"><span className=\"h-3 w-3 rounded-full bg-amber-500\" /> Other</span>\n            <span className=\"flex items-center gap-1\"><span className=\"h-3 w-3 rounded-full bg-orange-500\" /> Highlighted path</span>\n            {(highlightNodes.length > 0 || highlightLinks.length > 0) && (\n                <button\n                onClick={() => { setHighlightNodes([]); setHighlightLinks([]); setGraphStatus(null); }}\n                className=\"ml-auto text-[11px] underline text-slate-500 hover:text-slate-700 dark:hover:text-slate-200\"\n                >\n                Clear highlights\n                </button>\n            )}\n            </div>\n            {graphStatus && (\n            <div\n                className={`mt-2 text-xs px-2 py-1 rounded border ${\n                graphStatusTone === 'error'\n                    ? 'text-red-600 bg-red-50 border-red-200'\n                    : graphStatusTone === 'warn'\n                    ? 'text-amber-600 bg-amber-50 border-amber-200'\n                    : 'text-slate-600 bg-slate-100 border-slate-200'\n                }`}\n            >\n                {graphStatus}\n            </div>\n            )}\n        </div>\n\n        <div className=\"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4\">\n            <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n            <TrendingUp className=\"h-5 w-5 text-green-500\" />\n            Financial Flows\n            </h3>\n            {sankeyData.nodes.length > 0 ? (\n            <SankeyFlow\n                data={sankeyData}\n                onExport={(id) => exportBoth(id, 'sankey-flow', true)}\n            />\n            ) : (\n            <div className=\"h-96 flex items-center justify-center text-slate-500\">\n                No flow data available\n            </div>\n            )}\n        </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 xl:grid-cols-[1.5fr_1fr] gap-6\">\n        <div className=\"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4\">\n            <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n            <Calendar className=\"h-5 w-5 text-purple-500\" />\n            Transaction Timeline\n            </h3>\n            <TimelineZoom\n            data={financialData?.cashflow_data || []}\n            filters={{ timeRange: '30d', entityType: 'all' }}\n            />\n        </div>\n\n        <div className=\"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4\">\n            <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n            <AlertTriangle className=\"h-5 w-5 text-amber-500\" />\n            Activity Heatmap\n            </h3>\n            {heatmapData.length > 0 ? (\n            <ActivityHeatmap\n                data={heatmapData}\n                onExport={(id) => exportBoth(id, 'activity-heatmap', true)}\n            />\n            ) : (\n            <div className=\"h-96 flex items-center justify-center text-slate-500\">\n                No activity data available\n            </div>\n            )}\n        </div>\n        </div>\n\n        <div className=\"relative\">\n        <GraphTools\n            onSimulationToggle={(enabled) => setIsGraphSimulating(enabled)}\n            onShortestPath={async (source, target) => {\n            try {\n                const result = await api.post('/analysis/graph/shortest-path', {\n                source_id: source,\n                target_id: target\n                });\n                const path = parsePathResponse(result);\n                if (Array.isArray(path) && path.length > 0) {\n                setHighlightNodes(path);\n                const pairs: Array<{ source: string; target: string }> = [];\n                for (let i = 0; i < path.length - 1; i += 1) {\n                    pairs.push({ source: path[i], target: path[i + 1] });\n                }\n                setHighlightLinks(pairs);\n                setGraphStatus(`Path found (${path.length} nodes)`);\n                setGraphStatusTone('info');\n                } else {\n                setHighlightNodes([]);\n                setHighlightLinks([]);\n                setGraphStatus('No path found for the selected nodes.');\n                setGraphStatusTone('warn');\n                }\n            } catch (error) {\n                console.error('Shortest path failed:', error);\n                setHighlightNodes([]);\n                setHighlightLinks([]);\n                setGraphStatus('Shortest path query failed.');\n                setGraphStatusTone('error');\n            }\n            }}\n            isSimulating={isGraphSimulating}\n        />\n        </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/WaterfallChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/components/visualization/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/context/AIContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[588,591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[588,591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1011,1014],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1011,1014],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'feedback' is assigned a value but never used.","line":182,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":182,"endColumn":27},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":210,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":210,"endColumn":22}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, ReactNode, useEffect } from 'react';\nimport { apiRequest } from '../lib/api';\n\nexport type Persona = 'analyst' | 'legal' | 'cfo' | 'investigator';\n\nexport interface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  persona?: Persona;\n  timestamp: number;\n  suggestions?: string[];\n  caseId?: string;\n  insights?: CaseInsight[];\n  feedback?: 'positive' | 'negative';\n}\n\nexport interface CaseInsight {\n  type: 'pattern' | 'risk' | 'recommendation' | 'evidence';\n  title: string;\n  description: string;\n  confidence: number;\n  data?: any;\n}\n\ninterface AIChatResponse {\n  response: string;\n  persona: Persona;\n  suggestions?: string[];\n  insights?: CaseInsight[];\n}\n\ninterface CaseAnalysis {\n  summary: string;\n  keyFindings: string[];\n  riskAssessment: {\n    level: 'low' | 'medium' | 'high' | 'critical';\n    score: number;\n    factors: string[];\n  };\n  recommendations: string[];\n  patterns: {\n    type: string;\n    description: string;\n    transactions: any[];\n  }[];\n}\n\ninterface AIContextType {\n  persona: Persona;\n  setPersona: (p: Persona) => void;\n  messages: Message[];\n  sendMessage: (content: string, caseId?: string) => Promise<void>;\n  analyzeCase: (caseId: string) => Promise<CaseAnalysis>;\n  isProcessing: boolean;\n  isOpen: boolean;\n  setIsOpen: (open: boolean) => void;\n  clearHistory: () => void;\n  currentCaseId?: string;\n  setCurrentCaseId: (caseId?: string) => void;\n  setFeedback: (timestamp: number, feedback: 'positive' | 'negative') => void;\n}\n\nconst AIContext = createContext<AIContextType | undefined>(undefined);\n\nexport function AIProvider({ children }: { children: ReactNode }) {\n  const [persona, setPersona] = useState<Persona>('analyst');\n  const [messages, setMessages] = useState<Message[]>(() => {\n    try {\n      const saved = localStorage.getItem('frenly-conversation');\n      if (saved) {\n        return JSON.parse(saved) as Message[];\n      }\n    } catch (e) {\n      console.warn('Failed to load Frenly conversation from storage', e);\n    }\n    return [\n      {\n        role: 'assistant',\n        content: \"Hello! I'm Frenly AI, your intelligent fraud investigation assistant. I can help analyze cases, identify patterns, and provide recommendations. Select a persona above or ask me about a specific case.\",\n        persona: 'analyst',\n        timestamp: Date.now(),\n        suggestions: [\"Analyze case patterns\", \"Review risk factors\", \"Suggest next steps\"]\n      }\n    ];\n  });\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  const [currentCaseId, setCurrentCaseId] = useState<string | undefined>();\n\n  // Persist conversation history\n  useEffect(() => {\n    try {\n      localStorage.setItem('frenly-conversation', JSON.stringify(messages));\n    } catch (e) {\n      console.warn('Failed to persist Frenly conversation', e);\n    }\n  }, [messages]);\n\n  const sendMessage = async (content: string, caseId?: string) => {\n    if (!content.trim()) return;\n\n    const now = Date.now();\n    const userMsg: Message = {\n      role: 'user',\n      content,\n      timestamp: now,\n      caseId: caseId || currentCaseId\n    };\n\n    setMessages(prev => [...prev, userMsg]);\n    setIsProcessing(true);\n\n    try {\n      const response = await apiRequest<AIChatResponse>('/ai/chat', {\n        method: 'POST',\n        body: JSON.stringify({\n          message: content,\n          persona,\n          case_id: caseId || currentCaseId\n        })\n      });\n\n      const aiMsg: Message = {\n        role: 'assistant',\n        content: response.response,\n        persona: response.persona,\n        timestamp: Date.now(),\n        suggestions: response.suggestions,\n        insights: response.insights,\n        caseId: caseId || currentCaseId\n      };\n\n      setMessages(prev => [...prev, aiMsg]);\n    } catch (error) {\n      console.error('AI Chat error:', error);\n      setMessages(prev => [...prev, {\n        role: 'assistant',\n        content: \"Sorry, I encountered an error connecting to the AI service. Please try again.\",\n        timestamp: Date.now()\n      }]);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const analyzeCase = async (caseId: string): Promise<CaseAnalysis> => {\n    try {\n      const response = await apiRequest<CaseAnalysis>(`/cases/${caseId}/ai-analysis`, {\n        method: 'POST'\n      });\n      return response;\n    } catch (error) {\n      console.error('Case analysis error:', error);\n      throw new Error('Failed to analyze case');\n    }\n  };\n\n  const clearHistory = () => {\n    setMessages([{ \n      role: 'assistant', \n      content: `Switched to ${persona} mode. How can I help?`, \n      persona,\n      timestamp: Date.now() \n    }]);\n  };\n\n  const setFeedback = async (timestamp: number, feedback: 'positive' | 'negative') => {\n    setMessages(prev => prev.map(msg => msg.timestamp === timestamp ? { ...msg, feedback } : msg));\n    try {\n      await apiRequest('/ai/feedback', {\n        method: 'POST',\n        body: JSON.stringify({\n          message_timestamp: new Date(timestamp).toISOString(),\n          feedback: feedback,\n        }),\n      });\n    } catch (error) {\n      console.error('Failed to submit feedback:', error);\n      // Optionally, revert the feedback state if the API call fails\n      setMessages(prev => prev.map(msg => {\n        if (msg.timestamp === timestamp) {\n          const { feedback, ...revertedMsg } = msg;\n          return revertedMsg;\n        }\n        return msg;\n      }));\n    }\n  };\n\n  return (\n    <AIContext.Provider value={{\n      persona,\n      setPersona,\n      messages,\n      sendMessage,\n      analyzeCase,\n      isProcessing,\n      isOpen,\n      setIsOpen,\n      clearHistory,\n      currentCaseId,\n      setCurrentCaseId,\n      setFeedback\n    }}>\n      {children}\n    </AIContext.Provider>\n  );\n}\n\nexport function useAI() {\n  const context = useContext(AIContext);\n  if (context === undefined) {\n    throw new Error('useAI must be used within an AIProvider');\n  }\n  return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/context/AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":82,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":82,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { apiRequest } from '../lib/api';\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n  role: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  // Initialize loading state based on token existence\n  const [isLoading, setIsLoading] = useState(() => !!localStorage.getItem('token'));\n\n  const login = async (email: string, password: string) => {\n    const response = await apiRequest<{ access_token: string; user: User }>(\n      '/auth/login',\n      {\n        method: 'POST',\n        body: JSON.stringify({ email, password }),\n      }\n    );\n    localStorage.setItem('token', response.access_token);\n    setUser(response.user);\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n  };\n\n  useEffect(() => {\n    // Check for existing session\n    const token = localStorage.getItem('token');\n    if (token) {\n      // Validate token\n      apiRequest<User>('/auth/me')\n        .then(setUser)\n        .catch(() => {\n          localStorage.removeItem('token');\n        })\n        .finally(() => setIsLoading(false));\n    }\n\n    // Listen for 401 errors from API\n    const handleAuthError = () => {\n      logout();\n    };\n    window.addEventListener('auth-error', handleAuthError);\n    \n    return () => {\n      window.removeEventListener('auth-error', handleAuthError);\n    };\n  }, []);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isAuthenticated: !!user,\n        isLoading,\n        login,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/performance.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":75,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":75,"endColumn":32},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":130,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":130,"endColumn":38},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Desktop/Simple378/frontend/src/hooks/performance.tsx:132:33\n  130 | export function usePerformanceMonitor(componentName: string) {\n  131 |   const renderCount = useRef(0);\n> 132 |   const lastRenderTime = useRef(Date.now());\n      |                                 ^^^^^^^^^^ Cannot call impure function\n  133 |\n  134 |   useEffect(() => {\n  135 |     renderCount.current += 1;","line":132,"column":33,"nodeType":null,"endLine":132,"endColumn":43},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":153,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":153,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4200,4203],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4200,4203],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/use-memo","severity":2,"message":"Error: Expected the dependency list for useMemo to be an array literal\n\nExpected the dependency list for useMemo to be an array literal.\n\n/Users/Arief/Desktop/Simple378/frontend/src/hooks/performance.tsx:169:6\n  167 |\n  168 |     return result;\n> 169 |   }, [data, ...dependencies]);\n      |      ^^^^^^^^^^^^^^^^^^^^^^^ Expected the dependency list for useMemo to be an array literal\n  170 | }\n  171 |\n  172 | // Debounced search hook","line":169,"column":6,"nodeType":null,"endLine":169,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'transform'. Either include it or remove the dependency array. If 'transform' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":169,"column":6,"nodeType":"ArrayExpression","endLine":169,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [data, transform]","fix":{"range":[4580,4603],"text":"[data, transform]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a spread element in its dependency array. This means we can't statically verify whether you've passed the correct dependencies.","line":169,"column":13,"nodeType":"SpreadElement","endLine":169,"endColumn":28},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":173,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":173,"endColumn":35},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":202,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":202,"endColumn":40},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'targetRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'targetRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":230,"column":38,"nodeType":"Identifier","endLine":230,"endColumn":45},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":239,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":239,"endColumn":33},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":286,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":286,"endColumn":29}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadMore'. Either include it or remove the dependency array.","line":116,"column":6,"nodeType":"ArrayExpression","endLine":116,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadMore]","fix":{"range":[3271,3273],"text":"[loadMore]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":10,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef, useMemo, useCallback } from 'react';\n\ninterface VirtualScrollProps<T> {\n  items: T[];\n  itemHeight: number;\n  containerHeight: number;\n  renderItem: (item: T, index: number) => React.ReactNode;\n  overscan?: number;\n  className?: string;\n}\n\nexport function VirtualScroll<T>({\n  items,\n  itemHeight,\n  containerHeight,\n  renderItem,\n  overscan = 5,\n  className = ''\n}: VirtualScrollProps<T>) {\n  const [scrollTop, setScrollTop] = useState(0);\n  const scrollElementRef = useRef<HTMLDivElement>(null);\n\n  const totalHeight = items.length * itemHeight;\n\n  // Calculate visible range\n  const startIndex = Math.max(0, Math.floor(scrollTop / itemHeight) - overscan);\n  const endIndex = Math.min(\n    items.length - 1,\n    Math.ceil((scrollTop + containerHeight) / itemHeight) + overscan\n  );\n\n  // Get visible items\n  const visibleItems = useMemo(() => {\n    return items.slice(startIndex, endIndex + 1).map((item, index) => ({\n      item,\n      index: startIndex + index\n    }));\n  }, [items, startIndex, endIndex]);\n\n  const handleScroll = useCallback((event: React.UIEvent<HTMLDivElement>) => {\n    setScrollTop(event.currentTarget.scrollTop);\n  }, []);\n\n  const offsetY = startIndex * itemHeight;\n\n  return (\n    <div\n      ref={scrollElementRef}\n      className={`overflow-auto ${className}`}\n      style={{ height: containerHeight }}\n      onScroll={handleScroll}\n    >\n      <div style={{ height: totalHeight, position: 'relative' }}>\n        <div\n          style={{\n            transform: `translateY(${offsetY}px)`,\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0\n          }}\n        >\n          {visibleItems.map(({ item, index }) => (\n            <div key={index} style={{ height: itemHeight }}>\n              {renderItem(item, index)}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Hook for managing large datasets with pagination\nexport function useLargeDataset<T>(\n  fetchFunction: (page: number, pageSize: number) => Promise<{ items: T[]; total: number }>,\n  pageSize: number = 50\n) {\n  const [data, setData] = useState<T[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [totalItems, setTotalItems] = useState(0);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n\n  const loadMore = useCallback(async () => {\n    if (loading || !hasMore) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await fetchFunction(currentPage, pageSize);\n      setData(prev => [...prev, ...result.items]);\n      setTotalItems(result.total);\n      setCurrentPage(prev => prev + 1);\n      setHasMore(data.length + result.items.length < result.total);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load data');\n    } finally {\n      setLoading(false);\n    }\n  }, [fetchFunction, currentPage, pageSize, loading, hasMore, data.length]);\n\n  const refresh = useCallback(async () => {\n    setData([]);\n    setCurrentPage(0);\n    setHasMore(true);\n    setError(null);\n    await loadMore();\n  }, [loadMore]);\n\n  // Auto-load first page\n  useEffect(() => {\n    loadMore();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    data,\n    loading,\n    error,\n    totalItems,\n    hasMore,\n    loadMore,\n    refresh\n  };\n}\n\n// Performance monitoring hook\nexport function usePerformanceMonitor(componentName: string) {\n  const renderCount = useRef(0);\n  const lastRenderTime = useRef(Date.now());\n\n  useEffect(() => {\n    renderCount.current += 1;\n    const now = Date.now();\n    const timeSinceLastRender = now - lastRenderTime.current;\n\n    // Log performance metrics in development\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`${componentName} render #${renderCount.current}, time since last: ${timeSinceLastRender}ms`);\n    }\n\n    lastRenderTime.current = now;\n  });\n\n  return {\n    renderCount: renderCount.current\n  };\n}\n\n// Memoized data transformation hook\nexport function useMemoizedTransform<T, R>(\n  data: T,\n  transform: (data: T) => R,\n  dependencies: any[] = []\n): R {\n  return useMemo(() => {\n    const startTime = performance.now();\n    const result = transform(data);\n    const endTime = performance.now();\n\n    // Log transformation performance\n    if (process.env.NODE_ENV === 'development' && endTime - startTime > 10) {\n      console.warn(`Data transformation took ${endTime - startTime}ms`);\n    }\n\n    return result;\n  }, [data, ...dependencies]);\n}\n\n// Debounced search hook\nexport function useDebouncedSearch(\n  searchFunction: (query: string) => void,\n  delay: number = 300\n) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [debouncedQuery, setDebouncedQuery] = useState('');\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedQuery(searchQuery);\n    }, delay);\n\n    return () => clearTimeout(timer);\n  }, [searchQuery, delay]);\n\n  useEffect(() => {\n    if (debouncedQuery) {\n      searchFunction(debouncedQuery);\n    }\n  }, [debouncedQuery, searchFunction]);\n\n  return {\n    searchQuery,\n    setSearchQuery,\n    debouncedQuery\n  };\n}\n\n// Intersection Observer hook for lazy loading\nexport function useIntersectionObserver(\n  callback: () => void,\n  options: IntersectionObserverInit = {}\n) {\n  const targetRef = useRef<Element | null>(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            callback();\n          }\n        });\n      },\n      {\n        threshold: 0.1,\n        rootMargin: '50px',\n        ...options\n      }\n    );\n\n    if (targetRef.current) {\n      observer.observe(targetRef.current);\n    }\n\n    return () => {\n      if (targetRef.current) {\n        observer.unobserve(targetRef.current);\n      }\n    };\n  }, [callback, options]);\n\n  return targetRef;\n}\n\n// Service Worker registration hook\nexport function useServiceWorker() {\n  const [isRegistered, setIsRegistered] = useState(false);\n  const [updateAvailable, setUpdateAvailable] = useState(false);\n\n  useEffect(() => {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker\n        .register('/sw.js')\n        .then((registration) => {\n          setIsRegistered(true);\n\n          // Check for updates\n          registration.addEventListener('updatefound', () => {\n            const newWorker = registration.installing;\n            if (newWorker) {\n              newWorker.addEventListener('statechange', () => {\n                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n                  setUpdateAvailable(true);\n                }\n              });\n            }\n          });\n        })\n        .catch((error) => {\n          console.error('Service Worker registration failed:', error);\n        });\n    }\n  }, []);\n\n  const updateServiceWorker = () => {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.ready.then((registration) => {\n        registration.update().then(() => {\n          window.location.reload();\n        });\n      });\n    }\n  };\n\n  return {\n    isRegistered,\n    updateAvailable,\n    updateServiceWorker\n  };\n}\n\n// CDN asset loading hook\nexport function useCDNAssets() {\n  const [assetsLoaded, setAssetsLoaded] = useState(false);\n\n  useEffect(() => {\n    // Load critical assets from CDN\n    const loadAssets = async () => {\n      try {\n        // Example: Load chart library from CDN\n        if (!window.d3) {\n          await loadScript('https://d3js.org/d3.v7.min.js');\n        }\n\n        // Load other heavy assets as needed\n        setAssetsLoaded(true);\n      } catch (error) {\n        console.error('Failed to load CDN assets:', error);\n        setAssetsLoaded(true); // Continue without CDN assets\n      }\n    };\n\n    loadAssets();\n  }, []);\n\n  return { assetsLoaded };\n}\n\n// Helper function to load scripts dynamically\nfunction loadScript(src: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    script.src = src;\n    script.onload = () => resolve();\n    script.onerror = () => reject(new Error(`Failed to load script: ${src}`));\n    document.head.appendChild(script);\n  });\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/useAuth.test.ts","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: '>' expected.","line":20,"column":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { renderHook, act, waitFor } from '@testing-library/react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { useAuth } from '../hooks/useAuth';\n\ndescribe('useAuth', () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: { retry: false },\n        mutations: { retry: false }\n      }\n    });\n    vi.clearAllMocks();\n  });\n\n  const wrapper = ({ children }: { children: React.ReactNode }) => (\n    <QueryClientProvider client={queryClient}>\n      {children}\n    </QueryClientProvider>\n  );\n\n  it('returns initial auth state', () => {\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    expect(result.current.user).toBeNull();\n    expect(result.current.isAuthenticated).toBe(false);\n    expect(result.current.isLoading).toBe(false);\n    expect(typeof result.current.login).toBe('function');\n    expect(typeof result.current.logout).toBe('function');\n    expect(typeof result.current.register).toBe('function');\n  });\n\n  it('handles successful login', async () => {\n    // Mock successful login API call\n    vi.mock('../lib/api', () => ({\n      api: {\n        post: vi.fn().mockResolvedValue({\n          data: {\n            user: { id: '1', email: 'test@example.com', name: 'Test User' },\n            access_token: 'mock-token',\n            refresh_token: 'mock-refresh-token'\n          }\n        })\n      }\n    }));\n\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    act(() => {\n      result.current.login({\n        email: 'test@example.com',\n        password: 'password123'\n      });\n    });\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    expect(result.current.user).toEqual({\n      id: '1',\n      email: 'test@example.com',\n      name: 'Test User'\n    });\n    expect(result.current.isAuthenticated).toBe(true);\n  });\n\n  it('handles login error', async () => {\n    // Mock failed login API call\n    vi.mock('../lib/api', () => ({\n      api: {\n        post: vi.fn().mockRejectedValue(new Error('Invalid credentials'))\n      }\n    }));\n\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    act(() => {\n      result.current.login({\n        email: 'test@example.com',\n        password: 'wrong-password'\n      });\n    });\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    expect(result.current.user).toBeNull();\n    expect(result.current.isAuthenticated).toBe(false);\n    expect(result.current.error).toBe('Invalid credentials');\n  });\n\n  it('handles logout', async () => {\n    // First login\n    vi.mock('../lib/api', () => ({\n      api: {\n        post: vi.fn().mockResolvedValue({\n          data: {\n            user: { id: '1', email: 'test@example.com', name: 'Test User' },\n            access_token: 'mock-token',\n            refresh_token: 'mock-refresh-token'\n          }\n        })\n      }\n    }));\n\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    // Login first\n    act(() => {\n      result.current.login({\n        email: 'test@example.com',\n        password: 'password123'\n      });\n    });\n\n    await waitFor(() => {\n      expect(result.current.isAuthenticated).toBe(true);\n    });\n\n    // Then logout\n    act(() => {\n      result.current.logout();\n    });\n\n    expect(result.current.user).toBeNull();\n    expect(result.current.isAuthenticated).toBe(false);\n  });\n\n  it('handles registration', async () => {\n    vi.mock('../lib/api', () => ({\n      api: {\n        post: vi.fn().mockResolvedValue({\n          data: {\n            user: { id: '1', email: 'new@example.com', name: 'New User' },\n            access_token: 'mock-token',\n            refresh_token: 'mock-refresh-token'\n          }\n        })\n      }\n    }));\n\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    act(() => {\n      result.current.register({\n        email: 'new@example.com',\n        password: 'password123',\n        name: 'New User'\n      });\n    });\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    expect(result.current.user).toEqual({\n      id: '1',\n      email: 'new@example.com',\n      name: 'New User'\n    });\n    expect(result.current.isAuthenticated).toBe(true);\n  });\n\n  it('validates login input', () => {\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    act(() => {\n      result.current.login({\n        email: '',\n        password: ''\n      });\n    });\n\n    expect(result.current.error).toBe('Email and password are required');\n  });\n\n  it('validates registration input', () => {\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    act(() => {\n      result.current.register({\n        email: 'invalid-email',\n        password: '123',\n        name: ''\n      });\n    });\n\n    expect(result.current.error).toContain('Invalid email format');\n  });\n\n  it('handles token refresh', async () => {\n    // Mock token refresh\n    vi.mock('../lib/api', () => ({\n      api: {\n        post: vi.fn()\n          .mockResolvedValueOnce({\n            data: {\n              user: { id: '1', email: 'test@example.com', name: 'Test User' },\n              access_token: 'new-token',\n              refresh_token: 'new-refresh-token'\n            }\n          })\n          .mockResolvedValueOnce({\n            data: {\n              access_token: 'refreshed-token'\n            }\n          })\n      }\n    }));\n\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    // Login\n    act(() => {\n      result.current.login({\n        email: 'test@example.com',\n        password: 'password123'\n      });\n    });\n\n    await waitFor(() => {\n      expect(result.current.isAuthenticated).toBe(true);\n    });\n\n    // Token should be refreshed automatically when needed\n    expect(result.current.user).toBeTruthy();\n  });\n\n  it('persists auth state', () => {\n    // Mock localStorage\n    const mockLocalStorage = {\n      getItem: vi.fn().mockReturnValue(JSON.stringify({\n        user: { id: '1', email: 'test@example.com' },\n        token: 'stored-token'\n      })),\n      setItem: vi.fn(),\n      removeItem: vi.fn()\n    };\n    Object.defineProperty(window, 'localStorage', { value: mockLocalStorage });\n\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    expect(result.current.user?.email).toBe('test@example.com');\n    expect(result.current.isAuthenticated).toBe(true);\n  });\n\n  it('clears error on successful operation', async () => {\n    // First fail, then succeed\n    vi.mock('../lib/api', () => ({\n      api: {\n        post: vi.fn()\n          .mockRejectedValueOnce(new Error('Network error'))\n          .mockResolvedValueOnce({\n            data: {\n              user: { id: '1', email: 'test@example.com', name: 'Test User' },\n              access_token: 'mock-token',\n              refresh_token: 'mock-refresh-token'\n            }\n          })\n      }\n    }));\n\n    const { result } = renderHook(() => useAuth(), { wrapper });\n\n    // First attempt fails\n    act(() => {\n      result.current.login({\n        email: 'test@example.com',\n        password: 'password123'\n      });\n    });\n\n    await waitFor(() => {\n      expect(result.current.error).toBe('Network error');\n    });\n\n    // Second attempt succeeds\n    act(() => {\n      result.current.login({\n        email: 'test@example.com',\n        password: 'password123'\n      });\n    });\n\n    await waitFor(() => {\n      expect(result.current.error).toBeNull();\n      expect(result.current.isAuthenticated).toBe(true);\n    });\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/useCamera.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2602,2605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2602,2605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":109,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3045,3048],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3045,3048],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useRef, useCallback } from 'react';\n\ninterface CameraOptions {\n  facingMode?: 'user' | 'environment';\n  width?: number;\n  height?: number;\n  onCapture?: (blob: Blob) => void;\n}\n\n/**\n * Hook for accessing device camera and capturing photos/videos\n * Useful for evidence capture in fraud investigation\n */\nexport function useCamera(options: CameraOptions = {}) {\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n\n  const startCamera = useCallback(async () => {\n    try {\n      const constraints: MediaStreamConstraints = {\n        video: {\n          facingMode: options.facingMode || 'user',\n          width: options.width ? { ideal: options.width } : undefined,\n          height: options.height ? { ideal: options.height } : undefined,\n        },\n        audio: false,\n      };\n\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      streamRef.current = stream;\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.play();\n      }\n\n      return true;\n    } catch (error) {\n      console.error('Camera access denied:', error);\n      return false;\n    }\n  }, [options]);\n\n  const stopCamera = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach((track) => track.stop());\n      streamRef.current = null;\n    }\n  }, []);\n\n  const capturePhoto = useCallback(async (): Promise<Blob | null> => {\n    if (!videoRef.current || !canvasRef.current) {\n      console.error('Camera or canvas not initialized');\n      return null;\n    }\n\n    const context = canvasRef.current.getContext('2d');\n    if (!context) return null;\n\n    canvasRef.current.width = videoRef.current.videoWidth;\n    canvasRef.current.height = videoRef.current.videoHeight;\n\n    context.drawImage(videoRef.current, 0, 0);\n\n    return new Promise((resolve) => {\n      canvasRef.current!.toBlob((blob) => {\n        resolve(blob);\n        options.onCapture?.(blob!);\n      }, 'image/jpeg', 0.9);\n    });\n  }, [options]);\n\n  return {\n    videoRef,\n    canvasRef,\n    startCamera,\n    stopCamera,\n    capturePhoto,\n  };\n}\n\n/**\n * Hook for device storage access (camera roll, file system)\n */\nexport function useDeviceStorage() {\n  const pickFile = useCallback(async (accept?: string): Promise<File | null> => {\n    return new Promise((resolve) => {\n      const input = document.createElement('input');\n      input.type = 'file';\n      if (accept) input.accept = accept;\n\n      input.onchange = (event: any) => {\n        const file = event.target.files?.[0];\n        resolve(file || null);\n      };\n\n      input.click();\n    });\n  }, []);\n\n  const pickMultipleFiles = useCallback(async (accept?: string): Promise<File[]> => {\n    return new Promise((resolve) => {\n      const input = document.createElement('input');\n      input.type = 'file';\n      input.multiple = true;\n      if (accept) input.accept = accept;\n\n      input.onchange = (event: any) => {\n        const files = event.target.files ? Array.from(event.target.files) : [];\n        resolve(files as File[]);\n      };\n\n      input.click();\n    });\n  }, []);\n\n  return {\n    pickFile,\n    pickMultipleFiles,\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/useMonitoring.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/useOfflineSync.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/Arief/Desktop/Simple378/frontend/src/hooks/useOfflineSync.tsx:40:5\n  38 |   useEffect(() => {\n  39 |     const interval = setInterval(updateCount, 5000);\n> 40 |     updateCount();\n     |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  41 |     return () => clearInterval(interval);\n  42 |   }, [updateCount]);\n  43 |","line":40,"column":5,"nodeType":null,"endLine":40,"endColumn":16},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/Arief/Desktop/Simple378/frontend/src/hooks/useOfflineSync.tsx:92:7\n  90 |   useEffect(() => {\n  91 |     if (lastSyncResult) {\n> 92 |       updateCount();\n     |       ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  93 |       if (lastSyncResult.success) {\n  94 |         if (lastSyncResult.syncedCount > 0) {\n  95 |           toast.success(`Synced ${lastSyncResult.syncedCount} changes`);","line":92,"column":7,"nodeType":null,"endLine":92,"endColumn":18}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState, useCallback } from 'react';\nimport { useEventSync, useEventStore } from '@/lib/eventSourcing';\nimport toast from 'react-hot-toast';\n\nexport interface OfflineSyncStatus {\n  isOnline: boolean;\n  isSyncing: boolean;\n  unsyncedCount: number;\n  lastSyncTime: number | null;\n  syncError: string | null;\n}\n\nexport function useOfflineSync(\n  syncEndpoint = '/api/v1/events/sync',\n  autoSyncInterval = 30000\n) {\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  const [unsyncedCount, setUnsyncedCount] = useState(0);\n  const [lastSyncTime, setLastSyncTime] = useState<number | null>(null);\n  const [syncError, setSyncError] = useState<string | null>(null);\n\n  const { sync, isSyncing, lastSyncResult } = useEventSync(syncEndpoint);\n  const { getUnsyncedCount, isReady } = useEventStore();\n\n  // Monitor unsynced count\n  const updateCount = useCallback(async () => {\n    if (isReady) {\n      try {\n        const count = await getUnsyncedCount();\n        setUnsyncedCount(count);\n      } catch (e) {\n        console.error(\"Failed to get count\", e);\n      }\n    }\n  }, [isReady, getUnsyncedCount]);\n\n  // Polling count\n  useEffect(() => {\n    const interval = setInterval(updateCount, 5000);\n    updateCount();\n    return () => clearInterval(interval);\n  }, [updateCount]);\n\n  // Auto-sync function\n  const attemptSync = useCallback(async () => {\n    if (isOnline && isReady) {\n      try {\n        await sync();\n        setLastSyncTime(Date.now());\n        updateCount();\n        setSyncError(null);\n      } catch (e) {\n        console.error('Sync failed', e);\n        setSyncError((e as Error).message);\n      }\n    }\n  }, [isOnline, isReady, sync, updateCount]);\n\n  // Monitor online status - MOVED AFTER attemptSync\n  useEffect(() => {\n    const handleOnline = () => {\n      setIsOnline(true);\n      toast.success('Back online. Syncing changes...');\n      attemptSync();\n    };\n    \n    const handleOffline = () => {\n      setIsOnline(false);\n      toast('You are offline. Changes will be saved locally.', { icon: '' });\n    };\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, [attemptSync]);\n\n  // Auto-sync interval\n  useEffect(() => {\n    if (autoSyncInterval > 0) {\n      const interval = setInterval(attemptSync, autoSyncInterval);\n      return () => clearInterval(interval);\n    }\n  }, [autoSyncInterval, attemptSync]);\n\n  // Handle sync results (notifications)\n  useEffect(() => {\n    if (lastSyncResult) {\n      updateCount();\n      if (lastSyncResult.success) {\n        if (lastSyncResult.syncedCount > 0) {\n          toast.success(`Synced ${lastSyncResult.syncedCount} changes`);\n        }\n        if (lastSyncResult.conflicts && lastSyncResult.conflicts.length > 0) {\n          toast.error(`${lastSyncResult.conflicts.length} conflicts detected`);\n        }\n      } else {\n        setSyncError('Sync failed on server');\n      }\n    }\n  }, [lastSyncResult, updateCount]);\n\n  return {\n    isOnline,\n    isSyncing,\n    unsyncedCount,\n    lastSyncTime,\n    syncError,\n    forceSync: attemptSync,\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/usePWA.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[676,679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[676,679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3587,3590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3587,3590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\n\ninterface PWAState {\n  canInstall: boolean;\n  isUpdateAvailable: boolean;\n  isOnline: boolean;\n  isInstalling: boolean;\n  registration: ServiceWorkerRegistration | null;\n}\n\ninterface PWAActions {\n  installApp: () => Promise<void>;\n  triggerSync: () => Promise<void>;\n  updateApp: () => void;\n}\n\nexport function usePWA(): PWAState & PWAActions {\n  const [state, setState] = useState<PWAState>({\n    canInstall: false,\n    isUpdateAvailable: false,\n    isOnline: navigator.onLine,\n    isInstalling: false,\n    registration: null,\n  });\n\n  // Handle install prompt\n  const [deferredPrompt, setDeferredPrompt] = useState<any>(null);\n\n  useEffect(() => {\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      setDeferredPrompt(e);\n      setState(prev => ({ ...prev, canInstall: true }));\n    };\n\n    const handleAppInstalled = () => {\n      setDeferredPrompt(null);\n      setState(prev => ({ ...prev, canInstall: false, isInstalling: false }));\n    };\n\n    const handleOnline = () => setState(prev => ({ ...prev, isOnline: true }));\n    const handleOffline = () => setState(prev => ({ ...prev, isOnline: false }));\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    window.addEventListener('appinstalled', handleAppInstalled);\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n      window.removeEventListener('appinstalled', handleAppInstalled);\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  // Register service worker\n  useEffect(() => {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker\n        .register('/service-worker.js')\n        .then((registration) => {\n          setState(prev => ({ ...prev, registration }));\n\n          // Check for updates\n          registration.addEventListener('updatefound', () => {\n            const newWorker = registration.installing;\n            if (newWorker) {\n              newWorker.addEventListener('statechange', () => {\n                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n                  setState(prev => ({ ...prev, isUpdateAvailable: true }));\n                }\n              });\n            }\n          });\n\n          // Periodic update checks (every 6 hours)\n          const checkForUpdates = () => {\n            registration.update();\n          };\n          const interval = setInterval(checkForUpdates, 6 * 60 * 60 * 1000);\n\n          return () => clearInterval(interval);\n        })\n        .catch((error) => {\n          console.error('Service worker registration failed:', error);\n        });\n    }\n  }, []);\n\n  const installApp = useCallback(async () => {\n    if (!deferredPrompt) return;\n\n    setState(prev => ({ ...prev, isInstalling: true }));\n\n    try {\n      deferredPrompt.prompt();\n      const { outcome } = await deferredPrompt.userChoice;\n\n      if (outcome === 'accepted') {\n        setState(prev => ({ ...prev, canInstall: false }));\n      }\n    } catch (error) {\n      console.error('Install prompt failed:', error);\n    } finally {\n      setDeferredPrompt(null);\n      setState(prev => ({ ...prev, isInstalling: false }));\n    }\n  }, [deferredPrompt]);\n\n  const triggerSync = useCallback(async () => {\n    if (!state.registration) return;\n\n    try {\n      await (state.registration as any).sync.register('background-sync');\n    } catch (error) {\n      console.error('Background sync registration failed:', error);\n    }\n  }, [state.registration]);\n\n  const updateApp = useCallback(() => {\n    if (state.registration) {\n      const newWorker = state.registration.waiting;\n      if (newWorker) {\n        newWorker.postMessage({ type: 'SKIP_WAITING' });\n        newWorker.addEventListener('statechange', () => {\n          if (newWorker.state === 'activated') {\n            window.location.reload();\n          }\n        });\n      }\n    }\n  }, [state.registration]);\n\n  return {\n    ...state,\n    installApp,\n    triggerSync,\n    updateApp,\n  };\n}","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/useScaling.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/useScaling.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/useTenant.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/hooks/useWebSocket.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[381,384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[381,384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[410,413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[410,413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[813,816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[813,816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`connect` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/Users/Arief/Desktop/Simple378/frontend/src/hooks/useWebSocket.tsx:85:13\n  83 |             reconnectCount.current++;\n  84 |             console.log(`WS Reconnecting attempt ${reconnectCount.current}...`);\n> 85 |             connect();\n     |             ^^^^^^^ `connect` accessed before it is declared\n  86 |           }, reconnectInterval);\n  87 |         }\n  88 |       };\n\n/Users/Arief/Desktop/Simple378/frontend/src/hooks/useWebSocket.tsx:61:3\n   59 |   }, [endpoint]);\n   60 |\n>  61 |   const connect = useCallback(() => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  62 |     if (ws.current?.readyState === WebSocket.OPEN) return;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  63 |\n      \n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 109 |     }\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 110 |   }, [getUrl, reconnectAttempts, reconnectInterval, onOpen, onClose, onError, onMessage]);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `connect` is declared here\n  111 |\n  112 |   const disconnect = useCallback(() => {\n  113 |     if (reconnectTimer.current) {","line":85,"column":13,"nodeType":null,"endLine":85,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":100,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":100,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":120,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3523,3526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3523,3526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef, useCallback } from 'react';\n\ninterface WebSocketOptions {\n  url?: string;\n  onOpen?: () => void;\n  onClose?: () => void;\n  onMessage?: (event: MessageEvent) => void;\n  onError?: (event: Event) => void;\n  reconnectAttempts?: number;\n  reconnectInterval?: number;\n  autoConnect?: boolean;\n}\n\ninterface WebSocketResult {\n  sendMessage: (message: any) => void;\n  lastMessage: any;\n  readyState: number;\n  connect: () => void;\n  disconnect: () => void;\n}\n\nexport const useWebSocket = (\n  endpoint: string = '/ws',\n  options: WebSocketOptions = {}\n): WebSocketResult => {\n  const {\n    onOpen,\n    onClose,\n    onMessage,\n    onError,\n    reconnectAttempts = 5,\n    reconnectInterval = 3000,\n    autoConnect = true,\n  } = options;\n\n  const [lastMessage, setLastMessage] = useState<any>(null);\n  const [readyState, setReadyState] = useState<number>(WebSocket.CLOSED);\n  \n  const ws = useRef<WebSocket | null>(null);\n  const reconnectCount = useRef(0);\n  const reconnectTimer = useRef<NodeJS.Timeout>();\n\n  const getUrl = useCallback(() => {\n    const token = localStorage.getItem('token') || 'mock-token-123';\n    const baseUrl = import.meta.env.VITE_API_URL || '/api/v1';\n    \n    let wsUrl = baseUrl;\n    if (baseUrl.startsWith('http')) {\n      wsUrl = baseUrl.replace(/^http/, 'ws');\n    } else if (baseUrl.startsWith('/')) {\n      // Relative path: construct absolute WS URL based on current location\n      const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n      wsUrl = `${protocol}//${window.location.host}${baseUrl}`;\n    }\n    \n    // Ensure no double slash issues\n    const finalEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\n    return `${wsUrl}${finalEndpoint}?token=${token}`;\n  }, [endpoint]);\n\n  const connect = useCallback(() => {\n    if (ws.current?.readyState === WebSocket.OPEN) return;\n\n    try {\n      const url = getUrl();\n      ws.current = new WebSocket(url);\n\n      ws.current.onopen = () => {\n        console.log('WS Connected');\n        setReadyState(WebSocket.OPEN);\n        reconnectCount.current = 0;\n        onOpen?.();\n      };\n\n      ws.current.onclose = () => {\n        console.log('WS Disconnected');\n        setReadyState(WebSocket.CLOSED);\n        onClose?.();\n        \n        // Auto-reconnect logic\n        if (reconnectCount.current < reconnectAttempts) {\n          reconnectTimer.current = setTimeout(() => {\n            reconnectCount.current++;\n            console.log(`WS Reconnecting attempt ${reconnectCount.current}...`);\n            connect();\n          }, reconnectInterval);\n        }\n      };\n\n      ws.current.onerror = (event) => {\n        console.error('WS Error:', event);\n        onError?.(event);\n      };\n\n      ws.current.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          setLastMessage(data);\n          onMessage?.(event);\n        } catch (err) {\n          // Handle non-JSON messages if any\n          setLastMessage(event.data);\n          onMessage?.(event);\n        }\n      };\n\n    } catch (err) {\n      console.error('WS Connection Failed:', err);\n    }\n  }, [getUrl, reconnectAttempts, reconnectInterval, onOpen, onClose, onError, onMessage]);\n\n  const disconnect = useCallback(() => {\n    if (reconnectTimer.current) {\n      clearTimeout(reconnectTimer.current);\n    }\n    reconnectCount.current = reconnectAttempts; // Prevent auto-reconnect\n    ws.current?.close();\n  }, [reconnectAttempts]);\n\n  const sendMessage = useCallback((message: any) => {\n    if (ws.current?.readyState === WebSocket.OPEN) {\n      ws.current.send(typeof message === 'string' ? message : JSON.stringify(message));\n    } else {\n      console.warn('WS Not Open, cannot send:', message);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (autoConnect) {\n      connect();\n    }\n    return () => {\n      disconnect();\n    };\n  }, [autoConnect, connect, disconnect]);\n\n  return {\n    sendMessage,\n    lastMessage,\n    readyState,\n    connect,\n    disconnect\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/api.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[413,416],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[413,416],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[885,888],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[885,888],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1368,1371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1368,1371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2012,2015],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2012,2015],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2596,2599],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2596,2599],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2924,2927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2924,2927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3131,3134],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3131,3134],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":132,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3527,3530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3527,3530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3874,3877],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3874,3877],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\nimport { apiRequest } from './api';\n\ndescribe('apiRequest', () => {\n  const originalFetch = global.fetch;\n\n  beforeEach(() => {\n    global.fetch = vi.fn();\n  });\n\n  afterEach(() => {\n    global.fetch = originalFetch;\n  });\n\n  it('makes GET request by default', async () => {\n    const mockResponse = { data: 'test' };\n    (global.fetch as any).mockResolvedValueOnce({\n      ok: true,\n      json: () => Promise.resolve(mockResponse)\n    });\n\n    const result = await apiRequest('/test');\n\n    expect(global.fetch).toHaveBeenCalledWith('/test', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    expect(result).toEqual(mockResponse);\n  });\n\n  it('makes request with custom method', async () => {\n    const mockResponse = { success: true };\n    (global.fetch as any).mockResolvedValueOnce({\n      ok: true,\n      json: () => Promise.resolve(mockResponse)\n    });\n\n    const result = await apiRequest('/test', { method: 'POST' });\n\n    expect(global.fetch).toHaveBeenCalledWith('/test', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    expect(result).toEqual(mockResponse);\n  });\n\n  it('includes custom headers', async () => {\n    const mockResponse = { data: 'test' };\n    (global.fetch as any).mockResolvedValueOnce({\n      ok: true,\n      json: () => Promise.resolve(mockResponse)\n    });\n\n    const result = await apiRequest('/test', {\n      headers: {\n        'Authorization': 'Bearer token',\n        'X-Custom': 'value'\n      }\n    });\n\n    expect(global.fetch).toHaveBeenCalledWith('/test', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer token',\n        'X-Custom': 'value'\n      }\n    });\n    expect(result).toEqual(mockResponse);\n  });\n\n  it('includes body for POST requests', async () => {\n    const mockResponse = { created: true };\n    (global.fetch as any).mockResolvedValueOnce({\n      ok: true,\n      json: () => Promise.resolve(mockResponse)\n    });\n\n    const requestBody = { name: 'test' };\n    const result = await apiRequest('/test', {\n      method: 'POST',\n      body: JSON.stringify(requestBody)\n    });\n\n    expect(global.fetch).toHaveBeenCalledWith('/test', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(requestBody)\n    });\n    expect(result).toEqual(mockResponse);\n  });\n\n  it('throws error for non-ok responses', async () => {\n    (global.fetch as any).mockResolvedValueOnce({\n      ok: false,\n      status: 404,\n      statusText: 'Not Found',\n      json: () => Promise.resolve({ error: 'Not found' })\n    });\n\n    await expect(apiRequest('/test')).rejects.toThrow('API request failed: 404 Not Found');\n  });\n\n  it('handles network errors', async () => {\n    (global.fetch as any).mockRejectedValueOnce(new Error('Network error'));\n\n    await expect(apiRequest('/test')).rejects.toThrow('Network error');\n  });\n\n  it('handles JSON parsing errors', async () => {\n    (global.fetch as any).mockResolvedValueOnce({\n      ok: true,\n      json: () => Promise.reject(new Error('Invalid JSON'))\n    });\n\n    await expect(apiRequest('/test')).rejects.toThrow('Invalid JSON');\n  });\n\n  it('returns typed response', async () => {\n    interface TestResponse {\n      id: number;\n      name: string;\n    }\n\n    const mockResponse: TestResponse = { id: 1, name: 'test' };\n    (global.fetch as any).mockResolvedValueOnce({\n      ok: true,\n      json: () => Promise.resolve(mockResponse)\n    });\n\n    const result = await apiRequest<TestResponse>('/test');\n\n    expect(result).toEqual(mockResponse);\n    expect(result.id).toBe(1);\n    expect(result.name).toBe('test');\n  });\n\n  it('handles empty response', async () => {\n    (global.fetch as any).mockResolvedValueOnce({\n      ok: true,\n      json: () => Promise.resolve(null)\n    });\n\n    const result = await apiRequest('/test');\n    expect(result).toBeNull();\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[546,549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[546,549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * API Client\n * Re-exports the scalable API client as the default API\n * This enables load balancing, distributed caching, and automatic failover\n */\n\n// Re-export the scalable API client as the unified API\nexport { scalableApi as api, scalableApi as default } from './scalableApi';\nimport { scalableApi } from './scalableApi';\n\n/**\n * @deprecated Use `api` (scalableApi) directly instead.\n * apiRequest function for backward compatibility\n * Used in components that expect a function-style API call\n */\nexport async function apiRequest<T = any>(\n  url: string,\n  options?: RequestInit\n): Promise<T> {\n  const method = options?.method?.toUpperCase() || 'GET';\n  \n  // Fix double parsing: If body is string, parse it. If object, use as is.\n  let body = options?.body;\n  if (typeof body === 'string') {\n    try {\n        body = JSON.parse(body);\n    } catch {\n        // use as string if not valid JSON\n    }\n  }\n  \n  switch (method) {\n    case 'POST':\n      return scalableApi.post<T>(url, body);\n    case 'PUT':\n      return scalableApi.put<T>(url, body);\n    case 'PATCH':\n      return scalableApi.patch<T>(url, body);\n    case 'DELETE':\n      return scalableApi.delete<T>(url);\n    default:\n      return scalableApi.get<T>(url);\n  }\n}\n\n// Subject API endpoints using the scalable client\nexport const subjectsApi = {\n  getSubjects: (params?: {\n    status?: string;\n    min_risk?: number;\n    max_risk?: number;\n    search?: string;\n    page?: number;\n    limit?: number;\n    sort_by?: string;\n    sort_order?: string;\n  }) => {\n    const searchParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          searchParams.append(key, value.toString());\n        }\n      });\n    }\n    return scalableApi.get(`/subjects?${searchParams.toString()}`);\n  },\n\n  getSubject: (subjectId: string) => scalableApi.get(`/subjects/${subjectId}`),\n\n  deleteSubject: (subjectId: string) => scalableApi.delete(`/subjects/${subjectId}`),\n\n  exportSubjectData: (subjectId: string) => scalableApi.get(`/subjects/${subjectId}/export`),\n\n  batchUpdateCases: (data: { case_ids: string[]; status?: string; assigned_to?: string }) =>\n    scalableApi.patch('/cases/batch', data),\n};\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/eventSourcing.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'indexedDB' is assigned a value but never used.","line":5,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, beforeEach, vi } from 'vitest';\nimport { EventStore } from './eventSourcing';\n\n// Simple IndexedDB Mock if needed\nconst indexedDB = {\n  open: vi.fn(),\n};\n\ndescribe('EventStore', () => {\n  let store: EventStore;\n\n  beforeEach(() => {\n    // Mock localStorage\n    Object.defineProperty(window, 'localStorage', {\n      value: {\n        getItem: vi.fn(() => null),\n        setItem: vi.fn(),\n        removeItem: vi.fn(),\n        clear: vi.fn(),\n      },\n      writable: true\n    });\n    \n    // We would need a real IndexedDB or robust mock here.\n    // Since environment is jsdom, let's assume it might work or we mock the class logic if we can't easily spin up IDB.\n    store = new EventStore('test-node');\n  });\n\n  it('should initialize', async () => {\n    // This is a placeholder test. \n    // Real IDB testing requires a complex setup or 'fake-indexeddb'.\n    // We just verify the class instantiates correctly for coverage.\n    expect(store).toBeDefined();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/eventSourcing.ts","messages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":408,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":411,"endColumn":13,"suggestions":[{"messageId":"addBrackets","fix":{"range":[12659,12984],"text":"{ const mergedData = {\n            ...conflict.remoteEvent.data,\n            ...conflict.localEvent.data,\n          };\n          winner = {\n            ...conflict.localEvent,\n            id: uuid(),\n            data: mergedData,\n            eventType: 'merged',\n            timestamp: Date.now(),\n          };\n          break; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { v4 as uuid } from 'uuid';\nimport React from 'react';\n\n/**\n * Event Sourcing Pattern for Offline-First Synchronization\n * \n * Fix #7: Advanced Event Sourcing Implementation\n * \n * Provides:\n * - Complete audit trail of all changes\n * - Replay capability for recovery\n * - Conflict detection and resolution\n * - Causality tracking via Lamport clocks\n */\n\nexport interface DomainEvent {\n  id: string;                    // Unique event ID\n  aggregateId: string;           // Which entity this affects\n  aggregateType: string;         // Entity type (Case, Subject, Evidence)\n  eventType: string;             // case.created, evidence.added, etc.\n  timestamp: number;             // When it happened (client time)\n  nodeId: string;                // Which node (instance) created it\n  clock: number;                 // Lamport clock for causality\n  version: number;               // Entity version after this event\n  data: Record<string, unknown>; // Event payload\n  correlationId?: string;        // Link related events\n  causationId?: string;          // What caused this event\n  synced: boolean;               // Whether sent to server\n  syncAttempts: number;\n  lastSyncAttempt?: number;\n  syncError?: string;\n  checksum: string;              // For conflict detection\n}\n\nexport interface ConflictInfo {\n  aggregateId: string;\n  fields: string[];\n  localEvent: DomainEvent;\n  remoteEvent: DomainEvent;\n  resolution?: 'local' | 'remote' | 'merge';\n}\n\nexport class EventStore {\n  private dbName = 'antigravity-events';\n  private storeName = 'events';\n  private snapshotStoreName = 'snapshots';\n  private db: IDBDatabase | null = null;\n  private nodeId: string;\n  private lamportClock = 0;\n  private initPromise: Promise<void> | null = null;\n\n  constructor(nodeId = uuid()) {\n    this.nodeId = nodeId;\n    // Restore clock from localStorage if available\n    const savedClock = localStorage.getItem('eventStore_clock');\n    if (savedClock) {\n      this.lamportClock = parseInt(savedClock, 10);\n    }\n  }\n\n  async init(): Promise<void> {\n    if (this.initPromise) return this.initPromise;\n    \n    this.initPromise = new Promise<void>((resolve, reject) => {\n      const request = indexedDB.open(this.dbName, 2);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => {\n        this.db = request.result;\n        resolve();\n      };\n\n      request.onupgradeneeded = (event) => {\n        const db = (event.target as IDBOpenDBRequest).result;\n        \n        // Events store\n        if (!db.objectStoreNames.contains(this.storeName)) {\n          const store = db.createObjectStore(this.storeName, { keyPath: 'id' });\n          \n          // Indexes for querying\n          store.createIndex('aggregateId', 'aggregateId', { unique: false });\n          store.createIndex('eventType', 'eventType', { unique: false });\n          store.createIndex('timestamp', 'timestamp', { unique: false });\n          store.createIndex('synced', 'synced', { unique: false });\n          store.createIndex('clock', 'clock', { unique: false });\n        }\n        \n        // Snapshots store for faster state reconstruction\n        if (!db.objectStoreNames.contains(this.snapshotStoreName)) {\n          const snapshotStore = db.createObjectStore(this.snapshotStoreName, { keyPath: 'aggregateId' });\n          snapshotStore.createIndex('version', 'version', { unique: false });\n        }\n      };\n    });\n    \n    return this.initPromise;\n  }\n\n  private incrementClock(): number {\n    this.lamportClock++;\n    localStorage.setItem('eventStore_clock', String(this.lamportClock));\n    return this.lamportClock;\n  }\n\n  /**\n   * Update Lamport clock when receiving remote events\n   */\n  receiveClock(remoteClock: number): void {\n    this.lamportClock = Math.max(this.lamportClock, remoteClock) + 1;\n    localStorage.setItem('eventStore_clock', String(this.lamportClock));\n  }\n\n  /**\n   * Append event to store\n   */\n  async append(\n    aggregateId: string,\n    aggregateType: string,\n    eventType: string,\n    data: Record<string, unknown>,\n    correlationId?: string,\n    causationId?: string\n  ): Promise<DomainEvent> {\n    if (!this.db) throw new Error('EventStore not initialized');\n\n    const event: DomainEvent = {\n      id: uuid(),\n      aggregateId,\n      aggregateType,\n      eventType,\n      timestamp: Date.now(),\n      nodeId: this.nodeId,\n      clock: this.incrementClock(),\n      version: await this.getAggregateVersion(aggregateId),\n      data,\n      correlationId,\n      causationId,\n      synced: false,\n      syncAttempts: 0,\n      checksum: this.generateChecksum({ ...data, timestamp: Date.now() })\n    };\n\n    return new Promise((resolve, reject) => {\n      const tx = this.db!.transaction([this.storeName], 'readwrite');\n      const store = tx.objectStore(this.storeName);\n      const request = store.add(event);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve(event);\n    });\n  }\n\n  /**\n   * Get all events for an aggregate, sorted by clock\n   */\n  async getEvents(aggregateId: string): Promise<DomainEvent[]> {\n    if (!this.db) throw new Error('EventStore not initialized');\n\n    return new Promise((resolve, reject) => {\n      const tx = this.db!.transaction([this.storeName], 'readonly');\n      const store = tx.objectStore(this.storeName);\n      const index = store.index('aggregateId');\n      const request = index.getAll(aggregateId);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => {\n        // Sort by Lamport clock for causality\n        const events = request.result.sort((a, b) => a.clock - b.clock);\n        resolve(events);\n      };\n    });\n  }\n\n  /**\n   * Get unsynchronized events\n   */\n  async getUnsyncedEvents(): Promise<DomainEvent[]> {\n    if (!this.db) throw new Error('EventStore not initialized');\n\n    return new Promise((resolve, reject) => {\n      const tx = this.db!.transaction([this.storeName], 'readonly');\n      const store = tx.objectStore(this.storeName);\n      const events: DomainEvent[] = [];\n      \n      // Use cursor to iterate through all events and filter unsynced ones\n      const request = store.openCursor();\n      \n      request.onsuccess = () => {\n        const cursor = request.result;\n        if (cursor) {\n          const event = cursor.value as DomainEvent;\n          if (!event.synced) {\n            events.push(event);\n          }\n          cursor.continue();\n        } else {\n          // Sort by clock for proper ordering during sync\n          events.sort((a, b) => a.clock - b.clock);\n          resolve(events);\n        }\n      };\n\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  /**\n   * Mark events as synced\n   */\n  async markSynced(eventIds: string[]): Promise<void> {\n    if (!this.db) throw new Error('EventStore not initialized');\n\n    return new Promise((resolve, reject) => {\n      const tx = this.db!.transaction([this.storeName], 'readwrite');\n      const store = tx.objectStore(this.storeName);\n\n      let completed = 0;\n      eventIds.forEach((id) => {\n        const getRequest = store.get(id);\n        getRequest.onsuccess = () => {\n          const event = getRequest.result;\n          if (event) {\n            event.synced = true;\n            store.put(event);\n          }\n          completed++;\n          if (completed === eventIds.length) {\n            resolve();\n          }\n        };\n      });\n\n      tx.onerror = () => reject(tx.error);\n      \n      // Handle empty array\n      if (eventIds.length === 0) {\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * Mark sync attempt (for retry tracking)\n   */\n  async markSyncAttempt(eventId: string, error?: string): Promise<void> {\n    if (!this.db) throw new Error('EventStore not initialized');\n\n    return new Promise((resolve, reject) => {\n      const tx = this.db!.transaction([this.storeName], 'readwrite');\n      const store = tx.objectStore(this.storeName);\n      const request = store.get(eventId);\n\n      request.onsuccess = () => {\n        const event = request.result;\n        if (event) {\n          event.syncAttempts++;\n          event.lastSyncAttempt = Date.now();\n          if (error) {\n            event.syncError = error;\n          }\n          store.put(event);\n        }\n        resolve();\n      };\n\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  /**\n   * Replay events to reconstruct state\n   */\n  async replay(aggregateId: string): Promise<Record<string, unknown>> {\n    const events = await this.getEvents(aggregateId);\n    const state: Record<string, unknown> = {};\n\n    for (const event of events) {\n      // Apply event to state based on event type\n      switch (event.eventType) {\n        case 'created':\n          Object.assign(state, event.data);\n          break;\n        case 'updated':\n          Object.assign(state, event.data);\n          break;\n        case 'deleted':\n          Object.assign(state, { _deleted: true, _deletedAt: event.timestamp });\n          break;\n        default:\n          // Generic field merge\n          Object.assign(state, event.data);\n      }\n      \n      state.version = event.version;\n      state.lastUpdated = event.timestamp;\n    }\n\n    return state;\n  }\n\n  /**\n   * Create snapshot for faster state reconstruction\n   */\n  async createSnapshot(aggregateId: string): Promise<void> {\n    if (!this.db) throw new Error('EventStore not initialized');\n\n    const state = await this.replay(aggregateId);\n    const events = await this.getEvents(aggregateId);\n    const lastEvent = events[events.length - 1];\n\n    if (!lastEvent) return;\n\n    const snapshot = {\n      aggregateId,\n      state,\n      version: lastEvent.version,\n      clock: lastEvent.clock,\n      timestamp: Date.now(),\n    };\n\n    return new Promise((resolve, reject) => {\n      const tx = this.db!.transaction([this.snapshotStoreName], 'readwrite');\n      const store = tx.objectStore(this.snapshotStoreName);\n      const request = store.put(snapshot);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve();\n    });\n  }\n\n  /**\n   * Detect conflicts in events\n   */\n  detectConflicts(localEvents: DomainEvent[], remoteEvents: DomainEvent[]): ConflictInfo[] {\n    const conflicts: ConflictInfo[] = [];\n\n    // Group by aggregate\n    const localByAggregate = new Map<string, DomainEvent[]>();\n    const remoteByAggregate = new Map<string, DomainEvent[]>();\n\n    for (const event of localEvents) {\n      if (!localByAggregate.has(event.aggregateId)) {\n        localByAggregate.set(event.aggregateId, []);\n      }\n      localByAggregate.get(event.aggregateId)!.push(event);\n    }\n\n    for (const event of remoteEvents) {\n      if (!remoteByAggregate.has(event.aggregateId)) {\n        remoteByAggregate.set(event.aggregateId, []);\n      }\n      remoteByAggregate.get(event.aggregateId)!.push(event);\n    }\n\n    // Check for concurrent writes to same fields\n    for (const [aggregateId, localAggEvents] of localByAggregate) {\n      const remoteAggEvents = remoteByAggregate.get(aggregateId) || [];\n\n      for (const localEvent of localAggEvents) {\n        for (const remoteEvent of remoteAggEvents) {\n          // If same version (concurrent edit)  potential conflict\n          if (localEvent.version === remoteEvent.version && localEvent.nodeId !== remoteEvent.nodeId) {\n            const localFields = Object.keys(localEvent.data);\n            const remoteFields = Object.keys(remoteEvent.data);\n            const conflictingFields = localFields.filter(f => remoteFields.includes(f));\n\n            if (conflictingFields.length > 0) {\n              conflicts.push({\n                aggregateId,\n                fields: conflictingFields,\n                localEvent,\n                remoteEvent,\n              });\n            }\n          }\n        }\n      }\n    }\n\n    return conflicts;\n  }\n\n  /**\n   * Resolve conflicts with a strategy\n   */\n  resolveConflicts(\n    conflicts: ConflictInfo[],\n    strategy: 'last-write-wins' | 'first-write-wins' | 'merge' = 'last-write-wins'\n  ): DomainEvent[] {\n    const resolvedEvents: DomainEvent[] = [];\n\n    for (const conflict of conflicts) {\n      let winner: DomainEvent;\n\n      switch (strategy) {\n        case 'last-write-wins':\n          winner = conflict.localEvent.timestamp > conflict.remoteEvent.timestamp\n            ? conflict.localEvent\n            : conflict.remoteEvent;\n          break;\n        case 'first-write-wins':\n          winner = conflict.localEvent.timestamp < conflict.remoteEvent.timestamp\n            ? conflict.localEvent\n            : conflict.remoteEvent;\n          break;\n        case 'merge':\n          // Create merged event with both changes\n          const mergedData = {\n            ...conflict.remoteEvent.data,\n            ...conflict.localEvent.data,\n          };\n          winner = {\n            ...conflict.localEvent,\n            id: uuid(),\n            data: mergedData,\n            eventType: 'merged',\n            timestamp: Date.now(),\n          };\n          break;\n      }\n\n      conflict.resolution = winner === conflict.localEvent ? 'local' : \n                           winner === conflict.remoteEvent ? 'remote' : 'merge';\n      resolvedEvents.push(winner);\n    }\n\n    return resolvedEvents;\n  }\n\n  /**\n   * Generate checksum for conflict detection\n   */\n  private generateChecksum(data: Record<string, unknown>): string {\n    const json = JSON.stringify(data, Object.keys(data).sort());\n    let hash = 0;\n\n    for (let i = 0; i < json.length; i++) {\n      const char = json.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n\n    return Math.abs(hash).toString(16);\n  }\n\n  private async getAggregateVersion(aggregateId: string): Promise<number> {\n    const events = await this.getEvents(aggregateId);\n    return events.length > 0 ? events[events.length - 1].version + 1 : 1;\n  }\n\n  /**\n   * Get total event count\n   */\n  async getEventCount(): Promise<number> {\n    if (!this.db) throw new Error('EventStore not initialized');\n\n    return new Promise((resolve, reject) => {\n      const tx = this.db!.transaction([this.storeName], 'readonly');\n      const store = tx.objectStore(this.storeName);\n      const request = store.count();\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve(request.result);\n    });\n  }\n\n  /**\n   * Clear all events (use with caution!)\n   */\n  async clear(): Promise<void> {\n    if (!this.db) throw new Error('EventStore not initialized');\n\n    return new Promise((resolve, reject) => {\n      const tx = this.db!.transaction([this.storeName, this.snapshotStoreName], 'readwrite');\n      const eventsStore = tx.objectStore(this.storeName);\n      const snapshotStore = tx.objectStore(this.snapshotStoreName);\n\n      eventsStore.clear();\n      snapshotStore.clear();\n\n      tx.onerror = () => reject(tx.error);\n      tx.oncomplete = () => resolve();\n    });\n  }\n}\n\n// Singleton instance\nlet eventStoreInstance: EventStore | null = null;\n\nexport function getEventStore(): EventStore {\n  if (!eventStoreInstance) {\n    eventStoreInstance = new EventStore();\n  }\n  return eventStoreInstance;\n}\n\n/**\n * Hook for event sourcing\n */\nexport function useEventStore() {\n  const [store] = React.useState(() => getEventStore());\n  const [isReady, setIsReady] = React.useState(false);\n  const [error, setError] = React.useState<Error | null>(null);\n\n  React.useEffect(() => {\n    store.init()\n      .then(() => setIsReady(true))\n      .catch((err) => setError(err));\n  }, [store]);\n\n  const appendEvent = React.useCallback(\n    async (\n      aggregateId: string,\n      aggregateType: string,\n      eventType: string,\n      data: Record<string, unknown>,\n      correlationId?: string\n    ) => {\n      if (!isReady) throw new Error('EventStore not ready');\n      return store.append(aggregateId, aggregateType, eventType, data, correlationId);\n    },\n    [store, isReady]\n  );\n\n  const getState = React.useCallback(\n    async (aggregateId: string) => {\n      if (!isReady) throw new Error('EventStore not ready');\n      return store.replay(aggregateId);\n    },\n    [store, isReady]\n  );\n\n  const getUnsyncedCount = React.useCallback(async () => {\n    if (!isReady) return 0;\n    const events = await store.getUnsyncedEvents();\n    return events.length;\n  }, [store, isReady]);\n\n  return { \n    store, \n    isReady, \n    error,\n    appendEvent, \n    getState, \n    getUnsyncedCount,\n  };\n}\n\n/**\n * Hook for syncing events to server\n */\nexport function useEventSync(syncEndpoint: string) {\n  const { store, isReady } = useEventStore();\n  const [isSyncing, setIsSyncing] = React.useState(false);\n  const [lastSyncResult, setLastSyncResult] = React.useState<{\n    success: boolean;\n    syncedCount: number;\n    failedCount: number;\n    conflicts: ConflictInfo[];\n  } | null>(null);\n\n  const sync = React.useCallback(async () => {\n    if (!isReady || isSyncing) return;\n\n    setIsSyncing(true);\n    try {\n      const unsyncedEvents = await store.getUnsyncedEvents();\n      \n      if (unsyncedEvents.length === 0) {\n        setLastSyncResult({ success: true, syncedCount: 0, failedCount: 0, conflicts: [] });\n        return;\n      }\n\n      // Send to server\n      const response = await fetch(syncEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n        },\n        body: JSON.stringify({ events: unsyncedEvents }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Sync failed: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n\n      // Mark synced events\n      if (result.synced && result.synced.length > 0) {\n        await store.markSynced(result.synced);\n      }\n\n      // Handle conflicts\n      let conflicts: ConflictInfo[] = [];\n      if (result.conflicts && result.conflicts.length > 0) {\n        conflicts = store.detectConflicts(unsyncedEvents, result.conflicts);\n      }\n\n      setLastSyncResult({\n        success: true,\n        syncedCount: result.synced?.length || 0,\n        failedCount: result.failed?.length || 0,\n        conflicts,\n      });\n    } catch (error) {\n      setLastSyncResult({\n        success: false,\n        syncedCount: 0,\n        failedCount: 0,\n        conflicts: [],\n      });\n      console.error('Event sync failed:', error);\n    } finally {\n      setIsSyncing(false);\n    }\n  }, [store, isReady, isSyncing, syncEndpoint]);\n\n  return { sync, isSyncing, lastSyncResult };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/evidenceApi.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[556,559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[556,559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1002,1005],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1002,1005],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1081,1084],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1081,1084],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiRequest } from './api';\n\nexport enum EvidenceType {\n  DOCUMENT = 'document',\n  CHAT = 'chat',\n  VIDEO = 'video',\n  PHOTO = 'photo',\n}\n\nexport enum ProcessingStatus {\n  PENDING = 'pending',\n  PROCESSING = 'processing',\n  COMPLETED = 'completed',\n  FAILED = 'failed',\n}\n\nexport interface Evidence {\n  id: string;\n  case_id: string;\n  type: EvidenceType;\n  filename: string;\n  size?: number;\n  mime_type?: string;\n  uploaded_by?: string;\n  uploaded_at?: string;\n  status: ProcessingStatus;\n  processed_at?: string;\n  tags?: string[];\n  metadata?: any;\n  // Relations\n  document?: DocumentMetadata;\n  chat?: ChatMetadata;\n  video?: VideoMetadata;\n  photo?: PhotoMetadata;\n}\n\nexport interface DocumentMetadata {\n  page_count: number;\n  extracted_text?: string;\n  ocr_confidence?: number;\n}\n\nexport interface ChatMetadata {\n  platform: string;\n  message_count: number;\n  date_range_start?: string;\n  date_range_end?: string;\n}\n\nexport interface VideoMetadata {\n  duration: number;\n  resolution?: any;\n  transcript?: string;\n}\n\nexport interface PhotoMetadata {\n  dimensions?: any;\n  ocr_text?: string;\n  classification?: string;\n}\n\nexport const evidenceApi = {\n  upload: async (\n    caseId: string,\n    file: File,\n    type: EvidenceType,\n    tags?: string[],\n    onProgress?: (progress: number) => void,\n  ) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('type', type);\n    if (tags?.length) {\n      formData.append('tags', tags.join(','));\n    }\n\n    const BASE_URL = import.meta.env.VITE_API_URL || '/api/v1';\n    const token = localStorage.getItem('token');\n\n    const xhr = new XMLHttpRequest();\n\n    return new Promise((resolve, reject) => {\n      xhr.open('POST', `${BASE_URL}/evidence/${caseId}/evidence`);\n      if (token) xhr.setRequestHeader('Authorization', `Bearer ${token}`);\n\n      if (onProgress) {\n        xhr.upload.onprogress = (event) => {\n          if (event.lengthComputable) {\n            const percentComplete = (event.loaded / event.total) * 100;\n            onProgress(percentComplete);\n          }\n        };\n      }\n\n      xhr.onload = () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          resolve(JSON.parse(xhr.responseText));\n        } else {\n          reject(new Error(xhr.statusText));\n        }\n      };\n\n      xhr.onerror = () => reject(new Error('Network Error'));\n\n      xhr.send(formData);\n    });\n  },\n\n  list: async (caseId: string): Promise<Evidence[]> => {\n    return apiRequest(`/evidence/${caseId}/evidence`);\n  },\n\n  get: async (id: string): Promise<Evidence> => {\n    return apiRequest(`/evidence/${id}`);\n  },\n\n  process: async (id: string): Promise<Evidence> => {\n    return apiRequest(`/evidence/${id}/process`, { method: 'POST' });\n  },\n\n  reprocess: async (id: string): Promise<Evidence> => {\n    return apiRequest(`/evidence/${id}/reprocess`, { method: 'POST' });\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/exportUtils.ts","messages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":104,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":107,"endColumn":11,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2502,2792],"text":"{ pdf.setFontSize(11);\n        pdf.setFont('helvetica', 'normal');\n        const lines = pdf.splitTextToSize(\n          section.content as string,\n          pageWidth - 2 * margin\n        );\n        pdf.text(lines, margin, yPosition);\n        yPosition += lines.length * 6 + 5;\n        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":113,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":113,"endColumn":59,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2822,3531],"text":"{ const tableData = section.content as PDFTableData;\n        if (tableData.title) {\n          pdf.setFontSize(12);\n          pdf.setFont('helvetica', 'bold');\n          pdf.text(tableData.title, margin, yPosition);\n          yPosition += 8;\n        }\n        \n        autoTable(pdf, {\n          head: [tableData.headers],\n          body: tableData.rows,\n          startY: yPosition,\n          margin: { left: margin, right: margin },\n          styles: { fontSize: 9, cellPadding: 3 },\n          headStyles: { fillColor: [59, 130, 246], textColor: 255 },\n          alternateRowStyles: { fillColor: [248, 250, 252] },\n        });\n        \n        yPosition = (pdf as any).lastAutoTable.finalY + 10;\n        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3485,3488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3485,3488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":135,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":135,"endColumn":61,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3561,4058],"text":"{ const canvas = section.content as HTMLCanvasElement;\n        const imgData = canvas.toDataURL('image/png');\n        const imgWidth = pageWidth - 2 * margin;\n        const imgHeight = (canvas.height / canvas.width) * imgWidth;\n        \n        if (yPosition + imgHeight > pageHeight - margin) {\n          pdf.addPage();\n          yPosition = margin;\n        }\n        \n        pdf.addImage(imgData, 'PNG', margin, yPosition, imgWidth, imgHeight);\n        yPosition += imgHeight + 10;\n        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":136,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":136,"endColumn":55,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3561,4058],"text":"{ const canvas = section.content as HTMLCanvasElement;\n        const imgData = canvas.toDataURL('image/png');\n        const imgWidth = pageWidth - 2 * margin;\n        const imgHeight = (canvas.height / canvas.width) * imgWidth;\n        \n        if (yPosition + imgHeight > pageHeight - margin) {\n          pdf.addPage();\n          yPosition = margin;\n        }\n        \n        pdf.addImage(imgData, 'PNG', margin, yPosition, imgWidth, imgHeight);\n        yPosition += imgHeight + 10;\n        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":137,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":137,"endColumn":49,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3561,4058],"text":"{ const canvas = section.content as HTMLCanvasElement;\n        const imgData = canvas.toDataURL('image/png');\n        const imgWidth = pageWidth - 2 * margin;\n        const imgHeight = (canvas.height / canvas.width) * imgWidth;\n        \n        if (yPosition + imgHeight > pageHeight - margin) {\n          pdf.addPage();\n          yPosition = margin;\n        }\n        \n        pdf.addImage(imgData, 'PNG', margin, yPosition, imgWidth, imgHeight);\n        yPosition += imgHeight + 10;\n        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":138,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":138,"endColumn":69,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3561,4058],"text":"{ const canvas = section.content as HTMLCanvasElement;\n        const imgData = canvas.toDataURL('image/png');\n        const imgWidth = pageWidth - 2 * margin;\n        const imgHeight = (canvas.height / canvas.width) * imgWidth;\n        \n        if (yPosition + imgHeight > pageHeight - margin) {\n          pdf.addPage();\n          yPosition = margin;\n        }\n        \n        pdf.addImage(imgData, 'PNG', margin, yPosition, imgWidth, imgHeight);\n        yPosition += imgHeight + 10;\n        break; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Export Utilities\n * Phase 3: Enterprise Features - Independent Implementation\n * \n * Provides PDF, Excel, CSV, and image export functionality\n */\n\nimport jsPDF from 'jspdf';\nimport autoTable from 'jspdf-autotable';\nimport * as XLSX from 'xlsx';\nimport { saveAs } from 'file-saver';\n\n// ============================================================================\n// PDF Export\n// ============================================================================\n\nexport interface PDFReportOptions {\n  title: string;\n  subtitle?: string;\n  author?: string;\n  date?: Date;\n  logo?: string; // Base64 image\n  orientation?: 'portrait' | 'landscape';\n  pageSize?: 'a4' | 'letter';\n}\n\nexport interface PDFTableData {\n  headers: string[];\n  rows: (string | number)[][];\n  title?: string;\n}\n\nexport interface PDFSection {\n  type: 'text' | 'table' | 'chart' | 'heading';\n  content: string | PDFTableData | HTMLCanvasElement;\n  options?: Record<string, unknown>;\n}\n\n/**\n * Generate a professional PDF report\n */\nexport function generatePDFReport(\n  sections: PDFSection[],\n  options: PDFReportOptions\n): jsPDF {\n  const pdf = new jsPDF({\n    orientation: options.orientation || 'portrait',\n    unit: 'mm',\n    format: options.pageSize || 'a4',\n  });\n\n  const pageWidth = pdf.internal.pageSize.getWidth();\n  const pageHeight = pdf.internal.pageSize.getHeight();\n  const margin = 20;\n  let yPosition = margin;\n\n  // Add header\n  pdf.setFontSize(24);\n  pdf.setFont('helvetica', 'bold');\n  pdf.text(options.title, margin, yPosition);\n  yPosition += 10;\n\n  if (options.subtitle) {\n    pdf.setFontSize(12);\n    pdf.setFont('helvetica', 'normal');\n    pdf.setTextColor(100);\n    pdf.text(options.subtitle, margin, yPosition);\n    yPosition += 8;\n  }\n\n  // Add date\n  const dateStr = (options.date || new Date()).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n  pdf.setFontSize(10);\n  pdf.setTextColor(150);\n  pdf.text(`Generated: ${dateStr}`, margin, yPosition);\n  yPosition += 15;\n\n  // Reset text color\n  pdf.setTextColor(0);\n\n  // Process sections\n  for (const section of sections) {\n    // Check if we need a new page\n    if (yPosition > pageHeight - 40) {\n      pdf.addPage();\n      yPosition = margin;\n    }\n\n    switch (section.type) {\n      case 'heading':\n        pdf.setFontSize(16);\n        pdf.setFont('helvetica', 'bold');\n        pdf.text(section.content as string, margin, yPosition);\n        yPosition += 10;\n        break;\n\n      case 'text':\n        pdf.setFontSize(11);\n        pdf.setFont('helvetica', 'normal');\n        const lines = pdf.splitTextToSize(\n          section.content as string,\n          pageWidth - 2 * margin\n        );\n        pdf.text(lines, margin, yPosition);\n        yPosition += lines.length * 6 + 5;\n        break;\n\n      case 'table':\n        const tableData = section.content as PDFTableData;\n        if (tableData.title) {\n          pdf.setFontSize(12);\n          pdf.setFont('helvetica', 'bold');\n          pdf.text(tableData.title, margin, yPosition);\n          yPosition += 8;\n        }\n        \n        autoTable(pdf, {\n          head: [tableData.headers],\n          body: tableData.rows,\n          startY: yPosition,\n          margin: { left: margin, right: margin },\n          styles: { fontSize: 9, cellPadding: 3 },\n          headStyles: { fillColor: [59, 130, 246], textColor: 255 },\n          alternateRowStyles: { fillColor: [248, 250, 252] },\n        });\n        \n        yPosition = (pdf as any).lastAutoTable.finalY + 10;\n        break;\n\n      case 'chart':\n        const canvas = section.content as HTMLCanvasElement;\n        const imgData = canvas.toDataURL('image/png');\n        const imgWidth = pageWidth - 2 * margin;\n        const imgHeight = (canvas.height / canvas.width) * imgWidth;\n        \n        if (yPosition + imgHeight > pageHeight - margin) {\n          pdf.addPage();\n          yPosition = margin;\n        }\n        \n        pdf.addImage(imgData, 'PNG', margin, yPosition, imgWidth, imgHeight);\n        yPosition += imgHeight + 10;\n        break;\n    }\n  }\n\n  // Add footer\n  const pageCount = pdf.getNumberOfPages();\n  for (let i = 1; i <= pageCount; i++) {\n    pdf.setPage(i);\n    pdf.setFontSize(8);\n    pdf.setTextColor(150);\n    pdf.text(\n      `Page ${i} of ${pageCount}`,\n      pageWidth / 2,\n      pageHeight - 10,\n      { align: 'center' }\n    );\n    if (options.author) {\n      pdf.text(options.author, margin, pageHeight - 10);\n    }\n  }\n\n  return pdf;\n}\n\n/**\n * Quick PDF export for a single table\n */\nexport function exportTableToPDF(\n  data: Record<string, unknown>[],\n  columns: { key: string; header: string }[],\n  filename: string,\n  title?: string\n): void {\n  const headers = columns.map((c) => c.header);\n  const rows = data.map((row) =>\n    columns.map((c) => String(row[c.key] ?? ''))\n  );\n\n  const pdf = generatePDFReport(\n    [\n      {\n        type: 'table',\n        content: { headers, rows, title },\n      },\n    ],\n    { title: title || filename }\n  );\n\n  pdf.save(`${filename}.pdf`);\n}\n\n// ============================================================================\n// Excel Export\n// ============================================================================\n\nexport interface ExcelSheetData {\n  name: string;\n  data: Record<string, unknown>[];\n  columns?: { key: string; header: string; width?: number }[];\n}\n\n/**\n * Export data to Excel with multiple sheets\n */\nexport function exportToExcel(\n  sheets: ExcelSheetData[],\n  filename: string\n): void {\n  const workbook = XLSX.utils.book_new();\n\n  for (const sheet of sheets) {\n    let wsData: (string | number | boolean | null)[][];\n\n    if (sheet.columns) {\n      // Use specified columns\n      const headers = sheet.columns.map((c) => c.header);\n      const rows = sheet.data.map((row) =>\n        sheet.columns!.map((c) => {\n          const val = row[c.key];\n          if (val === null || val === undefined) return null;\n          if (typeof val === 'object') return JSON.stringify(val);\n          return val as string | number | boolean;\n        })\n      );\n      wsData = [headers, ...rows];\n    } else {\n      // Auto-detect columns from first row\n      const keys = sheet.data.length > 0 ? Object.keys(sheet.data[0]) : [];\n      const headers = keys;\n      const rows = sheet.data.map((row) =>\n        keys.map((k) => {\n          const val = row[k];\n          if (val === null || val === undefined) return null;\n          if (typeof val === 'object') return JSON.stringify(val);\n          return val as string | number | boolean;\n        })\n      );\n      wsData = [headers, ...rows];\n    }\n\n    const worksheet = XLSX.utils.aoa_to_sheet(wsData);\n\n    // Set column widths\n    if (sheet.columns) {\n      worksheet['!cols'] = sheet.columns.map((c) => ({\n        wch: c.width || 15,\n      }));\n    }\n\n    XLSX.utils.book_append_sheet(workbook, worksheet, sheet.name.slice(0, 31));\n  }\n\n  const excelBuffer = XLSX.write(workbook, {\n    bookType: 'xlsx',\n    type: 'array',\n  });\n\n  const blob = new Blob([excelBuffer], {\n    type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  });\n\n  saveAs(blob, `${filename}.xlsx`);\n}\n\n/**\n * Quick Excel export for a single dataset\n */\nexport function exportDataToExcel(\n  data: Record<string, unknown>[],\n  filename: string,\n  sheetName = 'Data'\n): void {\n  exportToExcel([{ name: sheetName, data }], filename);\n}\n\n// ============================================================================\n// CSV Export\n// ============================================================================\n\n/**\n * Export data to CSV\n */\nexport function exportToCSV(\n  data: Record<string, unknown>[],\n  filename: string,\n  columns?: { key: string; header: string }[]\n): void {\n  if (data.length === 0) return;\n\n  const keys = columns ? columns.map((c) => c.key) : Object.keys(data[0]);\n  const headers = columns ? columns.map((c) => c.header) : keys;\n\n  const csvRows = [\n    headers.join(','),\n    ...data.map((row) =>\n      keys\n        .map((k) => {\n          const val = row[k];\n          if (val === null || val === undefined) return '';\n          const str = String(val);\n          // Escape quotes and wrap in quotes if contains comma\n          if (str.includes(',') || str.includes('\"') || str.includes('\\n')) {\n            return `\"${str.replace(/\"/g, '\"\"')}\"`;\n          }\n          return str;\n        })\n        .join(',')\n    ),\n  ];\n\n  const csvContent = csvRows.join('\\n');\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n  saveAs(blob, `${filename}.csv`);\n}\n\n// ============================================================================\n// Chart/Image Export\n// ============================================================================\n\n/**\n * Export a chart element to PNG\n */\nexport async function exportChartToPNG(\n  chartElement: HTMLElement,\n  filename: string\n): Promise<void> {\n  // Dynamic import to avoid SSR issues\n  const html2canvas = (await import('html2canvas')).default;\n  \n  const canvas = await html2canvas(chartElement, {\n    backgroundColor: '#ffffff',\n    scale: 2, // Higher resolution\n  });\n\n  canvas.toBlob((blob) => {\n    if (blob) {\n      saveAs(blob, `${filename}.png`);\n    }\n  });\n}\n\n/**\n * Export a chart element to SVG (if using SVG-based charts)\n */\nexport function exportChartToSVG(\n  svgElement: SVGElement,\n  filename: string\n): void {\n  const serializer = new XMLSerializer();\n  const svgString = serializer.serializeToString(svgElement);\n  const blob = new Blob([svgString], { type: 'image/svg+xml' });\n  saveAs(blob, `${filename}.svg`);\n}\n\n/**\n * Get canvas from Recharts chart ref\n */\nexport async function getRechartsCanvas(\n  chartContainer: HTMLElement\n): Promise<HTMLCanvasElement> {\n  const html2canvas = (await import('html2canvas')).default;\n  return html2canvas(chartContainer, {\n    backgroundColor: '#ffffff',\n    scale: 2,\n  });\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\n/**\n * Format date for filenames\n */\nexport function getFilenameDate(): string {\n  return new Date().toISOString().split('T')[0];\n}\n\n/**\n * Generate a timestamped filename\n */\nexport function generateFilename(base: string, extension?: string): string {\n  const date = getFilenameDate();\n  const ext = extension ? `.${extension}` : '';\n  return `${base}_${date}${ext}`;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/mutations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/queryClient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/reportGenerator.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[443,446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[443,446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":216,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5864,5867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5864,5867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7473,7476],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7473,7476],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":278,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":278,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7795,7798],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7795,7798],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":306,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8737,8740],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8737,8740],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":326,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":326,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9361,9364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9361,9364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":346,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":346,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10082,10085],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10082,10085],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":358,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":358,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10494,10497],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10494,10497],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":369,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":369,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10970,10973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10970,10973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":372,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":372,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11073,11076],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11073,11076],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":384,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":384,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11581,11584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11581,11584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":390,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":390,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11896,11899],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11896,11899],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":390,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":390,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11902,11905],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11902,11905],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":394,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":394,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12023,12026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12023,12026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":398,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":398,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12139,12142],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12139,12142],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":407,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":407,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12367,12370],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12367,12370],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":416,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":416,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12602,12605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12602,12605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import jsPDF from 'jspdf';\nimport * as XLSX from 'xlsx';\nimport { format } from 'date-fns';\n\nexport interface ReportTemplate {\n  id: string;\n  name: string;\n  type: 'case_summary' | 'evidence_package' | 'financial_analysis' | 'compliance_report';\n  sections: ReportSection[];\n  styling: ReportStyling;\n}\n\nexport interface ReportSection {\n  id: string;\n  title: string;\n  type: 'text' | 'table' | 'chart' | 'evidence' | 'signature';\n  content: any;\n  styling?: SectionStyling;\n}\n\nexport interface ReportStyling {\n  fontFamily: string;\n  fontSize: string;\n  colors: {\n    primary: string;\n    secondary: string;\n    accent: string;\n  };\n  logo?: string;\n  headerText?: string;\n  footerText?: string;\n}\n\nexport interface SectionStyling {\n  width?: string;\n  height?: string;\n  margin?: string;\n  padding?: string;\n  backgroundColor?: string;\n  border?: string;\n}\n\nexport class ReportGenerator {\n  private templates: Map<string, ReportTemplate> = new Map();\n\n  constructor() {\n    this.initializeTemplates();\n  }\n\n  private initializeTemplates() {\n    // Case Summary Report\n    this.templates.set('case_summary', {\n      id: 'case_summary',\n      name: 'Case Summary Report',\n      type: 'case_summary',\n      styling: {\n        fontFamily: 'Arial, sans-serif',\n        fontSize: '12px',\n        colors: {\n          primary: '#1f2937',\n          secondary: '#6b7280',\n          accent: '#3b82f6'\n        },\n        headerText: 'FRAUD INVESTIGATION CASE SUMMARY',\n        footerText: 'Confidential - For Authorized Personnel Only'\n      },\n      sections: [\n        {\n          id: 'header',\n          title: 'Case Information',\n          type: 'text',\n          content: {\n            fields: ['case_id', 'subject_name', 'risk_score', 'status', 'created_date', 'last_updated']\n          }\n        },\n        {\n          id: 'executive_summary',\n          title: 'Executive Summary',\n          type: 'text',\n          content: {\n            template: 'This report summarizes the investigation findings for Case {case_id}. The subject {subject_name} has been assessed with a risk score of {risk_score}. Key findings include...'\n          }\n        },\n        {\n          id: 'financial_analysis',\n          title: 'Financial Analysis',\n          type: 'table',\n          content: {\n            headers: ['Transaction Date', 'Amount', 'Description', 'Category', 'Risk Level'],\n            dataSource: 'transactions'\n          }\n        },\n        {\n          id: 'evidence_summary',\n          title: 'Evidence Summary',\n          type: 'table',\n          content: {\n            headers: ['Evidence ID', 'Type', 'Description', 'Date Added', 'Relevance Score'],\n            dataSource: 'evidence'\n          }\n        },\n        {\n          id: 'recommendations',\n          title: 'Recommendations',\n          type: 'text',\n          content: {\n            template: 'Based on the analysis, the following actions are recommended...'\n          }\n        },\n        {\n          id: 'signature',\n          title: 'Investigator Signature',\n          type: 'signature',\n          content: {\n            fields: ['investigator_name', 'date', 'signature']\n          }\n        }\n      ]\n    });\n\n    // Evidence Package Report\n    this.templates.set('evidence_package', {\n      id: 'evidence_package',\n      name: 'Court-Admissible Evidence Package',\n      type: 'evidence_package',\n      styling: {\n        fontFamily: 'Times New Roman, serif',\n        fontSize: '12px',\n        colors: {\n          primary: '#1f2937',\n          secondary: '#6b7280',\n          accent: '#dc2626'\n        },\n        headerText: 'OFFICIAL EVIDENCE PACKAGE',\n        footerText: 'Chain of Custody Maintained - Court Admissible'\n      },\n      sections: [\n        {\n          id: 'chain_of_custody',\n          title: 'Chain of Custody',\n          type: 'table',\n          content: {\n            headers: ['Date/Time', 'Action', 'Person', 'Location', 'Notes'],\n            dataSource: 'audit_log'\n          }\n        },\n        {\n          id: 'evidence_list',\n          title: 'Evidence Inventory',\n          type: 'table',\n          content: {\n            headers: ['Item #', 'Description', 'Type', 'Collected By', 'Date', 'Storage Location'],\n            dataSource: 'evidence'\n          }\n        },\n        {\n          id: 'evidence_details',\n          title: 'Evidence Details',\n          type: 'evidence',\n          content: {\n            includeMetadata: true,\n            includeHashes: true\n          }\n        }\n      ]\n    });\n\n    // Financial Analysis Report\n    this.templates.set('financial_analysis', {\n      id: 'financial_analysis',\n      name: 'Financial Analysis Report',\n      type: 'financial_analysis',\n      styling: {\n        fontFamily: 'Arial, sans-serif',\n        fontSize: '11px',\n        colors: {\n          primary: '#1f2937',\n          secondary: '#6b7280',\n          accent: '#059669'\n        },\n        headerText: 'FINANCIAL ANALYSIS REPORT',\n        footerText: 'Generated by AI-Powered Fraud Detection System'\n      },\n      sections: [\n        {\n          id: 'summary_metrics',\n          title: 'Summary Metrics',\n          type: 'table',\n          content: {\n            headers: ['Metric', 'Value', 'Period', 'Change'],\n            dataSource: 'financial_metrics'\n          }\n        },\n        {\n          id: 'transaction_flow',\n          title: 'Transaction Flow Analysis',\n          type: 'chart',\n          content: {\n            chartType: 'sankey',\n            dataSource: 'transaction_flows'\n          }\n        },\n        {\n          id: 'risk_patterns',\n          title: 'Risk Pattern Analysis',\n          type: 'table',\n          content: {\n            headers: ['Pattern Type', 'Frequency', 'Risk Impact', 'Evidence'],\n            dataSource: 'risk_patterns'\n          }\n        }\n      ]\n    });\n  }\n\n  async generatePDF(templateId: string, data: any, options: {\n    filename?: string;\n    includeCharts?: boolean;\n    watermark?: string;\n  } = {}): Promise<void> {\n    const template = this.templates.get(templateId);\n    if (!template) throw new Error('Template not found');\n\n    const pdf = new jsPDF();\n    let yPosition = 20;\n\n    // Add header\n    pdf.setFontSize(16);\n    pdf.setFont(template.styling.fontFamily.split(',')[0], 'bold');\n    pdf.text(template.styling.headerText || template.name, 20, yPosition);\n    yPosition += 20;\n\n    // Add timestamp\n    pdf.setFontSize(10);\n    pdf.setFont(template.styling.fontFamily.split(',')[0], 'normal');\n    pdf.text(`Generated: ${format(new Date(), 'PPP p')}`, 20, yPosition);\n    yPosition += 15;\n\n    // Process each section\n    for (const section of template.sections) {\n      if (yPosition > 250) { // New page if needed\n        pdf.addPage();\n        yPosition = 20;\n      }\n\n      // Section title\n      pdf.setFontSize(14);\n      pdf.setFont(template.styling.fontFamily.split(',')[0], 'bold');\n      pdf.text(section.title, 20, yPosition);\n      yPosition += 10;\n\n      // Section content\n      await this.renderSection(pdf, section, data, yPosition);\n      yPosition += this.getSectionHeight(section);\n    }\n\n    // Add footer\n    const pageCount = pdf.getNumberOfPages();\n    for (let i = 1; i <= pageCount; i++) {\n      pdf.setPage(i);\n      pdf.setFontSize(8);\n      pdf.setFont(template.styling.fontFamily.split(',')[0], 'italic');\n      pdf.text(template.styling.footerText || '', 20, 285);\n\n      if (options.watermark) {\n        pdf.saveGraphicsState();\n        pdf.setGState(new (pdf as any).GState({ opacity: 0.1 }));\n        pdf.setFontSize(48);\n        pdf.text(options.watermark, 105, 150, { angle: 45 });\n        pdf.restoreGraphicsState();\n      }\n    }\n\n    // Download\n    pdf.save(options.filename || `${template.name.replace(/\\s+/g, '_')}.pdf`);\n  }\n\n  async generateExcel(templateId: string, data: any, options: {\n    filename?: string;\n    multipleSheets?: boolean;\n  } = {}): Promise<void> {\n    const template = this.templates.get(templateId);\n    if (!template) throw new Error('Template not found');\n\n    const workbook = XLSX.utils.book_new();\n\n    // Process each section\n    for (const section of template.sections) {\n      if (section.type === 'table') {\n        const worksheetData = this.prepareTableData(section, data);\n        const worksheet = XLSX.utils.aoa_to_sheet(worksheetData);\n\n        // Apply styling\n        if (worksheet['!cols']) {\n          worksheet['!cols'] = worksheetData[0].map(() => ({ width: 15 }));\n        }\n\n        XLSX.utils.book_append_sheet(workbook, worksheet, section.title.substring(0, 31));\n      }\n    }\n\n    // Download\n    XLSX.writeFile(workbook, options.filename || `${template.name.replace(/\\s+/g, '_')}.xlsx`);\n  }\n\n  private async renderSection(pdf: jsPDF, section: ReportSection, data: any, yPosition: number): Promise<void> {\n    pdf.setFontSize(10);\n    pdf.setFont('helvetica', 'normal');\n\n    switch (section.type) {\n      case 'text':\n        this.renderTextSection(pdf, section, data, yPosition);\n        break;\n      case 'table':\n        this.renderTableSection(pdf, section, data, yPosition);\n        break;\n      case 'evidence':\n        this.renderEvidenceSection(pdf, section, data, yPosition);\n        break;\n      case 'signature':\n        this.renderSignatureSection(pdf, section, data, yPosition);\n        break;\n    }\n  }\n\n  private renderTextSection(pdf: jsPDF, section: ReportSection, data: any, yPosition: number): void {\n    let content = section.content.template || section.content.text || '';\n\n    // Replace template variables\n    if (section.content.fields) {\n      section.content.fields.forEach((field: string) => {\n        const value = data[field] || 'N/A';\n        content += `${field.replace('_', ' ').toUpperCase()}: ${value}\\n`;\n      });\n    } else {\n      // Replace template placeholders\n      Object.keys(data).forEach(key => {\n        content = content.replace(new RegExp(`{${key}}`, 'g'), data[key] || 'N/A');\n      });\n    }\n\n    const lines = pdf.splitTextToSize(content, 170);\n    pdf.text(lines, 20, yPosition);\n  }\n\n  private renderTableSection(pdf: jsPDF, section: ReportSection, data: any, yPosition: number): void {\n    const headers = section.content.headers;\n    const tableData = this.prepareTableData(section, data);\n\n    // Table headers\n    pdf.setFont('helvetica', 'bold');\n    headers.forEach((header: string, index: number) => {\n      pdf.text(header, 20 + (index * 35), yPosition);\n    });\n\n    // Table rows\n    pdf.setFont('helvetica', 'normal');\n    tableData.slice(1).forEach((row: any[], rowIndex: number) => {\n      if (yPosition + (rowIndex + 1) * 8 > 270) return; // Prevent overflow\n\n      row.forEach((cell, cellIndex) => {\n        const cellText = String(cell || '');\n        const truncatedText = cellText.length > 12 ? cellText.substring(0, 9) + '...' : cellText;\n        pdf.text(truncatedText, 20 + (cellIndex * 35), yPosition + (rowIndex + 1) * 8);\n      });\n    });\n  }\n\n  private renderEvidenceSection(pdf: jsPDF, section: ReportSection, data: any, yPosition: number): void {\n    const evidence = data.evidence || [];\n\n    evidence.forEach((item: any, index: number) => {\n      if (yPosition + (index * 15) > 270) return;\n\n      pdf.text(`Item ${index + 1}: ${item.filename}`, 20, yPosition + (index * 15));\n      pdf.text(`Type: ${item.type} | Size: ${this.formatFileSize(item.size)}`, 30, yPosition + (index * 15) + 5);\n\n      if (section.content.includeHashes && item.hash) {\n        pdf.text(`SHA-256: ${item.hash}`, 30, yPosition + (index * 15) + 10);\n      }\n    });\n  }\n\n  private renderSignatureSection(pdf: jsPDF, _section: ReportSection, _data: any, yPosition: number): void {\n    pdf.text('Investigator: ___________________________', 20, yPosition);\n    pdf.text('Date: ___________________________', 20, yPosition + 10);\n    pdf.text('Signature: ___________________________', 20, yPosition + 25);\n  }\n\n  private prepareTableData(section: ReportSection, data: any): any[][] {\n    const headers = section.content.headers;\n    const dataSource = section.content.dataSource;\n\n    let rows: any[] = [];\n\n    switch (dataSource) {\n      case 'transactions':\n        rows = (data.transactions || []).map((tx: any) => [\n          tx.date,\n          tx.amount,\n          tx.description,\n          tx.category,\n          tx.risk_level || 'Low'\n        ]);\n        break;\n      case 'evidence':\n        rows = (data.evidence || []).map((ev: any) => [\n          ev.id,\n          ev.type,\n          ev.description,\n          ev.upload_date,\n          ev.relevance_score || 'N/A'\n        ]);\n        break;\n      case 'audit_log':\n        rows = (data.audit_log || []).map((log: any) => [\n          log.timestamp,\n          log.action,\n          log.user,\n          log.location || 'N/A',\n          log.notes || ''\n        ]);\n        break;\n      case 'financial_metrics':\n        rows = [\n          ['Total Transactions', data.total_transactions || 0, 'All time', ''],\n          ['Total Amount', data.total_amount || 0, 'All time', ''],\n          ['High Risk Transactions', data.high_risk_count || 0, 'All time', ''],\n          ['Average Transaction', data.avg_transaction || 0, 'All time', '']\n        ];\n        break;\n      default:\n        rows = [];\n    }\n\n    return [headers, ...rows];\n  }\n\n  private getSectionHeight(section: ReportSection): number {\n    switch (section.type) {\n      case 'text': return 40;\n      case 'table': return 60;\n      case 'evidence': return 50;\n      case 'signature': return 40;\n      default: return 30;\n    }\n  }\n\n  private formatFileSize(bytes: number): string {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  }\n\n  getTemplates(): ReportTemplate[] {\n    return Array.from(this.templates.values());\n  }\n\n  getTemplate(id: string): ReportTemplate | undefined {\n    return this.templates.get(id);\n  }\n}\n\n// Export singleton instance\nexport const reportGenerator = new ReportGenerator();","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/scalableApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/svgExport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/utils.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'vi' is defined but never used.","line":1,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'beforeEach' is defined but never used.","line":1,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'render' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'screen' is defined but never used.","line":2,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fireEvent' is defined but never used.","line":2,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'waitFor' is defined but never used.","line":2,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":44}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { cn } from './utils';\n\ndescribe('cn utility function', () => {\n  it('merges Tailwind classes correctly', () => {\n    const result = cn('bg-red-500', 'text-white', 'p-4');\n    expect(result).toBe('bg-red-500 text-white p-4');\n  });\n\n  it('handles conflicting classes by keeping the last one', () => {\n    const result = cn('bg-red-500', 'bg-blue-500');\n    expect(result).toBe('bg-blue-500');\n  });\n\n  it('handles clsx-style inputs', () => {\n    const result = cn('bg-red-500', ['text-white', 'p-4'], { 'font-bold': true });\n    expect(result).toBe('bg-red-500 text-white p-4 font-bold');\n  });\n\n  it('handles undefined and null values', () => {\n    const result = cn('bg-red-500', undefined, null, 'text-white');\n    expect(result).toBe('bg-red-500 text-white');\n  });\n\n  it('handles empty inputs', () => {\n    const result = cn();\n    expect(result).toBe('');\n  });\n\n  it('handles single input', () => {\n    const result = cn('bg-red-500');\n    expect(result).toBe('bg-red-500');\n  });\n\n  it('handles complex Tailwind conflicts', () => {\n    const result = cn('p-2', 'p-4', 'm-1', 'm-2');\n    expect(result).toBe('p-4 m-2');\n  });\n\n  it('handles important modifiers', () => {\n    const result = cn('bg-red-500!', 'bg-blue-500');\n    expect(result).toBe('bg-blue-500');\n  });\n\n  it('handles responsive prefixes', () => {\n    const result = cn('sm:bg-red-500', 'md:bg-blue-500');\n    expect(result).toBe('sm:bg-red-500 md:bg-blue-500');\n  });\n\n  it('handles hover and focus states', () => {\n    const result = cn('hover:bg-red-500', 'focus:bg-blue-500');\n    expect(result).toBe('hover:bg-red-500 focus:bg-blue-500');\n  });\n\n  it('handles arbitrary values', () => {\n    const result = cn('bg-[#ff0000]', 'text-[14px]');\n    expect(result).toBe('bg-[#ff0000] text-[14px]');\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/AdjudicationQueue.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/CaseDetail.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/CaseDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/CaseList.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fireEvent' is defined but never used.","line":3,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { BrowserRouter } from 'react-router-dom';\nimport { CaseList } from './CaseList';\n\ndescribe('CaseList', () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: { retry: false },\n        mutations: { retry: false }\n      }\n    });\n  });\n\n  const renderWithProviders = (component: React.ReactElement) => {\n    return render(\n      <QueryClientProvider client={queryClient}>\n        <BrowserRouter>\n          {component}\n        </BrowserRouter>\n      </QueryClientProvider>\n    );\n  };\n\n  it('renders loading state initially', () => {\n    renderWithProviders(<CaseList />);\n    expect(screen.getByText('Loading cases...')).toBeInTheDocument();\n  });\n\n  it('displays cases when data is loaded', async () => {\n    // Mock successful data loading\n    vi.mock('../hooks/useCaseList', () => ({\n      useCaseList: () => ({\n        cases: [\n          {\n            id: '1',\n            title: 'Fraud Case 1',\n            status: 'open',\n            risk_score: 85,\n            created_at: '2024-01-01',\n            updated_at: '2024-01-02'\n          },\n          {\n            id: '2',\n            title: 'Fraud Case 2',\n            status: 'closed',\n            risk_score: 45,\n            created_at: '2024-01-01',\n            updated_at: '2024-01-02'\n          }\n        ],\n        isLoading: false,\n        total: 2,\n        page: 1,\n        pages: 1\n      })\n    }));\n\n    renderWithProviders(<CaseList />);\n\n    await waitFor(() => {\n      expect(screen.getByText('Fraud Case 1')).toBeInTheDocument();\n      expect(screen.getByText('Fraud Case 2')).toBeInTheDocument();\n    });\n  });\n\n  it('displays case status badges correctly', async () => {\n    vi.mock('../hooks/useCaseList', () => ({\n      useCaseList: () => ({\n        cases: [\n          { id: '1', title: 'Open Case', status: 'open', risk_score: 50, created_at: '2024-01-01', updated_at: '2024-01-01' },\n          { id: '2', title: 'Closed Case', status: 'closed', risk_score: 50, created_at: '2024-01-01', updated_at: '2024-01-01' },\n          { id: '3', title: 'Pending Case', status: 'pending', risk_score: 50, created_at: '2024-01-01', updated_at: '2024-01-01' }\n        ],\n        isLoading: false,\n        total: 3,\n        page: 1,\n        pages: 1\n      })\n    }));\n\n    renderWithProviders(<CaseList />);\n\n    await waitFor(() => {\n      expect(screen.getByText('open')).toBeInTheDocument();\n      expect(screen.getByText('closed')).toBeInTheDocument();\n      expect(screen.getByText('pending')).toBeInTheDocument();\n    });\n  });\n\n  it('displays risk scores with correct colors', async () => {\n    vi.mock('../hooks/useCaseList', () => ({\n      useCaseList: () => ({\n        cases: [\n          { id: '1', title: 'High Risk', status: 'open', risk_score: 85, created_at: '2024-01-01', updated_at: '2024-01-01' },\n          { id: '2', title: 'Medium Risk', status: 'open', risk_score: 65, created_at: '2024-01-01', updated_at: '2024-01-01' },\n          { id: '3', title: 'Low Risk', status: 'open', risk_score: 25, created_at: '2024-01-01', updated_at: '2024-01-01' }\n        ],\n        isLoading: false,\n        total: 3,\n        page: 1,\n        pages: 1\n      })\n    }));\n\n    renderWithProviders(<CaseList />);\n\n    await waitFor(() => {\n      expect(screen.getByText('85')).toBeInTheDocument();\n      expect(screen.getByText('65')).toBeInTheDocument();\n      expect(screen.getByText('25')).toBeInTheDocument();\n    });\n  });\n\n  it('shows empty state when no cases', async () => {\n    vi.mock('../hooks/useCaseList', () => ({\n      useCaseList: () => ({\n        cases: [],\n        isLoading: false,\n        total: 0,\n        page: 1,\n        pages: 0\n      })\n    }));\n\n    renderWithProviders(<CaseList />);\n\n    await waitFor(() => {\n      expect(screen.getByText('No cases found')).toBeInTheDocument();\n    });\n  });\n\n  it('handles search functionality', async () => {\n    vi.mock('../hooks/useCaseList', () => ({\n      useCaseList: () => ({\n        cases: [\n          { id: '1', title: 'Test Case', status: 'open', risk_score: 50, created_at: '2024-01-01', updated_at: '2024-01-01' }\n        ],\n        isLoading: false,\n        total: 1,\n        page: 1,\n        pages: 1\n      })\n    }));\n\n    renderWithProviders(<CaseList />);\n\n    await waitFor(() => {\n      expect(screen.getByText('Test Case')).toBeInTheDocument();\n    });\n\n    // Search input should be present\n    const searchInput = screen.getByPlaceholderText(/search cases/i);\n    expect(searchInput).toBeInTheDocument();\n  });\n\n  it('displays pagination when multiple pages', async () => {\n    vi.mock('../hooks/useCaseList', () => ({\n      useCaseList: () => ({\n        cases: [\n          { id: '1', title: 'Case 1', status: 'open', risk_score: 50, created_at: '2024-01-01', updated_at: '2024-01-01' }\n        ],\n        isLoading: false,\n        total: 25,\n        page: 1,\n        pages: 3\n      })\n    }));\n\n    renderWithProviders(<CaseList />);\n\n    await waitFor(() => {\n      expect(screen.getByText('25')).toBeInTheDocument(); // Total count\n      expect(screen.getByText('1 of 3')).toBeInTheDocument(); // Page info\n    });\n  });\n\n  it('allows creating new case', async () => {\n    vi.mock('../hooks/useCaseList', () => ({\n      useCaseList: () => ({\n        cases: [],\n        isLoading: false,\n        total: 0,\n        page: 1,\n        pages: 0\n      })\n    }));\n\n    renderWithProviders(<CaseList />);\n\n    await waitFor(() => {\n      const createButton = screen.getByRole('button', { name: /create case/i });\n      expect(createButton).toBeInTheDocument();\n    });\n  });\n\n  it('handles error state', async () => {\n    vi.mock('../hooks/useCaseList', () => ({\n      useCaseList: () => ({\n        cases: [],\n        isLoading: false,\n        error: 'Failed to load cases',\n        total: 0,\n        page: 1,\n        pages: 0\n      })\n    }));\n\n    renderWithProviders(<CaseList />);\n\n    await waitFor(() => {\n      expect(screen.getByText('Failed to load cases')).toBeInTheDocument();\n    });\n  });\n\n  it('has proper accessibility attributes', async () => {\n    vi.mock('../hooks/useCaseList', () => ({\n      useCaseList: () => ({\n        cases: [\n          { id: '1', title: 'Accessible Case', status: 'open', risk_score: 50, created_at: '2024-01-01', updated_at: '2024-01-01' }\n        ],\n        isLoading: false,\n        total: 1,\n        page: 1,\n        pages: 1\n      })\n    }));\n\n    renderWithProviders(<CaseList />);\n\n    await waitFor(() => {\n      // Check for proper heading structure\n      const heading = screen.getByRole('heading', { name: /cases/i });\n      expect(heading).toBeInTheDocument();\n\n      // Check for table structure\n      const table = screen.getByRole('table');\n      expect(table).toBeInTheDocument();\n    });\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/CaseList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/CaseReview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Dashboard.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/FinalSummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Forensics.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Forensics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Ingestion.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1100,1103],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1100,1103],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/Arief/Desktop/Simple378/frontend/src/pages/Ingestion.tsx:78:13\n  76 |     if (lastMessage) {\n  77 |         if (lastMessage.type === 'upload_progress' && lastMessage.payload.upload_id === fileId) {\n> 78 |             setUploadProgress(lastMessage.payload.progress);\n     |             ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  79 |         }\n  80 |         if (lastMessage.type === 'processing_stage' && lastMessage.payload.upload_id === fileId) {\n  81 |             setProcessingStage(lastMessage.payload.stage);","line":78,"column":13,"nodeType":null,"endLine":78,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":115,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":115,"endColumn":77},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":285,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":285,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10623,10626],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10623,10626],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":397,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":397,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17936,17939],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17936,17939],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":399,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":399,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18137,18140],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18137,18140],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport {\n  Upload,\n  FileText,\n  CheckCircle,\n  AlertCircle,\n  ArrowRight,\n  ArrowLeft,\n  Loader2,\n  AlertTriangle\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Card, CardContent, CardHeader, CardTitle } from '../components/ui/Card';\nimport { Button } from '../components/ui/Button';\nimport { Input } from '../components/ui/Input';\nimport { useWebSocket } from '../hooks/useWebSocket';\nimport { subjectsApi, apiRequest } from '../lib/api';\nimport toast from 'react-hot-toast';\n\ntype IngestionStep = 1 | 2 | 3 | 4 | 5;\n\ninterface UploadInitResponse {\n  file_id: string;\n  headers: string[];\n  suggested_mapping: Record<string, string>;\n}\n\ninterface ColumnMapping {\n  source: string;\n  target: string | null;\n  confidence: number;\n  reasoning?: string;\n}\n\ninterface ValidationStats {\n    total_rows_sampled: number;\n    valid_rows: number;\n    issues: string[];\n}\n\ninterface PreviewResponse {\n    rows: any[];\n    validation: ValidationStats;\n}\n\nexport function Ingestion() {\n  const navigate = useNavigate();\n  const { lastMessage } = useWebSocket();\n  const [currentStep, setCurrentStep] = useState<IngestionStep>(1);\n  \n  // Form State\n  const [subjectId, setSubjectId] = useState('');\n  const [bankName, setBankName] = useState('');\n  \n  // Data State\n  const [fileId, setFileId] = useState<string | null>(null);\n  const [fileName, setFileName] = useState<string | null>(null);\n\n  const [columnMappings, setColumnMappings] = useState<ColumnMapping[]>([]);\n  \n  // Progress State\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [processingStage, setProcessingStage] = useState<string>('Initializing');\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // Fetch Subjects\n  const { data: subjectsData } = useQuery({\n    queryKey: ['subjects'],\n    queryFn: () => subjectsApi.getSubjects({ limit: 100 }),\n  });\n\n  // WebSocket Listener\n  useEffect(() => {\n    if (lastMessage) {\n        if (lastMessage.type === 'upload_progress' && lastMessage.payload.upload_id === fileId) {\n            setUploadProgress(lastMessage.payload.progress);\n        }\n        if (lastMessage.type === 'processing_stage' && lastMessage.payload.upload_id === fileId) {\n            setProcessingStage(lastMessage.payload.stage);\n        }\n        if (lastMessage.type === 'processing_complete' && lastMessage.payload.upload_id === fileId) {\n            setIsProcessing(false);\n            setUploadProgress(100);\n            setProcessingStage('Complete');\n            toast.success('Ingestion successful!');\n            setTimeout(() => navigate(`/cases/${subjectId}`), 1000);\n        }\n        if (lastMessage.type === 'processing_error' && lastMessage.payload.upload_id === fileId) {\n            setIsProcessing(false);\n            toast.error(`Processing failed: ${lastMessage.payload.error}`);\n        }\n    }\n  }, [lastMessage, fileId, subjectId, navigate]);\n\n  // Upload Mutation\n  const uploadMutation = useMutation({\n    mutationFn: async (file: File) => {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      const res = await apiRequest<UploadInitResponse>('/ingestion/upload-init', {\n        method: 'POST',\n        body: formData,\n      }); \n      return res;\n    },\n    onSuccess: (data, variables) => {\n      setFileId(data.file_id);\n      setFileName(variables.name);\n      \n      // Convert mapping dict to UI array\n      const initialMappings = data.headers.map(header => {\n        const target = Object.entries(data.suggested_mapping || {}).find(([_, v]) => v === header)?.[0] || null;\n        return {\n          source: header,\n          target: target,\n          confidence: target ? 0.9 : 0.0,\n          reasoning: target ? 'AI Suggested Match' : undefined\n        };\n      });\n      setColumnMappings(initialMappings);\n      toast.success('File uploaded and analyzed');\n      handleNext();\n    },\n    onError: (err) => {\n        const error = err as Error;\n        toast.error('Upload failed: ' + error.message);\n    }\n  });\n\n  // Preview Query\n  const { data: previewResponse, isLoading: isLoadingPreview } = useQuery({\n    queryKey: ['ingestion', 'preview', fileId, columnMappings],\n    queryFn: async () => {\n      if (!fileId) return null;\n      // Convert UI mappings back to Dict for API\n      const mappingDict: Record<string, string> = {};\n      columnMappings.forEach(m => {\n        if (m.target) mappingDict[m.target] = m.source;\n      });\n      \n      // The backend now returns { rows, validation }\n      return apiRequest<PreviewResponse>('/ingestion/mapping/preview', {\n        method: 'POST',\n        body: JSON.stringify({\n          file_id: fileId,\n          mapping: mappingDict,\n          limit: 5\n        })\n      });\n    },\n    enabled: currentStep === 3 && !!fileId\n  });\n\n  // Submit Mutation\n  const submitMutation = useMutation({\n    mutationFn: async () => {\n      if (!fileId || !subjectId || !bankName) throw new Error(\"Missing required fields\");\n      setIsProcessing(true);\n      setUploadProgress(0);\n      setProcessingStage('Starting...');\n\n       // Convert UI mappings back to Dict for API\n      const mappingDict: Record<string, string> = {};\n      columnMappings.forEach(m => {\n        if (m.target) mappingDict[m.target] = m.source;\n      });\n\n      return apiRequest('/ingestion/process-mapped', {\n        method: 'POST',\n        body: JSON.stringify({\n          file_id: fileId,\n          mapping: mappingDict,\n          subject_id: subjectId,\n          bank_name: bankName\n        })\n      });\n    },\n    onError: (err) => {\n      setIsProcessing(false);\n      const error = err as Error;\n      toast.error('Processing failed request: ' + error.message);\n    }\n    // Success handled by WebSocket\n  });\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      if (!subjectId || !bankName) {\n        toast.error('Please select Subject and enter Bank Name first');\n        return;\n      }\n      uploadMutation.mutate(files[0]);\n    }\n  };\n\n  const handleNext = () => {\n    if (currentStep < 5) setCurrentStep(prev => (prev + 1) as IngestionStep);\n  };\n\n  const handlePrevious = () => {\n    if (currentStep > 1) setCurrentStep(prev => (prev - 1) as IngestionStep);\n  };\n\n  const updateMapping = (source: string, newTarget: string | null) => {\n    setColumnMappings(prev => prev.map(m => \n      m.source === source ? { ...m, target: newTarget, confidence: 1.0, reasoning: 'Manual selection' } : m\n    ));\n  };\n\n  const steps = [\n    { number: 1, title: 'Upload', icon: Upload },\n    { number: 2, title: 'Map', icon: FileText },\n    { number: 3, title: 'Preview', icon: CheckCircle },\n    { number: 4, title: 'Validate', icon: AlertCircle },\n    { number: 5, title: 'Process', icon: CheckCircle }\n  ];\n  \n  const targetFields = ['date', 'amount', 'description', 'category', 'reference', 'currency', 'account_number', 'balance'];\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 p-8\">\n      <div className=\"container mx-auto max-w-6xl space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-slate-900 dark:text-slate-100\">Data Ingestion Wizard</h1>\n          <p className=\"text-slate-500 dark:text-slate-400 mt-2\">Upload and process transaction data</p>\n        </div>\n\n        {/* Steps Progress */}\n        <div className=\"flex items-center justify-between px-4\">\n           {steps.map((step, idx) => {\n             const Icon = step.icon;\n             const isActive = currentStep === step.number;\n             const isComplete = currentStep > step.number;\n             return (\n               <div key={step.number} className=\"flex items-center flex-1 last:flex-none\">\n                 <div className=\"flex flex-col items-center relative z-10\">\n                   <div className={`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-300 ${\n                     isActive ? 'border-blue-600 bg-blue-600 text-white shadow-lg shadow-blue-500/30' : \n                     isComplete ? 'border-green-600 bg-green-600 text-white' : \n                     'border-slate-300 bg-white text-slate-400 dark:border-slate-700 dark:bg-slate-900'\n                   }`}>\n                     <Icon className=\"h-5 w-5\" />\n                   </div>\n                   <span className={`mt-2 text-xs font-semibold uppercase tracking-wider ${isActive ? 'text-blue-600' : isComplete ? 'text-green-600' : 'text-slate-500'}`}>\n                     {step.title}\n                   </span>\n                 </div>\n                 {idx < steps.length - 1 && (\n                   <div className={`flex-1 h-0.5 mx-2 -mt-6 transition-colors duration-500 ${isComplete ? 'bg-green-600' : 'bg-slate-200 dark:bg-slate-800'}`} />\n                 )}\n               </div>\n             );\n           })}\n        </div>\n\n        <Card className=\"min-h-[500px] border-slate-200 dark:border-slate-800 shadow-sm\">\n          <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 pb-4\">\n            <CardTitle>Step {currentStep}: {steps[currentStep - 1].title}</CardTitle>\n          </CardHeader>\n          <CardContent className=\"pt-6\">\n            <AnimatePresence mode=\"wait\">\n              <motion.div\n                key={currentStep}\n                initial={{ opacity: 0, x: 10 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -10 }}\n                transition={{ duration: 0.2 }}\n              >\n                {/* Step 1: Upload */}\n                {currentStep === 1 && (\n                  <div className=\"space-y-6 max-w-xl mx-auto\">\n                    <div className=\"grid grid-cols-2 gap-6\">\n                      <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Select Subject</label>\n                        <select\n                            className=\"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                            value={subjectId}\n                            onChange={(e) => setSubjectId(e.target.value)}\n                        >\n                            <option value=\"\">Select a subject...</option>\n                            {(subjectsData?.items || []).map((subject: any) => (\n                                <option key={subject.id} value={subject.id}>\n                                    {subject.subject_name || subject.id}\n                                </option>\n                            ))}\n                        </select>\n                        <p className=\"text-xs text-slate-500\">Target subject for these transactions.</p>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Source Bank</label>\n                        <Input \n                           placeholder=\"e.g. Chase\" \n                           value={bankName} \n                           onChange={e => setBankName(e.target.value)} \n                           className=\"bg-white dark:bg-slate-900\"\n                        />\n                         <p className=\"text-xs text-slate-500\">Originating institution (e.g., Chase, Wells Fargo).</p>\n                      </div>\n                    </div>\n\n                    <div className=\"border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-12 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors bg-slate-50/50 dark:bg-slate-900/50\">\n                      <div className=\"bg-blue-50 dark:bg-blue-900/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <Upload className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <h3 className=\"text-lg font-semibold mb-2 text-slate-900 dark:text-slate-100\">Upload Transaction CSV</h3>\n                      <p className=\"text-slate-500 mb-6 max-w-xs mx-auto text-sm\">Drag and drop your file here, or click to browse.</p>\n                      <input\n                        type=\"file\"\n                        accept=\".csv\"\n                        onChange={handleFileUpload}\n                        className=\"hidden\"\n                        id=\"file-upload\"\n                      />\n                      <label htmlFor=\"file-upload\" className=\"inline-flex items-center justify-center px-6 py-2.5 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition-colors cursor-pointer shadow-lg shadow-blue-600/20\">\n                         {uploadMutation.isPending ? <Loader2 className=\"animate-spin mr-2 h-4 w-4\" /> : \"Select CSV File\"}\n                      </label>\n                    </div>\n                  </div>\n                )}\n\n                {/* Step 2: Mapping */}\n                {currentStep === 2 && (\n                  <div className=\"space-y-6\">\n                   <div className=\"bg-blue-50 dark:bg-blue-500/10 border border-blue-100 dark:border-blue-800 p-4 rounded-lg flex items-start gap-3\">\n                      <div className=\"p-2 bg-blue-100 dark:bg-blue-500/20 rounded-full shrink-0\">\n                         <Loader2 className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-blue-900 dark:text-blue-100 text-sm\">AI Auto-Mapping Active</h4>\n                        <p className=\"text-sm text-blue-700 dark:text-blue-300 mt-1\">\n                            We've analyzed the file structure and suggested mappings. Please verify them below.\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"grid gap-3\">\n                        {columnMappings.map((mapping, idx) => (\n                        <div key={idx} className=\"flex items-center gap-4 p-4 border border-slate-200 dark:border-slate-800 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-colors bg-white dark:bg-slate-900\">\n                            <div className=\"flex-1 min-w-0\">\n                                <p className=\"font-medium text-slate-900 dark:text-slate-100 truncate\" title={mapping.source}>{mapping.source}</p>\n                                <p className=\"text-xs text-slate-500 mt-0.5\">Source Column</p>\n                            </div>\n                            <ArrowRight className=\"h-4 w-4 text-slate-300 shrink-0\" />\n                            <div className=\"flex-1 min-w-0\">\n                                <select \n                                    className={`w-full p-2.5 border rounded-lg bg-white dark:bg-slate-950 text-sm transition-colors ${\n                                        mapping.target \n                                        ? 'border-green-500/50 focus:border-green-500 focus:ring-green-500/20' \n                                        : 'border-slate-200 dark:border-slate-700 focus:border-blue-500 focus:ring-blue-500/20'\n                                    }`}\n                                    value={mapping.target || ''}\n                                    onChange={(e) => updateMapping(mapping.source, e.target.value || null)}\n                                >\n                                    <option value=\"\">Do not import</option>\n                                    {targetFields.map(field => (\n                                    <option key={field} value={field}>{field}</option>\n                                    ))}\n                                </select>\n                            </div>\n                            <div className=\"w-8 flex justify-center shrink-0\">\n                                {mapping.target && (\n                                    <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                                )}\n                            </div>\n                        </div>\n                        ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Step 3: Preview */}\n                {currentStep === 3 && (\n                  <div className=\"space-y-6\">\n                    {isLoadingPreview ? (\n                      <div className=\"flex flex-col items-center justify-center py-24 text-slate-500\">\n                        <Loader2 className=\"animate-spin h-8 w-8 mb-4 text-blue-600\" />\n                        <p>Generating preview...</p>\n                      </div>\n                    ) : (\n                      previewResponse && (\n                        <>\n                            <div className=\"rounded-lg border border-slate-200 dark:border-slate-800 overflow-hidden\">\n                            <div className=\"overflow-x-auto\">\n                                <table className=\"w-full text-sm text-left\">\n                                    <thead className=\"bg-slate-50 dark:bg-slate-900 text-slate-500 dark:text-slate-400 font-medium border-b border-slate-200 dark:border-slate-800\">\n                                    <tr>\n                                        {Object.keys(previewResponse.rows[0] || {}).map(key => (\n                                        <th key={key} className=\"px-4 py-3 whitespace-nowrap\">{key}</th>\n                                        ))}\n                                    </tr>\n                                    </thead>\n                                    <tbody className=\"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-950\">\n                                    {previewResponse.rows.map((row: any, i: number) => (\n                                        <tr key={i} className=\"hover:bg-slate-50 dark:hover:bg-slate-900/50\">\n                                        {Object.values(row).map((val: any, j) => (\n                                            <td key={j} className=\"px-4 py-3 whitespace-nowrap text-slate-700 dark:text-slate-300\">{String(val)}</td>\n                                        ))}\n                                        </tr>\n                                    ))}\n                                    </tbody>\n                                </table>\n                            </div>\n                            </div>\n                            <p className=\"text-center text-sm text-slate-500\">Showing first 5 rows</p>\n                        </>\n                      )\n                    )}\n                  </div>\n                )}\n\n                {/* Step 4: Validate */}\n                {currentStep === 4 && (\n                   <div className=\"max-w-xl mx-auto space-y-8 py-8\">\n                     {isLoadingPreview ? (\n                        <div className=\"flex justify-center\"><Loader2 className=\"animate-spin\" /></div>\n                     ) : (\n                        <>\n                        <div className=\"text-center\">\n                            {previewResponse?.validation?.issues?.length === 0 && previewResponse?.validation?.valid_rows > 0 ? (\n                                <div className=\"inline-flex items-center justify-center w-20 h-20 bg-green-100 dark:bg-green-500/20 text-green-600 dark:text-green-400 rounded-full mb-6\">\n                                    <CheckCircle className=\"h-10 w-10\" />\n                                </div>\n                            ) : (\n                                <div className=\"inline-flex items-center justify-center w-20 h-20 bg-amber-100 dark:bg-amber-500/20 text-amber-600 dark:text-amber-400 rounded-full mb-6\">\n                                    <AlertTriangle className=\"h-10 w-10\" />\n                                </div>\n                            )}\n                            <h3 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n                                {previewResponse?.validation?.issues?.length === 0 ? \"Data Looks Good\" : \"Validation Issues Found\"}\n                            </h3>\n                            <p className=\"text-slate-500 mt-2\">\n                                We analyzed a sample of {previewResponse?.validation?.total_rows_sampled} rows.\n                            </p>\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-4\">\n                             <div className=\"p-4 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl text-center\">\n                                 <div className=\"text-3xl font-bold text-green-600 dark:text-green-400 mb-1\">\n                                    {previewResponse?.validation?.valid_rows}\n                                 </div>\n                                 <div className=\"text-sm font-medium text-slate-500 uppercase tracking-wide\">Valid Rows</div>\n                             </div>\n                             <div className=\"p-4 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl text-center\">\n                                 <div className=\"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-1\">\n                                    {previewResponse?.validation?.total_rows_sampled}\n                                 </div>\n                                 <div className=\"text-sm font-medium text-slate-500 uppercase tracking-wide\">Total Sampled</div>\n                             </div>\n                        </div>\n\n                        {previewResponse?.validation?.issues && previewResponse.validation.issues.length > 0 && (\n                            <div className=\"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/50 rounded-lg p-4\">\n                                <h4 className=\"font-semibold text-amber-900 dark:text-amber-100 mb-2 flex items-center gap-2\">\n                                    <AlertTriangle className=\"h-4 w-4\" /> Potential Issues\n                                </h4>\n                                <ul className=\"list-disc list-inside text-sm text-amber-800 dark:text-amber-200 space-y-1\">\n                                    {Array.from(new Set(previewResponse.validation.issues)).map((issue, i) => (\n                                        <li key={i}>{issue} (multiple occurrences)</li>\n                                    ))}\n                                </ul>\n                            </div>\n                        )}\n                        </>\n                     )}\n                   </div>\n                )}\n                \n                {/* Step 5: Process */}\n                {currentStep === 5 && (\n                  <div className=\"text-center py-12 max-w-lg mx-auto space-y-8\">\n                    {!isProcessing && !submitMutation.isPending ? (\n                         <>\n                            <div>\n                                <h3 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2\">Ready to Ingest</h3>\n                                <p className=\"text-slate-500\">Confirm the details below to start processing.</p>\n                            </div>\n\n                            <div className=\"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 text-left space-y-3\">\n                                <div className=\"flex justify-between border-b border-slate-200 dark:border-slate-800 pb-2\">\n                                    <span className=\"text-slate-500\">File Name</span>\n                                    <span className=\"font-medium\">{fileName}</span>\n                                </div>\n                                <div className=\"flex justify-between border-b border-slate-200 dark:border-slate-800 pb-2\">\n                                    <span className=\"text-slate-500\">Target Subject</span>\n                                    <span className=\"font-medium font-mono text-sm\">{subjectId}</span>\n                                </div>\n                                <div className=\"flex justify-between border-b border-slate-200 dark:border-slate-800 pb-2\">\n                                    <span className=\"text-slate-500\">Bank</span>\n                                    <span className=\"font-medium\">{bankName}</span>\n                                </div>\n                                <div className=\"flex justify-between pt-1\">\n                                    <span className=\"text-slate-500\">Mapped Columns</span>\n                                    <span className=\"font-medium text-blue-600\">{columnMappings.filter(m => m.target).length}</span>\n                                </div>\n                            </div>\n                            \n                            <Button \n                                onClick={() => submitMutation.mutate()} \n                                disabled={submitMutation.isPending} \n                                className=\"w-full py-6 text-lg shadow-xl shadow-blue-500/20\"\n                            >\n                                Start Ingestion\n                            </Button>\n                         </>\n                    ) : (\n                        <div className=\"py-8 space-y-8\">\n                             <div className=\"relative w-48 h-48 mx-auto flex items-center justify-center\">\n                                 {/* Circular Progress */}\n                                 <svg className=\"w-full h-full transform -rotate-90\">\n                                     <circle\n                                         cx=\"96\"\n                                         cy=\"96\"\n                                         r=\"88\"\n                                         stroke=\"currentColor\"\n                                         strokeWidth=\"12\"\n                                         fill=\"transparent\"\n                                         className=\"text-slate-100 dark:text-slate-800\"\n                                     />\n                                     <circle\n                                         cx=\"96\"\n                                         cy=\"96\"\n                                         r=\"88\"\n                                         stroke=\"currentColor\"\n                                         strokeWidth=\"12\"\n                                         fill=\"transparent\"\n                                         strokeDasharray={2 * Math.PI * 88}\n                                         strokeDashoffset={2 * Math.PI * 88 * (1 - uploadProgress / 100)}\n                                         className=\"text-blue-600 transition-all duration-500 ease-out\"\n                                     />\n                                 </svg>\n                                 <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\n                                     <span className=\"text-4xl font-bold text-slate-900 dark:text-white\">{uploadProgress}%</span>\n                                 </div>\n                             </div>\n\n                             <div className=\"space-y-2\">\n                                 <h4 className=\"text-lg font-medium text-slate-900 dark:text-slate-100 animate-pulse\">\n                                     {processingStage}...\n                                 </h4>\n                                 <p className=\"text-sm text-slate-500\">Please do not close this window.</p>\n                             </div>\n                        </div>\n                    )}\n                  </div>\n                )}\n\n              </motion.div>\n            </AnimatePresence>\n          </CardContent>\n        </Card>\n\n        {/* Footer Nav */}\n        <div className=\"flex justify-between px-1\">\n           <Button variant=\"outline\" onClick={handlePrevious} disabled={currentStep === 1 || isProcessing}>\n             <ArrowLeft className=\"mr-2 h-4 w-4\" /> Back\n           </Button>\n           {currentStep < 5 && (\n             <Button onClick={handleNext} disabled={currentStep === 1 && (!subjectId || !bankName || !fileId)}>\n               Next Step <ArrowRight className=\"ml-2 h-4 w-4\" />\n             </Button>\n           )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Reconciliation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2532,2535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2532,2535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/Arief/Desktop/Simple378/frontend/src/pages/Settings.tsx:111:7\n  109 |   useEffect(() => {\n  110 |     if (profileData) {\n> 111 |       setProfile({\n      |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  112 |         id: profileData.id || '',\n  113 |         name: profileData.full_name || profileData.email?.split('@')[0] || 'User',\n  114 |         email: profileData.email || '',","line":111,"column":7,"nodeType":null,"endLine":111,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4953,4956],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4953,4956],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5027,5030],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5027,5030],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":203,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6595,6598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6595,6598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport { api } from '../lib/api';\nimport { useTenant } from '../hooks/useTenant';\nimport {\n  User,\n  Shield,\n  Bell,\n  Key,\n  Users,\n  Palette,\n  History,\n  Save,\n  Eye,\n  EyeOff,\n  Plus,\n  Trash2,\n  Copy,\n  Check,\n  Globe,\n} from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { Card, CardContent, CardHeader, CardTitle } from '../components/ui/Card';\nimport { Button } from '../components/ui/Button';\nimport { Input } from '../components/ui/Input';\nimport toast from 'react-hot-toast';\n\ntype SettingsTab = 'profile' | 'security' | 'team' | 'notifications' | 'apikeys' | 'theme' | 'enterprise';\n\ninterface UserProfile {\n  id: string;\n  name: string;\n  email: string;\n  role: string;\n  avatar?: string;\n  department: string;\n  phone: string;\n}\n\ninterface TeamMember {\n  id: string;\n  name: string;\n  email: string;\n  role: 'admin' | 'analyst' | 'auditor' | 'viewer';\n  status: 'active' | 'invited' | 'inactive';\n  lastActive: string;\n}\n\ninterface APIKey {\n  id: string;\n  name: string;\n  key: string;\n  createdAt: string;\n  lastUsed: string;\n  permissions: string[];\n}\n\ninterface AuditLogEntry {\n  id: string;\n  action: string;\n  user: string;\n  timestamp: string;\n  details: string;\n  ip: string;\n}\n\nexport function Settings() {\n  const [activeTab, setActiveTab] = useState<SettingsTab>('profile');\n  const [showPassword, setShowPassword] = useState(false);\n  const [copiedKey, setCopiedKey] = useState<string | null>(null);\n  \n  // Multi-tenant context\n  const { tenant, isTenantFeatureEnabled } = useTenant();\n\n  // Security state\n  const [twoFactorEnabled, setTwoFactorEnabled] = useState(false);\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n\n  // Theme state\n  const [theme, setTheme] = useState<'light' | 'dark' | 'system'>('system');\n  const [primaryColor, setPrimaryColor] = useState('blue');\n\n  // Notifications state\n  const [notifications, setNotifications] = useState({\n    email: { newCase: true, caseUpdate: true, assignedToMe: true, weeklyReport: false },\n    push: { newCase: false, caseUpdate: true, assignedToMe: true, urgent: true },\n    slack: { newCase: false, highRisk: true, critical: true }\n  });\n\n  // Fetch profile\n  const { data: profileData, refetch: refetchProfile } = useQuery({\n    queryKey: ['settings', 'profile'],\n    queryFn: () => api.get<any>('/users/profile'),\n  });\n\n  // Derived profile state\n  const [profile, setProfile] = useState<UserProfile>({\n    id: '',\n    name: '',\n    email: '',\n    role: 'Analyst', // Default\n    department: '',\n    phone: ''\n  });\n\n  // Update local state when data fetches\n  useEffect(() => {\n    if (profileData) {\n      setProfile({\n        id: profileData.id || '',\n        name: profileData.full_name || profileData.email?.split('@')[0] || 'User',\n        email: profileData.email || '',\n        role: profileData.role || 'Analyst',\n        department: profileData.department || 'Forensic Accounting', \n        phone: profileData.phone_number || ''\n      });\n    }\n  }, [profileData]);\n\n  // Fetch team members (Mock for now - no backend endpoint)\n  const { data: teamMembers = [] } = useQuery<TeamMember[]>({\n    queryKey: ['settings', 'team'],\n    queryFn: async () => {\n      // TODO: Implement GET /users/ endpoint in backend\n      await new Promise(resolve => setTimeout(resolve, 500));\n      return [\n        { id: '1', name: 'John Doe', email: 'john.doe@company.com', role: 'admin', status: 'active', lastActive: '2024-03-15 10:30' },\n        { id: '2', name: 'Jane Smith', email: 'jane.smith@company.com', role: 'analyst', status: 'active', lastActive: '2024-03-15 09:45' },\n        { id: '3', name: 'Bob Wilson', email: 'bob.wilson@company.com', role: 'auditor', status: 'active', lastActive: '2024-03-14 16:20' },\n        { id: '4', name: 'Alice Brown', email: 'alice.brown@company.com', role: 'viewer', status: 'invited', lastActive: 'Never' }\n      ];\n    }\n  });\n\n  // Fetch API keys (Mock for now - no backend endpoint)\n  const { data: apiKeys = [] } = useQuery<APIKey[]>({\n    queryKey: ['settings', 'apikeys'],\n    queryFn: async () => {\n      // TODO: Implement /api-keys/ endpoints in backend\n      await new Promise(resolve => setTimeout(resolve, 300));\n      return [\n        { id: '1', name: 'Production API', key: 'sk_live_xxxxx...xxxxx', createdAt: '2024-01-15', lastUsed: '2024-03-15', permissions: ['read', 'write'] },\n        { id: '2', name: 'Development API', key: 'sk_test_xxxxx...xxxxx', createdAt: '2024-02-10', lastUsed: '2024-03-14', permissions: ['read'] }\n      ];\n    }\n  });\n\n  // Fetch audit log\n  const { data: auditLog = [] } = useQuery<AuditLogEntry[]>({\n    queryKey: ['settings', 'audit'],\n    queryFn: async () => {\n      try {\n        const response = await api.get<{ items: any[] }>('/audit-logs/?limit=5');\n        return response.items.map((log: any) => ({\n          id: log.id,\n          action: log.action,\n          user: log.actor_id || 'System', // Backend returns ID, front needs name ideally\n          timestamp: log.timestamp ? new Date(log.timestamp).toLocaleString() : '',\n          details: typeof log.details === 'string' ? log.details : JSON.stringify(log.details),\n          ip: '' // IP not currently stored in audit log model shown\n        }));\n      } catch (e) {\n        console.error(\"Failed to fetch audit logs\", e);\n        return [];\n      }\n    }\n  });\n\n  // Save profile mutation\n  const saveProfileMutation = useMutation({\n    mutationFn: async (data: UserProfile) => {\n      return api.patch('/users/profile', {\n        full_name: data.name,\n        email: data.email,\n        // Backend doesn't support Department/Phone yet in User model directly in snippet, \n        // assuming mapping or extending model would be needed.\n        // For now, sending what we can.\n      });\n    },\n    onSuccess: () => {\n      toast.success('Profile saved successfully');\n      refetchProfile();\n    },\n    onError: () => toast.error('Failed to save profile')\n  });\n\n  // Change password mutation\n  const changePasswordMutation = useMutation({\n    mutationFn: async () => {\n      return api.post('/users/password', {\n        current_password: currentPassword,\n        new_password: newPassword\n      });\n    },\n    onSuccess: () => {\n      toast.success('Password changed successfully');\n      setCurrentPassword('');\n      setNewPassword('');\n      setConfirmPassword('');\n    },\n    onError: (error: any) => {\n      toast.error(error.message || 'Failed to change password');\n    }\n  });\n\n  const handleCopyKey = (key: string, id: string) => {\n    navigator.clipboard.writeText(key);\n    setCopiedKey(id);\n    toast.success('API key copied to clipboard');\n    setTimeout(() => setCopiedKey(null), 2000);\n  };\n\n  const tabs = [\n    { id: 'profile' as SettingsTab, label: 'Profile', icon: User },\n    { id: 'security' as SettingsTab, label: 'Security', icon: Shield },\n    { id: 'team' as SettingsTab, label: 'Team', icon: Users },\n    { id: 'notifications' as SettingsTab, label: 'Notifications', icon: Bell },\n    { id: 'apikeys' as SettingsTab, label: 'API Keys', icon: Key },\n    { id: 'theme' as SettingsTab, label: 'Appearance', icon: Palette },\n    { id: 'enterprise' as SettingsTab, label: 'Enterprise', icon: Globe },\n  ];\n\n  const getRoleBadge = (role: TeamMember['role']) => {\n    const colors = {\n      admin: 'bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400',\n      analyst: 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400',\n      auditor: 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400',\n      viewer: 'bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400'\n    };\n    return <span className={`px-2 py-1 rounded-full text-xs font-medium ${colors[role]}`}>{role}</span>;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 p-8\">\n      <div className=\"container mx-auto max-w-6xl space-y-6\">\n        {/* Header */}\n        <div>\n          <h1 className=\"text-3xl font-bold text-slate-900 dark:text-slate-100\">Settings</h1>\n          <p className=\"text-slate-500 dark:text-slate-400 mt-2\">\n            Manage your account, security, and application preferences\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n          {/* Sidebar Navigation */}\n          <Card className=\"lg:col-span-1 h-fit\">\n            <CardContent className=\"p-4\">\n              <nav className=\"space-y-1\">\n                {tabs.map((tab) => {\n                  const Icon = tab.icon;\n                  return (\n                    <button\n                      key={tab.id}\n                      onClick={() => setActiveTab(tab.id)}\n                      className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${\n                        activeTab === tab.id\n                          ? 'bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400'\n                          : 'text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800'\n                      }`}\n                    >\n                      <Icon className=\"h-5 w-5\" />\n                      <span className=\"font-medium\">{tab.label}</span>\n                    </button>\n                  );\n                })}\n              </nav>\n            </CardContent>\n          </Card>\n\n          {/* Content Area */}\n          <div className=\"lg:col-span-3 space-y-6\">\n            <motion.div\n              key={activeTab}\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ duration: 0.2 }}\n            >\n              {/* Profile Tab */}\n              {activeTab === 'profile' && (\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <User className=\"h-5 w-5\" />\n                      Profile Settings\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-6\">\n                    <div className=\"flex items-center gap-6\">\n                      <div className=\"h-20 w-20 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold\">\n                        {profile.name.split(' ').map(n => n[0]).join('')}\n                      </div>\n                      <div>\n                        <h3 className=\"text-lg font-semibold\">{profile.name}</h3>\n                        <p className=\"text-slate-500\">{profile.role}</p>\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-2\">Change Avatar</Button>\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Full Name</label>\n                        <Input \n                          value={profile.name} \n                          onChange={(e) => setProfile({ ...profile, name: e.target.value })}\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Email Address</label>\n                        <Input \n                          type=\"email\"\n                          value={profile.email} \n                          onChange={(e) => setProfile({ ...profile, email: e.target.value })}\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Department</label>\n                        <Input \n                          value={profile.department} \n                          onChange={(e) => setProfile({ ...profile, department: e.target.value })}\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Phone Number</label>\n                        <Input \n                          value={profile.phone} \n                          onChange={(e) => setProfile({ ...profile, phone: e.target.value })}\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-end\">\n                      <Button onClick={() => saveProfileMutation.mutate(profile)}>\n                        <Save className=\"h-4 w-4 mr-2\" />\n                        Save Changes\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n\n              {/* Security Tab */}\n              {activeTab === 'security' && (\n                <div className=\"space-y-6\">\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Change Password</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Current Password</label>\n                        <div className=\"relative\">\n                          <Input \n                            type={showPassword ? 'text' : 'password'}\n                            value={currentPassword}\n                            onChange={(e) => setCurrentPassword(e.target.value)}\n                            placeholder=\"Enter current password\"\n                          />\n                          <button\n                            type=\"button\"\n                            onClick={() => setShowPassword(!showPassword)}\n                            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600\"\n                            aria-label={showPassword ? 'Hide password' : 'Show password'}\n                          >\n                            {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                          </button>\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">New Password</label>\n                        <Input \n                          type=\"password\"\n                          value={newPassword}\n                          onChange={(e) => setNewPassword(e.target.value)}\n                          placeholder=\"Enter new password\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Confirm New Password</label>\n                        <Input \n                          type=\"password\"\n                          value={confirmPassword}\n                          onChange={(e) => setConfirmPassword(e.target.value)}\n                          placeholder=\"Confirm new password\"\n                        />\n                      </div>\n                      <Button \n                        onClick={() => changePasswordMutation.mutate()}\n                        disabled={!currentPassword || !newPassword || newPassword !== confirmPassword}\n                      >\n                        Update Password\n                      </Button>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Two-Factor Authentication</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <p className=\"font-medium\">2FA Status</p>\n                          <p className=\"text-sm text-slate-500\">Add an extra layer of security to your account</p>\n                        </div>\n                        <button\n                          onClick={() => setTwoFactorEnabled(!twoFactorEnabled)}\n                          className={`relative w-14 h-7 rounded-full transition-colors ${\n                            twoFactorEnabled ? 'bg-green-500' : 'bg-slate-300 dark:bg-slate-700'\n                          }`}\n                          aria-label={twoFactorEnabled ? 'Disable two-factor authentication' : 'Enable two-factor authentication'}\n                        >\n                          <span className={`absolute top-1 left-1 w-5 h-5 rounded-full bg-white transition-transform ${\n                            twoFactorEnabled ? 'translate-x-7' : ''\n                          }`} />\n                        </button>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle className=\"flex items-center gap-2\">\n                        <History className=\"h-5 w-5\" />\n                        Recent Activity\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-3\">\n                        {auditLog.slice(0, 5).map((entry) => (\n                          <div key={entry.id} className=\"flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-800 last:border-0\">\n                            <div>\n                              <p className=\"font-medium\">{entry.action}</p>\n                              <p className=\"text-sm text-slate-500\">{entry.details}</p>\n                            </div>\n                            <div className=\"text-right text-sm text-slate-500\">\n                              <p>{entry.timestamp}</p>\n                              <p>{entry.ip}</p>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n              )}\n\n              {/* Team Tab */}\n              {activeTab === 'team' && (\n                <Card>\n                  <CardHeader>\n                    <div className=\"flex items-center justify-between\">\n                      <CardTitle>Team Members</CardTitle>\n                      <Button>\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        Invite Member\n                      </Button>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      {teamMembers.map((member) => (\n                        <div key={member.id} className=\"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900 rounded-lg\">\n                          <div className=\"flex items-center gap-4\">\n                            <div className=\"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-medium\">\n                              {member.name.split(' ').map(n => n[0]).join('')}\n                            </div>\n                            <div>\n                              <p className=\"font-medium\">{member.name}</p>\n                              <p className=\"text-sm text-slate-500\">{member.email}</p>\n                            </div>\n                          </div>\n                          <div className=\"flex items-center gap-4\">\n                            {getRoleBadge(member.role)}\n                            <span className={`px-2 py-1 rounded-full text-xs ${\n                              member.status === 'active' \n                                ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\n                                : member.status === 'invited'\n                                ? 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400'\n                                : 'bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400'\n                            }`}>\n                              {member.status}\n                            </span>\n                            <button className=\"text-slate-400 hover:text-red-500\" aria-label={`Remove ${member.name}`}>\n                              <Trash2 className=\"h-4 w-4\" />\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n\n              {/* Notifications Tab */}\n              {activeTab === 'notifications' && (\n                <div className=\"space-y-6\">\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Email Notifications</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      {Object.entries(notifications.email).map(([key, value]) => (\n                        <div key={key} className=\"flex items-center justify-between py-2\">\n                          <div>\n                            <p className=\"font-medium capitalize\">{key.replace(/([A-Z])/g, ' $1').trim()}</p>\n                          </div>\n                          <button\n                            onClick={() => setNotifications({\n                              ...notifications,\n                              email: { ...notifications.email, [key]: !value }\n                            })}\n                            className={`relative w-12 h-6 rounded-full transition-colors ${\n                              value ? 'bg-blue-500' : 'bg-slate-300 dark:bg-slate-700'\n                            }`}\n                            aria-label={`Toggle email notification for ${key}`}\n                          >\n                            <span className={`absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white transition-transform ${\n                              value ? 'translate-x-6' : ''\n                            }`} />\n                          </button>\n                        </div>\n                      ))}\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Push Notifications</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      {Object.entries(notifications.push).map(([key, value]) => (\n                        <div key={key} className=\"flex items-center justify-between py-2\">\n                          <div>\n                            <p className=\"font-medium capitalize\">{key.replace(/([A-Z])/g, ' $1').trim()}</p>\n                          </div>\n                          <button\n                            onClick={() => setNotifications({\n                              ...notifications,\n                              push: { ...notifications.push, [key]: !value }\n                            })}\n                            className={`relative w-12 h-6 rounded-full transition-colors ${\n                              value ? 'bg-blue-500' : 'bg-slate-300 dark:bg-slate-700'\n                            }`}\n                            aria-label={`Toggle push notification for ${key}`}\n                          >\n                            <span className={`absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white transition-transform ${\n                              value ? 'translate-x-6' : ''\n                            }`} />\n                          </button>\n                        </div>\n                      ))}\n                    </CardContent>\n                  </Card>\n                </div>\n              )}\n\n              {/* API Keys Tab */}\n              {activeTab === 'apikeys' && (\n                <div className=\"space-y-6\">\n                  <Card>\n                    <CardHeader>\n                      <div className=\"flex items-center justify-between\">\n                        <CardTitle>API Keys</CardTitle>\n                        <Button>\n                          <Plus className=\"h-4 w-4 mr-2\" />\n                          Create New Key\n                        </Button>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-4\">\n                        {apiKeys.map((key) => (\n                          <div key={key.id} className=\"p-4 border border-slate-200 dark:border-slate-800 rounded-lg\">\n                            <div className=\"flex items-center justify-between mb-3\">\n                              <div>\n                                <p className=\"font-medium\">{key.name}</p>\n                                <p className=\"text-sm text-slate-500\">Created: {key.createdAt} | Last used: {key.lastUsed}</p>\n                              </div>\n                              <div className=\"flex gap-2\">\n                                {key.permissions.map(p => (\n                                  <span key={p} className=\"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs\">\n                                    {p}\n                                  </span>\n                                ))}\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <code className=\"flex-1 px-3 py-2 bg-slate-100 dark:bg-slate-900 rounded font-mono text-sm\">\n                                {key.key}\n                              </code>\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => handleCopyKey(key.key, key.id)}\n                                aria-label={`Copy API key for ${key.name}`}\n                              >\n                                {copiedKey === key.id ? (\n                                  <Check className=\"h-4 w-4 text-green-500\" />\n                                ) : (\n                                  <Copy className=\"h-4 w-4\" />\n                                )}\n                              </Button>\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                className=\"text-red-500 hover:text-red-700\"\n                                aria-label={`Delete API key ${key.name}`}\n                              >\n                                <Trash2 className=\"h-4 w-4\" />\n                              </Button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n              )}\n\n              {/* Theme Tab */}\n              {activeTab === 'theme' && (\n                <div className=\"space-y-6\">\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Theme Mode</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"grid grid-cols-3 gap-4\">\n                        {(['light', 'dark', 'system'] as const).map((mode) => (\n                          <button\n                            key={mode}\n                            onClick={() => setTheme(mode)}\n                            className={`p-6 rounded-lg border-2 transition-all ${\n                              theme === mode\n                                ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                                : 'border-slate-200 dark:border-slate-800 hover:border-slate-300 dark:hover:border-slate-700'\n                            }`}\n                          >\n                            <div className={`h-12 w-12 mx-auto mb-3 rounded-lg ${\n                              mode === 'light' ? 'bg-white border border-slate-200' :\n                              mode === 'dark' ? 'bg-slate-900 border border-slate-700' :\n                              'bg-gradient-to-br from-white to-slate-900'\n                            }`} />\n                            <p className=\"font-medium capitalize\">{mode}</p>\n                          </button>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Accent Color</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"flex gap-4\">\n                        {['blue', 'purple', 'green', 'red', 'orange', 'pink'].map((color) => (\n                          <button\n                            key={color}\n                            onClick={() => setPrimaryColor(color)}\n                            className={`h-12 w-12 rounded-full transition-all ${\n                              primaryColor === color ? 'ring-2 ring-offset-2 ring-slate-400' : ''\n                            }`}\n                            style={{ backgroundColor: color === 'blue' ? '#3b82f6' : color === 'purple' ? '#8b5cf6' : color === 'green' ? '#22c55e' : color === 'red' ? '#ef4444' : color === 'orange' ? '#f97316' : '#ec4899' }}\n                            aria-label={`Set accent color to ${color}`}\n                          />\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Display Options</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      <div className=\"flex items-center justify-between py-2\">\n                        <div>\n                          <p className=\"font-medium\">Compact Mode</p>\n                          <p className=\"text-sm text-slate-500\">Reduce spacing for denser information display</p>\n                        </div>\n                        <button\n                          className=\"relative w-12 h-6 rounded-full bg-slate-300 dark:bg-slate-700\"\n                          aria-label=\"Toggle compact mode\"\n                        >\n                          <span className=\"absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white\" />\n                        </button>\n                      </div>\n                      <div className=\"flex items-center justify-between py-2\">\n                        <div>\n                          <p className=\"font-medium\">Animations</p>\n                          <p className=\"text-sm text-slate-500\">Enable smooth transitions and animations</p>\n                        </div>\n                        <button\n                          className=\"relative w-12 h-6 rounded-full bg-blue-500\"\n                          aria-label=\"Toggle animations\"\n                        >\n                          <span className=\"absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white translate-x-6\" />\n                        </button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n              )}\n\n              {/* Enterprise Tab */}\n              {activeTab === 'enterprise' && (\n                <div className=\"space-y-6\">\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Tenant Information</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      {tenant ? (\n                        <>\n                          <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                              <p className=\"text-sm font-medium text-slate-600 dark:text-slate-400\">Tenant ID</p>\n                              <p className=\"text-lg font-semibold\">{tenant.id}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-sm font-medium text-slate-600 dark:text-slate-400\">Tenant Name</p>\n                              <p className=\"text-lg font-semibold\">{tenant.name}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-sm font-medium text-slate-600 dark:text-slate-400\">Region</p>\n                              <p className=\"text-lg font-semibold\">{tenant.region || 'N/A'}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-sm font-medium text-slate-600 dark:text-slate-400\">Plan</p>\n                              <p className=\"text-lg font-semibold capitalize\">{tenant.plan || 'standard'}</p>\n                            </div>\n                          </div>\n                        </>\n                      ) : (\n                        <p className=\"text-slate-500\">Loading tenant information...</p>\n                      )}\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Feature Flags</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-3\">\n                        {['advanced_analytics', 'ai_orchestration', 'real_time_collaboration', 'custom_integrations', 'api_access', 'sso'].map((feature) => (\n                          <div key={feature} className=\"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded\">\n                            <div>\n                              <p className=\"font-medium capitalize\">{feature.replace(/_/g, ' ')}</p>\n                            </div>\n                            <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n                              isTenantFeatureEnabled(feature)\n                                ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\n                                : 'bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300'\n                            }`}>\n                              {isTenantFeatureEnabled(feature) ? ' Enabled' : ' Disabled'}\n                            </span>\n                          </div>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Data Residency & Compliance</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      <div>\n                        <p className=\"text-sm font-medium text-slate-600 dark:text-slate-400 mb-2\">Primary Data Center</p>\n                        <div className=\"p-3 bg-slate-50 dark:bg-slate-900 rounded\">\n                          <p className=\"font-semibold\">{tenant?.region === 'us-east' ? 'US East (Northern Virginia)' : tenant?.region === 'eu-west' ? 'EU West (Ireland)' : 'Default Region'}</p>\n                          <p className=\"text-sm text-slate-500\">Your data is stored and processed in this region only.</p>\n                        </div>\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-slate-600 dark:text-slate-400 mb-2\">Compliance Standards</p>\n                        <div className=\"grid grid-cols-2 gap-2\">\n                          {['SOC2', 'HIPAA', 'GDPR', 'CCPA', 'FedRAMP', 'ISO 27001'].map((standard) => (\n                            <div key={standard} className=\"p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm font-medium text-blue-700 dark:text-blue-400\">\n                              {standard}\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Usage & Limits</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      <div>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <p className=\"font-medium\">API Calls</p>\n                          <p className=\"text-sm text-slate-500\">450,000 / 500,000</p>\n                        </div>\n                        <progress\n                          value={90}\n                          max={100}\n                          aria-label=\"API calls usage\"\n                          className=\"w-full h-2\"\n                        />\n                      </div>\n                      <div>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <p className=\"font-medium\">Storage</p>\n                          <p className=\"text-sm text-slate-500\">750 GB / 1 TB</p>\n                        </div>\n                        <progress\n                          value={75}\n                          max={100}\n                          aria-label=\"Storage usage\"\n                          className=\"w-full h-2\"\n                        />\n                      </div>\n                      <div>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <p className=\"font-medium\">Team Members</p>\n                          <p className=\"text-sm text-slate-500\">8 / 25</p>\n                        </div>\n                        <progress\n                          value={32}\n                          max={100}\n                          aria-label=\"Team members usage\"\n                          className=\"w-full h-2\"\n                        />\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n              )}\n            </motion.div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Visualization.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/Visualization.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1405,1408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1405,1408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1435,1438],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1435,1438],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1464,1467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1464,1467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1521,1524],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1521,1524],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1552,1555],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1552,1555],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1579,1582],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1579,1582],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  DollarSign,\n  TrendingUp,\n  AlertTriangle,\n  Calendar,\n  Download,\n  RefreshCw,\n  Share2\n} from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { Card, CardContent, CardHeader, CardTitle } from '../components/ui/Card';\nimport { Button } from '../components/ui/Button';\nimport { MilestoneTracker } from '../components/visualization/MilestoneTracker';\nimport { FraudDetectionPanel } from '../components/visualization/FraudDetectionPanel';\nimport { VisualizationDashboard } from '../components/visualization/VisualizationDashboard';\nimport { VisualizationNetwork, GraphData, FinancialData } from '../components/visualization/VisualizationNetwork';\nimport { api } from '../lib/api';\n\ntype ViewType = 'cashflow' | 'milestones' | 'fraud' | 'graphs';\n\n// Extending FinancialData to include extra fields used in Visualization.tsx\ninterface FullFinancialData extends FinancialData {\n  total_inflow: number;\n  total_outflow: number;\n  net_cashflow: number;\n  suspect_transactions: number;\n  risk_score: number;\n  milestones: Array<{\n    id: string;\n    name: string;\n    date: string;\n    amount: number;\n    status: 'complete' | 'pending' | 'alert' | 'upcoming';\n    description?: string;\n    phase?: string;\n  }>;\n  income_breakdown?: {\n    income_sources: any;\n    mirror_transactions: any;\n    external_transfers: any;\n  };\n  expense_breakdown?: {\n    personal_expenses: any;\n    operational_expenses: any;\n    project_expenses: any;\n  };\n  fraud_indicators: Array<{\n    id: string;\n    type: string;\n    severity: 'high' | 'medium' | 'low';\n    description: string;\n    amount: number;\n    count: number;\n    trend: 'up' | 'down' | 'stable';\n  }>;\n}\n\nexport function Visualization() {\n  const { caseId } = useParams<{ caseId: string }>();\n  const [view, setView] = useState<ViewType>('cashflow');\n\n  // Fetch financial visualization data\n  const { data, isLoading, refetch } = useQuery<FullFinancialData>({\n    queryKey: ['visualization', caseId],\n    queryFn: () => api.get<FullFinancialData>(`/cases/${caseId}/financials`),\n    enabled: !!caseId\n  });\n\n  // Fetch graph data for network visualization\n  const { data: graphData, isLoading: graphLoading } = useQuery<GraphData>({\n    queryKey: ['graph', caseId],\n    queryFn: () => api.get<GraphData>(`/graph/${caseId}`),\n    enabled: !!caseId\n  });\n\n  const tabs: Array<{ id: ViewType; label: string; icon: typeof DollarSign }> = [\n    { id: 'cashflow', label: 'Cashflow Analysis', icon: DollarSign },\n    { id: 'milestones', label: 'Milestone Tracker', icon: Calendar },\n    { id: 'fraud', label: 'Fraud Detection', icon: AlertTriangle },\n    { id: 'graphs', label: 'Network & Flow', icon: Share2 }\n  ];\n\n  const handleExport = () => {\n    if (!data) return;\n\n    // Dynamically import exportUtils to avoid server-side dependency issues\n    import('../lib/exportUtils').then(({ generatePDFReport, exportToCSV }) => {\n      // 1. Export CSV\n      const cashflowHeaders = [\n        { key: 'date', header: 'Date' },\n        { key: 'inflow', header: 'Inflow' },\n        { key: 'outflow', header: 'Outflow' },\n        { key: 'balance', header: 'Balance' }\n      ];\n      exportToCSV(data.cashflow_data, `case_${caseId}_cashflow`, cashflowHeaders);\n\n      // 2. Generate PDF Report\n      const tableData = {\n        headers: ['Type', 'Severity', 'Amount', 'Count', 'Description'],\n        rows: data.fraud_indicators.map(i => [\n          i.type,\n          i.severity.toUpperCase(),\n          `$${i.amount.toLocaleString()}`,\n          i.count,\n          i.description\n        ])\n      };\n\n      const pdf = generatePDFReport([\n        { \n          type: 'heading',\n          content: 'Financial Analysis Report' \n        },\n        {\n          type: 'text',\n          content: `Case ID: ${caseId}\\nRisk Score: ${data.risk_score}/100\\nNet Cashflow: $${data.net_cashflow.toLocaleString()}`\n        },\n        {\n          type: 'table',\n          content: {\n            title: 'Fraud Indicators',\n            headers: tableData.headers,\n            rows: tableData.rows\n          }\n        },\n        {\n          type: 'heading',\n          content: 'Milestones'\n        },\n        {\n          type: 'table',\n          content: {\n            title: 'Key Events',\n            headers: ['Date', 'Event', 'Amount', 'Status'],\n            rows: data.milestones.map(m => [\n              m.date,\n              m.name,\n              `$${m.amount.toLocaleString()}`,\n              m.status\n            ])\n          }\n        }\n      ], {\n        title: 'Fraud Detection Financial Report',\n        subtitle: `Generated for Case ${caseId}`,\n        author: 'Simple378 Investigator'\n      });\n\n      pdf.save(`case_${caseId}_report.pdf`);\n    });\n  };\n\n  const handleShare = () => {\n    console.log('Sharing visualization...');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <RefreshCw className=\"h-12 w-12 animate-spin text-blue-500 mx-auto mb-4\" />\n          <p className=\"text-slate-600 dark:text-slate-400\">Loading visualization...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 p-8\">\n      <div className=\"container mx-auto max-w-7xl space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-slate-900 dark:text-slate-100\">\n              Financial Visualization\n            </h1>\n            <p className=\"text-slate-500 dark:text-slate-400 mt-2\">\n              Case {caseId} - Interactive financial analysis and fraud detection\n            </p>\n          </div>\n          <div className=\"flex gap-3\">\n            <Button variant=\"outline\" onClick={() => refetch()}>\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              Refresh\n            </Button>\n            <Button variant=\"outline\" onClick={handleShare}>\n              <Share2 className=\"h-4 w-4 mr-2\" />\n              Share\n            </Button>\n            <Button onClick={handleExport}>\n              <Download className=\"h-4 w-4 mr-2\" />\n              Export\n            </Button>\n          </div>\n        </div>\n\n        {/* KPI Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <Card className=\"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/10 border-green-200 dark:border-green-800\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-green-700 dark:text-green-300\">Total Inflow</CardTitle>\n              <TrendingUp className=\"h-4 w-4 text-green-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n                ${(data?.total_inflow || 0).toLocaleString()}\n              </div>\n              <p className=\"text-xs text-green-600/70 dark:text-green-400/70 mt-1\">All incoming transactions</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/10 border-red-200 dark:border-red-800\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-red-700 dark:text-red-300\">Total Outflow</CardTitle>\n              <TrendingUp className=\"h-4 w-4 text-red-500 rotate-180\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-red-600 dark:text-red-400\">\n                ${(data?.total_outflow || 0).toLocaleString()}\n              </div>\n              <p className=\"text-xs text-red-600/70 dark:text-red-400/70 mt-1\">All outgoing transactions</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/10 border-blue-200 dark:border-blue-800\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-blue-700 dark:text-blue-300\">Net Cashflow</CardTitle>\n              <DollarSign className=\"h-4 w-4 text-blue-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className={`text-2xl font-bold ${(data?.net_cashflow || 0) >= 0 ? 'text-blue-600 dark:text-blue-400' : 'text-red-600 dark:text-red-400'}`}>\n                ${Math.abs(data?.net_cashflow || 0).toLocaleString()}\n              </div>\n              <p className=\"text-xs text-blue-600/70 dark:text-blue-400/70 mt-1\">\n                {(data?.net_cashflow || 0) >= 0 ? 'Surplus' : 'Deficit'}\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/10 border-amber-200 dark:border-amber-800\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-amber-700 dark:text-amber-300\">Suspect Items</CardTitle>\n              <AlertTriangle className=\"h-4 w-4 text-amber-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-amber-600 dark:text-amber-400\">\n                {data?.suspect_transactions || 0}\n              </div>\n              <p className=\"text-xs text-amber-600/70 dark:text-amber-400/70 mt-1\">Flagged transactions</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"flex gap-2 border-b border-slate-200 dark:border-slate-800\">\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setView(tab.id)}\n                className={`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${\n                  view === tab.id\n                    ? 'border-blue-600 text-blue-600 dark:border-blue-400 dark:text-blue-400'\n                    : 'border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300'\n                }`}\n              >\n                <Icon className=\"h-4 w-4\" />\n                {tab.label}\n              </button>\n            );\n          })}\n        </div>\n\n        {/* Content Area */}\n        <motion.div\n          key={view}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.2 }}\n        >\n          {view === 'cashflow' && data && (\n            <VisualizationDashboard data={data} />\n          )}\n\n          {view === 'milestones' && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Calendar className=\"h-5 w-5 text-purple-500\" />\n                  Financial Milestones\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <MilestoneTracker \n                  milestones={data?.milestones}\n                  onMilestoneClick={(milestone) => {\n                    console.log('Clicked milestone:', milestone);\n                  }}\n                />\n              </CardContent>\n            </Card>\n          )}\n\n          {view === 'fraud' && (\n            <FraudDetectionPanel \n              indicators={data?.fraud_indicators}\n              riskScore={data?.risk_score}\n            />\n          )}\n\n          {view === 'graphs' && (\n            <VisualizationNetwork \n              graphData={graphData} \n              financialData={data} \n              isLoading={graphLoading} \n            />\n          )}\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/__tests__/CaseDetail.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fireEvent' is defined but never used.","line":2,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, beforeEach, vi } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport CaseDetail from '../pages/CaseDetail';\n\ndescribe('CaseDetail Page', () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: { retry: false },\n        mutations: { retry: false },\n      },\n    });\n  });\n\n  const renderWithProviders = (component: React.ReactElement) => {\n    return render(\n      <QueryClientProvider client={queryClient}>\n        {component}\n      </QueryClientProvider>\n    );\n  };\n\n  it('should render loading state initially', () => {\n    renderWithProviders(<CaseDetail caseId=\"123\" />);\n    expect(screen.getByRole('progressbar')).toBeInTheDocument();\n  });\n\n  it('should render case information when loaded', async () => {\n    vi.mock('../lib/api', () => ({\n      api: {\n        get: vi.fn().mockResolvedValue({\n          id: '123',\n          case_number: 'CASE-001',\n          title: 'Test Case',\n          description: 'Test Description',\n          status: 'open',\n          priority: 'high',\n        }),\n      },\n    }));\n\n    renderWithProviders(<CaseDetail caseId=\"123\" />);\n    \n    await waitFor(() => {\n      expect(screen.getByText('CASE-001')).toBeInTheDocument();\n      expect(screen.getByText('Test Case')).toBeInTheDocument();\n    });\n  });\n\n  it('should handle loading error gracefully', async () => {\n    vi.mock('../lib/api', () => ({\n      api: {\n        get: vi.fn().mockRejectedValue(new Error('Failed to load case')),\n      },\n    }));\n\n    renderWithProviders(<CaseDetail caseId=\"123\" />);\n    \n    await waitFor(() => {\n      expect(screen.getByText(/error/i)).toBeInTheDocument();\n    });\n  });\n\n  it('should enable edit mode when edit button clicked', async () => {\n    vi.mock('../lib/api', () => ({\n      api: {\n        get: vi.fn().mockResolvedValue({\n          id: '123',\n          title: 'Test Case',\n          status: 'open',\n        }),\n      },\n    }));\n\n    const user = userEvent.setup();\n    renderWithProviders(<CaseDetail caseId=\"123\" />);\n    \n    await waitFor(() => {\n      const editButton = screen.getByRole('button', { name: /edit/i });\n      expect(editButton).toBeInTheDocument();\n    });\n\n    const editButton = screen.getByRole('button', { name: /edit/i });\n    await user.click(editButton);\n\n    expect(screen.getByRole('textbox', { name: /title/i })).toBeInTheDocument();\n  });\n\n  it('should submit form when save clicked', async () => {\n    const mockUpdate = vi.fn().mockResolvedValue({ success: true });\n    \n    vi.mock('../lib/api', () => ({\n      api: {\n        get: vi.fn().mockResolvedValue({\n          id: '123',\n          title: 'Test Case',\n          status: 'open',\n        }),\n        put: mockUpdate,\n      },\n    }));\n\n    const user = userEvent.setup();\n    renderWithProviders(<CaseDetail caseId=\"123\" />);\n\n    await waitFor(() => {\n      const editButton = screen.getByRole('button', { name: /edit/i });\n      expect(editButton).toBeInTheDocument();\n    });\n\n    const editButton = screen.getByRole('button', { name: /edit/i });\n    await user.click(editButton);\n\n    const titleInput = screen.getByRole('textbox', { name: /title/i });\n    await user.clear(titleInput);\n    await user.type(titleInput, 'Updated Case');\n\n    const saveButton = screen.getByRole('button', { name: /save/i });\n    await user.click(saveButton);\n\n    await waitFor(() => {\n      expect(mockUpdate).toHaveBeenCalled();\n    });\n  });\n\n  it('should display all required tabs', async () => {\n    vi.mock('../lib/api', () => ({\n      api: {\n        get: vi.fn().mockResolvedValue({\n          id: '123',\n          title: 'Test Case',\n          status: 'open',\n        }),\n      },\n    }));\n\n    renderWithProviders(<CaseDetail caseId=\"123\" />);\n\n    await waitFor(() => {\n      expect(screen.getByRole('tab', { name: /details/i })).toBeInTheDocument();\n      expect(screen.getByRole('tab', { name: /events/i })).toBeInTheDocument();\n      expect(screen.getByRole('tab', { name: /evidence/i })).toBeInTheDocument();\n      expect(screen.getByRole('tab', { name: /audit/i })).toBeInTheDocument();\n    });\n  });\n\n  it('should switch tabs correctly', async () => {\n    vi.mock('../lib/api', () => ({\n      api: {\n        get: vi.fn().mockResolvedValue({\n          id: '123',\n          title: 'Test Case',\n          status: 'open',\n        }),\n      },\n    }));\n\n    const user = userEvent.setup();\n    renderWithProviders(<CaseDetail caseId=\"123\" />);\n\n    const eventsTab = await screen.findByRole('tab', { name: /events/i });\n    await user.click(eventsTab);\n\n    expect(eventsTab).toHaveAttribute('aria-selected', 'true');\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/errors/Forbidden.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/errors/NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/errors/Offline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/errors/ServerError.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/errors/Unauthorized.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/pages/errors/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/test/setup.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1571,1574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1571,1574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import '@testing-library/jest-dom';\nimport { vi } from 'vitest';\n\n// Mock window.matchMedia\nObject.defineProperty(window, 'matchMedia', {\n  writable: true,\n  value: vi.fn().mockImplementation(query => ({\n    matches: false,\n    media: query,\n    onchange: null,\n    addListener: vi.fn(), // deprecated\n    removeListener: vi.fn(), // deprecated\n    addEventListener: vi.fn(),\n    removeEventListener: vi.fn(),\n    dispatchEvent: vi.fn(),\n  })),\n});\n\n// Mock ResizeObserver\nglobal.ResizeObserver = vi.fn().mockImplementation(() => ({\n  observe: vi.fn(),\n  unobserve: vi.fn(),\n  disconnect: vi.fn(),\n}));\n\n// Mock IntersectionObserver\nglobal.IntersectionObserver = vi.fn().mockImplementation(() => ({\n  observe: vi.fn(),\n  unobserve: vi.fn(),\n  disconnect: vi.fn(),\n}));\n\n// Mock window.URL.createObjectURL\nObject.defineProperty(window.URL, 'createObjectURL', {\n  writable: true,\n  value: vi.fn(() => 'mock-object-url'),\n});\n\nObject.defineProperty(window.URL, 'revokeObjectURL', {\n  writable: true,\n  value: vi.fn(),\n});\n\n// Mock localStorage\nconst localStorageMock = {\n  getItem: vi.fn(),\n  setItem: vi.fn(),\n  removeItem: vi.fn(),\n  clear: vi.fn(),\n};\nObject.defineProperty(window, 'localStorage', {\n  value: localStorageMock,\n});\n\n// Mock sessionStorage\nconst sessionStorageMock = {\n  getItem: vi.fn(),\n  setItem: vi.fn(),\n  removeItem: vi.fn(),\n  clear: vi.fn(),\n};\nObject.defineProperty(window, 'sessionStorage', {\n  value: sessionStorageMock,\n});\n\n// Mock console methods to reduce noise in tests\nconst originalConsoleError = console.error;\nconsole.error = (...args: any[]) => {\n  // Filter out React Router warnings and other expected warnings\n  if (\n    typeof args[0] === 'string' &&\n    (args[0].includes('React Router') ||\n     args[0].includes('Warning:') ||\n     args[0].includes('The above error occurred'))\n  ) {\n    return;\n  }\n  originalConsoleError(...args);\n};","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/test/test-utils.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'screen' is defined but never used.","line":2,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":39},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Move your component(s) to a separate file.","line":7,"column":7,"nodeType":"Identifier","messageId":"localComponents","endLine":7,"endColumn":22},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"This rule can't verify that `export *` only exports components.","line":42,"column":1,"nodeType":"ExportAllDeclaration","messageId":"exportAll","endLine":42,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1386,1389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1386,1389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1418,1421],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1418,1421],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'mutateFn' is defined but never used.","line":55,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1530,1533],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1530,1533],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2399,2402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2399,2402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2494,2497],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2494,2497],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { ReactElement } from 'react';\nimport { render, RenderOptions, screen } from '@testing-library/react';\nimport { MemoryRouter } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\n// Create a custom render function that includes providers\nconst AllTheProviders = ({ children, initialEntries = ['/'] }: {\n  children: React.ReactNode;\n  initialEntries?: string[];\n}) => {\n  const queryClient = new QueryClient({\n    defaultOptions: {\n      queries: { retry: false },\n      mutations: { retry: false },\n    },\n  });\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <MemoryRouter initialEntries={initialEntries}>\n        {children}\n      </MemoryRouter>\n    </QueryClientProvider>\n  );\n};\n\nconst customRender = (\n  ui: ReactElement,\n  options?: Omit<RenderOptions, 'wrapper'> & {\n    initialEntries?: string[];\n  },\n) => {\n  const { initialEntries, ...renderOptions } = options || {};\n  const Wrapper = ({ children }: { children: React.ReactNode }) => (\n    <AllTheProviders initialEntries={initialEntries}>{children}</AllTheProviders>\n  );\n\n  return render(ui, { wrapper: Wrapper, ...renderOptions });\n};\n\n// Re-export everything\nexport * from '@testing-library/react';\n\n// Override render method\nexport { customRender as render };\n\n// Helper to create mock implementations\nexport const createMockQuery = (data: any, isLoading = false, error?: any) => ({\n  data,\n  isLoading,\n  error,\n  refetch: vi.fn(),\n});\n\nexport const createMockMutation = (mutateFn?: any) => ({\n  mutate: vi.fn(),\n  mutateAsync: vi.fn(),\n  isLoading: false,\n  error: null,\n  data: null,\n  reset: vi.fn(),\n});\n\n// Common test utilities\nexport const createMockUser = (overrides = {}) => ({\n  id: '1',\n  email: 'test@example.com',\n  name: 'Test User',\n  role: 'analyst',\n  ...overrides,\n});\n\nexport const createMockCase = (overrides = {}) => ({\n  id: '1',\n  title: 'Test Fraud Case',\n  status: 'open',\n  risk_score: 85,\n  created_at: '2024-01-01T00:00:00Z',\n  updated_at: '2024-01-02T00:00:00Z',\n  description: 'Test case description',\n  ...overrides,\n});\n\nexport const createMockAlert = (overrides = {}) => ({\n  id: '1',\n  title: 'High Risk Transaction',\n  message: 'Suspicious transaction detected',\n  risk_score: 95,\n  status: 'pending',\n  created_at: '2024-01-01T00:00:00Z',\n  ...overrides,\n});\n\n// Mock utilities\nexport const mockApiResponse = (data: any) => ({\n  data,\n  status: 200,\n  statusText: 'OK',\n});\n\nexport const mockApiError = (error: any) => {\n  throw error;\n};\n\n// Common test data\nexport const mockUser = {\n  id: '1',\n  email: 'test@example.com',\n  name: 'Test User',\n  role: 'analyst',\n};\n\nexport const mockCase = {\n  id: '1',\n  title: 'Test Fraud Case',\n  status: 'open',\n  risk_score: 85,\n  created_at: '2024-01-01T00:00:00Z',\n  updated_at: '2024-01-02T00:00:00Z',\n  description: 'Test case description',\n};\n\nexport const mockAlert = {\n  id: '1',\n  title: 'High Risk Transaction',\n  message: 'Suspicious transaction detected',\n  risk_score: 95,\n  status: 'pending',\n  created_at: '2024-01-01T00:00:00Z',\n};","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/types/react-force-graph.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[122,125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[122,125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[140,143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[140,143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[290,293],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[290,293],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[340,343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[340,343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[416,419],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[416,419],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[452,455],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[452,455],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"declare module 'react-force-graph-2d' {\n  import { Component } from 'react';\n  \n  export interface GraphData {\n    nodes: any[];\n    links: any[];\n  }\n\n  export interface ForceGraphProps {\n    graphData?: GraphData;\n    width?: number;\n    height?: number;\n    nodeLabel?: string | ((node: any) => string);\n    nodeColor?: string | ((node: any) => string);\n    nodeRelSize?: number;\n    linkColor?: string | ((link: any) => string);\n    [key: string]: any;\n  }\n\n  export default class ForceGraph2D extends Component<ForceGraphProps> {}\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/src/vite-env.d.ts","messages":[{"ruleId":"no-var","severity":2,"message":"Unexpected var, use let or const instead.","line":25,"column":1,"nodeType":"VariableDeclaration","messageId":"unexpectedVar","endLine":28,"endColumn":3}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/// <reference types=\"vite/client\" />\n\ninterface SpeechRecognitionEvent extends Event {\n  results: SpeechRecognitionResultList;\n  resultIndex: number;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n  error: string;\n  message: string;\n}\n\ninterface SpeechRecognition extends EventTarget {\n  continuous: boolean;\n  interimResults: boolean;\n  lang: string;\n  start(): void;\n  stop(): void;\n  abort(): void;\n  onresult: ((event: SpeechRecognitionEvent) => void) | null;\n  onerror: ((event: SpeechRecognitionErrorEvent) => void) | null;\n  onend: ((event: Event) => void) | null;\n}\n\ndeclare var SpeechRecognition: {\n  prototype: SpeechRecognition;\n  new(): SpeechRecognition;\n};\n\ndeclare let webkitSpeechRecognition: {\n  prototype: SpeechRecognition;\n  new(): SpeechRecognition;\n};\n\ninterface Window {\n  SpeechRecognition: typeof SpeechRecognition;\n  webkitSpeechRecognition: typeof webkitSpeechRecognition;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/tests/adjudication-workflow.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/tests/analytics.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/tests/e2e/case-management.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'API_URL' is assigned a value but never used.","line":4,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":7,"column":62,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":69}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\n\nconst BASE_URL = process.env.BASE_URL || 'http://localhost:5173';\nconst API_URL = process.env.API_URL || 'http://localhost:8000';\n\ntest.describe('Case Management E2E', () => {\n  test('should complete full case lifecycle', async ({ page, context }) => {\n    // 1. Login\n    await page.goto(`${BASE_URL}/login`);\n    await page.fill('input[name=\"email\"]', 'test@example.com');\n    await page.fill('input[name=\"password\"]', 'testpass123');\n    await page.click('button[type=\"submit\"]');\n\n    // Wait for redirect to dashboard\n    await page.waitForURL(`${BASE_URL}/dashboard`);\n    expect(page.url()).toContain('/dashboard');\n\n    // 2. Navigate to cases\n    await page.click('a:has-text(\"Cases\")');\n    await page.waitForURL(`${BASE_URL}/cases`);\n\n    // 3. Create new case\n    await page.click('button:has-text(\"New Case\")');\n    await page.waitForURL(`${BASE_URL}/cases/new`);\n\n    await page.fill('input[placeholder=\"Case Number\"]', 'CASE-E2E-001');\n    await page.fill('input[placeholder=\"Title\"]', 'E2E Test Case');\n    await page.fill('textarea[placeholder=\"Description\"]', 'Created via E2E test');\n\n    // Select priority\n    await page.click('select[name=\"priority\"]');\n    await page.click('option:has-text(\"High\")');\n\n    // Submit form\n    await page.click('button:has-text(\"Create Case\")');\n\n    // Wait for case to be created and redirect\n    await page.waitForURL(/\\/cases\\/[a-f0-9-]+/);\n    const caseUrl = page.url();\n    expect(caseUrl).toMatch(/\\/cases\\/[a-f0-9-]+/);\n\n    // 4. Verify case details\n    expect(await page.textContent('h1')).toContain('CASE-E2E-001');\n    expect(await page.textContent('body')).toContain('E2E Test Case');\n\n    // 5. Edit case\n    await page.click('button:has-text(\"Edit\")');\n    await page.fill('input[value=\"E2E Test Case\"]', 'E2E Test Case - Updated');\n\n    // Update status\n    await page.click('select[name=\"status\"]');\n    await page.click('option:has-text(\"In Progress\")');\n\n    await page.click('button:has-text(\"Save\")');\n\n    // Wait for update confirmation\n    await expect(page.locator('text=Case updated successfully')).toBeVisible();\n\n    // 6. Return to cases list\n    await page.click('a:has-text(\"Cases\")');\n    await page.waitForURL(`${BASE_URL}/cases`);\n\n    // 7. Verify case appears in list\n    await expect(page.locator('text=CASE-E2E-001')).toBeVisible();\n  });\n\n  test('should filter and search cases', async ({ page }) => {\n    // Login\n    await page.goto(`${BASE_URL}/login`);\n    await page.fill('input[name=\"email\"]', 'test@example.com');\n    await page.fill('input[name=\"password\"]', 'testpass123');\n    await page.click('button[type=\"submit\"]');\n\n    // Navigate to cases\n    await page.waitForURL(`${BASE_URL}/dashboard`);\n    await page.click('a:has-text(\"Cases\")');\n    await page.waitForURL(`${BASE_URL}/cases`);\n\n    // Search for case\n    await page.fill('input[placeholder=\"Search cases...\"]', 'CASE-E2E-001');\n    await page.waitForTimeout(500); // Wait for search results\n\n    // Verify search results\n    expect(await page.textContent('.case-list')).toContain('CASE-E2E-001');\n\n    // Filter by status\n    await page.click('select[name=\"status\"]');\n    await page.click('option:has-text(\"In Progress\")');\n    await page.waitForTimeout(500);\n\n    // Verify filtered results\n    const cases = await page.locator('.case-item').count();\n    expect(cases).toBeGreaterThan(0);\n  });\n\n  test('should handle offline mode', async ({ page, context }) => {\n    // Login\n    await page.goto(`${BASE_URL}/login`);\n    await page.fill('input[name=\"email\"]', 'test@example.com');\n    await page.fill('input[name=\"password\"]', 'testpass123');\n    await page.click('button[type=\"submit\"]');\n\n    // Wait for dashboard\n    await page.waitForURL(`${BASE_URL}/dashboard`);\n\n    // Go to cases page (to cache data)\n    await page.click('a:has-text(\"Cases\")');\n    await page.waitForURL(`${BASE_URL}/cases`);\n\n    // Enable offline mode\n    await context.setOffline(true);\n\n    // Wait a moment for offline detection\n    await page.waitForTimeout(1000);\n\n    // Verify offline indicator visible\n    expect(await page.textContent('body')).toContain('Offline');\n\n    // Try to create a case (should queue)\n    await page.click('button:has-text(\"New Case\")');\n    await page.waitForURL(`${BASE_URL}/cases/new`);\n\n    await page.fill('input[placeholder=\"Case Number\"]', 'CASE-OFFLINE-001');\n    await page.fill('input[placeholder=\"Title\"]', 'Offline Case');\n\n    await page.click('button:has-text(\"Create Case\")');\n\n    // Verify offline message\n    expect(await page.textContent('body')).toContain('saved offline');\n\n    // Go back online\n    await context.setOffline(false);\n\n    // Wait for sync indicator or confirmation\n    await page.waitForTimeout(2000);\n\n    // Verify sync completed or queued\n    const statusText = await page.textContent('body');\n    expect(statusText).toMatch(/synced|queued/i);\n  });\n\n  test('should display real-time metrics on dashboard', async ({ page }) => {\n    // Login\n    await page.goto(`${BASE_URL}/login`);\n    await page.fill('input[name=\"email\"]', 'test@example.com');\n    await page.fill('input[name=\"password\"]', 'testpass123');\n    await page.click('button[type=\"submit\"]');\n\n    // Wait for dashboard\n    await page.waitForURL(`${BASE_URL}/dashboard`);\n\n    // Verify KPI cards are visible\n    await expect(page.locator('.kpi-card')).first().toBeVisible();\n\n    // Verify metrics are populated\n    const kpiText = await page.textContent('.kpi-card');\n    expect(kpiText).toMatch(/\\d+/); // Should contain numbers\n\n    // Verify charts are rendered\n    await expect(page.locator('canvas[role=\"img\"]')).toBeVisible();\n  });\n\n  test('should handle pagination correctly', async ({ page }) => {\n    // Login\n    await page.goto(`${BASE_URL}/login`);\n    await page.fill('input[name=\"email\"]', 'test@example.com');\n    await page.fill('input[name=\"password\"]', 'testpass123');\n    await page.click('button[type=\"submit\"]');\n\n    // Navigate to cases\n    await page.waitForURL(`${BASE_URL}/dashboard`);\n    await page.click('a:has-text(\"Cases\")');\n    await page.waitForURL(`${BASE_URL}/cases`);\n\n    // Check for pagination controls\n    const pagination = page.locator('.pagination');\n    const isVisible = await pagination.isVisible().catch(() => false);\n\n    if (isVisible) {\n      // Click next page\n      await page.click('button:has-text(\"Next\")');\n      await page.waitForTimeout(500);\n\n      // Verify URL changed\n      expect(page.url()).toContain('page=2');\n\n      // Click previous page\n      await page.click('button:has-text(\"Previous\")');\n      await page.waitForTimeout(500);\n\n      expect(page.url()).toContain('page=1');\n    }\n  });\n\n  test('should handle error states gracefully', async ({ page }) => {\n    // Go to non-existent case\n    await page.goto(`${BASE_URL}/cases/invalid-id`);\n\n    // Verify error message\n    expect(await page.textContent('body')).toContain('not found');\n\n    // Verify navigation back works\n    await page.click('a:has-text(\"Back to Cases\")');\n    await page.waitForURL(`${BASE_URL}/cases`);\n  });\n\n  test('should support bulk operations', async ({ page }) => {\n    // Login\n    await page.goto(`${BASE_URL}/login`);\n    await page.fill('input[name=\"email\"]', 'test@example.com');\n    await page.fill('input[name=\"password\"]', 'testpass123');\n    await page.click('button[type=\"submit\"]');\n\n    // Navigate to cases\n    await page.waitForURL(`${BASE_URL}/dashboard`);\n    await page.click('a:has-text(\"Cases\")');\n    await page.waitForURL(`${BASE_URL}/cases`);\n\n    // Select multiple cases\n    await page.click('input[type=\"checkbox\"].select-all');\n\n    // Verify bulk action menu appeared\n    expect(await page.textContent('.bulk-actions')).toBeTruthy();\n\n    // Select bulk action\n    await page.click('button:has-text(\"Change Status\")');\n\n    // Select new status\n    await page.click('option:has-text(\"Closed\")');\n\n    // Confirm action\n    await page.click('button:has-text(\"Apply\")');\n\n    // Wait for completion\n    await expect(page.locator('text=Applied to')).toBeVisible();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/tests/e2e/visualization.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/tests/file-upload.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":67,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":88,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fileInput' is assigned a value but never used.","line":107,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":107,"endColumn":20}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\nimport path from 'path';\n\ntest.describe('File Upload', () => {\n  test.beforeEach(async ({ page }) => {\n    // Navigate to login page\n    await page.goto('/login');\n\n    // Login with test credentials\n    await page.fill('input[type=\"email\"]', 'admin@example.com');\n    await page.fill('input[type=\"password\"]', 'password');\n    await page.click('button[type=\"submit\"]');\n\n    // Wait for navigation to dashboard\n    await page.waitForURL('/dashboard');\n  });\n\n  test('should display upload zone on ingestion page', async ({ page }) => {\n    // Navigate to ingestion page\n    await page.goto('/ingestion');\n\n    // Check page content\n    await expect(page.locator('text=Drag & drop files here')).toBeVisible();\n    await expect(page.locator('text=or click to browse from your computer')).toBeVisible();\n\n    // Check supported file types are displayed\n    await expect(page.locator('text=PDF')).toBeVisible();\n    await expect(page.locator('text=CSV')).toBeVisible();\n    await expect(page.locator('text=XLSX')).toBeVisible();\n  });\n\n  test('should show drag over state', async ({ page }) => {\n    // Navigate to ingestion page\n    await page.goto('/ingestion');\n\n    // Get the upload zone element\n    const uploadZone = page.locator('[data-testid=\"upload-zone\"], .cursor-pointer').first();\n\n    // Simulate drag over\n    await uploadZone.dispatchEvent('dragover', {\n      dataTransfer: {\n        types: ['Files'],\n        files: []\n      }\n    });\n\n    // Check for visual feedback (this may vary based on implementation)\n    await expect(page.locator('text=Drop files here')).toBeVisible();\n  });\n\n  test('should accept valid file types', async ({ page }) => {\n    // Navigate to ingestion page\n    await page.goto('/ingestion');\n\n    // Create a test CSV file\n    const testFile = path.join(__dirname, '../test-data/sample.csv');\n\n    // Try to upload file (this will work if the file exists)\n    const fileInput = page.locator('input[type=\"file\"]');\n\n    try {\n      await fileInput.setInputFiles(testFile);\n\n      // Check that upload processing starts\n      // This depends on the actual implementation\n      await expect(page.locator('text=Processing')).toBeVisible({ timeout: 5000 });\n    } catch (error) {\n      // File may not exist, that's okay for this test\n      console.log('Test file not available, skipping file upload test');\n    }\n  });\n\n  test('should reject invalid file types', async ({ page }) => {\n    // Navigate to ingestion page\n    await page.goto('/ingestion');\n\n    // Create a test file with invalid extension\n    const invalidFile = path.join(__dirname, '../test-data/invalid.exe');\n\n    const fileInput = page.locator('input[type=\"file\"]');\n\n    try {\n      await fileInput.setInputFiles(invalidFile);\n\n      // Should show error message\n      await expect(page.locator('text=Upload Failed')).toBeVisible();\n      await expect(page.locator('text=File type not supported')).toBeVisible();\n    } catch (error) {\n      // File may not exist, that's okay\n      console.log('Test file not available, skipping invalid file test');\n    }\n  });\n\n  test('should handle large files appropriately', async ({ page }) => {\n    // Navigate to ingestion page\n    await page.goto('/ingestion');\n\n    // Check that max file size is displayed\n    await expect(page.locator('text=Max file size: 50MB')).toBeVisible();\n  });\n\n  test('should show processing state during upload', async ({ page }) => {\n    // Navigate to ingestion page\n    await page.goto('/ingestion');\n\n    // Simulate file upload start\n    const fileInput = page.locator('input[type=\"file\"]');\n\n    // This test assumes some visual feedback during processing\n    // The exact implementation may vary\n    await expect(page.locator('text=Drag & drop files here')).toBeVisible();\n  });\n\n  test('should allow multiple file selection', async ({ page }) => {\n    // Navigate to ingestion page\n    await page.goto('/ingestion');\n\n    const fileInput = page.locator('input[type=\"file\"]');\n\n    // Check if multiple files are supported\n    const multiple = await fileInput.getAttribute('multiple');\n    // This depends on the implementation - may or may not support multiple\n    console.log('Multiple file support:', multiple);\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/tests/reconciliation.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/tests/visualization.smoke.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Desktop/Simple378/frontend/vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
